"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/videos/extract-metadata";
exports.ids = ["pages/api/videos/extract-metadata"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "bcryptjs":
/*!***************************!*\
  !*** external "bcryptjs" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("bcryptjs");

/***/ }),

/***/ "next-auth":
/*!****************************!*\
  !*** external "next-auth" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("next-auth");

/***/ }),

/***/ "next-auth/next":
/*!*********************************!*\
  !*** external "next-auth/next" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("next-auth/next");

/***/ }),

/***/ "next-auth/providers/apple":
/*!********************************************!*\
  !*** external "next-auth/providers/apple" ***!
  \********************************************/
/***/ ((module) => {

module.exports = require("next-auth/providers/apple");

/***/ }),

/***/ "next-auth/providers/credentials":
/*!**************************************************!*\
  !*** external "next-auth/providers/credentials" ***!
  \**************************************************/
/***/ ((module) => {

module.exports = require("next-auth/providers/credentials");

/***/ }),

/***/ "next-auth/providers/facebook":
/*!***********************************************!*\
  !*** external "next-auth/providers/facebook" ***!
  \***********************************************/
/***/ ((module) => {

module.exports = require("next-auth/providers/facebook");

/***/ }),

/***/ "next-auth/providers/google":
/*!*********************************************!*\
  !*** external "next-auth/providers/google" ***!
  \*********************************************/
/***/ ((module) => {

module.exports = require("next-auth/providers/google");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fvideos%2Fextract-metadata&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fvideos%2Fextract-metadata.ts&middlewareConfigBase64=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fvideos%2Fextract-metadata&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fvideos%2Fextract-metadata.ts&middlewareConfigBase64=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_videos_extract_metadata_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/videos/extract-metadata.ts */ \"(api)/./pages/api/videos/extract-metadata.ts\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_videos_extract_metadata_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_videos_extract_metadata_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/videos/extract-metadata\",\n        pathname: \"/api/videos/extract-metadata\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_videos_extract_metadata_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnZpZGVvcyUyRmV4dHJhY3QtbWV0YWRhdGEmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyUyRmFwaSUyRnZpZGVvcyUyRmV4dHJhY3QtbWV0YWRhdGEudHMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDbUU7QUFDbkU7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLGtFQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyxrRUFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yYXRlbXktbmV4dGpzLz9hMWJhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9wYWdlcy9hcGkvdmlkZW9zL2V4dHJhY3QtbWV0YWRhdGEudHNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS92aWRlb3MvZXh0cmFjdC1tZXRhZGF0YVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3ZpZGVvcy9leHRyYWN0LW1ldGFkYXRhXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogXCJcIixcbiAgICAgICAgZmlsZW5hbWU6IFwiXCJcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fvideos%2Fextract-metadata&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fvideos%2Fextract-metadata.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./pages/api/auth/[...nextauth].ts":
/*!*****************************************!*\
  !*** ./pages/api/auth/[...nextauth].ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth */ \"next-auth\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _src_lib_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../src/lib/auth */ \"(api)/./src/lib/auth.ts\");\n\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (next_auth__WEBPACK_IMPORTED_MODULE_0___default()(_src_lib_auth__WEBPACK_IMPORTED_MODULE_1__.authOptions));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvYXV0aC9bLi4ubmV4dGF1dGhdLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBZ0M7QUFDbUI7QUFFbkQsaUVBQWVBLGdEQUFRQSxDQUFDQyxzREFBV0EsQ0FBQ0EsRUFBQSIsInNvdXJjZXMiOlsid2VicGFjazovL3JhdGVteS1uZXh0anMvLi9wYWdlcy9hcGkvYXV0aC9bLi4ubmV4dGF1dGhdLnRzPzJlOGIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IE5leHRBdXRoIGZyb20gJ25leHQtYXV0aCdcbmltcG9ydCB7IGF1dGhPcHRpb25zIH0gZnJvbSAnLi4vLi4vLi4vc3JjL2xpYi9hdXRoJ1xuXG5leHBvcnQgZGVmYXVsdCBOZXh0QXV0aChhdXRoT3B0aW9ucykiXSwibmFtZXMiOlsiTmV4dEF1dGgiLCJhdXRoT3B0aW9ucyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./pages/api/auth/[...nextauth].ts\n");

/***/ }),

/***/ "(api)/./pages/api/videos/extract-metadata.ts":
/*!**********************************************!*\
  !*** ./pages/api/videos/extract-metadata.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var next_auth_next__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth/next */ \"next-auth/next\");\n/* harmony import */ var next_auth_next__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_auth_next__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _auth_nextauth___WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../auth/[...nextauth] */ \"(api)/./pages/api/auth/[...nextauth].ts\");\n/* harmony import */ var _src_services_video_metadata_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/src/services/video-metadata.service */ \"(api)/./src/services/video-metadata.service.ts\");\n/* harmony import */ var _src_services_xhamster_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/src/services/xhamster.service */ \"(api)/./src/services/xhamster.service.ts\");\n/* harmony import */ var _src_services_redgifs_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/src/services/redgifs.service */ \"(api)/./src/services/redgifs.service.ts\");\n/* harmony import */ var _src_services_reddit_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/src/services/reddit.service */ \"(api)/./src/services/reddit.service.ts\");\n/* harmony import */ var _src_lib_logger__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/src/lib/logger */ \"(api)/./src/lib/logger.ts\");\n\n\n\n\n\n\n\nasync function handler(req, res) {\n    if (req.method !== \"POST\") {\n        return res.status(405).json({\n            error: \"Method not allowed\"\n        });\n    }\n    try {\n        const session = await (0,next_auth_next__WEBPACK_IMPORTED_MODULE_0__.getServerSession)(req, res, _auth_nextauth___WEBPACK_IMPORTED_MODULE_1__.authOptions);\n        if (!session) {\n            return res.status(401).json({\n                error: \"Unauthorized\"\n            });\n        }\n        const { originalUrl } = req.body;\n        if (!originalUrl) {\n            return res.status(400).json({\n                error: \"originalUrl is required\"\n            });\n        }\n        _src_lib_logger__WEBPACK_IMPORTED_MODULE_6__.logger.info(\"Extracting metadata for URL\", {\n            url: originalUrl\n        });\n        let extractedMetadata, previewUrl, embedUrl;\n        // Extract metadata based on URL type\n        if (_src_services_xhamster_service__WEBPACK_IMPORTED_MODULE_3__.xHamsterService.isXHamsterUrl(originalUrl)) {\n            try {\n                const xHamsterData = await _src_services_xhamster_service__WEBPACK_IMPORTED_MODULE_3__.xHamsterService.processXHamsterUrl(originalUrl);\n                extractedMetadata = {\n                    title: xHamsterData.title || \"\",\n                    description: xHamsterData.description || \"\",\n                    tags: xHamsterData.tags || [],\n                    thumbnail: xHamsterData.thumbnail\n                };\n                previewUrl = xHamsterData.previewUrl || null;\n            } catch (error) {\n                _src_lib_logger__WEBPACK_IMPORTED_MODULE_6__.logger.error(\"Failed to process XHamster URL, falling back to standard processing\", {\n                    error\n                });\n                extractedMetadata = await _src_services_video_metadata_service__WEBPACK_IMPORTED_MODULE_2__.videoMetadataService.extractMetadata(originalUrl);\n            }\n        } else if (_src_services_redgifs_service__WEBPACK_IMPORTED_MODULE_4__.redGifsService.isRedGifsUrl(originalUrl)) {\n            try {\n                const redGifsData = await _src_services_redgifs_service__WEBPACK_IMPORTED_MODULE_4__.redGifsService.processRedGifsUrl(originalUrl);\n                extractedMetadata = {\n                    title: redGifsData.metadata.title,\n                    description: redGifsData.metadata.description || \"\",\n                    tags: redGifsData.tags,\n                    thumbnail: redGifsData.thumbnail\n                };\n                embedUrl = redGifsData.embedUrl;\n            } catch (error) {\n                _src_lib_logger__WEBPACK_IMPORTED_MODULE_6__.logger.error(\"Failed to process RedGifs URL, falling back to standard processing\", {\n                    error\n                });\n                extractedMetadata = await _src_services_video_metadata_service__WEBPACK_IMPORTED_MODULE_2__.videoMetadataService.extractMetadata(originalUrl);\n            }\n        } else if (_src_services_reddit_service__WEBPACK_IMPORTED_MODULE_5__.redditService.isRedditUrl(originalUrl)) {\n            try {\n                const redditData = await _src_services_reddit_service__WEBPACK_IMPORTED_MODULE_5__.redditService.processRedditUrl(originalUrl);\n                extractedMetadata = {\n                    title: redditData.metadata.title,\n                    description: redditData.metadata.description || \"\",\n                    tags: redditData.tags,\n                    thumbnail: redditData.thumbnail\n                };\n                embedUrl = redditData.embedUrl;\n            } catch (error) {\n                _src_lib_logger__WEBPACK_IMPORTED_MODULE_6__.logger.error(\"Failed to process Reddit URL, falling back to standard processing\", {\n                    error\n                });\n                extractedMetadata = await _src_services_video_metadata_service__WEBPACK_IMPORTED_MODULE_2__.videoMetadataService.extractMetadata(originalUrl);\n            }\n        } else {\n            // Standard metadata extraction\n            extractedMetadata = await _src_services_video_metadata_service__WEBPACK_IMPORTED_MODULE_2__.videoMetadataService.extractMetadata(originalUrl);\n        }\n        // Generate embed URL if not already set\n        if (!embedUrl) {\n            embedUrl = convertToEmbedUrl(originalUrl);\n        }\n        // Generate default title if none found\n        let finalTitle = extractedMetadata.title;\n        if (!finalTitle) {\n            if (originalUrl.includes(\"redgifs.com\")) {\n                const match = originalUrl.match(/\\/watch\\/([a-zA-Z0-9]+)/);\n                const gifId = match ? match[1] : \"video\";\n                finalTitle = `RedGifs ${gifId}`;\n            } else {\n                finalTitle = \"Untitled Video\";\n            }\n        }\n        // Determine NSFW status\n        const isRedGifs = _src_services_redgifs_service__WEBPACK_IMPORTED_MODULE_4__.redGifsService.isRedGifsUrl(originalUrl);\n        const isReddit = _src_services_reddit_service__WEBPACK_IMPORTED_MODULE_5__.redditService.isRedditUrl(originalUrl);\n        const isXHamster = _src_services_xhamster_service__WEBPACK_IMPORTED_MODULE_3__.xHamsterService.isXHamsterUrl(originalUrl);\n        let isNSFW = false;\n        if (isRedGifs || isXHamster) {\n            isNSFW = true // RedGifs and XHamster are automatically NSFW\n            ;\n        } else if (isReddit && extractedMetadata.tags?.includes(\"nsfw\")) {\n            isNSFW = true // Reddit marked as NSFW\n            ;\n        }\n        const response = {\n            success: true,\n            metadata: {\n                title: finalTitle,\n                description: extractedMetadata.description || \"\",\n                tags: extractedMetadata.tags || [],\n                thumbnail: extractedMetadata.thumbnail || null,\n                previewUrl: previewUrl || null,\n                embedUrl,\n                isNsfw: isNSFW\n            }\n        };\n        _src_lib_logger__WEBPACK_IMPORTED_MODULE_6__.logger.info(\"Metadata extraction completed\", {\n            url: originalUrl,\n            tagsCount: response.metadata.tags.length,\n            hasTitle: !!response.metadata.title,\n            hasPreview: !!response.metadata.previewUrl\n        });\n        res.status(200).json(response);\n    } catch (error) {\n        _src_lib_logger__WEBPACK_IMPORTED_MODULE_6__.logger.error(\"Error extracting metadata\", {\n            error\n        });\n        res.status(500).json({\n            error: \"Failed to extract metadata\",\n            message: error instanceof Error ? error.message : \"Unknown error\"\n        });\n    }\n}\nfunction convertToEmbedUrl(originalUrl) {\n    // YouTube URLs\n    const youtubeRegex = /(?:https?:\\/\\/)?(?:www\\.)?(?:youtube\\.com\\/watch\\?v=|youtu\\.be\\/)([a-zA-Z0-9_-]{11})/;\n    const youtubeMatch = originalUrl.match(youtubeRegex);\n    if (youtubeMatch) {\n        return `https://www.youtube.com/embed/${youtubeMatch[1]}`;\n    }\n    // Vimeo URLs\n    const vimeoRegex = /(?:https?:\\/\\/)?(?:www\\.)?vimeo\\.com\\/(\\d+)/;\n    const vimeoMatch = originalUrl.match(vimeoRegex);\n    if (vimeoMatch) {\n        return `https://player.vimeo.com/video/${vimeoMatch[1]}`;\n    }\n    // RedGifs URLs\n    const redgifsRegex = /(?:https?:\\/\\/)?(?:www\\.)?redgifs\\.com\\/(?:watch\\/|ifr\\/)([a-zA-Z0-9]+)/i;\n    const redgifsMatch = originalUrl.match(redgifsRegex);\n    if (redgifsMatch) {\n        return `https://www.redgifs.com/ifr/${redgifsMatch[1]}`;\n    }\n    // TikTok URLs\n    const tiktokRegex = /(?:https?:\\/\\/)?(?:www\\.)?tiktok\\.com\\/@[\\w.-]+\\/video\\/(\\d+)/;\n    const tiktokMatch = originalUrl.match(tiktokRegex);\n    if (tiktokMatch) {\n        return `https://www.tiktok.com/embed/v2/${tiktokMatch[1]}`;\n    }\n    // Instagram URLs\n    const instagramRegex = /(?:https?:\\/\\/)?(?:www\\.)?instagram\\.com\\/(?:p|reel)\\/([a-zA-Z0-9_-]+)/;\n    const instagramMatch = originalUrl.match(instagramRegex);\n    if (instagramMatch) {\n        return `https://www.instagram.com/p/${instagramMatch[1]}/embed/`;\n    }\n    // Twitter/X URLs\n    const twitterRegex = /(?:https?:\\/\\/)?(?:www\\.)?(?:twitter\\.com|x\\.com)\\/\\w+\\/status\\/(\\d+)/;\n    const twitterMatch = originalUrl.match(twitterRegex);\n    if (twitterMatch) {\n        return `https://platform.twitter.com/embed/Tweet.html?id=${twitterMatch[1]}`;\n    }\n    // Dailymotion URLs\n    const dailymotionRegex = /(?:https?:\\/\\/)?(?:www\\.)?dailymotion\\.com\\/video\\/([a-zA-Z0-9]+)/;\n    const dailymotionMatch = originalUrl.match(dailymotionRegex);\n    if (dailymotionMatch) {\n        return `https://www.dailymotion.com/embed/video/${dailymotionMatch[1]}`;\n    }\n    // Direct video files\n    const videoExtensions = [\n        \".mp4\",\n        \".mov\",\n        \".avi\",\n        \".mkv\",\n        \".webm\",\n        \".flv\",\n        \".wmv\",\n        \".m4v\"\n    ];\n    const urlPath = new URL(originalUrl).pathname.toLowerCase();\n    if (videoExtensions.some((ext)=>urlPath.endsWith(ext))) {\n        return originalUrl;\n    }\n    return originalUrl;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvdmlkZW9zL2V4dHJhY3QtbWV0YWRhdGEudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQ2lEO0FBQ0U7QUFDeUI7QUFDWDtBQUNGO0FBQ0Y7QUFDcEI7QUFFMUIsZUFBZU8sUUFBUUMsR0FBbUIsRUFBRUMsR0FBb0I7SUFDN0UsSUFBSUQsSUFBSUUsTUFBTSxLQUFLLFFBQVE7UUFDekIsT0FBT0QsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUFFQyxPQUFPO1FBQXFCO0lBQzVEO0lBRUEsSUFBSTtRQUNGLE1BQU1DLFVBQVUsTUFBTWQsZ0VBQWdCQSxDQUFDUSxLQUFLQyxLQUFLUix3REFBV0E7UUFDNUQsSUFBSSxDQUFDYSxTQUFTO1lBQ1osT0FBT0wsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFBRUMsT0FBTztZQUFlO1FBQ3REO1FBRUEsTUFBTSxFQUFFRSxXQUFXLEVBQUUsR0FBR1AsSUFBSVEsSUFBSTtRQUNoQyxJQUFJLENBQUNELGFBQWE7WUFDaEIsT0FBT04sSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFBRUMsT0FBTztZQUEwQjtRQUNqRTtRQUVBUCxtREFBTUEsQ0FBQ1csSUFBSSxDQUFDLCtCQUErQjtZQUFFQyxLQUFLSDtRQUFZO1FBRTlELElBQUlJLG1CQUFtQkMsWUFBWUM7UUFFbkMscUNBQXFDO1FBQ3JDLElBQUlsQiwyRUFBZUEsQ0FBQ21CLGFBQWEsQ0FBQ1AsY0FBYztZQUM5QyxJQUFJO2dCQUNGLE1BQU1RLGVBQWUsTUFBTXBCLDJFQUFlQSxDQUFDcUIsa0JBQWtCLENBQUNUO2dCQUM5REksb0JBQW9CO29CQUNsQk0sT0FBT0YsYUFBYUUsS0FBSyxJQUFJO29CQUM3QkMsYUFBYUgsYUFBYUcsV0FBVyxJQUFJO29CQUN6Q0MsTUFBTUosYUFBYUksSUFBSSxJQUFJLEVBQUU7b0JBQzdCQyxXQUFXTCxhQUFhSyxTQUFTO2dCQUNuQztnQkFDQVIsYUFB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eHRyYWN0LW1ldGFkYXRhLnRzPzY4OGQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dEFwaVJlcXVlc3QsIE5leHRBcGlSZXNwb25zZSB9IGZyb20gJ25leHQnXG5pbXBvcnQgeyBnZXRTZXJ2ZXJTZXNzaW9uIH0gZnJvbSAnbmV4dC1hdXRoL25leHQnXG5pbXBvcnQgeyBhdXRoT3B0aW9ucyB9IGZyb20gJy4uL2F1dGgvWy4uLm5leHRhdXRoXSdcbmltcG9ydCB7IHZpZGVvTWV0YWRhdGFTZXJ2aWNlIH0gZnJvbSAnQC9zcmMvc2VydmljZXMvdmlkZW8tbWV0YWRhdGEuc2VydmljZSdcbmltcG9ydCB7IHhIYW1zdGVyU2VydmljZSB9IGZyb20gJ0Avc3JjL3NlcnZpY2VzL3hoYW1zdGVyLnNlcnZpY2UnXG5pbXBvcnQgeyByZWRHaWZzU2VydmljZSB9IGZyb20gJ0Avc3JjL3NlcnZpY2VzL3JlZGdpZnMuc2VydmljZSdcbmltcG9ydCB7IHJlZGRpdFNlcnZpY2UgfSBmcm9tICdAL3NyYy9zZXJ2aWNlcy9yZWRkaXQuc2VydmljZSdcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJ0Avc3JjL2xpYi9sb2dnZXInXG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UpIHtcbiAgaWYgKHJlcS5tZXRob2QgIT09ICdQT1NUJykge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwNSkuanNvbih7IGVycm9yOiAnTWV0aG9kIG5vdCBhbGxvd2VkJyB9KVxuICB9XG5cbiAgdHJ5IHtcbiAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0U2VydmVyU2Vzc2lvbihyZXEsIHJlcywgYXV0aE9wdGlvbnMpXG4gICAgaWYgKCFzZXNzaW9uKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBlcnJvcjogJ1VuYXV0aG9yaXplZCcgfSlcbiAgICB9XG5cbiAgICBjb25zdCB7IG9yaWdpbmFsVXJsIH0gPSByZXEuYm9keVxuICAgIGlmICghb3JpZ2luYWxVcmwpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnb3JpZ2luYWxVcmwgaXMgcmVxdWlyZWQnIH0pXG4gICAgfVxuXG4gICAgbG9nZ2VyLmluZm8oJ0V4dHJhY3RpbmcgbWV0YWRhdGEgZm9yIFVSTCcsIHsgdXJsOiBvcmlnaW5hbFVybCB9KVxuXG4gICAgbGV0IGV4dHJhY3RlZE1ldGFkYXRhLCBwcmV2aWV3VXJsLCBlbWJlZFVybFxuXG4gICAgLy8gRXh0cmFjdCBtZXRhZGF0YSBiYXNlZCBvbiBVUkwgdHlwZVxuICAgIGlmICh4SGFtc3RlclNlcnZpY2UuaXNYSGFtc3RlclVybChvcmlnaW5hbFVybCkpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHhIYW1zdGVyRGF0YSA9IGF3YWl0IHhIYW1zdGVyU2VydmljZS5wcm9jZXNzWEhhbXN0ZXJVcmwob3JpZ2luYWxVcmwpXG4gICAgICAgIGV4dHJhY3RlZE1ldGFkYXRhID0ge1xuICAgICAgICAgIHRpdGxlOiB4SGFtc3RlckRhdGEudGl0bGUgfHwgJycsXG4gICAgICAgICAgZGVzY3JpcHRpb246IHhIYW1zdGVyRGF0YS5kZXNjcmlwdGlvbiB8fCAnJyxcbiAgICAgICAgICB0YWdzOiB4SGFtc3RlckRhdGEudGFncyB8fCBbXSxcbiAgICAgICAgICB0aHVtYm5haWw6IHhIYW1zdGVyRGF0YS50aHVtYm5haWxcbiAgICAgICAgfVxuICAgICAgICBwcmV2aWV3VXJsID0geEhhbXN0ZXJEYXRhLnByZXZpZXdVcmwgfHwgbnVsbFxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKCdGYWlsZWQgdG8gcHJvY2VzcyBYSGFtc3RlciBVUkwsIGZhbGxpbmcgYmFjayB0byBzdGFuZGFyZCBwcm9jZXNzaW5nJywgeyBlcnJvciB9KVxuICAgICAgICBleHRyYWN0ZWRNZXRhZGF0YSA9IGF3YWl0IHZpZGVvTWV0YWRhdGFTZXJ2aWNlLmV4dHJhY3RNZXRhZGF0YShvcmlnaW5hbFVybClcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHJlZEdpZnNTZXJ2aWNlLmlzUmVkR2lmc1VybChvcmlnaW5hbFVybCkpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlZEdpZnNEYXRhID0gYXdhaXQgcmVkR2lmc1NlcnZpY2UucHJvY2Vzc1JlZEdpZnNVcmwob3JpZ2luYWxVcmwpXG4gICAgICAgIGV4dHJhY3RlZE1ldGFkYXRhID0ge1xuICAgICAgICAgIHRpdGxlOiByZWRHaWZzRGF0YS5tZXRhZGF0YS50aXRsZSxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogcmVkR2lmc0RhdGEubWV0YWRhdGEuZGVzY3JpcHRpb24gfHwgJycsXG4gICAgICAgICAgdGFnczogcmVkR2lmc0RhdGEudGFncyxcbiAgICAgICAgICB0aHVtYm5haWw6IHJlZEdpZnNEYXRhLnRodW1ibmFpbFxuICAgICAgICB9XG4gICAgICAgIGVtYmVkVXJsID0gcmVkR2lmc0RhdGEuZW1iZWRVcmxcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGxvZ2dlci5lcnJvcignRmFpbGVkIHRvIHByb2Nlc3MgUmVkR2lmcyBVUkwsIGZhbGxpbmcgYmFjayB0byBzdGFuZGFyZCBwcm9jZXNzaW5nJywgeyBlcnJvciB9KVxuICAgICAgICBleHRyYWN0ZWRNZXRhZGF0YSA9IGF3YWl0IHZpZGVvTWV0YWRhdGFTZXJ2aWNlLmV4dHJhY3RNZXRhZGF0YShvcmlnaW5hbFVybClcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHJlZGRpdFNlcnZpY2UuaXNSZWRkaXRVcmwob3JpZ2luYWxVcmwpKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByZWRkaXREYXRhID0gYXdhaXQgcmVkZGl0U2VydmljZS5wcm9jZXNzUmVkZGl0VXJsKG9yaWdpbmFsVXJsKVxuICAgICAgICBleHRyYWN0ZWRNZXRhZGF0YSA9IHtcbiAgICAgICAgICB0aXRsZTogcmVkZGl0RGF0YS5tZXRhZGF0YS50aXRsZSxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogcmVkZGl0RGF0YS5tZXRhZGF0YS5kZXNjcmlwdGlvbiB8fCAnJyxcbiAgICAgICAgICB0YWdzOiByZWRkaXREYXRhLnRhZ3MsXG4gICAgICAgICAgdGh1bWJuYWlsOiByZWRkaXREYXRhLnRodW1ibmFpbFxuICAgICAgICB9XG4gICAgICAgIGVtYmVkVXJsID0gcmVkZGl0RGF0YS5lbWJlZFVybFxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKCdGYWlsZWQgdG8gcHJvY2VzcyBSZWRkaXQgVVJMLCBmYWxsaW5nIGJhY2sgdG8gc3RhbmRhcmQgcHJvY2Vzc2luZycsIHsgZXJyb3IgfSlcbiAgICAgICAgZXh0cmFjdGVkTWV0YWRhdGEgPSBhd2FpdCB2aWRlb01ldGFkYXRhU2VydmljZS5leHRyYWN0TWV0YWRhdGEob3JpZ2luYWxVcmwpXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFN0YW5kYXJkIG1ldGFkYXRhIGV4dHJhY3Rpb25cbiAgICAgIGV4dHJhY3RlZE1ldGFkYXRhID0gYXdhaXQgdmlkZW9NZXRhZGF0YVNlcnZpY2UuZXh0cmFjdE1ldGFkYXRhKG9yaWdpbmFsVXJsKVxuICAgIH1cblxuICAgIC8vIEdlbmVyYXRlIGVtYmVkIFVSTCBpZiBub3QgYWxyZWFkeSBzZXRcbiAgICBpZiAoIWVtYmVkVXJsKSB7XG4gICAgICBlbWJlZFVybCA9IGNvbnZlcnRUb0VtYmVkVXJsKG9yaWdpbmFsVXJsKVxuICAgIH1cblxuICAgIC8vIEdlbmVyYXRlIGRlZmF1bHQgdGl0bGUgaWYgbm9uZSBmb3VuZFxuICAgIGxldCBmaW5hbFRpdGxlID0gZXh0cmFjdGVkTWV0YWRhdGEudGl0bGVcbiAgICBpZiAoIWZpbmFsVGl0bGUpIHtcbiAgICAgIGlmIChvcmlnaW5hbFVybC5pbmNsdWRlcygncmVkZ2lmcy5jb20nKSkge1xuICAgICAgICBjb25zdCBtYXRjaCA9IG9yaWdpbmFsVXJsLm1hdGNoKC9cXC93YXRjaFxcLyhbYS16QS1aMC05XSspLylcbiAgICAgICAgY29uc3QgZ2lmSWQgPSBtYXRjaCA/IG1hdGNoWzFdIDogJ3ZpZGVvJ1xuICAgICAgICBmaW5hbFRpdGxlID0gYFJlZEdpZnMgJHtnaWZJZH1gXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmaW5hbFRpdGxlID0gJ1VudGl0bGVkIFZpZGVvJ1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIERldGVybWluZSBOU0ZXIHN0YXR1c1xuICAgIGNvbnN0IGlzUmVkR2lmcyA9IHJlZEdpZnNTZXJ2aWNlLmlzUmVkR2lmc1VybChvcmlnaW5hbFVybClcbiAgICBjb25zdCBpc1JlZGRpdCA9IHJlZGRpdFNlcnZpY2UuaXNSZWRkaXRVcmwob3JpZ2luYWxVcmwpXG4gICAgY29uc3QgaXNYSGFtc3RlciA9IHhIYW1zdGVyU2VydmljZS5pc1hIYW1zdGVyVXJsKG9yaWdpbmFsVXJsKVxuICAgIFxuICAgIGxldCBpc05TRlcgPSBmYWxzZVxuICAgIGlmIChpc1JlZEdpZnMgfHwgaXNYSGFtc3Rlcikge1xuICAgICAgaXNOU0ZXID0gdHJ1ZSAvLyBSZWRHaWZzIGFuZCBYSGFtc3RlciBhcmUgYXV0b21hdGljYWxseSBOU0ZXXG4gICAgfSBlbHNlIGlmIChpc1JlZGRpdCAmJiBleHRyYWN0ZWRNZXRhZGF0YS50YWdzPy5pbmNsdWRlcygnbnNmdycpKSB7XG4gICAgICBpc05TRlcgPSB0cnVlIC8vIFJlZGRpdCBtYXJrZWQgYXMgTlNGV1xuICAgIH1cblxuICAgIGNvbnN0IHJlc3BvbnNlID0ge1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgIHRpdGxlOiBmaW5hbFRpdGxlLFxuICAgICAgICBkZXNjcmlwdGlvbjogZXh0cmFjdGVkTWV0YWRhdGEuZGVzY3JpcHRpb24gfHwgJycsXG4gICAgICAgIHRhZ3M6IGV4dHJhY3RlZE1ldGFkYXRhLnRhZ3MgfHwgW10sXG4gICAgICAgIHRodW1ibmFpbDogZXh0cmFjdGVkTWV0YWRhdGEudGh1bWJuYWlsIHx8IG51bGwsXG4gICAgICAgIHByZXZpZXdVcmw6IHByZXZpZXdVcmwgfHwgbnVsbCxcbiAgICAgICAgZW1iZWRVcmwsXG4gICAgICAgIGlzTnNmdzogaXNOU0ZXXG4gICAgICB9XG4gICAgfVxuXG4gICAgbG9nZ2VyLmluZm8oJ01ldGFkYXRhIGV4dHJhY3Rpb24gY29tcGxldGVkJywge1xuICAgICAgdXJsOiBvcmlnaW5hbFVybCxcbiAgICAgIHRhZ3NDb3VudDogcmVzcG9uc2UubWV0YWRhdGEudGFncy5sZW5ndGgsXG4gICAgICBoYXNUaXRsZTogISFyZXNwb25zZS5tZXRhZGF0YS50aXRsZSxcbiAgICAgIGhhc1ByZXZpZXc6ICEhcmVzcG9uc2UubWV0YWRhdGEucHJldmlld1VybFxuICAgIH0pXG5cbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbihyZXNwb25zZSlcblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ2dlci5lcnJvcignRXJyb3IgZXh0cmFjdGluZyBtZXRhZGF0YScsIHsgZXJyb3IgfSlcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IFxuICAgICAgZXJyb3I6ICdGYWlsZWQgdG8gZXh0cmFjdCBtZXRhZGF0YScsXG4gICAgICBtZXNzYWdlOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ1xuICAgIH0pXG4gIH1cbn1cblxuZnVuY3Rpb24gY29udmVydFRvRW1iZWRVcmwob3JpZ2luYWxVcmw6IHN0cmluZyk6IHN0cmluZyB7XG4gIC8vIFlvdVR1YmUgVVJMc1xuICBjb25zdCB5b3V0dWJlUmVnZXggPSAvKD86aHR0cHM/OlxcL1xcLyk/KD86d3d3XFwuKT8oPzp5b3V0dWJlXFwuY29tXFwvd2F0Y2hcXD92PXx5b3V0dVxcLmJlXFwvKShbYS16QS1aMC05Xy1dezExfSkvXG4gIGNvbnN0IHlvdXR1YmVNYXRjaCA9IG9yaWdpbmFsVXJsLm1hdGNoKHlvdXR1YmVSZWdleClcbiAgaWYgKHlvdXR1YmVNYXRjaCkge1xuICAgIHJldHVybiBgaHR0cHM6Ly93d3cueW91dHViZS5jb20vZW1iZWQvJHt5b3V0dWJlTWF0Y2hbMV19YFxuICB9XG5cbiAgLy8gVmltZW8gVVJMc1xuICBjb25zdCB2aW1lb1JlZ2V4ID0gLyg/Omh0dHBzPzpcXC9cXC8pPyg/Ond3d1xcLik/dmltZW9cXC5jb21cXC8oXFxkKykvXG4gIGNvbnN0IHZpbWVvTWF0Y2ggPSBvcmlnaW5hbFVybC5tYXRjaCh2aW1lb1JlZ2V4KVxuICBpZiAodmltZW9NYXRjaCkge1xuICAgIHJldHVybiBgaHR0cHM6Ly9wbGF5ZXIudmltZW8uY29tL3ZpZGVvLyR7dmltZW9NYXRjaFsxXX1gXG4gIH1cblxuICAvLyBSZWRHaWZzIFVSTHNcbiAgY29uc3QgcmVkZ2lmc1JlZ2V4ID0gLyg/Omh0dHBzPzpcXC9cXC8pPyg/Ond3d1xcLik/cmVkZ2lmc1xcLmNvbVxcLyg/OndhdGNoXFwvfGlmclxcLykoW2EtekEtWjAtOV0rKS9pXG4gIGNvbnN0IHJlZGdpZnNNYXRjaCA9IG9yaWdpbmFsVXJsLm1hdGNoKHJlZGdpZnNSZWdleClcbiAgaWYgKHJlZGdpZnNNYXRjaCkge1xuICAgIHJldHVybiBgaHR0cHM6Ly93d3cucmVkZ2lmcy5jb20vaWZyLyR7cmVkZ2lmc01hdGNoWzFdfWBcbiAgfVxuXG4gIC8vIFRpa1RvayBVUkxzXG4gIGNvbnN0IHRpa3Rva1JlZ2V4ID0gLyg/Omh0dHBzPzpcXC9cXC8pPyg/Ond3d1xcLik/dGlrdG9rXFwuY29tXFwvQFtcXHcuLV0rXFwvdmlkZW9cXC8oXFxkKykvXG4gIGNvbnN0IHRpa3Rva01hdGNoID0gb3JpZ2luYWxVcmwubWF0Y2godGlrdG9rUmVnZXgpXG4gIGlmICh0aWt0b2tNYXRjaCkge1xuICAgIHJldHVybiBgaHR0cHM6Ly93d3cudGlrdG9rLmNvbS9lbWJlZC92Mi8ke3Rpa3Rva01hdGNoWzFdfWBcbiAgfVxuXG4gIC8vIEluc3RhZ3JhbSBVUkxzXG4gIGNvbnN0IGluc3RhZ3JhbVJlZ2V4ID0gLyg/Omh0dHBzPzpcXC9cXC8pPyg/Ond3d1xcLik/aW5zdGFncmFtXFwuY29tXFwvKD86cHxyZWVsKVxcLyhbYS16QS1aMC05Xy1dKykvXG4gIGNvbnN0IGluc3RhZ3JhbU1hdGNoID0gb3JpZ2luYWxVcmwubWF0Y2goaW5zdGFncmFtUmVnZXgpXG4gIGlmIChpbnN0YWdyYW1NYXRjaCkge1xuICAgIHJldHVybiBgaHR0cHM6Ly93d3cuaW5zdGFncmFtLmNvbS9wLyR7aW5zdGFncmFtTWF0Y2hbMV19L2VtYmVkL2BcbiAgfVxuXG4gIC8vIFR3aXR0ZXIvWCBVUkxzXG4gIGNvbnN0IHR3aXR0ZXJSZWdleCA9IC8oPzpodHRwcz86XFwvXFwvKT8oPzp3d3dcXC4pPyg/OnR3aXR0ZXJcXC5jb218eFxcLmNvbSlcXC9cXHcrXFwvc3RhdHVzXFwvKFxcZCspL1xuICBjb25zdCB0d2l0dGVyTWF0Y2ggPSBvcmlnaW5hbFVybC5tYXRjaCh0d2l0dGVyUmVnZXgpXG4gIGlmICh0d2l0dGVyTWF0Y2gpIHtcbiAgICByZXR1cm4gYGh0dHBzOi8vcGxhdGZvcm0udHdpdHRlci5jb20vZW1iZWQvVHdlZXQuaHRtbD9pZD0ke3R3aXR0ZXJNYXRjaFsxXX1gXG4gIH1cblxuICAvLyBEYWlseW1vdGlvbiBVUkxzXG4gIGNvbnN0IGRhaWx5bW90aW9uUmVnZXggPSAvKD86aHR0cHM/OlxcL1xcLyk/KD86d3d3XFwuKT9kYWlseW1vdGlvblxcLmNvbVxcL3ZpZGVvXFwvKFthLXpBLVowLTldKykvXG4gIGNvbnN0IGRhaWx5bW90aW9uTWF0Y2ggPSBvcmlnaW5hbFVybC5tYXRjaChkYWlseW1vdGlvblJlZ2V4KVxuICBpZiAoZGFpbHltb3Rpb25NYXRjaCkge1xuICAgIHJldHVybiBgaHR0cHM6Ly93d3cuZGFpbHltb3Rpb24uY29tL2VtYmVkL3ZpZGVvLyR7ZGFpbHltb3Rpb25NYXRjaFsxXX1gXG4gIH1cblxuICAvLyBEaXJlY3QgdmlkZW8gZmlsZXNcbiAgY29uc3QgdmlkZW9FeHRlbnNpb25zID0gWycubXA0JywgJy5tb3YnLCAnLmF2aScsICcubWt2JywgJy53ZWJtJywgJy5mbHYnLCAnLndtdicsICcubTR2J11cbiAgY29uc3QgdXJsUGF0aCA9IG5ldyBVUkwob3JpZ2luYWxVcmwpLnBhdGhuYW1lLnRvTG93ZXJDYXNlKClcbiAgaWYgKHZpZGVvRXh0ZW5zaW9ucy5zb21lKGV4dCA9PiB1cmxQYXRoLmVuZHNXaXRoKGV4dCkpKSB7XG4gICAgcmV0dXJuIG9yaWdpbmFsVXJsXG4gIH1cblxuICByZXR1cm4gb3JpZ2luYWxVcmxcbn0iXSwibmFtZXMiOlsiZ2V0U2VydmVyU2Vzc2lvbiIsImF1dGhPcHRpb25zIiwidmlkZW9NZXRhZGF0YVNlcnZpY2UiLCJ4SGFtc3RlclNlcnZpY2UiLCJyZWRHaWZzU2VydmljZSIsInJlZGRpdFNlcnZpY2UiLCJsb2dnZXIiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwibWV0aG9kIiwic3RhdHVzIiwianNvbiIsImVycm9yIiwic2Vzc2lvbiIsIm9yaWdpbmFsVXJsIiwiYm9keSIsImluZm8iLCJ1cmwiLCJleHRyYWN0ZWRNZXRhZGF0YSIsInByZXZpZXdVcmwiLCJlbWJlZFVybCIsImlzWEhhbXN0ZXJVcmwiLCJ4SGFtc3RlckRhdGEiLCJwcm9jZXNzWEhhbXN0ZXJVcmwiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwidGFncyIsInRodW1ibmFpbCIsImV4dHJhY3RNZXRhZGF0YSIsImlzUmVkR2lmc1VybCIsInJlZEdpZnNEYXRhIiwicHJvY2Vzc1JlZEdpZnNVcmwiLCJtZXRhZGF0YSIsImlzUmVkZGl0VXJsIiwicmVkZGl0RGF0YSIsInByb2Nlc3NSZWRkaXRVcmwiLCJjb252ZXJ0VG9FbWJlZFVybCIsImZpbmFsVGl0bGUiLCJpbmNsdWRlcyIsIm1hdGNoIiwiZ2lmSWQiLCJpc1JlZEdpZnMiLCJpc1JlZGRpdCIsImlzWEhhbXN0ZXIiLCJpc05TRlciLCJyZXNwb25zZSIsInN1Y2Nlc3MiLCJpc05zZnciLCJ0YWdzQ291bnQiLCJsZW5ndGgiLCJoYXNUaXRsZSIsImhhc1ByZXZpZXciLCJtZXNzYWdlIiwiRXJyb3IiLCJ5b3V0dWJlUmVnZXgiLCJ5b3V0dWJlTWF0Y2giLCJ2aW1lb1JlZ2V4IiwidmltZW9NYXRjaCIsInJlZGdpZnNSZWdleCIsInJlZGdpZnNNYXRjaCIsInRpa3Rva1JlZ2V4IiwidGlrdG9rTWF0Y2giLCJpbnN0YWdyYW1SZWdleCIsImluc3RhZ3JhbU1hdGNoIiwidHdpdHRlclJlZ2V4IiwidHdpdHRlck1hdGNoIiwiZGFpbHltb3Rpb25SZWdleCIsImRhaWx5bW90aW9uTWF0Y2giLCJ2aWRlb0V4dGVuc2lvbnMiLCJ1cmxQYXRoIiwiVVJMIiwicGF0aG5hbWUiLCJ0b0xvd2VyQ2FzZSIsInNvbWUiLCJleHQiLCJlbmRzV2l0aCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./pages/api/videos/extract-metadata.ts\n");

/***/ }),

/***/ "(api)/./src/lib/auth.ts":
/*!*************************!*\
  !*** ./src/lib/auth.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authOptions: () => (/* binding */ authOptions)\n/* harmony export */ });\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth/providers/credentials */ \"next-auth/providers/credentials\");\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_auth_providers_google__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth/providers/google */ \"next-auth/providers/google\");\n/* harmony import */ var next_auth_providers_google__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_auth_providers_google__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_auth_providers_facebook__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next-auth/providers/facebook */ \"next-auth/providers/facebook\");\n/* harmony import */ var next_auth_providers_facebook__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_auth_providers_facebook__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_auth_providers_apple__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next-auth/providers/apple */ \"next-auth/providers/apple\");\n/* harmony import */ var next_auth_providers_apple__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_auth_providers_apple__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _db__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./db */ \"(api)/./src/lib/db.ts\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! bcryptjs */ \"bcryptjs\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(bcryptjs__WEBPACK_IMPORTED_MODULE_5__);\n\n\n\n\n\n\nconst authOptions = {\n    providers: [\n        next_auth_providers_google__WEBPACK_IMPORTED_MODULE_1___default()({\n            clientId: process.env.GOOGLE_CLIENT_ID || \"dummy\",\n            clientSecret: process.env.GOOGLE_CLIENT_SECRET || \"dummy\"\n        }),\n        next_auth_providers_facebook__WEBPACK_IMPORTED_MODULE_2___default()({\n            clientId: process.env.FACEBOOK_CLIENT_ID || \"dummy\",\n            clientSecret: process.env.FACEBOOK_CLIENT_SECRET || \"dummy\"\n        }),\n        next_auth_providers_apple__WEBPACK_IMPORTED_MODULE_3___default()({\n            clientId: process.env.APPLE_ID || \"dummy\",\n            clientSecret: process.env.APPLE_SECRET || \"dummy\"\n        }),\n        next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_0___default()({\n            name: \"credentials\",\n            credentials: {\n                email: {\n                    label: \"Email\",\n                    type: \"email\"\n                },\n                password: {\n                    label: \"Password\",\n                    type: \"password\"\n                }\n            },\n            async authorize (credentials) {\n                try {\n                    if (!credentials?.email || !credentials?.password) {\n                        return null;\n                    }\n                    const user = await _db__WEBPACK_IMPORTED_MODULE_4__.db.user.findUnique({\n                        where: {\n                            email: credentials.email\n                        }\n                    });\n                    if (!user || !user.password) {\n                        return null;\n                    }\n                    const isPasswordValid = await bcryptjs__WEBPACK_IMPORTED_MODULE_5___default().compare(credentials.password, user.password);\n                    if (!isPasswordValid) {\n                        return null;\n                    }\n                    return {\n                        id: user.id,\n                        email: user.email,\n                        name: user.firstName ? `${user.firstName} ${user.lastName || \"\"}`.trim() : user.username,\n                        username: user.username,\n                        firstName: user.firstName,\n                        lastName: user.lastName\n                    };\n                } catch (error) {\n                    console.error(\"Auth error:\", error);\n                    return null;\n                }\n            }\n        })\n    ],\n    session: {\n        strategy: \"jwt\",\n        maxAge: 30 * 24 * 60 * 60\n    },\n    pages: {\n        signIn: \"/auth/signin\"\n    },\n    callbacks: {\n        async jwt ({ token, user }) {\n            if (user) {\n                token.username = user.username;\n                token.firstName = user.firstName;\n                token.lastName = user.lastName;\n            }\n            return token;\n        },\n        async session ({ session, token }) {\n            if (token && session.user) {\n                session.user.id = token.sub;\n                session.user.username = token.username;\n                session.user.firstName = token.firstName;\n                session.user.lastName = token.lastName;\n            }\n            return session;\n        }\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFNYixTQUFTO2dCQUNoRE0sUUFBUVosSUFBSSxDQUFTTyxRQUFRLEdBQUdZLE1BQU1aLFFBQVE7WUFDbEQ7WUFDQSxPQUFPSztRQUNUO0lBQ0Y7QUFDRixFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcmF0ZW15LW5leHRqcy8uL3NyYy9saWIvYXV0aC50cz82NjkyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRBdXRoT3B0aW9ucyB9IGZyb20gJ25leHQtYXV0aCdcbmltcG9ydCBDcmVkZW50aWFsc1Byb3ZpZGVyIGZyb20gJ25leHQtYXV0aC9wcm92aWRlcnMvY3JlZGVudGlhbHMnXG5pbXBvcnQgR29vZ2xlUHJvdmlkZXIgZnJvbSAnbmV4dC1hdXRoL3Byb3ZpZGVycy9nb29nbGUnXG5pbXBvcnQgRmFjZWJvb2tQcm92aWRlciBmcm9tICduZXh0LWF1dGgvcHJvdmlkZXJzL2ZhY2Vib29rJ1xuaW1wb3J0IEFwcGxlUHJvdmlkZXIgZnJvbSAnbmV4dC1hdXRoL3Byb3ZpZGVycy9hcHBsZSdcbmltcG9ydCB7IGRiIH0gZnJvbSAnLi9kYidcbmltcG9ydCBiY3J5cHQgZnJvbSAnYmNyeXB0anMnXG5cbmV4cG9ydCBjb25zdCBhdXRoT3B0aW9uczogTmV4dEF1dGhPcHRpb25zID0ge1xuICBwcm92aWRlcnM6IFtcbiAgICBHb29nbGVQcm92aWRlcih7XG4gICAgICBjbGllbnRJZDogcHJvY2Vzcy5lbnYuR09PR0xFX0NMSUVOVF9JRCB8fCAnZHVtbXknLFxuICAgICAgY2xpZW50U2VjcmV0OiBwcm9jZXNzLmVudi5HT09HTEVfQ0xJRU5UX1NFQ1JFVCB8fCAnZHVtbXknLFxuICAgIH0pLFxuICAgIEZhY2Vib29rUHJvdmlkZXIoe1xuICAgICAgY2xpZW50SWQ6IHByb2Nlc3MuZW52LkZBQ0VCT09LX0NMSUVOVF9JRCB8fCAnZHVtbXknLFxuICAgICAgY2xpZW50U2VjcmV0OiBwcm9jZXNzLmVudi5GQUNFQk9PS19DTElFTlRfU0VDUkVUIHx8ICdkdW1teScsXG4gICAgfSksXG4gICAgQXBwbGVQcm92aWRlcih7XG4gICAgICBjbGllbnRJZDogcHJvY2Vzcy5lbnYuQVBQTEVfSUQgfHwgJ2R1bW15JyxcbiAgICAgIGNsaWVudFNlY3JldDogcHJvY2Vzcy5lbnYuQVBQTEVfU0VDUkVUIHx8ICdkdW1teScsXG4gICAgfSksXG4gICAgQ3JlZGVudGlhbHNQcm92aWRlcih7XG4gICAgICBuYW1lOiAnY3JlZGVudGlhbHMnLFxuICAgICAgY3JlZGVudGlhbHM6IHtcbiAgICAgICAgZW1haWw6IHsgbGFiZWw6ICdFbWFpbCcsIHR5cGU6ICdlbWFpbCcgfSxcbiAgICAgICAgcGFzc3dvcmQ6IHsgbGFiZWw6ICdQYXNzd29yZCcsIHR5cGU6ICdwYXNzd29yZCcgfVxuICAgICAgfSxcbiAgICAgIGFzeW5jIGF1dGhvcml6ZShjcmVkZW50aWFscykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGlmICghY3JlZGVudGlhbHM/LmVtYWlsIHx8ICFjcmVkZW50aWFscz8ucGFzc3dvcmQpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IGRiLnVzZXIuZmluZFVuaXF1ZSh7XG4gICAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgICBlbWFpbDogY3JlZGVudGlhbHMuZW1haWxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuXG4gICAgICAgICAgaWYgKCF1c2VyIHx8ICF1c2VyLnBhc3N3b3JkKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IGlzUGFzc3dvcmRWYWxpZCA9IGF3YWl0IGJjcnlwdC5jb21wYXJlKGNyZWRlbnRpYWxzLnBhc3N3b3JkLCB1c2VyLnBhc3N3b3JkKVxuICAgICAgICAgIGlmICghaXNQYXNzd29yZFZhbGlkKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpZDogdXNlci5pZCxcbiAgICAgICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxuICAgICAgICAgICAgbmFtZTogdXNlci5maXJzdE5hbWUgPyBgJHt1c2VyLmZpcnN0TmFtZX0gJHt1c2VyLmxhc3ROYW1lIHx8ICcnfWAudHJpbSgpIDogdXNlci51c2VybmFtZSxcbiAgICAgICAgICAgIHVzZXJuYW1lOiB1c2VyLnVzZXJuYW1lLFxuICAgICAgICAgICAgZmlyc3ROYW1lOiB1c2VyLmZpcnN0TmFtZSxcbiAgICAgICAgICAgIGxhc3ROYW1lOiB1c2VyLmxhc3ROYW1lLFxuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdBdXRoIGVycm9yOicsIGVycm9yKVxuICAgICAgICAgIHJldHVybiBudWxsXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICBdLFxuICBzZXNzaW9uOiB7XG4gICAgc3RyYXRlZ3k6ICdqd3QnLFxuICAgIG1heEFnZTogMzAgKiAyNCAqIDYwICogNjAsIC8vIDMwIGRheXNcbiAgfSxcbiAgcGFnZXM6IHtcbiAgICBzaWduSW46ICcvYXV0aC9zaWduaW4nXG4gIH0sXG4gIGNhbGxiYWNrczoge1xuICAgIGFzeW5jIGp3dCh7IHRva2VuLCB1c2VyIH0pIHtcbiAgICAgIGlmICh1c2VyKSB7XG4gICAgICAgIHRva2VuLnVzZXJuYW1lID0gKHVzZXIgYXMgYW55KS51c2VybmFtZVxuICAgICAgICB0b2tlbi5maXJzdE5hbWUgPSAodXNlciBhcyBhbnkpLmZpcnN0TmFtZVxuICAgICAgICB0b2tlbi5sYXN0TmFtZSA9ICh1c2VyIGFzIGFueSkubGFzdE5hbWVcbiAgICAgIH1cbiAgICAgIHJldHVybiB0b2tlblxuICAgIH0sXG4gICAgYXN5bmMgc2Vzc2lvbih7IHNlc3Npb24sIHRva2VuIH0pIHtcbiAgICAgIGlmICh0b2tlbiAmJiBzZXNzaW9uLnVzZXIpIHtcbiAgICAgICAgKHNlc3Npb24udXNlciBhcyBhbnkpLmlkID0gdG9rZW4uc3ViIVxuICAgICAgICA7KHNlc3Npb24udXNlciBhcyBhbnkpLnVzZXJuYW1lID0gdG9rZW4udXNlcm5hbWUgYXMgc3RyaW5nXG4gICAgICAgIDsoc2Vzc2lvbi51c2VyIGFzIGFueSkuZmlyc3ROYW1lID0gdG9rZW4uZmlyc3ROYW1lIGFzIHN0cmluZ1xuICAgICAgICA7KHNlc3Npb24udXNlciBhcyBhbnkpLmxhc3ROYW1lID0gdG9rZW4ubGFzdE5hbWUgYXMgc3RyaW5nXG4gICAgICB9XG4gICAgICByZXR1cm4gc2Vzc2lvblxuICAgIH1cbiAgfVxufSJdLCJuYW1lcyI6WyJDcmVkZW50aWFsc1Byb3ZpZGVyIiwiR29vZ2xlUHJvdmlkZXIiLCJGYWNlYm9va1Byb3ZpZGVyIiwiQXBwbGVQcm92aWRlciIsImRiIiwiYmNyeXB0IiwiYXV0aE9wdGlvbnMiLCJwcm92aWRlcnMiLCJjbGllbnRJZCIsInByb2Nlc3MiLCJlbnYiLCJHT09HTEVfQ0xJRU5UX0lEIiwiY2xpZW50U2VjcmV0IiwiR09PR0xFX0NMSUVOVF9TRUNSRVQiLCJGQUNFQk9PS19DTElFTlRfSUQiLCJGQUNFQk9PS19DTElFTlRfU0VDUkVUIiwiQVBQTEVfSUQiLCJBUFBMRV9TRUNSRVQiLCJuYW1lIiwiY3JlZGVudGlhbHMiLCJlbWFpbCIsImxhYmVsIiwidHlwZSIsInBhc3N3b3JkIiwiYXV0aG9yaXplIiwidXNlciIsImZpbmRVbmlxdWUiLCJ3aGVyZSIsImlzUGFzc3dvcmRWYWxpZCIsImNvbXBhcmUiLCJpZCIsImZpcnN0TmFtZSIsImxhc3ROYW1lIiwidHJpbSIsInVzZXJuYW1lIiwiZXJyb3IiLCJjb25zb2xlIiwic2Vzc2lvbiIsInN0cmF0ZWd5IiwibWF4QWdlIiwicGFnZXMiLCJzaWduSW4iLCJjYWxsYmFja3MiLCJqd3QiLCJ0b2tlbiIsInN1YiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/lib/auth.ts\n");

/***/ }),

/***/ "(api)/./src/lib/config.ts":
/*!***************************!*\
  !*** ./src/lib/config.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   getEnvVar: () => (/* binding */ getEnvVar),\n/* harmony export */   getEnvVarAsBoolean: () => (/* binding */ getEnvVarAsBoolean),\n/* harmony export */   getEnvVarAsNumber: () => (/* binding */ getEnvVarAsNumber),\n/* harmony export */   isDevelopment: () => (/* binding */ isDevelopment),\n/* harmony export */   isProduction: () => (/* binding */ isProduction),\n/* harmony export */   isTest: () => (/* binding */ isTest)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./constants */ \"(api)/./src/lib/constants.ts\");\n\nfunction getConfig() {\n    const env = \"development\" || 0;\n    const isDevelopment = env === _constants__WEBPACK_IMPORTED_MODULE_0__.NODE_ENV.DEVELOPMENT;\n    const isProduction = env === _constants__WEBPACK_IMPORTED_MODULE_0__.NODE_ENV.PRODUCTION;\n    // Validate required environment variables\n    const requiredVars = [\n        \"DATABASE_URL\",\n        \"NEXTAUTH_SECRET\",\n        \"NEXTAUTH_URL\"\n    ];\n    for (const varName of requiredVars){\n        if (!process.env[varName]) {\n            throw new Error(`Missing required environment variable: ${varName}`);\n        }\n    }\n    return {\n        app: {\n            name: process.env.APP_NAME || \"RateMe\",\n            version: process.env.APP_VERSION || \"1.0.0\",\n            env,\n            port: parseInt(process.env.PORT || \"3000\", 10),\n            url: process.env.NEXTAUTH_URL\n        },\n        database: {\n            url: process.env.DATABASE_URL\n        },\n        auth: {\n            secret: process.env.NEXTAUTH_SECRET,\n            url: process.env.NEXTAUTH_URL,\n            sessionMaxAge: parseInt(process.env.SESSION_MAX_AGE || \"2592000\", 10)\n        },\n        logging: {\n            level: process.env.LOG_LEVEL || (isDevelopment ? \"debug\" : \"info\"),\n            pretty: isDevelopment\n        },\n        redis: process.env.REDIS_URL ? {\n            url: process.env.REDIS_URL,\n            password: process.env.REDIS_PASSWORD\n        } : undefined,\n        external: {\n            youtube: process.env.YOUTUBE_API_KEY ? {\n                apiKey: process.env.YOUTUBE_API_KEY\n            } : undefined,\n            vimeo: process.env.VIMEO_CLIENT_ID && process.env.VIMEO_CLIENT_SECRET ? {\n                clientId: process.env.VIMEO_CLIENT_ID,\n                clientSecret: process.env.VIMEO_CLIENT_SECRET\n            } : undefined\n        }\n    };\n}\n// Export singleton config instance\nconst config = getConfig();\n// Type-safe environment variable access\nfunction getEnvVar(name, defaultValue) {\n    const value = process.env[name];\n    if (value === undefined) {\n        if (defaultValue !== undefined) {\n            return defaultValue;\n        }\n        throw new Error(`Environment variable ${name} is not set`);\n    }\n    return value;\n}\nfunction getEnvVarAsNumber(name, defaultValue) {\n    const value = process.env[name];\n    if (value === undefined) {\n        if (defaultValue !== undefined) {\n            return defaultValue;\n        }\n        throw new Error(`Environment variable ${name} is not set`);\n    }\n    const parsed = parseInt(value, 10);\n    if (isNaN(parsed)) {\n        throw new Error(`Environment variable ${name} is not a valid number: ${value}`);\n    }\n    return parsed;\n}\nfunction getEnvVarAsBoolean(name, defaultValue) {\n    const value = process.env[name];\n    if (value === undefined) {\n        if (defaultValue !== undefined) {\n            return defaultValue;\n        }\n        throw new Error(`Environment variable ${name} is not set`);\n    }\n    return value.toLowerCase() === \"true\";\n}\n// Environment checks\nconst isDevelopment = config.app.env === _constants__WEBPACK_IMPORTED_MODULE_0__.NODE_ENV.DEVELOPMENT;\nconst isProduction = config.app.env === _constants__WEBPACK_IMPORTED_MODULE_0__.NODE_ENV.PRODUCTION;\nconst isTest = config.app.env === _constants__WEBPACK_IMPORTED_MODULE_0__.NODE_ENV.TEST;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SUFDL0IsSUFBSUcsTUFBTUQsU0FBUztRQUNqQixNQUFNLElBQUl6QyxNQUFNLENBQUMscUJBQXFCLEVBQUVFLEtBQUssd0JBQXdCLEVBQUVxQyxNQUFNLENBQUM7SUFDaEY7SUFDQSxPQUFPRTtBQUNUO0FBRU8sU0FBU0UsbUJBQW1CekMsSUFBWSxFQUFFb0MsWUFBc0I7SUFDckUsTUFBTUMsUUFBUTlDLFFBQVFELEdBQUcsQ0FBQ1UsS0FBSztJQUMvQixJQUFJcUMsVUFBVWIsV0FBVztRQUN2QixJQUFJWSxpQkFBaUJaLFdBQVc7WUFDOUIsT0FBT1k7UUFDVDtRQUNBLE1BQU0sSUFBSXRDLE1BQU0sQ0FBQyxxQkFBcUIsRUFBRUUsS0FBSyxXQUFXLENBQUM7SUFDM0Q7SUFDQSxPQUFPcUMsTUFBTUssV0FBVyxPQUFPO0FBQ2pDO0FBRUEscUJBQXFCO0FBQ2QsTUFBTWpELGdCQUFnQnlDLE9BQU9uQyxHQUFHLENBQUNULEdBQUcsS0FBS0YsZ0RBQVFBLENBQUNJLFdBQVc7QUFDN0QsTUFBTUUsZUFBZXdDLE9BQU9uQyxHQUFHLENBQUNULEdBQUcsS0FBS0YsZ0RBQVFBLENBQUNPLFVBQVU7QUFDM0QsTUFBTWdELFNBQVNULE9BQU9uQyxHQUFHLENBQUNULEdBQUcsS0FBS0YsZ0RBQVFBLENBQUN3RCxJQUFJIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcmF0ZW15LW5leHRqcy8uL3NyYy9saWIvY29uZmlnLnRzP2EzZWYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTk9ERV9FTlYgfSBmcm9tICcuL2NvbnN0YW50cydcblxuaW50ZXJmYWNlIENvbmZpZyB7XG4gIGFwcDoge1xuICAgIG5hbWU6IHN0cmluZ1xuICAgIHZlcnNpb246IHN0cmluZ1xuICAgIGVudjogc3RyaW5nXG4gICAgcG9ydDogbnVtYmVyXG4gICAgdXJsOiBzdHJpbmdcbiAgfVxuICBkYXRhYmFzZToge1xuICAgIHVybDogc3RyaW5nXG4gIH1cbiAgYXV0aDoge1xuICAgIHNlY3JldDogc3RyaW5nXG4gICAgdXJsOiBzdHJpbmdcbiAgICBzZXNzaW9uTWF4QWdlOiBudW1iZXJcbiAgfVxuICBsb2dnaW5nOiB7XG4gICAgbGV2ZWw6IHN0cmluZ1xuICAgIHByZXR0eTogYm9vbGVhblxuICB9XG4gIHJlZGlzPzoge1xuICAgIHVybDogc3RyaW5nXG4gICAgcGFzc3dvcmQ/OiBzdHJpbmdcbiAgfVxuICBleHRlcm5hbDoge1xuICAgIHlvdXR1YmU/OiB7XG4gICAgICBhcGlLZXk6IHN0cmluZ1xuICAgIH1cbiAgICB2aW1lbz86IHtcbiAgICAgIGNsaWVudElkOiBzdHJpbmdcbiAgICAgIGNsaWVudFNlY3JldDogc3RyaW5nXG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGdldENvbmZpZygpOiBDb25maWcge1xuICBjb25zdCBlbnYgPSBwcm9jZXNzLmVudi5OT0RFX0VOViB8fCBOT0RFX0VOVi5ERVZFTE9QTUVOVFxuICBjb25zdCBpc0RldmVsb3BtZW50ID0gZW52ID09PSBOT0RFX0VOVi5ERVZFTE9QTUVOVFxuICBjb25zdCBpc1Byb2R1Y3Rpb24gPSBlbnYgPT09IE5PREVfRU5WLlBST0RVQ1RJT05cblxuICAvLyBWYWxpZGF0ZSByZXF1aXJlZCBlbnZpcm9ubWVudCB2YXJpYWJsZXNcbiAgY29uc3QgcmVxdWlyZWRWYXJzID0gW1xuICAgICdEQVRBQkFTRV9VUkwnLFxuICAgICdORVhUQVVUSF9TRUNSRVQnLFxuICAgICdORVhUQVVUSF9VUkwnLFxuICBdXG5cbiAgZm9yIChjb25zdCB2YXJOYW1lIG9mIHJlcXVpcmVkVmFycykge1xuICAgIGlmICghcHJvY2Vzcy5lbnZbdmFyTmFtZV0pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgTWlzc2luZyByZXF1aXJlZCBlbnZpcm9ubWVudCB2YXJpYWJsZTogJHt2YXJOYW1lfWApXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBhcHA6IHtcbiAgICAgIG5hbWU6IHByb2Nlc3MuZW52LkFQUF9OQU1FIHx8ICdSYXRlTWUnLFxuICAgICAgdmVyc2lvbjogcHJvY2Vzcy5lbnYuQVBQX1ZFUlNJT04gfHwgJzEuMC4wJyxcbiAgICAgIGVudixcbiAgICAgIHBvcnQ6IHBhcnNlSW50KHByb2Nlc3MuZW52LlBPUlQgfHwgJzMwMDAnLCAxMCksXG4gICAgICB1cmw6IHByb2Nlc3MuZW52Lk5FWFRBVVRIX1VSTCEsXG4gICAgfSxcbiAgICBkYXRhYmFzZToge1xuICAgICAgdXJsOiBwcm9jZXNzLmVudi5EQVRBQkFTRV9VUkwhLFxuICAgIH0sXG4gICAgYXV0aDoge1xuICAgICAgc2VjcmV0OiBwcm9jZXNzLmVudi5ORVhUQVVUSF9TRUNSRVQhLFxuICAgICAgdXJsOiBwcm9jZXNzLmVudi5ORVhUQVVUSF9VUkwhLFxuICAgICAgc2Vzc2lvbk1heEFnZTogcGFyc2VJbnQocHJvY2Vzcy5lbnYuU0VTU0lPTl9NQVhfQUdFIHx8ICcyNTkyMDAwJywgMTApLCAvLyAzMCBkYXlzXG4gICAgfSxcbiAgICBsb2dnaW5nOiB7XG4gICAgICBsZXZlbDogcHJvY2Vzcy5lbnYuTE9HX0xFVkVMIHx8IChpc0RldmVsb3BtZW50ID8gJ2RlYnVnJyA6ICdpbmZvJyksXG4gICAgICBwcmV0dHk6IGlzRGV2ZWxvcG1lbnQsXG4gICAgfSxcbiAgICByZWRpczogcHJvY2Vzcy5lbnYuUkVESVNfVVJMID8ge1xuICAgICAgdXJsOiBwcm9jZXNzLmVudi5SRURJU19VUkwsXG4gICAgICBwYXNzd29yZDogcHJvY2Vzcy5lbnYuUkVESVNfUEFTU1dPUkQsXG4gICAgfSA6IHVuZGVmaW5lZCxcbiAgICBleHRlcm5hbDoge1xuICAgICAgeW91dHViZTogcHJvY2Vzcy5lbnYuWU9VVFVCRV9BUElfS0VZID8ge1xuICAgICAgICBhcGlLZXk6IHByb2Nlc3MuZW52LllPVVRVQkVfQVBJX0tFWSxcbiAgICAgIH0gOiB1bmRlZmluZWQsXG4gICAgICB2aW1lbzogcHJvY2Vzcy5lbnYuVklNRU9fQ0xJRU5UX0lEICYmIHByb2Nlc3MuZW52LlZJTUVPX0NMSUVOVF9TRUNSRVQgPyB7XG4gICAgICAgIGNsaWVudElkOiBwcm9jZXNzLmVudi5WSU1FT19DTElFTlRfSUQsXG4gICAgICAgIGNsaWVudFNlY3JldDogcHJvY2Vzcy5lbnYuVklNRU9fQ0xJRU5UX1NFQ1JFVCxcbiAgICAgIH0gOiB1bmRlZmluZWQsXG4gICAgfSxcbiAgfVxufVxuXG4vLyBFeHBvcnQgc2luZ2xldG9uIGNvbmZpZyBpbnN0YW5jZVxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGdldENvbmZpZygpXG5cbi8vIFR5cGUtc2FmZSBlbnZpcm9ubWVudCB2YXJpYWJsZSBhY2Nlc3NcbmV4cG9ydCBmdW5jdGlvbiBnZXRFbnZWYXIobmFtZTogc3RyaW5nLCBkZWZhdWx0VmFsdWU/OiBzdHJpbmcpOiBzdHJpbmcge1xuICBjb25zdCB2YWx1ZSA9IHByb2Nlc3MuZW52W25hbWVdXG4gIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgaWYgKGRlZmF1bHRWYWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gZGVmYXVsdFZhbHVlXG4gICAgfVxuICAgIHRocm93IG5ldyBFcnJvcihgRW52aXJvbm1lbnQgdmFyaWFibGUgJHtuYW1lfSBpcyBub3Qgc2V0YClcbiAgfVxuICByZXR1cm4gdmFsdWVcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEVudlZhckFzTnVtYmVyKG5hbWU6IHN0cmluZywgZGVmYXVsdFZhbHVlPzogbnVtYmVyKTogbnVtYmVyIHtcbiAgY29uc3QgdmFsdWUgPSBwcm9jZXNzLmVudltuYW1lXVxuICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgIGlmIChkZWZhdWx0VmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGRlZmF1bHRWYWx1ZVxuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoYEVudmlyb25tZW50IHZhcmlhYmxlICR7bmFtZX0gaXMgbm90IHNldGApXG4gIH1cbiAgY29uc3QgcGFyc2VkID0gcGFyc2VJbnQodmFsdWUsIDEwKVxuICBpZiAoaXNOYU4ocGFyc2VkKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgRW52aXJvbm1lbnQgdmFyaWFibGUgJHtuYW1lfSBpcyBub3QgYSB2YWxpZCBudW1iZXI6ICR7dmFsdWV9YClcbiAgfVxuICByZXR1cm4gcGFyc2VkXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRFbnZWYXJBc0Jvb2xlYW4obmFtZTogc3RyaW5nLCBkZWZhdWx0VmFsdWU/OiBib29sZWFuKTogYm9vbGVhbiB7XG4gIGNvbnN0IHZhbHVlID0gcHJvY2Vzcy5lbnZbbmFtZV1cbiAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICBpZiAoZGVmYXVsdFZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBkZWZhdWx0VmFsdWVcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKGBFbnZpcm9ubWVudCB2YXJpYWJsZSAke25hbWV9IGlzIG5vdCBzZXRgKVxuICB9XG4gIHJldHVybiB2YWx1ZS50b0xvd2VyQ2FzZSgpID09PSAndHJ1ZSdcbn1cblxuLy8gRW52aXJvbm1lbnQgY2hlY2tzXG5leHBvcnQgY29uc3QgaXNEZXZlbG9wbWVudCA9IGNvbmZpZy5hcHAuZW52ID09PSBOT0RFX0VOVi5ERVZFTE9QTUVOVFxuZXhwb3J0IGNvbnN0IGlzUHJvZHVjdGlvbiA9IGNvbmZpZy5hcHAuZW52ID09PSBOT0RFX0VOVi5QUk9EVUNUSU9OXG5leHBvcnQgY29uc3QgaXNUZXN0ID0gY29uZmlnLmFwcC5lbnYgPT09IE5PREVfRU5WLlRFU1QiXSwibmFtZXMiOlsiTk9ERV9FTlYiLCJnZXRDb25maWciLCJlbnYiLCJwcm9jZXNzIiwiREVWRUxPUE1FTlQiLCJpc0RldmVsb3BtZW50IiwiaXNQcm9kdWN0aW9uIiwiUFJPRFVDVElPTiIsInJlcXVpcmVkVmFycyIsInZhck5hbWUiLCJFcnJvciIsImFwcCIsIm5hbWUiLCJBUFBfTkFNRSIsInZlcnNpb24iLCJBUFBfVkVSU0lPTiIsInBvcnQiLCJwYXJzZUludCIsIlBPUlQiLCJ1cmwiLCJORVhUQVVUSF9VUkwiLCJkYXRhYmFzZSIsIkRBVEFCQVNFX1VSTCIsImF1dGgiLCJzZWNyZXQiLCJORVhUQVVUSF9TRUNSRVQiLCJzZXNzaW9uTWF4QWdlIiwiU0VTU0lPTl9NQVhfQUdFIiwibG9nZ2luZyIsImxldmVsIiwiTE9HX0xFVkVMIiwicHJldHR5IiwicmVkaXMiLCJSRURJU19VUkwiLCJwYXNzd29yZCIsIlJFRElTX1BBU1NXT1JEIiwidW5kZWZpbmVkIiwiZXh0ZXJuYWwiLCJ5b3V0dWJlIiwiWU9VVFVCRV9BUElfS0VZIiwiYXBpS2V5IiwidmltZW8iLCJWSU1FT19DTElFTlRfSUQiLCJWSU1FT19DTElFTlRfU0VDUkVUIiwiY2xpZW50SWQiLCJjbGllbnRTZWNyZXQiLCJjb25maWciLCJnZXRFbnZWYXIiLCJkZWZhdWx0VmFsdWUiLCJ2YWx1ZSIsImdldEVudlZhckFzTnVtYmVyIiwicGFyc2VkIiwiaXNOYU4iLCJnZXRFbnZWYXJBc0Jvb2xlYW4iLCJ0b0xvd2VyQ2FzZSIsImlzVGVzdCIsIlRFU1QiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/lib/config.ts\n");

/***/ }),

/***/ "(api)/./src/lib/constants.ts":
/*!******************************!*\
  !*** ./src/lib/constants.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   API_ROUTES: () => (/* binding */ API_ROUTES),\n/* harmony export */   APP_DESCRIPTION: () => (/* binding */ APP_DESCRIPTION),\n/* harmony export */   APP_NAME: () => (/* binding */ APP_NAME),\n/* harmony export */   APP_VERSION: () => (/* binding */ APP_VERSION),\n/* harmony export */   CACHE_KEYS: () => (/* binding */ CACHE_KEYS),\n/* harmony export */   CACHE_TTL: () => (/* binding */ CACHE_TTL),\n/* harmony export */   DEFAULTS: () => (/* binding */ DEFAULTS),\n/* harmony export */   ERROR_CODES: () => (/* binding */ ERROR_CODES),\n/* harmony export */   EXTERNAL_SERVICES: () => (/* binding */ EXTERNAL_SERVICES),\n/* harmony export */   FEATURES: () => (/* binding */ FEATURES),\n/* harmony export */   HTTP_STATUS: () => (/* binding */ HTTP_STATUS),\n/* harmony export */   NODE_ENV: () => (/* binding */ NODE_ENV),\n/* harmony export */   PAGINATION: () => (/* binding */ PAGINATION),\n/* harmony export */   RATING_LEVELS: () => (/* binding */ RATING_LEVELS),\n/* harmony export */   SEO: () => (/* binding */ SEO),\n/* harmony export */   SOCIAL_PLATFORMS: () => (/* binding */ SOCIAL_PLATFORMS),\n/* harmony export */   UPLOAD_LIMITS: () => (/* binding */ UPLOAD_LIMITS),\n/* harmony export */   USER_LIMITS: () => (/* binding */ USER_LIMITS),\n/* harmony export */   VALIDATION_PATTERNS: () => (/* binding */ VALIDATION_PATTERNS),\n/* harmony export */   VIDEO_LIMITS: () => (/* binding */ VIDEO_LIMITS),\n/* harmony export */   VIDEO_PLATFORMS: () => (/* binding */ VIDEO_PLATFORMS)\n/* harmony export */ });\n// Application constants\nconst APP_NAME = \"RateMe\";\nconst APP_DESCRIPTION = \"A modern video rating platform\";\nconst APP_VERSION = \"1.0.0\";\n// API constants\nconst API_ROUTES = {\n    AUTH: {\n        SIGNIN: \"/api/auth/signin\",\n        SIGNUP: \"/api/auth/register\",\n        SIGNOUT: \"/api/auth/signout\"\n    },\n    VIDEOS: {\n        BASE: \"/api/videos\",\n        BY_ID: (id)=>`/api/videos/${id}`,\n        RATE: (id)=>`/api/videos/${id}/rate`\n    },\n    USERS: {\n        BASE: \"/api/users\",\n        BY_ID: (id)=>`/api/users/${id}`,\n        FOLLOW: (id)=>`/api/users/${id}/follow`\n    }\n};\n// UI constants\nconst PAGINATION = {\n    DEFAULT_PAGE_SIZE: 12,\n    MAX_PAGE_SIZE: 50\n};\nconst VIDEO_LIMITS = {\n    MAX_TITLE_LENGTH: 200,\n    MAX_DESCRIPTION_LENGTH: 1000\n};\nconst USER_LIMITS = {\n    MIN_USERNAME_LENGTH: 3,\n    MAX_USERNAME_LENGTH: 30,\n    MIN_PASSWORD_LENGTH: 6,\n    MAX_PASSWORD_LENGTH: 128\n};\n// Validation patterns\nconst VALIDATION_PATTERNS = {\n    EMAIL: /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/,\n    USERNAME: /^[a-zA-Z0-9_]{3,30}$/,\n    YOUTUBE_URL: /(?:https?:\\/\\/)?(?:www\\.)?(?:youtube\\.com\\/watch\\?v=|youtu\\.be\\/)([a-zA-Z0-9_-]{11})/,\n    VIMEO_URL: /(?:https?:\\/\\/)?(?:www\\.)?vimeo\\.com\\/(\\d+)/\n};\n// Error codes\nconst ERROR_CODES = {\n    // Authentication errors\n    INVALID_CREDENTIALS: \"INVALID_CREDENTIALS\",\n    USER_NOT_FOUND: \"USER_NOT_FOUND\",\n    USER_ALREADY_EXISTS: \"USER_ALREADY_EXISTS\",\n    UNAUTHORIZED: \"UNAUTHORIZED\",\n    SESSION_EXPIRED: \"SESSION_EXPIRED\",\n    // Validation errors\n    VALIDATION_ERROR: \"VALIDATION_ERROR\",\n    INVALID_INPUT: \"INVALID_INPUT\",\n    MISSING_REQUIRED_FIELD: \"MISSING_REQUIRED_FIELD\",\n    // Resource errors\n    RESOURCE_NOT_FOUND: \"RESOURCE_NOT_FOUND\",\n    RESOURCE_ALREADY_EXISTS: \"RESOURCE_ALREADY_EXISTS\",\n    RESOURCE_FORBIDDEN: \"RESOURCE_FORBIDDEN\",\n    // Server errors\n    INTERNAL_SERVER_ERROR: \"INTERNAL_SERVER_ERROR\",\n    DATABASE_ERROR: \"DATABASE_ERROR\",\n    EXTERNAL_SERVICE_ERROR: \"EXTERNAL_SERVICE_ERROR\",\n    // Rate limiting\n    RATE_LIMIT_EXCEEDED: \"RATE_LIMIT_EXCEEDED\"\n};\n// HTTP status codes\nconst HTTP_STATUS = {\n    OK: 200,\n    CREATED: 201,\n    NO_CONTENT: 204,\n    BAD_REQUEST: 400,\n    UNAUTHORIZED: 401,\n    FORBIDDEN: 403,\n    NOT_FOUND: 404,\n    METHOD_NOT_ALLOWED: 405,\n    CONFLICT: 409,\n    UNPROCESSABLE_ENTITY: 422,\n    TOO_MANY_REQUESTS: 429,\n    INTERNAL_SERVER_ERROR: 500,\n    BAD_GATEWAY: 502,\n    SERVICE_UNAVAILABLE: 503\n};\n// Cache keys\nconst CACHE_KEYS = {\n    VIDEOS: \"videos\",\n    USER: (id)=>`user:${id}`,\n    VIDEO: (id)=>`video:${id}`,\n    TAGS: \"tags\",\n    USER_VIDEOS: (userId)=>`user:${userId}:videos`\n};\n// Cache TTL (in seconds)\nconst CACHE_TTL = {\n    SHORT: 300,\n    MEDIUM: 1800,\n    LONG: 3600,\n    VERY_LONG: 86400\n};\n// Environment types\nconst NODE_ENV = {\n    DEVELOPMENT: \"development\",\n    PRODUCTION: \"production\",\n    TEST: \"test\"\n};\n// Supported video platforms\nconst VIDEO_PLATFORMS = {\n    YOUTUBE: \"youtube\",\n    VIMEO: \"vimeo\"\n};\n// Rating levels\nconst RATING_LEVELS = {\n    MIN: 1,\n    MAX: 5,\n    DEFAULT: 3\n};\n// Default values\nconst DEFAULTS = {\n    AVATAR_URL: \"/images/default-avatar.png\",\n    VIDEO_THUMBNAIL: \"/images/default-video-thumbnail.png\",\n    PAGINATION_LIMIT: PAGINATION.DEFAULT_PAGE_SIZE,\n    RATING_LEVEL: RATING_LEVELS.DEFAULT\n};\n// Feature flags\nconst FEATURES = {\n    VIDEO_UPLOAD: true,\n    USER_REGISTRATION: true,\n    VIDEO_RATING: true,\n    USER_FOLLOWING: true,\n    SEARCH: true,\n    ADMIN_PANEL: false\n};\n// External service URLs\nconst EXTERNAL_SERVICES = {\n    YOUTUBE_API: \"https://www.googleapis.com/youtube/v3\",\n    VIMEO_API: \"https://api.vimeo.com\"\n};\n// File upload limits\nconst UPLOAD_LIMITS = {\n    MAX_FILE_SIZE: 10 * 1024 * 1024,\n    ALLOWED_IMAGE_TYPES: [\n        \"image/jpeg\",\n        \"image/png\",\n        \"image/gif\",\n        \"image/webp\"\n    ],\n    ALLOWED_VIDEO_TYPES: [\n        \"video/mp4\",\n        \"video/webm\",\n        \"video/ogg\"\n    ]\n};\n// SEO constants\nconst SEO = {\n    DEFAULT_TITLE: APP_NAME,\n    TITLE_TEMPLATE: `%s | ${APP_NAME}`,\n    DEFAULT_DESCRIPTION: APP_DESCRIPTION,\n    TWITTER_HANDLE: \"@rateme\",\n    SITE_URL: process.env.NEXTAUTH_URL || \"http://localhost:3000\"\n};\n// Social sharing\nconst SOCIAL_PLATFORMS = {\n    TWITTER: \"twitter\",\n    FACEBOOK: \"facebook\",\n    LINKEDIN: \"linkedin\",\n    REDDIT: \"reddit\"\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SUFDTEMsS0FBSztJQUNMQyxTQUFTO0FBQ1gsRUFBVTtBQUVWLGlCQUFpQjtBQUNWLE1BQU1DLFdBQVc7SUFDdEJDLFlBQVk7SUFDWkMsaUJBQWlCO0lBQ2pCQyxrQkFBa0J0RSxXQUFXQyxpQkFBaUI7SUFDOUNzRSxjQUFjUixjQUFjRyxPQUFPO0FBQ3JDLEVBQVU7QUFFVixnQkFBZ0I7QUFDVCxNQUFNTSxXQUFXO0lBQ3RCQyxjQUFjO0lBQ2RDLG1CQUFtQjtJQUNuQkMsY0FBYztJQUNkQyxnQkFBZ0I7SUFDaEJDLFFBQVE7SUFDUkMsYUFBYTtBQUNmLEVBQVU7QUFFVix3QkFBd0I7QUFDakIsTUFBTUMsb0JBQW9CO0lBQy9CQyxhQUFhO0lBQ2JDLFdBQVc7QUFDYixFQUFVO0FBRVYscUJBQXFCO0FBQ2QsTUFBTUMsZ0JBQWdCO0lBQzNCQyxlQUFlLEtBQUssT0FBTztJQUMzQkMscUJBQXFCO1FBQUM7UUFBYztRQUFhO1FBQWE7S0FBYTtJQUMzRUMscUJBQXFCO1FBQUM7UUFBYTtRQUFjO0tBQVk7QUFDL0QsRUFBVTtBQUVWLGdCQUFnQjtBQUNULE1BQU1DLE1BQU07SUFDakJDLGVBQWV0RztJQUNmdUcsZ0JBQWdCLENBQUMsS0FBSyxFQUFFdkcsU0FBUyxDQUFDO0lBQ2xDd0cscUJBQXFCdkc7SUFDckJ3RyxnQkFBZ0I7SUFDaEJDLFVBQVVDLFFBQVFDLEdBQUcsQ0FBQ0MsWUFBWSxJQUFJO0FBQ3hDLEVBQVU7QUFFVixpQkFBaUI7QUFDVixNQUFNQyxtQkFBbUI7SUFDOUJDLFNBQVM7SUFDVEMsVUFBVTtJQUNWQyxVQUFVO0lBQ1ZDLFFBQVE7QUFDVixFQUFVIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcmF0ZW15LW5leHRqcy8uL3NyYy9saWIvY29uc3RhbnRzLnRzP2ZiZjkiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQXBwbGljYXRpb24gY29uc3RhbnRzXG5leHBvcnQgY29uc3QgQVBQX05BTUUgPSAnUmF0ZU1lJ1xuZXhwb3J0IGNvbnN0IEFQUF9ERVNDUklQVElPTiA9ICdBIG1vZGVybiB2aWRlbyByYXRpbmcgcGxhdGZvcm0nXG5leHBvcnQgY29uc3QgQVBQX1ZFUlNJT04gPSAnMS4wLjAnXG5cbi8vIEFQSSBjb25zdGFudHNcbmV4cG9ydCBjb25zdCBBUElfUk9VVEVTID0ge1xuICBBVVRIOiB7XG4gICAgU0lHTklOOiAnL2FwaS9hdXRoL3NpZ25pbicsXG4gICAgU0lHTlVQOiAnL2FwaS9hdXRoL3JlZ2lzdGVyJyxcbiAgICBTSUdOT1VUOiAnL2FwaS9hdXRoL3NpZ25vdXQnLFxuICB9LFxuICBWSURFT1M6IHtcbiAgICBCQVNFOiAnL2FwaS92aWRlb3MnLFxuICAgIEJZX0lEOiAoaWQ6IHN0cmluZykgPT4gYC9hcGkvdmlkZW9zLyR7aWR9YCxcbiAgICBSQVRFOiAoaWQ6IHN0cmluZykgPT4gYC9hcGkvdmlkZW9zLyR7aWR9L3JhdGVgLFxuICB9LFxuICBVU0VSUzoge1xuICAgIEJBU0U6ICcvYXBpL3VzZXJzJyxcbiAgICBCWV9JRDogKGlkOiBzdHJpbmcpID0+IGAvYXBpL3VzZXJzLyR7aWR9YCxcbiAgICBGT0xMT1c6IChpZDogc3RyaW5nKSA9PiBgL2FwaS91c2Vycy8ke2lkfS9mb2xsb3dgLFxuICB9LFxufSBhcyBjb25zdFxuXG4vLyBVSSBjb25zdGFudHNcbmV4cG9ydCBjb25zdCBQQUdJTkFUSU9OID0ge1xuICBERUZBVUxUX1BBR0VfU0laRTogMTIsXG4gIE1BWF9QQUdFX1NJWkU6IDUwLFxufSBhcyBjb25zdFxuXG5leHBvcnQgY29uc3QgVklERU9fTElNSVRTID0ge1xuICBNQVhfVElUTEVfTEVOR1RIOiAyMDAsXG4gIE1BWF9ERVNDUklQVElPTl9MRU5HVEg6IDEwMDAsXG4gIC8vIFJlbW92ZWQgTUFYX1RBR1MgbGltaXQgdG8gYWxsb3cgdW5saW1pdGVkIHRhZ3Ncbn0gYXMgY29uc3RcblxuZXhwb3J0IGNvbnN0IFVTRVJfTElNSVRTID0ge1xuICBNSU5fVVNFUk5BTUVfTEVOR1RIOiAzLFxuICBNQVhfVVNFUk5BTUVfTEVOR1RIOiAzMCxcbiAgTUlOX1BBU1NXT1JEX0xFTkdUSDogNixcbiAgTUFYX1BBU1NXT1JEX0xFTkdUSDogMTI4LFxufSBhcyBjb25zdFxuXG4vLyBWYWxpZGF0aW9uIHBhdHRlcm5zXG5leHBvcnQgY29uc3QgVkFMSURBVElPTl9QQVRURVJOUyA9IHtcbiAgRU1BSUw6IC9eW15cXHNAXStAW15cXHNAXStcXC5bXlxcc0BdKyQvLFxuICBVU0VSTkFNRTogL15bYS16QS1aMC05X117MywzMH0kLyxcbiAgWU9VVFVCRV9VUkw6IC8oPzpodHRwcz86XFwvXFwvKT8oPzp3d3dcXC4pPyg/OnlvdXR1YmVcXC5jb21cXC93YXRjaFxcP3Y9fHlvdXR1XFwuYmVcXC8pKFthLXpBLVowLTlfLV17MTF9KS8sXG4gIFZJTUVPX1VSTDogLyg/Omh0dHBzPzpcXC9cXC8pPyg/Ond3d1xcLik/dmltZW9cXC5jb21cXC8oXFxkKykvLFxufSBhcyBjb25zdFxuXG4vLyBFcnJvciBjb2Rlc1xuZXhwb3J0IGNvbnN0IEVSUk9SX0NPREVTID0ge1xuICAvLyBBdXRoZW50aWNhdGlvbiBlcnJvcnNcbiAgSU5WQUxJRF9DUkVERU5USUFMUzogJ0lOVkFMSURfQ1JFREVOVElBTFMnLFxuICBVU0VSX05PVF9GT1VORDogJ1VTRVJfTk9UX0ZPVU5EJyxcbiAgVVNFUl9BTFJFQURZX0VYSVNUUzogJ1VTRVJfQUxSRUFEWV9FWElTVFMnLFxuICBVTkFVVEhPUklaRUQ6ICdVTkFVVEhPUklaRUQnLFxuICBTRVNTSU9OX0VYUElSRUQ6ICdTRVNTSU9OX0VYUElSRUQnLFxuXG4gIC8vIFZhbGlkYXRpb24gZXJyb3JzXG4gIFZBTElEQVRJT05fRVJST1I6ICdWQUxJREFUSU9OX0VSUk9SJyxcbiAgSU5WQUxJRF9JTlBVVDogJ0lOVkFMSURfSU5QVVQnLFxuICBNSVNTSU5HX1JFUVVJUkVEX0ZJRUxEOiAnTUlTU0lOR19SRVFVSVJFRF9GSUVMRCcsXG5cbiAgLy8gUmVzb3VyY2UgZXJyb3JzXG4gIFJFU09VUkNFX05PVF9GT1VORDogJ1JFU09VUkNFX05PVF9GT1VORCcsXG4gIFJFU09VUkNFX0FMUkVBRFlfRVhJU1RTOiAnUkVTT1VSQ0VfQUxSRUFEWV9FWElTVFMnLFxuICBSRVNPVVJDRV9GT1JCSURERU46ICdSRVNPVVJDRV9GT1JCSURERU4nLFxuXG4gIC8vIFNlcnZlciBlcnJvcnNcbiAgSU5URVJOQUxfU0VSVkVSX0VSUk9SOiAnSU5URVJOQUxfU0VSVkVSX0VSUk9SJyxcbiAgREFUQUJBU0VfRVJST1I6ICdEQVRBQkFTRV9FUlJPUicsXG4gIEVYVEVSTkFMX1NFUlZJQ0VfRVJST1I6ICdFWFRFUk5BTF9TRVJWSUNFX0VSUk9SJyxcblxuICAvLyBSYXRlIGxpbWl0aW5nXG4gIFJBVEVfTElNSVRfRVhDRUVERUQ6ICdSQVRFX0xJTUlUX0VYQ0VFREVEJyxcbn0gYXMgY29uc3RcblxuLy8gSFRUUCBzdGF0dXMgY29kZXNcbmV4cG9ydCBjb25zdCBIVFRQX1NUQVRVUyA9IHtcbiAgT0s6IDIwMCxcbiAgQ1JFQVRFRDogMjAxLFxuICBOT19DT05URU5UOiAyMDQsXG4gIEJBRF9SRVFVRVNUOiA0MDAsXG4gIFVOQVVUSE9SSVpFRDogNDAxLFxuICBGT1JCSURERU46IDQwMyxcbiAgTk9UX0ZPVU5EOiA0MDQsXG4gIE1FVEhPRF9OT1RfQUxMT1dFRDogNDA1LFxuICBDT05GTElDVDogNDA5LFxuICBVTlBST0NFU1NBQkxFX0VOVElUWTogNDIyLFxuICBUT09fTUFOWV9SRVFVRVNUUzogNDI5LFxuICBJTlRFUk5BTF9TRVJWRVJfRVJST1I6IDUwMCxcbiAgQkFEX0dBVEVXQVk6IDUwMixcbiAgU0VSVklDRV9VTkFWQUlMQUJMRTogNTAzLFxufSBhcyBjb25zdFxuXG4vLyBDYWNoZSBrZXlzXG5leHBvcnQgY29uc3QgQ0FDSEVfS0VZUyA9IHtcbiAgVklERU9TOiAndmlkZW9zJyxcbiAgVVNFUjogKGlkOiBzdHJpbmcpID0+IGB1c2VyOiR7aWR9YCxcbiAgVklERU86IChpZDogc3RyaW5nKSA9PiBgdmlkZW86JHtpZH1gLFxuICBUQUdTOiAndGFncycsXG4gIFVTRVJfVklERU9TOiAodXNlcklkOiBzdHJpbmcpID0+IGB1c2VyOiR7dXNlcklkfTp2aWRlb3NgLFxufSBhcyBjb25zdFxuXG4vLyBDYWNoZSBUVEwgKGluIHNlY29uZHMpXG5leHBvcnQgY29uc3QgQ0FDSEVfVFRMID0ge1xuICBTSE9SVDogMzAwLCAvLyA1IG1pbnV0ZXNcbiAgTUVESVVNOiAxODAwLCAvLyAzMCBtaW51dGVzXG4gIExPTkc6IDM2MDAsIC8vIDEgaG91clxuICBWRVJZX0xPTkc6IDg2NDAwLCAvLyAyNCBob3Vyc1xufSBhcyBjb25zdFxuXG4vLyBFbnZpcm9ubWVudCB0eXBlc1xuZXhwb3J0IGNvbnN0IE5PREVfRU5WID0ge1xuICBERVZFTE9QTUVOVDogJ2RldmVsb3BtZW50JyxcbiAgUFJPRFVDVElPTjogJ3Byb2R1Y3Rpb24nLFxuICBURVNUOiAndGVzdCcsXG59IGFzIGNvbnN0XG5cbi8vIFN1cHBvcnRlZCB2aWRlbyBwbGF0Zm9ybXNcbmV4cG9ydCBjb25zdCBWSURFT19QTEFURk9STVMgPSB7XG4gIFlPVVRVQkU6ICd5b3V0dWJlJyxcbiAgVklNRU86ICd2aW1lbycsXG59IGFzIGNvbnN0XG5cbi8vIFJhdGluZyBsZXZlbHNcbmV4cG9ydCBjb25zdCBSQVRJTkdfTEVWRUxTID0ge1xuICBNSU46IDEsXG4gIE1BWDogNSxcbiAgREVGQVVMVDogMyxcbn0gYXMgY29uc3RcblxuLy8gRGVmYXVsdCB2YWx1ZXNcbmV4cG9ydCBjb25zdCBERUZBVUxUUyA9IHtcbiAgQVZBVEFSX1VSTDogJy9pbWFnZXMvZGVmYXVsdC1hdmF0YXIucG5nJyxcbiAgVklERU9fVEhVTUJOQUlMOiAnL2ltYWdlcy9kZWZhdWx0LXZpZGVvLXRodW1ibmFpbC5wbmcnLFxuICBQQUdJTkFUSU9OX0xJTUlUOiBQQUdJTkFUSU9OLkRFRkFVTFRfUEFHRV9TSVpFLFxuICBSQVRJTkdfTEVWRUw6IFJBVElOR19MRVZFTFMuREVGQVVMVCxcbn0gYXMgY29uc3RcblxuLy8gRmVhdHVyZSBmbGFnc1xuZXhwb3J0IGNvbnN0IEZFQVRVUkVTID0ge1xuICBWSURFT19VUExPQUQ6IHRydWUsXG4gIFVTRVJfUkVHSVNUUkFUSU9OOiB0cnVlLFxuICBWSURFT19SQVRJTkc6IHRydWUsXG4gIFVTRVJfRk9MTE9XSU5HOiB0cnVlLFxuICBTRUFSQ0g6IHRydWUsXG4gIEFETUlOX1BBTkVMOiBmYWxzZSxcbn0gYXMgY29uc3RcblxuLy8gRXh0ZXJuYWwgc2VydmljZSBVUkxzXG5leHBvcnQgY29uc3QgRVhURVJOQUxfU0VSVklDRVMgPSB7XG4gIFlPVVRVQkVfQVBJOiAnaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20veW91dHViZS92MycsXG4gIFZJTUVPX0FQSTogJ2h0dHBzOi8vYXBpLnZpbWVvLmNvbScsXG59IGFzIGNvbnN0XG5cbi8vIEZpbGUgdXBsb2FkIGxpbWl0c1xuZXhwb3J0IGNvbnN0IFVQTE9BRF9MSU1JVFMgPSB7XG4gIE1BWF9GSUxFX1NJWkU6IDEwICogMTAyNCAqIDEwMjQsIC8vIDEwTUJcbiAgQUxMT1dFRF9JTUFHRV9UWVBFUzogWydpbWFnZS9qcGVnJywgJ2ltYWdlL3BuZycsICdpbWFnZS9naWYnLCAnaW1hZ2Uvd2VicCddLFxuICBBTExPV0VEX1ZJREVPX1RZUEVTOiBbJ3ZpZGVvL21wNCcsICd2aWRlby93ZWJtJywgJ3ZpZGVvL29nZyddLFxufSBhcyBjb25zdFxuXG4vLyBTRU8gY29uc3RhbnRzXG5leHBvcnQgY29uc3QgU0VPID0ge1xuICBERUZBVUxUX1RJVExFOiBBUFBfTkFNRSxcbiAgVElUTEVfVEVNUExBVEU6IGAlcyB8ICR7QVBQX05BTUV9YCxcbiAgREVGQVVMVF9ERVNDUklQVElPTjogQVBQX0RFU0NSSVBUSU9OLFxuICBUV0lUVEVSX0hBTkRMRTogJ0ByYXRlbWUnLFxuICBTSVRFX1VSTDogcHJvY2Vzcy5lbnYuTkVYVEFVVEhfVVJMIHx8ICdodHRwOi8vbG9jYWxob3N0OjMwMDAnLFxufSBhcyBjb25zdFxuXG4vLyBTb2NpYWwgc2hhcmluZ1xuZXhwb3J0IGNvbnN0IFNPQ0lBTF9QTEFURk9STVMgPSB7XG4gIFRXSVRURVI6ICd0d2l0dGVyJyxcbiAgRkFDRUJPT0s6ICdmYWNlYm9vaycsXG4gIExJTktFRElOOiAnbGlua2VkaW4nLFxuICBSRURESVQ6ICdyZWRkaXQnLFxufSBhcyBjb25zdCJdLCJuYW1lcyI6WyJBUFBfTkFNRSIsIkFQUF9ERVNDUklQVElPTiIsIkFQUF9WRVJTSU9OIiwiQVBJX1JPVVRFUyIsIkFVVEgiLCJTSUdOSU4iLCJTSUdOVVAiLCJTSUdOT1VUIiwiVklERU9TIiwiQkFTRSIsIkJZX0lEIiwiaWQiLCJSQVRFIiwiVVNFUlMiLCJGT0xMT1ciLCJQQUdJTkFUSU9OIiwiREVGQVVMVF9QQUdFX1NJWkUiLCJNQVhfUEFHRV9TSVpFIiwiVklERU9fTElNSVRTIiwiTUFYX1RJVExFX0xFTkdUSCIsIk1BWF9ERVNDUklQVElPTl9MRU5HVEgiLCJVU0VSX0xJTUlUUyIsIk1JTl9VU0VSTkFNRV9MRU5HVEgiLCJNQVhfVVNFUk5BTUVfTEVOR1RIIiwiTUlOX1BBU1NXT1JEX0xFTkdUSCIsIk1BWF9QQVNTV09SRF9MRU5HVEgiLCJWQUxJREFUSU9OX1BBVFRFUk5TIiwiRU1BSUwiLCJVU0VSTkFNRSIsIllPVVRVQkVfVVJMIiwiVklNRU9fVVJMIiwiRVJST1JfQ09ERVMiLCJJTlZBTElEX0NSRURFTlRJQUxTIiwiVVNFUl9OT1RfRk9VTkQiLCJVU0VSX0FMUkVBRFlfRVhJU1RTIiwiVU5BVVRIT1JJWkVEIiwiU0VTU0lPTl9FWFBJUkVEIiwiVkFMSURBVElPTl9FUlJPUiIsIklOVkFMSURfSU5QVVQiLCJNSVNTSU5HX1JFUVVJUkVEX0ZJRUxEIiwiUkVTT1VSQ0VfTk9UX0ZPVU5EIiwiUkVTT1VSQ0VfQUxSRUFEWV9FWElTVFMiLCJSRVNPVVJDRV9GT1JCSURERU4iLCJJTlRFUk5BTF9TRVJWRVJfRVJST1IiLCJEQVRBQkFTRV9FUlJPUiIsIkVYVEVSTkFMX1NFUlZJQ0VfRVJST1IiLCJSQVRFX0xJTUlUX0VYQ0VFREVEIiwiSFRUUF9TVEFUVVMiLCJPSyIsIkNSRUFURUQiLCJOT19DT05URU5UIiwiQkFEX1JFUVVFU1QiLCJGT1JCSURERU4iLCJOT1RfRk9VTkQiLCJNRVRIT0RfTk9UX0FMTE9XRUQiLCJDT05GTElDVCIsIlVOUFJPQ0VTU0FCTEVfRU5USVRZIiwiVE9PX01BTllfUkVRVUVTVFMiLCJCQURfR0FURVdBWSIsIlNFUlZJQ0VfVU5BVkFJTEFCTEUiLCJDQUNIRV9LRVlTIiwiVVNFUiIsIlZJREVPIiwiVEFHUyIsIlVTRVJfVklERU9TIiwidXNlcklkIiwiQ0FDSEVfVFRMIiwiU0hPUlQiLCJNRURJVU0iLCJMT05HIiwiVkVSWV9MT05HIiwiTk9ERV9FTlYiLCJERVZFTE9QTUVOVCIsIlBST0RVQ1RJT04iLCJURVNUIiwiVklERU9fUExBVEZPUk1TIiwiWU9VVFVCRSIsIlZJTUVPIiwiUkFUSU5HX0xFVkVMUyIsIk1JTiIsIk1BWCIsIkRFRkFVTFQiLCJERUZBVUxUUyIsIkFWQVRBUl9VUkwiLCJWSURFT19USFVNQk5BSUwiLCJQQUdJTkFUSU9OX0xJTUlUIiwiUkFUSU5HX0xFVkVMIiwiRkVBVFVSRVMiLCJWSURFT19VUExPQUQiLCJVU0VSX1JFR0lTVFJBVElPTiIsIlZJREVPX1JBVElORyIsIlVTRVJfRk9MTE9XSU5HIiwiU0VBUkNIIiwiQURNSU5fUEFORUwiLCJFWFRFUk5BTF9TRVJWSUNFUyIsIllPVVRVQkVfQVBJIiwiVklNRU9fQVBJIiwiVVBMT0FEX0xJTUlUUyIsIk1BWF9GSUxFX1NJWkUiLCJBTExPV0VEX0lNQUdFX1RZUEVTIiwiQUxMT1dFRF9WSURFT19UWVBFUyIsIlNFTyIsIkRFRkFVTFRfVElUTEUiLCJUSVRMRV9URU1QTEFURSIsIkRFRkFVTFRfREVTQ1JJUFRJT04iLCJUV0lUVEVSX0hBTkRMRSIsIlNJVEVfVVJMIiwicHJvY2VzcyIsImVudiIsIk5FWFRBVVRIX1VSTCIsIlNPQ0lBTF9QTEFURk9STVMiLCJUV0lUVEVSIiwiRkFDRUJPT0siLCJMSU5LRURJTiIsIlJFRERJVCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/lib/constants.ts\n");

/***/ }),

/***/ "(api)/./src/lib/db.ts":
/*!***********************!*\
  !*** ./src/lib/db.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   db: () => (/* binding */ db)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst globalForPrisma = globalThis;\nconst db = globalForPrisma.prisma ?? new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\nif (true) globalForPrisma.prisma = db;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvbGliL2RiLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE2QztBQUU3QyxNQUFNQyxrQkFBa0JDO0FBSWpCLE1BQU1DLEtBQUtGLGdCQUFnQkcsTUFBTSxJQUFJLElBQUlKLHdEQUFZQSxHQUFFO0FBRTlELElBQUlLLElBQXlCLEVBQWNKLGdCQUFnQkcsTUFBTSxHQUFHRCIsInNvdXJjZXMiOlsid2VicGFjazovL3JhdGVteS1uZXh0anMvLi9zcmMvbGliL2RiLnRzPzllNGYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUHJpc21hQ2xpZW50IH0gZnJvbSAnQHByaXNtYS9jbGllbnQnXG5cbmNvbnN0IGdsb2JhbEZvclByaXNtYSA9IGdsb2JhbFRoaXMgYXMgdW5rbm93biBhcyB7XG4gIHByaXNtYTogUHJpc21hQ2xpZW50IHwgdW5kZWZpbmVkXG59XG5cbmV4cG9ydCBjb25zdCBkYiA9IGdsb2JhbEZvclByaXNtYS5wcmlzbWEgPz8gbmV3IFByaXNtYUNsaWVudCgpXG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSBnbG9iYWxGb3JQcmlzbWEucHJpc21hID0gZGIiXSwibmFtZXMiOlsiUHJpc21hQ2xpZW50IiwiZ2xvYmFsRm9yUHJpc21hIiwiZ2xvYmFsVGhpcyIsImRiIiwicHJpc21hIiwicHJvY2VzcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/lib/db.ts\n");

/***/ }),

/***/ "(api)/./src/lib/errors.ts":
/*!***************************!*\
  !*** ./src/lib/errors.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AppError: () => (/* binding */ AppError),\n/* harmony export */   AuthenticationError: () => (/* binding */ AuthenticationError),\n/* harmony export */   AuthorizationError: () => (/* binding */ AuthorizationError),\n/* harmony export */   ConflictError: () => (/* binding */ ConflictError),\n/* harmony export */   DatabaseError: () => (/* binding */ DatabaseError),\n/* harmony export */   ExternalServiceError: () => (/* binding */ ExternalServiceError),\n/* harmony export */   NotFoundError: () => (/* binding */ NotFoundError),\n/* harmony export */   RateLimitError: () => (/* binding */ RateLimitError),\n/* harmony export */   ValidationError: () => (/* binding */ ValidationError),\n/* harmony export */   asyncWrapper: () => (/* binding */ asyncWrapper),\n/* harmony export */   createConflictError: () => (/* binding */ createConflictError),\n/* harmony export */   createNotFoundError: () => (/* binding */ createNotFoundError),\n/* harmony export */   createValidationError: () => (/* binding */ createValidationError),\n/* harmony export */   extractErrorCode: () => (/* binding */ extractErrorCode),\n/* harmony export */   extractErrorMessage: () => (/* binding */ extractErrorMessage),\n/* harmony export */   extractStatusCode: () => (/* binding */ extractStatusCode),\n/* harmony export */   handlePromiseRejection: () => (/* binding */ handlePromiseRejection),\n/* harmony export */   isAppError: () => (/* binding */ isAppError),\n/* harmony export */   isOperationalError: () => (/* binding */ isOperationalError),\n/* harmony export */   serializeError: () => (/* binding */ serializeError)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./constants */ \"(api)/./src/lib/constants.ts\");\n\nclass AppError extends Error {\n    constructor(message, code = _constants__WEBPACK_IMPORTED_MODULE_0__.ERROR_CODES.INTERNAL_SERVER_ERROR, statusCode = _constants__WEBPACK_IMPORTED_MODULE_0__.HTTP_STATUS.INTERNAL_SERVER_ERROR, isOperational = true, context){\n        super(message);\n        this.name = this.constructor.name;\n        this.code = code;\n        this.statusCode = statusCode;\n        this.isOperational = isOperational;\n        this.context = context;\n        Error.captureStackTrace(this, this.constructor);\n    }\n}\n// Specific error classes\nclass ValidationError extends AppError {\n    constructor(message, field, context){\n        super(message, _constants__WEBPACK_IMPORTED_MODULE_0__.ERROR_CODES.VALIDATION_ERROR, _constants__WEBPACK_IMPORTED_MODULE_0__.HTTP_STATUS.BAD_REQUEST, true, {\n            field,\n            ...context\n        });\n    }\n}\nclass AuthenticationError extends AppError {\n    constructor(message = \"Authentication failed\", context){\n        super(message, _constants__WEBPACK_IMPORTED_MODULE_0__.ERROR_CODES.UNAUTHORIZED, _constants__WEBPACK_IMPORTED_MODULE_0__.HTTP_STATUS.UNAUTHORIZED, true, context);\n    }\n}\nclass AuthorizationError extends AppError {\n    constructor(message = \"Access forbidden\", context){\n        super(message, _constants__WEBPACK_IMPORTED_MODULE_0__.ERROR_CODES.RESOURCE_FORBIDDEN, _constants__WEBPACK_IMPORTED_MODULE_0__.HTTP_STATUS.FORBIDDEN, true, context);\n    }\n}\nclass NotFoundError extends AppError {\n    constructor(resource = \"Resource\", context){\n        super(`${resource} not found`, _constants__WEBPACK_IMPORTED_MODULE_0__.ERROR_CODES.RESOURCE_NOT_FOUND, _constants__WEBPACK_IMPORTED_MODULE_0__.HTTP_STATUS.NOT_FOUND, true, context);\n    }\n}\nclass ConflictError extends AppError {\n    constructor(message, context){\n        super(message, _constants__WEBPACK_IMPORTED_MODULE_0__.ERROR_CODES.RESOURCE_ALREADY_EXISTS, _constants__WEBPACK_IMPORTED_MODULE_0__.HTTP_STATUS.CONFLICT, true, context);\n    }\n}\nclass DatabaseError extends AppError {\n    constructor(message, context){\n        super(message, _constants__WEBPACK_IMPORTED_MODULE_0__.ERROR_CODES.DATABASE_ERROR, _constants__WEBPACK_IMPORTED_MODULE_0__.HTTP_STATUS.INTERNAL_SERVER_ERROR, true, context);\n    }\n}\nclass ExternalServiceError extends AppError {\n    constructor(service, message, context){\n        super(`External service error (${service}): ${message}`, _constants__WEBPACK_IMPORTED_MODULE_0__.ERROR_CODES.EXTERNAL_SERVICE_ERROR, _constants__WEBPACK_IMPORTED_MODULE_0__.HTTP_STATUS.BAD_GATEWAY, true, context);\n    }\n}\nclass RateLimitError extends AppError {\n    constructor(message = \"Rate limit exceeded\", context){\n        super(message, _constants__WEBPACK_IMPORTED_MODULE_0__.ERROR_CODES.RATE_LIMIT_EXCEEDED, _constants__WEBPACK_IMPORTED_MODULE_0__.HTTP_STATUS.TOO_MANY_REQUESTS, true, context);\n    }\n}\n// Error factory functions\nfunction createValidationError(field, message, value) {\n    return new ValidationError(message, field, {\n        value\n    });\n}\nfunction createNotFoundError(resource, id) {\n    return new NotFoundError(resource, {\n        id\n    });\n}\nfunction createConflictError(resource, field, value) {\n    return new ConflictError(`${resource} with ${field} '${value}' already exists`, {\n        resource,\n        field,\n        value\n    });\n}\n// Error handling utilities\nfunction isAppError(error) {\n    return error instanceof AppError;\n}\nfunction isOperationalError(error) {\n    if (isAppError(error)) {\n        return error.isOperational;\n    }\n    return false;\n}\nfunction extractErrorMessage(error) {\n    if (error instanceof Error) {\n        return error.message;\n    }\n    if (typeof error === \"string\") {\n        return error;\n    }\n    return \"An unknown error occurred\";\n}\nfunction extractErrorCode(error) {\n    if (isAppError(error)) {\n        return error.code;\n    }\n    return _constants__WEBPACK_IMPORTED_MODULE_0__.ERROR_CODES.INTERNAL_SERVER_ERROR;\n}\nfunction extractStatusCode(error) {\n    if (isAppError(error)) {\n        return error.statusCode;\n    }\n    return _constants__WEBPACK_IMPORTED_MODULE_0__.HTTP_STATUS.INTERNAL_SERVER_ERROR;\n}\nfunction serializeError(error, includeStack = false) {\n    const serialized = {\n        message: extractErrorMessage(error),\n        code: extractErrorCode(error),\n        statusCode: extractStatusCode(error)\n    };\n    if (isAppError(error) && error.context) {\n        serialized.context = error.context;\n    }\n    if (includeStack && error instanceof Error) {\n        serialized.stack = error.stack;\n    }\n    return serialized;\n}\n// Async error wrapper\nfunction asyncWrapper(fn) {\n    return async (...args)=>{\n        try {\n            return await fn(...args);\n        } catch (error) {\n            if (isOperationalError(error)) {\n                throw error;\n            }\n            // Convert non-operational errors to operational ones\n            throw new AppError(extractErrorMessage(error), _constants__WEBPACK_IMPORTED_MODULE_0__.ERROR_CODES.INTERNAL_SERVER_ERROR, _constants__WEBPACK_IMPORTED_MODULE_0__.HTTP_STATUS.INTERNAL_SERVER_ERROR, false, {\n                originalError: error\n            });\n        }\n    };\n}\n// Promise error handler\nfunction handlePromiseRejection(promise) {\n    return promise.catch((error)=>{\n        if (!isOperationalError(error)) {\n            // Log unexpected errors\n            console.error(\"Unhandled promise rejection:\", error);\n        }\n        throw error;\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QkFBcUI7QUFDMUM7QUFXTyxTQUFTMEMsZUFBZUwsS0FBVSxFQUFFTSxlQUF3QixLQUFLO0lBQ3RFLE1BQU1DLGFBQThCO1FBQ2xDOUMsU0FBU3lDLG9CQUFvQkY7UUFDN0J0QyxNQUFNeUMsaUJBQWlCSDtRQUN2QnBDLFlBQVl3QyxrQkFBa0JKO0lBQ2hDO0lBRUEsSUFBSUQsV0FBV0MsVUFBVUEsTUFBTWxDLE9BQU8sRUFBRTtRQUN0Q3lDLFdBQVd6QyxPQUFPLEdBQUdrQyxNQUFNbEMsT0FBTztJQUNwQztJQUVBLElBQUl3QyxnQkFBZ0JOLGlCQUFpQnpDLE9BQU87UUFDMUNnRCxXQUFXQyxLQUFLLEdBQUdSLE1BQU1RLEtBQUs7SUFDaEM7SUFFQSxPQUFPRDtBQUNUO0FBRUEsc0JBQXNCO0FBQ2YsU0FBU0UsYUFDZEMsRUFBOEI7SUFFOUIsT0FBTyxPQUFPLEdBQUdDO1FBQ2YsSUFBSTtZQUNGLE9BQU8sTUFBTUQsTUFBTUM7UUFDckIsRUFBRSxPQUFPWCxPQUFPO1lBQ2QsSUFBSUMsbUJBQW1CRCxRQUFRO2dCQUM3QixNQUFNQTtZQUNSO1lBRUEscURBQXFEO1lBQ3JELE1BQU0sSUFBSTFDLFNBQ1I0QyxvQkFBb0JGLFFBQ3BCNUMsbURBQVdBLENBQUNPLHFCQUFxQixFQUNqQ04sbURBQVdBLENBQUNNLHFCQUFxQixFQUNqQyxPQUNBO2dCQUFFaUQsZUFBZVo7WUFBTTtRQUUzQjtJQUNGO0FBQ0Y7QUFFQSx3QkFBd0I7QUFDakIsU0FBU2EsdUJBQXVCQyxPQUFxQjtJQUMxRCxPQUFPQSxRQUFRQyxLQUFLLENBQUMsQ0FBQ2Y7UUFDcEIsSUFBSSxDQUFDQyxtQkFBbUJELFFBQVE7WUFDOUIsd0JBQXdCO1lBQ3hCZ0IsUUFBUWhCLEtBQUssQ0FBQyxnQ0FBZ0NBO1FBQ2hEO1FBQ0EsTUFBTUE7SUFDUjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcmF0ZW15LW5leHRqcy8uL3NyYy9saWIvZXJyb3JzLnRzPzQ1MWEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRVJST1JfQ09ERVMsIEhUVFBfU1RBVFVTIH0gZnJvbSAnLi9jb25zdGFudHMnXG5cbmV4cG9ydCBjbGFzcyBBcHBFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgcHVibGljIHJlYWRvbmx5IGNvZGU6IHN0cmluZ1xuICBwdWJsaWMgcmVhZG9ubHkgc3RhdHVzQ29kZTogbnVtYmVyXG4gIHB1YmxpYyByZWFkb25seSBpc09wZXJhdGlvbmFsOiBib29sZWFuXG4gIHB1YmxpYyByZWFkb25seSBjb250ZXh0PzogYW55XG5cbiAgY29uc3RydWN0b3IoXG4gICAgbWVzc2FnZTogc3RyaW5nLFxuICAgIGNvZGU6IHN0cmluZyA9IEVSUk9SX0NPREVTLklOVEVSTkFMX1NFUlZFUl9FUlJPUixcbiAgICBzdGF0dXNDb2RlOiBudW1iZXIgPSBIVFRQX1NUQVRVUy5JTlRFUk5BTF9TRVJWRVJfRVJST1IsXG4gICAgaXNPcGVyYXRpb25hbDogYm9vbGVhbiA9IHRydWUsXG4gICAgY29udGV4dD86IGFueVxuICApIHtcbiAgICBzdXBlcihtZXNzYWdlKVxuICAgIFxuICAgIHRoaXMubmFtZSA9IHRoaXMuY29uc3RydWN0b3IubmFtZVxuICAgIHRoaXMuY29kZSA9IGNvZGVcbiAgICB0aGlzLnN0YXR1c0NvZGUgPSBzdGF0dXNDb2RlXG4gICAgdGhpcy5pc09wZXJhdGlvbmFsID0gaXNPcGVyYXRpb25hbFxuICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHRcblxuICAgIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsIHRoaXMuY29uc3RydWN0b3IpXG4gIH1cbn1cblxuLy8gU3BlY2lmaWMgZXJyb3IgY2xhc3Nlc1xuZXhwb3J0IGNsYXNzIFZhbGlkYXRpb25FcnJvciBleHRlbmRzIEFwcEVycm9yIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nLCBmaWVsZD86IHN0cmluZywgY29udGV4dD86IGFueSkge1xuICAgIHN1cGVyKFxuICAgICAgbWVzc2FnZSxcbiAgICAgIEVSUk9SX0NPREVTLlZBTElEQVRJT05fRVJST1IsXG4gICAgICBIVFRQX1NUQVRVUy5CQURfUkVRVUVTVCxcbiAgICAgIHRydWUsXG4gICAgICB7IGZpZWxkLCAuLi5jb250ZXh0IH1cbiAgICApXG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEF1dGhlbnRpY2F0aW9uRXJyb3IgZXh0ZW5kcyBBcHBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2U6IHN0cmluZyA9ICdBdXRoZW50aWNhdGlvbiBmYWlsZWQnLCBjb250ZXh0PzogYW55KSB7XG4gICAgc3VwZXIoXG4gICAgICBtZXNzYWdlLFxuICAgICAgRVJST1JfQ09ERVMuVU5BVVRIT1JJWkVELFxuICAgICAgSFRUUF9TVEFUVVMuVU5BVVRIT1JJWkVELFxuICAgICAgdHJ1ZSxcbiAgICAgIGNvbnRleHRcbiAgICApXG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEF1dGhvcml6YXRpb25FcnJvciBleHRlbmRzIEFwcEVycm9yIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nID0gJ0FjY2VzcyBmb3JiaWRkZW4nLCBjb250ZXh0PzogYW55KSB7XG4gICAgc3VwZXIoXG4gICAgICBtZXNzYWdlLFxuICAgICAgRVJST1JfQ09ERVMuUkVTT1VSQ0VfRk9SQklEREVOLFxuICAgICAgSFRUUF9TVEFUVVMuRk9SQklEREVOLFxuICAgICAgdHJ1ZSxcbiAgICAgIGNvbnRleHRcbiAgICApXG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIE5vdEZvdW5kRXJyb3IgZXh0ZW5kcyBBcHBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKHJlc291cmNlOiBzdHJpbmcgPSAnUmVzb3VyY2UnLCBjb250ZXh0PzogYW55KSB7XG4gICAgc3VwZXIoXG4gICAgICBgJHtyZXNvdXJjZX0gbm90IGZvdW5kYCxcbiAgICAgIEVSUk9SX0NPREVTLlJFU09VUkNFX05PVF9GT1VORCxcbiAgICAgIEhUVFBfU1RBVFVTLk5PVF9GT1VORCxcbiAgICAgIHRydWUsXG4gICAgICBjb250ZXh0XG4gICAgKVxuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBDb25mbGljdEVycm9yIGV4dGVuZHMgQXBwRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihtZXNzYWdlOiBzdHJpbmcsIGNvbnRleHQ/OiBhbnkpIHtcbiAgICBzdXBlcihcbiAgICAgIG1lc3NhZ2UsXG4gICAgICBFUlJPUl9DT0RFUy5SRVNPVVJDRV9BTFJFQURZX0VYSVNUUyxcbiAgICAgIEhUVFBfU1RBVFVTLkNPTkZMSUNULFxuICAgICAgdHJ1ZSxcbiAgICAgIGNvbnRleHRcbiAgICApXG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIERhdGFiYXNlRXJyb3IgZXh0ZW5kcyBBcHBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2U6IHN0cmluZywgY29udGV4dD86IGFueSkge1xuICAgIHN1cGVyKFxuICAgICAgbWVzc2FnZSxcbiAgICAgIEVSUk9SX0NPREVTLkRBVEFCQVNFX0VSUk9SLFxuICAgICAgSFRUUF9TVEFUVVMuSU5URVJOQUxfU0VSVkVSX0VSUk9SLFxuICAgICAgdHJ1ZSxcbiAgICAgIGNvbnRleHRcbiAgICApXG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEV4dGVybmFsU2VydmljZUVycm9yIGV4dGVuZHMgQXBwRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihzZXJ2aWNlOiBzdHJpbmcsIG1lc3NhZ2U6IHN0cmluZywgY29udGV4dD86IGFueSkge1xuICAgIHN1cGVyKFxuICAgICAgYEV4dGVybmFsIHNlcnZpY2UgZXJyb3IgKCR7c2VydmljZX0pOiAke21lc3NhZ2V9YCxcbiAgICAgIEVSUk9SX0NPREVTLkVYVEVSTkFMX1NFUlZJQ0VfRVJST1IsXG4gICAgICBIVFRQX1NUQVRVUy5CQURfR0FURVdBWSxcbiAgICAgIHRydWUsXG4gICAgICBjb250ZXh0XG4gICAgKVxuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBSYXRlTGltaXRFcnJvciBleHRlbmRzIEFwcEVycm9yIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nID0gJ1JhdGUgbGltaXQgZXhjZWVkZWQnLCBjb250ZXh0PzogYW55KSB7XG4gICAgc3VwZXIoXG4gICAgICBtZXNzYWdlLFxuICAgICAgRVJST1JfQ09ERVMuUkFURV9MSU1JVF9FWENFRURFRCxcbiAgICAgIEhUVFBfU1RBVFVTLlRPT19NQU5ZX1JFUVVFU1RTLFxuICAgICAgdHJ1ZSxcbiAgICAgIGNvbnRleHRcbiAgICApXG4gIH1cbn1cblxuLy8gRXJyb3IgZmFjdG9yeSBmdW5jdGlvbnNcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVWYWxpZGF0aW9uRXJyb3IoZmllbGQ6IHN0cmluZywgbWVzc2FnZTogc3RyaW5nLCB2YWx1ZT86IGFueSk6IFZhbGlkYXRpb25FcnJvciB7XG4gIHJldHVybiBuZXcgVmFsaWRhdGlvbkVycm9yKG1lc3NhZ2UsIGZpZWxkLCB7IHZhbHVlIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVOb3RGb3VuZEVycm9yKHJlc291cmNlOiBzdHJpbmcsIGlkPzogc3RyaW5nKTogTm90Rm91bmRFcnJvciB7XG4gIHJldHVybiBuZXcgTm90Rm91bmRFcnJvcihyZXNvdXJjZSwgeyBpZCB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQ29uZmxpY3RFcnJvcihyZXNvdXJjZTogc3RyaW5nLCBmaWVsZDogc3RyaW5nLCB2YWx1ZTogYW55KTogQ29uZmxpY3RFcnJvciB7XG4gIHJldHVybiBuZXcgQ29uZmxpY3RFcnJvcihcbiAgICBgJHtyZXNvdXJjZX0gd2l0aCAke2ZpZWxkfSAnJHt2YWx1ZX0nIGFscmVhZHkgZXhpc3RzYCxcbiAgICB7IHJlc291cmNlLCBmaWVsZCwgdmFsdWUgfVxuICApXG59XG5cbi8vIEVycm9yIGhhbmRsaW5nIHV0aWxpdGllc1xuZXhwb3J0IGZ1bmN0aW9uIGlzQXBwRXJyb3IoZXJyb3I6IGFueSk6IGVycm9yIGlzIEFwcEVycm9yIHtcbiAgcmV0dXJuIGVycm9yIGluc3RhbmNlb2YgQXBwRXJyb3Jcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzT3BlcmF0aW9uYWxFcnJvcihlcnJvcjogYW55KTogYm9vbGVhbiB7XG4gIGlmIChpc0FwcEVycm9yKGVycm9yKSkge1xuICAgIHJldHVybiBlcnJvci5pc09wZXJhdGlvbmFsXG4gIH1cbiAgcmV0dXJuIGZhbHNlXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBleHRyYWN0RXJyb3JNZXNzYWdlKGVycm9yOiBhbnkpOiBzdHJpbmcge1xuICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgIHJldHVybiBlcnJvci5tZXNzYWdlXG4gIH1cbiAgaWYgKHR5cGVvZiBlcnJvciA9PT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gZXJyb3JcbiAgfVxuICByZXR1cm4gJ0FuIHVua25vd24gZXJyb3Igb2NjdXJyZWQnXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBleHRyYWN0RXJyb3JDb2RlKGVycm9yOiBhbnkpOiBzdHJpbmcge1xuICBpZiAoaXNBcHBFcnJvcihlcnJvcikpIHtcbiAgICByZXR1cm4gZXJyb3IuY29kZVxuICB9XG4gIHJldHVybiBFUlJPUl9DT0RFUy5JTlRFUk5BTF9TRVJWRVJfRVJST1Jcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGV4dHJhY3RTdGF0dXNDb2RlKGVycm9yOiBhbnkpOiBudW1iZXIge1xuICBpZiAoaXNBcHBFcnJvcihlcnJvcikpIHtcbiAgICByZXR1cm4gZXJyb3Iuc3RhdHVzQ29kZVxuICB9XG4gIHJldHVybiBIVFRQX1NUQVRVUy5JTlRFUk5BTF9TRVJWRVJfRVJST1Jcbn1cblxuLy8gRXJyb3Igc2VyaWFsaXphdGlvblxuZXhwb3J0IGludGVyZmFjZSBTZXJpYWxpemVkRXJyb3Ige1xuICBtZXNzYWdlOiBzdHJpbmdcbiAgY29kZTogc3RyaW5nXG4gIHN0YXR1c0NvZGU6IG51bWJlclxuICBjb250ZXh0PzogYW55XG4gIHN0YWNrPzogc3RyaW5nXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXJpYWxpemVFcnJvcihlcnJvcjogYW55LCBpbmNsdWRlU3RhY2s6IGJvb2xlYW4gPSBmYWxzZSk6IFNlcmlhbGl6ZWRFcnJvciB7XG4gIGNvbnN0IHNlcmlhbGl6ZWQ6IFNlcmlhbGl6ZWRFcnJvciA9IHtcbiAgICBtZXNzYWdlOiBleHRyYWN0RXJyb3JNZXNzYWdlKGVycm9yKSxcbiAgICBjb2RlOiBleHRyYWN0RXJyb3JDb2RlKGVycm9yKSxcbiAgICBzdGF0dXNDb2RlOiBleHRyYWN0U3RhdHVzQ29kZShlcnJvciksXG4gIH1cblxuICBpZiAoaXNBcHBFcnJvcihlcnJvcikgJiYgZXJyb3IuY29udGV4dCkge1xuICAgIHNlcmlhbGl6ZWQuY29udGV4dCA9IGVycm9yLmNvbnRleHRcbiAgfVxuXG4gIGlmIChpbmNsdWRlU3RhY2sgJiYgZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgIHNlcmlhbGl6ZWQuc3RhY2sgPSBlcnJvci5zdGFja1xuICB9XG5cbiAgcmV0dXJuIHNlcmlhbGl6ZWRcbn1cblxuLy8gQXN5bmMgZXJyb3Igd3JhcHBlclxuZXhwb3J0IGZ1bmN0aW9uIGFzeW5jV3JhcHBlcjxUIGV4dGVuZHMgYW55W10sIFI+KFxuICBmbjogKC4uLmFyZ3M6IFQpID0+IFByb21pc2U8Uj5cbikge1xuICByZXR1cm4gYXN5bmMgKC4uLmFyZ3M6IFQpOiBQcm9taXNlPFI+ID0+IHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGF3YWl0IGZuKC4uLmFyZ3MpXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGlmIChpc09wZXJhdGlvbmFsRXJyb3IoZXJyb3IpKSB7XG4gICAgICAgIHRocm93IGVycm9yXG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIENvbnZlcnQgbm9uLW9wZXJhdGlvbmFsIGVycm9ycyB0byBvcGVyYXRpb25hbCBvbmVzXG4gICAgICB0aHJvdyBuZXcgQXBwRXJyb3IoXG4gICAgICAgIGV4dHJhY3RFcnJvck1lc3NhZ2UoZXJyb3IpLFxuICAgICAgICBFUlJPUl9DT0RFUy5JTlRFUk5BTF9TRVJWRVJfRVJST1IsXG4gICAgICAgIEhUVFBfU1RBVFVTLklOVEVSTkFMX1NFUlZFUl9FUlJPUixcbiAgICAgICAgZmFsc2UsXG4gICAgICAgIHsgb3JpZ2luYWxFcnJvcjogZXJyb3IgfVxuICAgICAgKVxuICAgIH1cbiAgfVxufVxuXG4vLyBQcm9taXNlIGVycm9yIGhhbmRsZXJcbmV4cG9ydCBmdW5jdGlvbiBoYW5kbGVQcm9taXNlUmVqZWN0aW9uKHByb21pc2U6IFByb21pc2U8YW55Pik6IFByb21pc2U8YW55PiB7XG4gIHJldHVybiBwcm9taXNlLmNhdGNoKChlcnJvcikgPT4ge1xuICAgIGlmICghaXNPcGVyYXRpb25hbEVycm9yKGVycm9yKSkge1xuICAgICAgLy8gTG9nIHVuZXhwZWN0ZWQgZXJyb3JzXG4gICAgICBjb25zb2xlLmVycm9yKCdVbmhhbmRsZWQgcHJvbWlzZSByZWplY3Rpb246JywgZXJyb3IpXG4gICAgfVxuICAgIHRocm93IGVycm9yXG4gIH0pXG59Il0sIm5hbWVzIjpbIkVSUk9SX0NPREVTIiwiSFRUUF9TVEFUVVMiLCJBcHBFcnJvciIsIkVycm9yIiwiY29uc3RydWN0b3IiLCJtZXNzYWdlIiwiY29kZSIsIklOVEVSTkFMX1NFUlZFUl9FUlJPUiIsInN0YXR1c0NvZGUiLCJpc09wZXJhdGlvbmFsIiwiY29udGV4dCIsIm5hbWUiLCJjYXB0dXJlU3RhY2tUcmFjZSIsIlZhbGlkYXRpb25FcnJvciIsImZpZWxkIiwiVkFMSURBVElPTl9FUlJPUiIsIkJBRF9SRVFVRVNUIiwiQXV0aGVudGljYXRpb25FcnJvciIsIlVOQVVUSE9SSVpFRCIsIkF1dGhvcml6YXRpb25FcnJvciIsIlJFU09VUkNFX0ZPUkJJRERFTiIsIkZPUkJJRERFTiIsIk5vdEZvdW5kRXJyb3IiLCJyZXNvdXJjZSIsIlJFU09VUkNFX05PVF9GT1VORCIsIk5PVF9GT1VORCIsIkNvbmZsaWN0RXJyb3IiLCJSRVNPVVJDRV9BTFJFQURZX0VYSVNUUyIsIkNPTkZMSUNUIiwiRGF0YWJhc2VFcnJvciIsIkRBVEFCQVNFX0VSUk9SIiwiRXh0ZXJuYWxTZXJ2aWNlRXJyb3IiLCJzZXJ2aWNlIiwiRVhURVJOQUxfU0VSVklDRV9FUlJPUiIsIkJBRF9HQVRFV0FZIiwiUmF0ZUxpbWl0RXJyb3IiLCJSQVRFX0xJTUlUX0VYQ0VFREVEIiwiVE9PX01BTllfUkVRVUVTVFMiLCJjcmVhdGVWYWxpZGF0aW9uRXJyb3IiLCJ2YWx1ZSIsImNyZWF0ZU5vdEZvdW5kRXJyb3IiLCJpZCIsImNyZWF0ZUNvbmZsaWN0RXJyb3IiLCJpc0FwcEVycm9yIiwiZXJyb3IiLCJpc09wZXJhdGlvbmFsRXJyb3IiLCJleHRyYWN0RXJyb3JNZXNzYWdlIiwiZXh0cmFjdEVycm9yQ29kZSIsImV4dHJhY3RTdGF0dXNDb2RlIiwic2VyaWFsaXplRXJyb3IiLCJpbmNsdWRlU3RhY2siLCJzZXJpYWxpemVkIiwic3RhY2siLCJhc3luY1dyYXBwZXIiLCJmbiIsImFyZ3MiLCJvcmlnaW5hbEVycm9yIiwiaGFuZGxlUHJvbWlzZVJlamVjdGlvbiIsInByb21pc2UiLCJjYXRjaCIsImNvbnNvbGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/lib/errors.ts\n");

/***/ }),

/***/ "(api)/./src/lib/logger.ts":
/*!***************************!*\
  !*** ./src/lib/logger.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LogLevel: () => (/* binding */ LogLevel),\n/* harmony export */   logApiError: () => (/* binding */ logApiError),\n/* harmony export */   logApiRequest: () => (/* binding */ logApiRequest),\n/* harmony export */   logDatabaseConnection: () => (/* binding */ logDatabaseConnection),\n/* harmony export */   logDatabaseQuery: () => (/* binding */ logDatabaseQuery),\n/* harmony export */   logError: () => (/* binding */ logError),\n/* harmony export */   logHealthCheck: () => (/* binding */ logHealthCheck),\n/* harmony export */   logNetworkInfo: () => (/* binding */ logNetworkInfo),\n/* harmony export */   logStartup: () => (/* binding */ logStartup),\n/* harmony export */   logSystemEvent: () => (/* binding */ logSystemEvent),\n/* harmony export */   logUserAction: () => (/* binding */ logUserAction),\n/* harmony export */   logger: () => (/* binding */ logger)\n/* harmony export */ });\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./config */ \"(api)/./src/lib/config.ts\");\n\nvar LogLevel;\n(function(LogLevel) {\n    LogLevel[LogLevel[\"ERROR\"] = 0] = \"ERROR\";\n    LogLevel[LogLevel[\"WARN\"] = 1] = \"WARN\";\n    LogLevel[LogLevel[\"INFO\"] = 2] = \"INFO\";\n    LogLevel[LogLevel[\"DEBUG\"] = 3] = \"DEBUG\";\n})(LogLevel || (LogLevel = {}));\nclass ConsoleLogger {\n    constructor(level){\n        this.level = this.parseLogLevel(level);\n    }\n    parseLogLevel(level) {\n        switch(level.toLowerCase()){\n            case \"error\":\n                return 0;\n            case \"warn\":\n                return 1;\n            case \"info\":\n                return 2;\n            case \"debug\":\n                return 3;\n            default:\n                return 2;\n        }\n    }\n    shouldLog(level) {\n        return level <= this.level;\n    }\n    formatMessage(level, message, context) {\n        const timestamp = new Date().toISOString();\n        const baseMessage = `[${timestamp}] ${level.toUpperCase()}: ${message}`;\n        if (context && Object.keys(context).length > 0) {\n            if (_config__WEBPACK_IMPORTED_MODULE_0__.config.logging.pretty) {\n                return `${baseMessage}\\n${JSON.stringify(context, null, 2)}`;\n            } else {\n                return `${baseMessage} ${JSON.stringify(context)}`;\n            }\n        }\n        return baseMessage;\n    }\n    error(message, context) {\n        if (this.shouldLog(0)) {\n            console.error(this.formatMessage(\"error\", message, context));\n        }\n    }\n    warn(message, context) {\n        if (this.shouldLog(1)) {\n            console.warn(this.formatMessage(\"warn\", message, context));\n        }\n    }\n    info(message, context) {\n        if (this.shouldLog(2)) {\n            console.info(this.formatMessage(\"info\", message, context));\n        }\n    }\n    debug(message, context) {\n        if (this.shouldLog(3)) {\n            console.debug(this.formatMessage(\"debug\", message, context));\n        }\n    }\n}\n// Create singleton logger instance\nconst logger = new ConsoleLogger(_config__WEBPACK_IMPORTED_MODULE_0__.config.logging.level);\n// Utility functions for structured logging\nfunction logError(error, context) {\n    logger.error(error.message, {\n        ...context,\n        stack: error.stack,\n        name: error.name\n    });\n}\nfunction logApiRequest(method, url, userId, duration) {\n    logger.info(\"API Request\", {\n        method,\n        url,\n        userId,\n        duration: duration ? `${duration}ms` : undefined\n    });\n}\nfunction logApiError(method, url, error, userId) {\n    logger.error(\"API Error\", {\n        method,\n        url,\n        userId,\n        error: error.message,\n        stack: error.stack\n    });\n}\nfunction logDatabaseQuery(query, duration, error) {\n    if (error) {\n        logger.error(\"Database Query Error\", {\n            query,\n            duration: duration ? `${duration}ms` : undefined,\n            error: error.message\n        });\n    } else {\n        logger.debug(\"Database Query\", {\n            query,\n            duration: duration ? `${duration}ms` : undefined\n        });\n    }\n}\nfunction logUserAction(action, userId, context) {\n    logger.info(\"User Action\", {\n        action,\n        userId,\n        ...context\n    });\n}\nfunction logSystemEvent(event, context) {\n    logger.info(\"System Event\", {\n        event,\n        ...context\n    });\n}\nfunction logStartup(component, status, context) {\n    const level = status === \"failed\" ? \"error\" : \"info\";\n    logger[level](`🚀 ${component} ${status.toUpperCase()}`, {\n        component,\n        status,\n        timestamp: new Date().toISOString(),\n        ...context\n    });\n}\nfunction logHealthCheck(component, healthy, context) {\n    const status = healthy ? \"healthy\" : \"unhealthy\";\n    const level = healthy ? \"info\" : \"error\";\n    logger[level](`💚 Health Check: ${component} is ${status}`, {\n        component,\n        healthy,\n        ...context\n    });\n}\nfunction logNetworkInfo(port, host = \"localhost\", context) {\n    logger.info(\"\\uD83C\\uDF10 Server Network Configuration\", {\n        port,\n        host,\n        url: `http://${host}:${port}`,\n        ...context\n    });\n}\nfunction logDatabaseConnection(status, context) {\n    const level = status === \"failed\" ? \"error\" : \"info\";\n    const emoji = status === \"connected\" ? \"✅\" : status === \"connecting\" ? \"\\uD83D\\uDD04\" : \"❌\";\n    logger[level](`${emoji} Database ${status.toUpperCase()}`, {\n        status,\n        ...context\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SUFDWjtBQUNGO0FBRU8sU0FBU3NDLGVBQWVGLFNBQWlCLEVBQUVHLE9BQWdCLEVBQUV2QyxPQUFvQjtJQUN0RixNQUFNcUMsU0FBU0UsVUFBVSxZQUFZO0lBQ3JDLE1BQU03QyxRQUFRNkMsVUFBVSxTQUFTO0lBQ2pDckIsTUFBTSxDQUFDeEIsTUFBTSxDQUFDLENBQUMsaUJBQWlCLEVBQUUwQyxVQUFVLElBQUksRUFBRUMsT0FBTyxDQUFDLEVBQUU7UUFDMUREO1FBQ0FHO1FBQ0EsR0FBR3ZDLE9BQU87SUFDWjtBQUNGO0FBRU8sU0FBU3dDLGVBQWVDLElBQVksRUFBRUMsT0FBTyxXQUFXLEVBQUUxQyxPQUFvQjtJQUNuRmtCLE9BQU9GLElBQUksQ0FBQyw2Q0FBbUM7UUFDN0N5QjtRQUNBQztRQUNBbEIsS0FBSyxDQUFDLE9BQU8sRUFBRWtCLEtBQUssQ0FBQyxFQUFFRCxLQUFLLENBQUM7UUFDN0IsR0FBR3pDLE9BQU87SUFDWjtBQUNGO0FBRU8sU0FBUzJDLHNCQUFzQk4sTUFBNkMsRUFBRXJDLE9BQW9CO0lBQ3ZHLE1BQU1OLFFBQVEyQyxXQUFXLFdBQVcsVUFBVTtJQUM5QyxNQUFNTyxRQUFRUCxXQUFXLGNBQWMsTUFBTUEsV0FBVyxlQUFlLGlCQUFPO0lBQzlFbkIsTUFBTSxDQUFDeEIsTUFBTSxDQUFDLENBQUMsRUFBRWtELE1BQU0sVUFBVSxFQUFFUCxPQUFPaEMsV0FBVyxHQUFHLENBQUMsRUFBRTtRQUN6RGdDO1FBQ0EsR0FBR3JDLE9BQU87SUFDWjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcmF0ZW15LW5leHRqcy8uL3NyYy9saWIvbG9nZ2VyLnRzP2I0OWUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY29uZmlnIH0gZnJvbSAnLi9jb25maWcnXG5cbmV4cG9ydCBlbnVtIExvZ0xldmVsIHtcbiAgRVJST1IgPSAwLFxuICBXQVJOID0gMSxcbiAgSU5GTyA9IDIsXG4gIERFQlVHID0gMyxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBMb2dDb250ZXh0IHtcbiAgW2tleTogc3RyaW5nXTogYW55XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTG9nZ2VyIHtcbiAgZXJyb3IobWVzc2FnZTogc3RyaW5nLCBjb250ZXh0PzogTG9nQ29udGV4dCk6IHZvaWRcbiAgd2FybihtZXNzYWdlOiBzdHJpbmcsIGNvbnRleHQ/OiBMb2dDb250ZXh0KTogdm9pZFxuICBpbmZvKG1lc3NhZ2U6IHN0cmluZywgY29udGV4dD86IExvZ0NvbnRleHQpOiB2b2lkXG4gIGRlYnVnKG1lc3NhZ2U6IHN0cmluZywgY29udGV4dD86IExvZ0NvbnRleHQpOiB2b2lkXG59XG5cbmNsYXNzIENvbnNvbGVMb2dnZXIgaW1wbGVtZW50cyBMb2dnZXIge1xuICBwcml2YXRlIGxldmVsOiBMb2dMZXZlbFxuXG4gIGNvbnN0cnVjdG9yKGxldmVsOiBzdHJpbmcpIHtcbiAgICB0aGlzLmxldmVsID0gdGhpcy5wYXJzZUxvZ0xldmVsKGxldmVsKVxuICB9XG5cbiAgcHJpdmF0ZSBwYXJzZUxvZ0xldmVsKGxldmVsOiBzdHJpbmcpOiBMb2dMZXZlbCB7XG4gICAgc3dpdGNoIChsZXZlbC50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICBjYXNlICdlcnJvcic6IHJldHVybiBMb2dMZXZlbC5FUlJPUlxuICAgICAgY2FzZSAnd2Fybic6IHJldHVybiBMb2dMZXZlbC5XQVJOXG4gICAgICBjYXNlICdpbmZvJzogcmV0dXJuIExvZ0xldmVsLklORk9cbiAgICAgIGNhc2UgJ2RlYnVnJzogcmV0dXJuIExvZ0xldmVsLkRFQlVHXG4gICAgICBkZWZhdWx0OiByZXR1cm4gTG9nTGV2ZWwuSU5GT1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgc2hvdWxkTG9nKGxldmVsOiBMb2dMZXZlbCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBsZXZlbCA8PSB0aGlzLmxldmVsXG4gIH1cblxuICBwcml2YXRlIGZvcm1hdE1lc3NhZ2UobGV2ZWw6IHN0cmluZywgbWVzc2FnZTogc3RyaW5nLCBjb250ZXh0PzogTG9nQ29udGV4dCk6IHN0cmluZyB7XG4gICAgY29uc3QgdGltZXN0YW1wID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgY29uc3QgYmFzZU1lc3NhZ2UgPSBgWyR7dGltZXN0YW1wfV0gJHtsZXZlbC50b1VwcGVyQ2FzZSgpfTogJHttZXNzYWdlfWBcbiAgICBcbiAgICBpZiAoY29udGV4dCAmJiBPYmplY3Qua2V5cyhjb250ZXh0KS5sZW5ndGggPiAwKSB7XG4gICAgICBpZiAoY29uZmlnLmxvZ2dpbmcucHJldHR5KSB7XG4gICAgICAgIHJldHVybiBgJHtiYXNlTWVzc2FnZX1cXG4ke0pTT04uc3RyaW5naWZ5KGNvbnRleHQsIG51bGwsIDIpfWBcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBgJHtiYXNlTWVzc2FnZX0gJHtKU09OLnN0cmluZ2lmeShjb250ZXh0KX1gXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBiYXNlTWVzc2FnZVxuICB9XG5cbiAgZXJyb3IobWVzc2FnZTogc3RyaW5nLCBjb250ZXh0PzogTG9nQ29udGV4dCk6IHZvaWQge1xuICAgIGlmICh0aGlzLnNob3VsZExvZyhMb2dMZXZlbC5FUlJPUikpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IodGhpcy5mb3JtYXRNZXNzYWdlKCdlcnJvcicsIG1lc3NhZ2UsIGNvbnRleHQpKVxuICAgIH1cbiAgfVxuXG4gIHdhcm4obWVzc2FnZTogc3RyaW5nLCBjb250ZXh0PzogTG9nQ29udGV4dCk6IHZvaWQge1xuICAgIGlmICh0aGlzLnNob3VsZExvZyhMb2dMZXZlbC5XQVJOKSkge1xuICAgICAgY29uc29sZS53YXJuKHRoaXMuZm9ybWF0TWVzc2FnZSgnd2FybicsIG1lc3NhZ2UsIGNvbnRleHQpKVxuICAgIH1cbiAgfVxuXG4gIGluZm8obWVzc2FnZTogc3RyaW5nLCBjb250ZXh0PzogTG9nQ29udGV4dCk6IHZvaWQge1xuICAgIGlmICh0aGlzLnNob3VsZExvZyhMb2dMZXZlbC5JTkZPKSkge1xuICAgICAgY29uc29sZS5pbmZvKHRoaXMuZm9ybWF0TWVzc2FnZSgnaW5mbycsIG1lc3NhZ2UsIGNvbnRleHQpKVxuICAgIH1cbiAgfVxuXG4gIGRlYnVnKG1lc3NhZ2U6IHN0cmluZywgY29udGV4dD86IExvZ0NvbnRleHQpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5zaG91bGRMb2coTG9nTGV2ZWwuREVCVUcpKSB7XG4gICAgICBjb25zb2xlLmRlYnVnKHRoaXMuZm9ybWF0TWVzc2FnZSgnZGVidWcnLCBtZXNzYWdlLCBjb250ZXh0KSlcbiAgICB9XG4gIH1cbn1cblxuLy8gQ3JlYXRlIHNpbmdsZXRvbiBsb2dnZXIgaW5zdGFuY2VcbmV4cG9ydCBjb25zdCBsb2dnZXI6IExvZ2dlciA9IG5ldyBDb25zb2xlTG9nZ2VyKGNvbmZpZy5sb2dnaW5nLmxldmVsKVxuXG4vLyBVdGlsaXR5IGZ1bmN0aW9ucyBmb3Igc3RydWN0dXJlZCBsb2dnaW5nXG5leHBvcnQgZnVuY3Rpb24gbG9nRXJyb3IoZXJyb3I6IEVycm9yLCBjb250ZXh0PzogTG9nQ29udGV4dCkge1xuICBsb2dnZXIuZXJyb3IoZXJyb3IubWVzc2FnZSwge1xuICAgIC4uLmNvbnRleHQsXG4gICAgc3RhY2s6IGVycm9yLnN0YWNrLFxuICAgIG5hbWU6IGVycm9yLm5hbWUsXG4gIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBsb2dBcGlSZXF1ZXN0KG1ldGhvZDogc3RyaW5nLCB1cmw6IHN0cmluZywgdXNlcklkPzogc3RyaW5nLCBkdXJhdGlvbj86IG51bWJlcikge1xuICBsb2dnZXIuaW5mbygnQVBJIFJlcXVlc3QnLCB7XG4gICAgbWV0aG9kLFxuICAgIHVybCxcbiAgICB1c2VySWQsXG4gICAgZHVyYXRpb246IGR1cmF0aW9uID8gYCR7ZHVyYXRpb259bXNgIDogdW5kZWZpbmVkLFxuICB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gbG9nQXBpRXJyb3IobWV0aG9kOiBzdHJpbmcsIHVybDogc3RyaW5nLCBlcnJvcjogRXJyb3IsIHVzZXJJZD86IHN0cmluZykge1xuICBsb2dnZXIuZXJyb3IoJ0FQSSBFcnJvcicsIHtcbiAgICBtZXRob2QsXG4gICAgdXJsLFxuICAgIHVzZXJJZCxcbiAgICBlcnJvcjogZXJyb3IubWVzc2FnZSxcbiAgICBzdGFjazogZXJyb3Iuc3RhY2ssXG4gIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBsb2dEYXRhYmFzZVF1ZXJ5KHF1ZXJ5OiBzdHJpbmcsIGR1cmF0aW9uPzogbnVtYmVyLCBlcnJvcj86IEVycm9yKSB7XG4gIGlmIChlcnJvcikge1xuICAgIGxvZ2dlci5lcnJvcignRGF0YWJhc2UgUXVlcnkgRXJyb3InLCB7XG4gICAgICBxdWVyeSxcbiAgICAgIGR1cmF0aW9uOiBkdXJhdGlvbiA/IGAke2R1cmF0aW9ufW1zYCA6IHVuZGVmaW5lZCxcbiAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlLFxuICAgIH0pXG4gIH0gZWxzZSB7XG4gICAgbG9nZ2VyLmRlYnVnKCdEYXRhYmFzZSBRdWVyeScsIHtcbiAgICAgIHF1ZXJ5LFxuICAgICAgZHVyYXRpb246IGR1cmF0aW9uID8gYCR7ZHVyYXRpb259bXNgIDogdW5kZWZpbmVkLFxuICAgIH0pXG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGxvZ1VzZXJBY3Rpb24oYWN0aW9uOiBzdHJpbmcsIHVzZXJJZDogc3RyaW5nLCBjb250ZXh0PzogTG9nQ29udGV4dCkge1xuICBsb2dnZXIuaW5mbygnVXNlciBBY3Rpb24nLCB7XG4gICAgYWN0aW9uLFxuICAgIHVzZXJJZCxcbiAgICAuLi5jb250ZXh0LFxuICB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gbG9nU3lzdGVtRXZlbnQoZXZlbnQ6IHN0cmluZywgY29udGV4dD86IExvZ0NvbnRleHQpIHtcbiAgbG9nZ2VyLmluZm8oJ1N5c3RlbSBFdmVudCcsIHtcbiAgICBldmVudCxcbiAgICAuLi5jb250ZXh0LFxuICB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gbG9nU3RhcnR1cChjb21wb25lbnQ6IHN0cmluZywgc3RhdHVzOiAnc3RhcnRpbmcnIHwgJ3JlYWR5JyB8ICdmYWlsZWQnLCBjb250ZXh0PzogTG9nQ29udGV4dCkge1xuICBjb25zdCBsZXZlbCA9IHN0YXR1cyA9PT0gJ2ZhaWxlZCcgPyAnZXJyb3InIDogJ2luZm8nXG4gIGxvZ2dlcltsZXZlbF0oYPCfmoAgJHtjb21wb25lbnR9ICR7c3RhdHVzLnRvVXBwZXJDYXNlKCl9YCwge1xuICAgIGNvbXBvbmVudCxcbiAgICBzdGF0dXMsXG4gICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgLi4uY29udGV4dCxcbiAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGxvZ0hlYWx0aENoZWNrKGNvbXBvbmVudDogc3RyaW5nLCBoZWFsdGh5OiBib29sZWFuLCBjb250ZXh0PzogTG9nQ29udGV4dCkge1xuICBjb25zdCBzdGF0dXMgPSBoZWFsdGh5ID8gJ2hlYWx0aHknIDogJ3VuaGVhbHRoeSdcbiAgY29uc3QgbGV2ZWwgPSBoZWFsdGh5ID8gJ2luZm8nIDogJ2Vycm9yJ1xuICBsb2dnZXJbbGV2ZWxdKGDwn5KaIEhlYWx0aCBDaGVjazogJHtjb21wb25lbnR9IGlzICR7c3RhdHVzfWAsIHtcbiAgICBjb21wb25lbnQsXG4gICAgaGVhbHRoeSxcbiAgICAuLi5jb250ZXh0LFxuICB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gbG9nTmV0d29ya0luZm8ocG9ydDogbnVtYmVyLCBob3N0ID0gJ2xvY2FsaG9zdCcsIGNvbnRleHQ/OiBMb2dDb250ZXh0KSB7XG4gIGxvZ2dlci5pbmZvKCfwn4yQIFNlcnZlciBOZXR3b3JrIENvbmZpZ3VyYXRpb24nLCB7XG4gICAgcG9ydCxcbiAgICBob3N0LFxuICAgIHVybDogYGh0dHA6Ly8ke2hvc3R9OiR7cG9ydH1gLFxuICAgIC4uLmNvbnRleHQsXG4gIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBsb2dEYXRhYmFzZUNvbm5lY3Rpb24oc3RhdHVzOiAnY29ubmVjdGluZycgfCAnY29ubmVjdGVkJyB8ICdmYWlsZWQnLCBjb250ZXh0PzogTG9nQ29udGV4dCkge1xuICBjb25zdCBsZXZlbCA9IHN0YXR1cyA9PT0gJ2ZhaWxlZCcgPyAnZXJyb3InIDogJ2luZm8nXG4gIGNvbnN0IGVtb2ppID0gc3RhdHVzID09PSAnY29ubmVjdGVkJyA/ICfinIUnIDogc3RhdHVzID09PSAnY29ubmVjdGluZycgPyAn8J+UhCcgOiAn4p2MJ1xuICBsb2dnZXJbbGV2ZWxdKGAke2Vtb2ppfSBEYXRhYmFzZSAke3N0YXR1cy50b1VwcGVyQ2FzZSgpfWAsIHtcbiAgICBzdGF0dXMsXG4gICAgLi4uY29udGV4dCxcbiAgfSlcbn0iXSwibmFtZXMiOlsiY29uZmlnIiwiTG9nTGV2ZWwiLCJDb25zb2xlTG9nZ2VyIiwiY29uc3RydWN0b3IiLCJsZXZlbCIsInBhcnNlTG9nTGV2ZWwiLCJ0b0xvd2VyQ2FzZSIsInNob3VsZExvZyIsImZvcm1hdE1lc3NhZ2UiLCJtZXNzYWdlIiwiY29udGV4dCIsInRpbWVzdGFtcCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImJhc2VNZXNzYWdlIiwidG9VcHBlckNhc2UiLCJPYmplY3QiLCJrZXlzIiwibGVuZ3RoIiwibG9nZ2luZyIsInByZXR0eSIsIkpTT04iLCJzdHJpbmdpZnkiLCJlcnJvciIsImNvbnNvbGUiLCJ3YXJuIiwiaW5mbyIsImRlYnVnIiwibG9nZ2VyIiwibG9nRXJyb3IiLCJzdGFjayIsIm5hbWUiLCJsb2dBcGlSZXF1ZXN0IiwibWV0aG9kIiwidXJsIiwidXNlcklkIiwiZHVyYXRpb24iLCJ1bmRlZmluZWQiLCJsb2dBcGlFcnJvciIsImxvZ0RhdGFiYXNlUXVlcnkiLCJxdWVyeSIsImxvZ1VzZXJBY3Rpb24iLCJhY3Rpb24iLCJsb2dTeXN0ZW1FdmVudCIsImV2ZW50IiwibG9nU3RhcnR1cCIsImNvbXBvbmVudCIsInN0YXR1cyIsImxvZ0hlYWx0aENoZWNrIiwiaGVhbHRoeSIsImxvZ05ldHdvcmtJbmZvIiwicG9ydCIsImhvc3QiLCJsb2dEYXRhYmFzZUNvbm5lY3Rpb24iLCJlbW9qaSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/lib/logger.ts\n");

/***/ }),

/***/ "(api)/./src/services/reddit.service.ts":
/*!****************************************!*\
  !*** ./src/services/reddit.service.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   redditService: () => (/* binding */ redditService)\n/* harmony export */ });\n/* harmony import */ var _lib_logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/logger */ \"(api)/./src/lib/logger.ts\");\n/* harmony import */ var _lib_errors__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/errors */ \"(api)/./src/lib/errors.ts\");\n\n\nclass RedditService {\n    /**\n   * Check if URL is a Reddit URL\n   */ isRedditUrl(url) {\n        return /(?:https?:\\/\\/)?(?:www\\.|old\\.|m\\.|np\\.)?reddit\\.com\\/r\\/\\w+\\/comments\\/\\w+/i.test(url);\n    }\n    /**\n   * Extract Reddit post information from URL\n   */ extractPostInfo(url) {\n        const redditRegex = /(?:https?:\\/\\/)?(?:www\\.|old\\.|m\\.|np\\.)?reddit\\.com\\/r\\/(\\w+)\\/comments\\/([a-zA-Z0-9]+)(?:\\/([^/]+))?/i;\n        const match = url.match(redditRegex);\n        if (!match) {\n            throw new _lib_errors__WEBPACK_IMPORTED_MODULE_1__.ValidationError(\"Invalid Reddit URL format\");\n        }\n        return {\n            subreddit: match[1],\n            postId: match[2],\n            slug: match[3]\n        };\n    }\n    /**\n   * Get Reddit post metadata\n   */ async getPostMetadata(url) {\n        try {\n            const { subreddit, postId } = this.extractPostInfo(url);\n            _lib_logger__WEBPACK_IMPORTED_MODULE_0__.logger.info(\"Fetching Reddit post metadata\", {\n                subreddit,\n                postId\n            });\n            // Use Reddit JSON API to get post data\n            const jsonUrl = `${this.BASE_URL}/r/${subreddit}/comments/${postId}.json`;\n            const response = await fetch(jsonUrl, {\n                headers: {\n                    \"User-Agent\": \"RateMy Video Platform/1.0 (Educational Content Aggregator)\",\n                    \"Accept\": \"application/json\"\n                }\n            });\n            if (!response.ok) {\n                throw new _lib_errors__WEBPACK_IMPORTED_MODULE_1__.APIError(`Failed to fetch Reddit post: ${response.status}`);\n            }\n            const data = await response.json();\n            if (!Array.isArray(data) || data.length === 0) {\n                throw new _lib_errors__WEBPACK_IMPORTED_MODULE_1__.ValidationError(\"Invalid Reddit post response\");\n            }\n            const postData = data[0].data.children[0].data;\n            if (!postData) {\n                throw new _lib_errors__WEBPACK_IMPORTED_MODULE_1__.ValidationError(\"Reddit post not found\");\n            }\n            // Extract video information\n            const videoInfo = this.extractVideoInfo(postData);\n            const metadata = {\n                postId: postData.id,\n                subreddit: postData.subreddit,\n                title: postData.title,\n                author: postData.author,\n                description: postData.selftext || undefined,\n                videoUrl: videoInfo.videoUrl,\n                thumbnailUrl: videoInfo.thumbnailUrl,\n                isNsfw: postData.over_18 || false,\n                upvotes: postData.ups || 0,\n                comments: postData.num_comments || 0,\n                createdAt: postData.created_utc || 0,\n                domain: postData.domain\n            };\n            _lib_logger__WEBPACK_IMPORTED_MODULE_0__.logger.info(\"Successfully extracted Reddit metadata\", {\n                postId: metadata.postId,\n                title: metadata.title,\n                hasVideo: !!metadata.videoUrl,\n                isNsfw: metadata.isNsfw\n            });\n            return metadata;\n        } catch (error) {\n            _lib_logger__WEBPACK_IMPORTED_MODULE_0__.logger.error(\"Failed to fetch Reddit metadata\", {\n                url,\n                error\n            });\n            throw error;\n        }\n    }\n    /**\n   * Extract video information from Reddit post data\n   */ extractVideoInfo(postData) {\n        let videoUrl;\n        let thumbnailUrl;\n        // Check Reddit Video (v.redd.it)\n        if (postData.is_video && postData.media?.reddit_video) {\n            videoUrl = postData.media.reddit_video.hls_url || postData.media.reddit_video.fallback_url;\n            thumbnailUrl = postData.preview?.images?.[0]?.source?.url;\n        } else if (postData.domain) {\n            if (postData.domain.includes(\"redgifs.com\")) {\n                // RedGifs content embedded in Reddit\n                videoUrl = postData.url;\n                thumbnailUrl = postData.thumbnail !== \"default\" ? postData.thumbnail : undefined;\n            } else if (postData.domain.includes(\"gfycat.com\")) {\n                // Gfycat content\n                videoUrl = postData.url;\n                thumbnailUrl = postData.thumbnail !== \"default\" ? postData.thumbnail : undefined;\n            } else if (postData.domain.includes(\"imgur.com\")) {\n                // Imgur content\n                if (postData.url.includes(\".gif\") || postData.url.includes(\".mp4\")) {\n                    videoUrl = postData.url;\n                }\n            } else if (postData.domain.includes(\"streamable.com\")) {\n                // Streamable content\n                videoUrl = postData.url;\n            }\n        }\n        // Fallback: check if URL itself is a video\n        if (!videoUrl && postData.url) {\n            const url = postData.url.toLowerCase();\n            if (url.includes(\".mp4\") || url.includes(\".webm\") || url.includes(\".gif\")) {\n                videoUrl = postData.url;\n            }\n        }\n        // Clean up thumbnail URL if it exists\n        if (thumbnailUrl && thumbnailUrl.includes(\"&amp;\")) {\n            thumbnailUrl = thumbnailUrl.replace(/&amp;/g, \"&\");\n        }\n        return {\n            videoUrl,\n            thumbnailUrl\n        };\n    }\n    /**\n   * Convert Reddit URL to embed format\n   */ getEmbedUrl(url) {\n        try {\n            const { subreddit, postId } = this.extractPostInfo(url);\n            // Reddit doesn't have a direct embed format like YouTube\n            // We'll use the Reddit URL directly or create an iframe-friendly version\n            return `${this.BASE_URL}/r/${subreddit}/comments/${postId}/embed/`;\n        } catch (error) {\n            // Fallback to original URL\n            return url;\n        }\n    }\n    /**\n   * Process Reddit URL for video upload\n   */ async processRedditUrl(url) {\n        try {\n            const metadata = await this.getPostMetadata(url);\n            // Determine embed URL based on content type\n            let embedUrl;\n            if (metadata.videoUrl && metadata.domain === \"redgifs.com\") {\n                // Handle RedGifs content embedded in Reddit posts\n                const redgifsMatch = metadata.videoUrl.match(/redgifs\\.com\\/watch\\/([a-zA-Z0-9]+)/);\n                if (redgifsMatch) {\n                    const gifId = redgifsMatch[1];\n                    // Try direct MP4 first, fallback to iframe\n                    const directUrl = `https://media.redgifs.com/${this.capitalizeGifId(gifId)}.mp4`;\n                    try {\n                        const testResponse = await fetch(directUrl, {\n                            method: \"HEAD\"\n                        });\n                        embedUrl = testResponse.ok ? directUrl : `https://www.redgifs.com/ifr/${gifId}?poster=0`;\n                    } catch  {\n                        embedUrl = `https://www.redgifs.com/ifr/${gifId}?poster=0`;\n                    }\n                } else {\n                    embedUrl = metadata.videoUrl;\n                }\n            } else if (metadata.videoUrl) {\n                // Use the direct video URL if available\n                embedUrl = metadata.videoUrl;\n            } else {\n                // Fallback to Reddit embed (won't work well for video)\n                embedUrl = this.getEmbedUrl(url);\n            }\n            // Generate relevant tags\n            const tags = [\n                \"reddit\",\n                `r/${metadata.subreddit}`,\n                ...metadata.isNsfw ? [\n                    \"nsfw\"\n                ] : [\n                    \"sfw\"\n                ],\n                ...metadata.domain ? [\n                    metadata.domain\n                ] : []\n            ];\n            return {\n                embedUrl,\n                thumbnail: metadata.thumbnailUrl,\n                metadata,\n                tags: tags // Removed tag limit\n            };\n        } catch (error) {\n            _lib_logger__WEBPACK_IMPORTED_MODULE_0__.logger.error(\"Failed to process Reddit URL\", {\n                url,\n                error\n            });\n            throw error;\n        }\n    }\n    /**\n   * Get subreddit information\n   */ async getSubredditInfo(subredditName) {\n        try {\n            const response = await fetch(`${this.BASE_URL}/r/${subredditName}/about.json`, {\n                headers: {\n                    \"User-Agent\": \"RateMy Video Platform/1.0 (Educational Content Aggregator)\",\n                    \"Accept\": \"application/json\"\n                }\n            });\n            if (!response.ok) {\n                throw new _lib_errors__WEBPACK_IMPORTED_MODULE_1__.APIError(`Failed to fetch subreddit info: ${response.status}`);\n            }\n            const data = await response.json();\n            const subredditData = data.data;\n            return {\n                name: subredditData.display_name,\n                title: subredditData.title,\n                description: subredditData.public_description || subredditData.description,\n                isNsfw: subredditData.over18 || false,\n                subscribers: subredditData.subscribers || 0\n            };\n        } catch (error) {\n            _lib_logger__WEBPACK_IMPORTED_MODULE_0__.logger.error(\"Failed to fetch subreddit info\", {\n                subredditName,\n                error\n            });\n            throw error;\n        }\n    }\n    constructor(){\n        this.BASE_URL = \"https://www.reddit.com\";\n    }\n}\nconst redditService = new RedditService();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O0lBQ0Y7SUFFQTs7R0FFQyxHQUNELE1BQWF1QixpQkFBaUJDLGFBQXFCLEVBTWhEO1FBQ0QsSUFBSTtZQUNGLE1BQU16RCxXQUFXLE1BQU1DLE1BQU0sQ0FBQyxFQUFFLElBQUksQ0FBQ0YsUUFBUSxDQUFDLEdBQUcsRUFBRTBELGNBQWMsV0FBVyxDQUFDLEVBQUU7Z0JBQzdFdkQsU0FBUztvQkFDUCxjQUFjO29CQUNkLFVBQVU7Z0JBQ1o7WUFDRjtZQUVBLElBQUksQ0FBQ0YsU0FBU0csRUFBRSxFQUFFO2dCQUNoQixNQUFNLElBQUlsQixpREFBUUEsQ0FBQyxDQUFDLGdDQUFnQyxFQUFFZSxTQUFTSSxNQUFNLENBQUMsQ0FBQztZQUN6RTtZQUVBLE1BQU1DLE9BQU8sTUFBTUwsU0FBU00sSUFBSTtZQUNoQyxNQUFNb0QsZ0JBQWdCckQsS0FBS0EsSUFBSTtZQUUvQixPQUFPO2dCQUNMc0QsTUFBTUQsY0FBY0UsWUFBWTtnQkFDaEM1QyxPQUFPMEMsY0FBYzFDLEtBQUs7Z0JBQzFCRSxhQUFhd0MsY0FBY0csa0JBQWtCLElBQUlILGNBQWN4QyxXQUFXO2dCQUMxRUssUUFBUW1DLGNBQWNJLE1BQU0sSUFBSTtnQkFDaENDLGFBQWFMLGNBQWNLLFdBQVcsSUFBSTtZQUM1QztRQUVGLEVBQUUsT0FBTzlCLE9BQU87WUFDZGxELCtDQUFNQSxDQUFDa0QsS0FBSyxDQUFDLGtDQUFrQztnQkFBRXdCO2dCQUFleEI7WUFBTTtZQUN0RSxNQUFNQTtRQUNSO0lBQ0Y7O2FBclFpQmxDLFdBQVc7O0FBc1E5QjtBQUVPLE1BQU1pRSxnQkFBZ0IsSUFBSTlFLGdCQUFlIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcmF0ZW15LW5leHRqcy8uL3NyYy9zZXJ2aWNlcy9yZWRkaXQuc2VydmljZS50cz8zMGUwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGxvZ2dlciB9IGZyb20gJ0AvbGliL2xvZ2dlcidcbmltcG9ydCB7IFZhbGlkYXRpb25FcnJvciwgQVBJRXJyb3IgfSBmcm9tICdAL2xpYi9lcnJvcnMnXG5cbmV4cG9ydCBpbnRlcmZhY2UgUmVkZGl0VmlkZW9NZXRhZGF0YSB7XG4gIHBvc3RJZDogc3RyaW5nXG4gIHN1YnJlZGRpdDogc3RyaW5nXG4gIHRpdGxlOiBzdHJpbmdcbiAgYXV0aG9yOiBzdHJpbmdcbiAgZGVzY3JpcHRpb24/OiBzdHJpbmdcbiAgdmlkZW9Vcmw/OiBzdHJpbmdcbiAgdGh1bWJuYWlsVXJsPzogc3RyaW5nXG4gIGlzTnNmdzogYm9vbGVhblxuICB1cHZvdGVzOiBudW1iZXJcbiAgY29tbWVudHM6IG51bWJlclxuICBjcmVhdGVkQXQ6IG51bWJlclxuICBkb21haW4/OiBzdHJpbmdcbn1cblxuY2xhc3MgUmVkZGl0U2VydmljZSB7XG4gIHByaXZhdGUgcmVhZG9ubHkgQkFTRV9VUkwgPSAnaHR0cHM6Ly93d3cucmVkZGl0LmNvbSdcblxuICAvKipcbiAgICogQ2hlY2sgaWYgVVJMIGlzIGEgUmVkZGl0IFVSTFxuICAgKi9cbiAgcHVibGljIGlzUmVkZGl0VXJsKHVybDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIC8oPzpodHRwcz86XFwvXFwvKT8oPzp3d3dcXC58b2xkXFwufG1cXC58bnBcXC4pP3JlZGRpdFxcLmNvbVxcL3JcXC9cXHcrXFwvY29tbWVudHNcXC9cXHcrL2kudGVzdCh1cmwpXG4gIH1cblxuICAvKipcbiAgICogRXh0cmFjdCBSZWRkaXQgcG9zdCBpbmZvcm1hdGlvbiBmcm9tIFVSTFxuICAgKi9cbiAgcHVibGljIGV4dHJhY3RQb3N0SW5mbyh1cmw6IHN0cmluZyk6IHsgc3VicmVkZGl0OiBzdHJpbmc7IHBvc3RJZDogc3RyaW5nOyBzbHVnPzogc3RyaW5nIH0ge1xuICAgIGNvbnN0IHJlZGRpdFJlZ2V4ID0gLyg/Omh0dHBzPzpcXC9cXC8pPyg/Ond3d1xcLnxvbGRcXC58bVxcLnxucFxcLik/cmVkZGl0XFwuY29tXFwvclxcLyhcXHcrKVxcL2NvbW1lbnRzXFwvKFthLXpBLVowLTldKykoPzpcXC8oW14vXSspKT8vaVxuICAgIGNvbnN0IG1hdGNoID0gdXJsLm1hdGNoKHJlZGRpdFJlZ2V4KVxuICAgIFxuICAgIGlmICghbWF0Y2gpIHtcbiAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoJ0ludmFsaWQgUmVkZGl0IFVSTCBmb3JtYXQnKVxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBzdWJyZWRkaXQ6IG1hdGNoWzFdLFxuICAgICAgcG9zdElkOiBtYXRjaFsyXSxcbiAgICAgIHNsdWc6IG1hdGNoWzNdXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBSZWRkaXQgcG9zdCBtZXRhZGF0YVxuICAgKi9cbiAgcHVibGljIGFzeW5jIGdldFBvc3RNZXRhZGF0YSh1cmw6IHN0cmluZyk6IFByb21pc2U8UmVkZGl0VmlkZW9NZXRhZGF0YT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IHN1YnJlZGRpdCwgcG9zdElkIH0gPSB0aGlzLmV4dHJhY3RQb3N0SW5mbyh1cmwpXG4gICAgICBcbiAgICAgIGxvZ2dlci5pbmZvKCdGZXRjaGluZyBSZWRkaXQgcG9zdCBtZXRhZGF0YScsIHsgc3VicmVkZGl0LCBwb3N0SWQgfSlcblxuICAgICAgLy8gVXNlIFJlZGRpdCBKU09OIEFQSSB0byBnZXQgcG9zdCBkYXRhXG4gICAgICBjb25zdCBqc29uVXJsID0gYCR7dGhpcy5CQVNFX1VSTH0vci8ke3N1YnJlZGRpdH0vY29tbWVudHMvJHtwb3N0SWR9Lmpzb25gXG4gICAgICBcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goanNvblVybCwge1xuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ1VzZXItQWdlbnQnOiAnUmF0ZU15IFZpZGVvIFBsYXRmb3JtLzEuMCAoRWR1Y2F0aW9uYWwgQ29udGVudCBBZ2dyZWdhdG9yKScsXG4gICAgICAgICAgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgfVxuICAgICAgfSlcblxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICB0aHJvdyBuZXcgQVBJRXJyb3IoYEZhaWxlZCB0byBmZXRjaCBSZWRkaXQgcG9zdDogJHtyZXNwb25zZS5zdGF0dXN9YClcbiAgICAgIH1cblxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKVxuICAgICAgXG4gICAgICBpZiAoIUFycmF5LmlzQXJyYXkoZGF0YSkgfHwgZGF0YS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcignSW52YWxpZCBSZWRkaXQgcG9zdCByZXNwb25zZScpXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHBvc3REYXRhID0gZGF0YVswXS5kYXRhLmNoaWxkcmVuWzBdLmRhdGFcbiAgICAgIFxuICAgICAgaWYgKCFwb3N0RGF0YSkge1xuICAgICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKCdSZWRkaXQgcG9zdCBub3QgZm91bmQnKVxuICAgICAgfVxuXG4gICAgICAvLyBFeHRyYWN0IHZpZGVvIGluZm9ybWF0aW9uXG4gICAgICBjb25zdCB2aWRlb0luZm8gPSB0aGlzLmV4dHJhY3RWaWRlb0luZm8ocG9zdERhdGEpXG5cbiAgICAgIGNvbnN0IG1ldGFkYXRhOiBSZWRkaXRWaWRlb01ldGFkYXRhID0ge1xuICAgICAgICBwb3N0SWQ6IHBvc3REYXRhLmlkLFxuICAgICAgICBzdWJyZWRkaXQ6IHBvc3REYXRhLnN1YnJlZGRpdCxcbiAgICAgICAgdGl0bGU6IHBvc3REYXRhLnRpdGxlLFxuICAgICAgICBhdXRob3I6IHBvc3REYXRhLmF1dGhvcixcbiAgICAgICAgZGVzY3JpcHRpb246IHBvc3REYXRhLnNlbGZ0ZXh0IHx8IHVuZGVmaW5lZCxcbiAgICAgICAgdmlkZW9Vcmw6IHZpZGVvSW5mby52aWRlb1VybCxcbiAgICAgICAgdGh1bWJuYWlsVXJsOiB2aWRlb0luZm8udGh1bWJuYWlsVXJsLFxuICAgICAgICBpc05zZnc6IHBvc3REYXRhLm92ZXJfMTggfHwgZmFsc2UsXG4gICAgICAgIHVwdm90ZXM6IHBvc3REYXRhLnVwcyB8fCAwLFxuICAgICAgICBjb21tZW50czogcG9zdERhdGEubnVtX2NvbW1lbnRzIHx8IDAsXG4gICAgICAgIGNyZWF0ZWRBdDogcG9zdERhdGEuY3JlYXRlZF91dGMgfHwgMCxcbiAgICAgICAgZG9tYWluOiBwb3N0RGF0YS5kb21haW5cbiAgICAgIH1cblxuICAgICAgbG9nZ2VyLmluZm8oJ1N1Y2Nlc3NmdWxseSBleHRyYWN0ZWQgUmVkZGl0IG1ldGFkYXRhJywgeyBcbiAgICAgICAgcG9zdElkOiBtZXRhZGF0YS5wb3N0SWQsXG4gICAgICAgIHRpdGxlOiBtZXRhZGF0YS50aXRsZSxcbiAgICAgICAgaGFzVmlkZW86ICEhbWV0YWRhdGEudmlkZW9VcmwsXG4gICAgICAgIGlzTnNmdzogbWV0YWRhdGEuaXNOc2Z3XG4gICAgICB9KVxuXG4gICAgICByZXR1cm4gbWV0YWRhdGFcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0ZhaWxlZCB0byBmZXRjaCBSZWRkaXQgbWV0YWRhdGEnLCB7IHVybCwgZXJyb3IgfSlcbiAgICAgIHRocm93IGVycm9yXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEV4dHJhY3QgdmlkZW8gaW5mb3JtYXRpb24gZnJvbSBSZWRkaXQgcG9zdCBkYXRhXG4gICAqL1xuICBwcml2YXRlIGV4dHJhY3RWaWRlb0luZm8ocG9zdERhdGE6IGFueSk6IHsgdmlkZW9Vcmw/OiBzdHJpbmc7IHRodW1ibmFpbFVybD86IHN0cmluZyB9IHtcbiAgICBsZXQgdmlkZW9Vcmw6IHN0cmluZyB8IHVuZGVmaW5lZFxuICAgIGxldCB0aHVtYm5haWxVcmw6IHN0cmluZyB8IHVuZGVmaW5lZFxuXG4gICAgLy8gQ2hlY2sgUmVkZGl0IFZpZGVvICh2LnJlZGQuaXQpXG4gICAgaWYgKHBvc3REYXRhLmlzX3ZpZGVvICYmIHBvc3REYXRhLm1lZGlhPy5yZWRkaXRfdmlkZW8pIHtcbiAgICAgIHZpZGVvVXJsID0gcG9zdERhdGEubWVkaWEucmVkZGl0X3ZpZGVvLmhsc191cmwgfHwgcG9zdERhdGEubWVkaWEucmVkZGl0X3ZpZGVvLmZhbGxiYWNrX3VybFxuICAgICAgdGh1bWJuYWlsVXJsID0gcG9zdERhdGEucHJldmlldz8uaW1hZ2VzPy5bMF0/LnNvdXJjZT8udXJsXG4gICAgfVxuICAgIC8vIENoZWNrIGZvciBleHRlcm5hbCB2aWRlbyBkb21haW5zXG4gICAgZWxzZSBpZiAocG9zdERhdGEuZG9tYWluKSB7XG4gICAgICBpZiAocG9zdERhdGEuZG9tYWluLmluY2x1ZGVzKCdyZWRnaWZzLmNvbScpKSB7XG4gICAgICAgIC8vIFJlZEdpZnMgY29udGVudCBlbWJlZGRlZCBpbiBSZWRkaXRcbiAgICAgICAgdmlkZW9VcmwgPSBwb3N0RGF0YS51cmxcbiAgICAgICAgdGh1bWJuYWlsVXJsID0gcG9zdERhdGEudGh1bWJuYWlsICE9PSAnZGVmYXVsdCcgPyBwb3N0RGF0YS50aHVtYm5haWwgOiB1bmRlZmluZWRcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKHBvc3REYXRhLmRvbWFpbi5pbmNsdWRlcygnZ2Z5Y2F0LmNvbScpKSB7XG4gICAgICAgIC8vIEdmeWNhdCBjb250ZW50XG4gICAgICAgIHZpZGVvVXJsID0gcG9zdERhdGEudXJsXG4gICAgICAgIHRodW1ibmFpbFVybCA9IHBvc3REYXRhLnRodW1ibmFpbCAhPT0gJ2RlZmF1bHQnID8gcG9zdERhdGEudGh1bWJuYWlsIDogdW5kZWZpbmVkXG4gICAgICB9XG4gICAgICBlbHNlIGlmIChwb3N0RGF0YS5kb21haW4uaW5jbHVkZXMoJ2ltZ3VyLmNvbScpKSB7XG4gICAgICAgIC8vIEltZ3VyIGNvbnRlbnRcbiAgICAgICAgaWYgKHBvc3REYXRhLnVybC5pbmNsdWRlcygnLmdpZicpIHx8IHBvc3REYXRhLnVybC5pbmNsdWRlcygnLm1wNCcpKSB7XG4gICAgICAgICAgdmlkZW9VcmwgPSBwb3N0RGF0YS51cmxcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZWxzZSBpZiAocG9zdERhdGEuZG9tYWluLmluY2x1ZGVzKCdzdHJlYW1hYmxlLmNvbScpKSB7XG4gICAgICAgIC8vIFN0cmVhbWFibGUgY29udGVudFxuICAgICAgICB2aWRlb1VybCA9IHBvc3REYXRhLnVybFxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEZhbGxiYWNrOiBjaGVjayBpZiBVUkwgaXRzZWxmIGlzIGEgdmlkZW9cbiAgICBpZiAoIXZpZGVvVXJsICYmIHBvc3REYXRhLnVybCkge1xuICAgICAgY29uc3QgdXJsID0gcG9zdERhdGEudXJsLnRvTG93ZXJDYXNlKClcbiAgICAgIGlmICh1cmwuaW5jbHVkZXMoJy5tcDQnKSB8fCB1cmwuaW5jbHVkZXMoJy53ZWJtJykgfHwgdXJsLmluY2x1ZGVzKCcuZ2lmJykpIHtcbiAgICAgICAgdmlkZW9VcmwgPSBwb3N0RGF0YS51cmxcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDbGVhbiB1cCB0aHVtYm5haWwgVVJMIGlmIGl0IGV4aXN0c1xuICAgIGlmICh0aHVtYm5haWxVcmwgJiYgdGh1bWJuYWlsVXJsLmluY2x1ZGVzKCcmYW1wOycpKSB7XG4gICAgICB0aHVtYm5haWxVcmwgPSB0aHVtYm5haWxVcmwucmVwbGFjZSgvJmFtcDsvZywgJyYnKVxuICAgIH1cblxuICAgIHJldHVybiB7IHZpZGVvVXJsLCB0aHVtYm5haWxVcmwgfVxuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlcnQgUmVkZGl0IFVSTCB0byBlbWJlZCBmb3JtYXRcbiAgICovXG4gIHB1YmxpYyBnZXRFbWJlZFVybCh1cmw6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgc3VicmVkZGl0LCBwb3N0SWQgfSA9IHRoaXMuZXh0cmFjdFBvc3RJbmZvKHVybClcbiAgICAgIFxuICAgICAgLy8gUmVkZGl0IGRvZXNuJ3QgaGF2ZSBhIGRpcmVjdCBlbWJlZCBmb3JtYXQgbGlrZSBZb3VUdWJlXG4gICAgICAvLyBXZSdsbCB1c2UgdGhlIFJlZGRpdCBVUkwgZGlyZWN0bHkgb3IgY3JlYXRlIGFuIGlmcmFtZS1mcmllbmRseSB2ZXJzaW9uXG4gICAgICByZXR1cm4gYCR7dGhpcy5CQVNFX1VSTH0vci8ke3N1YnJlZGRpdH0vY29tbWVudHMvJHtwb3N0SWR9L2VtYmVkL2BcbiAgICAgIFxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAvLyBGYWxsYmFjayB0byBvcmlnaW5hbCBVUkxcbiAgICAgIHJldHVybiB1cmxcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUHJvY2VzcyBSZWRkaXQgVVJMIGZvciB2aWRlbyB1cGxvYWRcbiAgICovXG4gIHB1YmxpYyBhc3luYyBwcm9jZXNzUmVkZGl0VXJsKHVybDogc3RyaW5nKTogUHJvbWlzZTx7XG4gICAgZW1iZWRVcmw6IHN0cmluZ1xuICAgIHRodW1ibmFpbD86IHN0cmluZ1xuICAgIG1ldGFkYXRhOiBSZWRkaXRWaWRlb01ldGFkYXRhXG4gICAgdGFnczogc3RyaW5nW11cbiAgfT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBtZXRhZGF0YSA9IGF3YWl0IHRoaXMuZ2V0UG9zdE1ldGFkYXRhKHVybClcbiAgICAgIFxuICAgICAgLy8gRGV0ZXJtaW5lIGVtYmVkIFVSTCBiYXNlZCBvbiBjb250ZW50IHR5cGVcbiAgICAgIGxldCBlbWJlZFVybDogc3RyaW5nXG4gICAgICBcbiAgICAgIGlmIChtZXRhZGF0YS52aWRlb1VybCAmJiBtZXRhZGF0YS5kb21haW4gPT09ICdyZWRnaWZzLmNvbScpIHtcbiAgICAgICAgLy8gSGFuZGxlIFJlZEdpZnMgY29udGVudCBlbWJlZGRlZCBpbiBSZWRkaXQgcG9zdHNcbiAgICAgICAgY29uc3QgcmVkZ2lmc01hdGNoID0gbWV0YWRhdGEudmlkZW9VcmwubWF0Y2goL3JlZGdpZnNcXC5jb21cXC93YXRjaFxcLyhbYS16QS1aMC05XSspLylcbiAgICAgICAgaWYgKHJlZGdpZnNNYXRjaCkge1xuICAgICAgICAgIGNvbnN0IGdpZklkID0gcmVkZ2lmc01hdGNoWzFdXG4gICAgICAgICAgLy8gVHJ5IGRpcmVjdCBNUDQgZmlyc3QsIGZhbGxiYWNrIHRvIGlmcmFtZVxuICAgICAgICAgIGNvbnN0IGRpcmVjdFVybCA9IGBodHRwczovL21lZGlhLnJlZGdpZnMuY29tLyR7dGhpcy5jYXBpdGFsaXplR2lmSWQoZ2lmSWQpfS5tcDRgXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHRlc3RSZXNwb25zZSA9IGF3YWl0IGZldGNoKGRpcmVjdFVybCwgeyBtZXRob2Q6ICdIRUFEJyB9KVxuICAgICAgICAgICAgZW1iZWRVcmwgPSB0ZXN0UmVzcG9uc2Uub2sgPyBkaXJlY3RVcmwgOiBgaHR0cHM6Ly93d3cucmVkZ2lmcy5jb20vaWZyLyR7Z2lmSWR9P3Bvc3Rlcj0wYFxuICAgICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgICAgZW1iZWRVcmwgPSBgaHR0cHM6Ly93d3cucmVkZ2lmcy5jb20vaWZyLyR7Z2lmSWR9P3Bvc3Rlcj0wYFxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBlbWJlZFVybCA9IG1ldGFkYXRhLnZpZGVvVXJsXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAobWV0YWRhdGEudmlkZW9VcmwpIHtcbiAgICAgICAgLy8gVXNlIHRoZSBkaXJlY3QgdmlkZW8gVVJMIGlmIGF2YWlsYWJsZVxuICAgICAgICBlbWJlZFVybCA9IG1ldGFkYXRhLnZpZGVvVXJsXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBGYWxsYmFjayB0byBSZWRkaXQgZW1iZWQgKHdvbid0IHdvcmsgd2VsbCBmb3IgdmlkZW8pXG4gICAgICAgIGVtYmVkVXJsID0gdGhpcy5nZXRFbWJlZFVybCh1cmwpXG4gICAgICB9XG5cbiAgICAgIC8vIEdlbmVyYXRlIHJlbGV2YW50IHRhZ3NcbiAgICAgIGNvbnN0IHRhZ3MgPSBbXG4gICAgICAgICdyZWRkaXQnLFxuICAgICAgICBgci8ke21ldGFkYXRhLnN1YnJlZGRpdH1gLFxuICAgICAgICAuLi4obWV0YWRhdGEuaXNOc2Z3ID8gWyduc2Z3J10gOiBbJ3NmdyddKSxcbiAgICAgICAgLi4uKG1ldGFkYXRhLmRvbWFpbiA/IFttZXRhZGF0YS5kb21haW5dIDogW10pXG4gICAgICBdXG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGVtYmVkVXJsLFxuICAgICAgICB0aHVtYm5haWw6IG1ldGFkYXRhLnRodW1ibmFpbFVybCxcbiAgICAgICAgbWV0YWRhdGEsXG4gICAgICAgIHRhZ3M6IHRhZ3MgLy8gUmVtb3ZlZCB0YWcgbGltaXRcbiAgICAgIH1cblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0ZhaWxlZCB0byBwcm9jZXNzIFJlZGRpdCBVUkwnLCB7IHVybCwgZXJyb3IgfSlcbiAgICAgIHRocm93IGVycm9yXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBzdWJyZWRkaXQgaW5mb3JtYXRpb25cbiAgICovXG4gIHB1YmxpYyBhc3luYyBnZXRTdWJyZWRkaXRJbmZvKHN1YnJlZGRpdE5hbWU6IHN0cmluZyk6IFByb21pc2U8e1xuICAgIG5hbWU6IHN0cmluZ1xuICAgIHRpdGxlOiBzdHJpbmdcbiAgICBkZXNjcmlwdGlvbjogc3RyaW5nXG4gICAgaXNOc2Z3OiBib29sZWFuXG4gICAgc3Vic2NyaWJlcnM6IG51bWJlclxuICB9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7dGhpcy5CQVNFX1VSTH0vci8ke3N1YnJlZGRpdE5hbWV9L2Fib3V0Lmpzb25gLCB7XG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnVXNlci1BZ2VudCc6ICdSYXRlTXkgVmlkZW8gUGxhdGZvcm0vMS4wIChFZHVjYXRpb25hbCBDb250ZW50IEFnZ3JlZ2F0b3IpJyxcbiAgICAgICAgICAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICB9XG4gICAgICB9KVxuXG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIHRocm93IG5ldyBBUElFcnJvcihgRmFpbGVkIHRvIGZldGNoIHN1YnJlZGRpdCBpbmZvOiAke3Jlc3BvbnNlLnN0YXR1c31gKVxuICAgICAgfVxuXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpXG4gICAgICBjb25zdCBzdWJyZWRkaXREYXRhID0gZGF0YS5kYXRhXG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIG5hbWU6IHN1YnJlZGRpdERhdGEuZGlzcGxheV9uYW1lLFxuICAgICAgICB0aXRsZTogc3VicmVkZGl0RGF0YS50aXRsZSxcbiAgICAgICAgZGVzY3JpcHRpb246IHN1YnJlZGRpdERhdGEucHVibGljX2Rlc2NyaXB0aW9uIHx8IHN1YnJlZGRpdERhdGEuZGVzY3JpcHRpb24sXG4gICAgICAgIGlzTnNmdzogc3VicmVkZGl0RGF0YS5vdmVyMTggfHwgZmFsc2UsXG4gICAgICAgIHN1YnNjcmliZXJzOiBzdWJyZWRkaXREYXRhLnN1YnNjcmliZXJzIHx8IDBcbiAgICAgIH1cblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0ZhaWxlZCB0byBmZXRjaCBzdWJyZWRkaXQgaW5mbycsIHsgc3VicmVkZGl0TmFtZSwgZXJyb3IgfSlcbiAgICAgIHRocm93IGVycm9yXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCByZWRkaXRTZXJ2aWNlID0gbmV3IFJlZGRpdFNlcnZpY2UoKSJdLCJuYW1lcyI6WyJsb2dnZXIiLCJWYWxpZGF0aW9uRXJyb3IiLCJBUElFcnJvciIsIlJlZGRpdFNlcnZpY2UiLCJpc1JlZGRpdFVybCIsInVybCIsInRlc3QiLCJleHRyYWN0UG9zdEluZm8iLCJyZWRkaXRSZWdleCIsIm1hdGNoIiwic3VicmVkZGl0IiwicG9zdElkIiwic2x1ZyIsImdldFBvc3RNZXRhZGF0YSIsImluZm8iLCJqc29uVXJsIiwiQkFTRV9VUkwiLCJyZXNwb25zZSIsImZldGNoIiwiaGVhZGVycyIsIm9rIiwic3RhdHVzIiwiZGF0YSIsImpzb24iLCJBcnJheSIsImlzQXJyYXkiLCJsZW5ndGgiLCJwb3N0RGF0YSIsImNoaWxkcmVuIiwidmlkZW9JbmZvIiwiZXh0cmFjdFZpZGVvSW5mbyIsIm1ldGFkYXRhIiwiaWQiLCJ0aXRsZSIsImF1dGhvciIsImRlc2NyaXB0aW9uIiwic2VsZnRleHQiLCJ1bmRlZmluZWQiLCJ2aWRlb1VybCIsInRodW1ibmFpbFVybCIsImlzTnNmdyIsIm92ZXJfMTgiLCJ1cHZvdGVzIiwidXBzIiwiY29tbWVudHMiLCJudW1fY29tbWVudHMiLCJjcmVhdGVkQXQiLCJjcmVhdGVkX3V0YyIsImRvbWFpbiIsImhhc1ZpZGVvIiwiZXJyb3IiLCJpc192aWRlbyIsIm1lZGlhIiwicmVkZGl0X3ZpZGVvIiwiaGxzX3VybCIsImZhbGxiYWNrX3VybCIsInByZXZpZXciLCJpbWFnZXMiLCJzb3VyY2UiLCJpbmNsdWRlcyIsInRodW1ibmFpbCIsInRvTG93ZXJDYXNlIiwicmVwbGFjZSIsImdldEVtYmVkVXJsIiwicHJvY2Vzc1JlZGRpdFVybCIsImVtYmVkVXJsIiwicmVkZ2lmc01hdGNoIiwiZ2lmSWQiLCJkaXJlY3RVcmwiLCJjYXBpdGFsaXplR2lmSWQiLCJ0ZXN0UmVzcG9uc2UiLCJtZXRob2QiLCJ0YWdzIiwiZ2V0U3VicmVkZGl0SW5mbyIsInN1YnJlZGRpdE5hbWUiLCJzdWJyZWRkaXREYXRhIiwibmFtZSIsImRpc3BsYXlfbmFtZSIsInB1YmxpY19kZXNjcmlwdGlvbiIsIm92ZXIxOCIsInN1YnNjcmliZXJzIiwicmVkZGl0U2VydmljZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/services/reddit.service.ts\n");

/***/ }),

/***/ "(api)/./src/services/redgifs.service.ts":
/*!*****************************************!*\
  !*** ./src/services/redgifs.service.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   redGifsService: () => (/* binding */ redGifsService)\n/* harmony export */ });\n/* harmony import */ var _lib_logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/logger */ \"(api)/./src/lib/logger.ts\");\n/* harmony import */ var _lib_errors__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/errors */ \"(api)/./src/lib/errors.ts\");\n\n\nclass RedGifsService {\n    /**\n   * Get temporary token for API access\n   */ async getToken() {\n        // Check if current token is still valid\n        if (this.token && Date.now() < this.tokenExpiry) {\n            return this.token;\n        }\n        try {\n            _lib_logger__WEBPACK_IMPORTED_MODULE_0__.logger.info(\"Requesting new RedGifs API token\");\n            const response = await fetch(`${this.BASE_URL}/auth/temporary`, {\n                method: \"GET\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                }\n            });\n            if (!response.ok) {\n                throw new _lib_errors__WEBPACK_IMPORTED_MODULE_1__.APIError(`Failed to get RedGifs token: ${response.status}`);\n            }\n            const data = await response.json();\n            if (!data.token) {\n                throw new _lib_errors__WEBPACK_IMPORTED_MODULE_1__.APIError(\"No token returned from RedGifs API\");\n            }\n            this.token = data.token;\n            // Set expiry to 1 hour from now (tokens typically last 24h but we refresh early)\n            this.tokenExpiry = Date.now() + 60 * 60 * 1000;\n            _lib_logger__WEBPACK_IMPORTED_MODULE_0__.logger.info(\"Successfully obtained RedGifs API token\");\n            return this.token;\n        } catch (error) {\n            _lib_logger__WEBPACK_IMPORTED_MODULE_0__.logger.error(\"Failed to get RedGifs token\", {\n                error\n            });\n            throw new _lib_errors__WEBPACK_IMPORTED_MODULE_1__.APIError(\"Failed to authenticate with RedGifs API\");\n        }\n    }\n    /**\n   * Make authenticated request to RedGifs API\n   */ async makeRequest(endpoint, options = {}) {\n        const token = await this.getToken();\n        const response = await fetch(`${this.BASE_URL}${endpoint}`, {\n            ...options,\n            headers: {\n                \"Authorization\": `Bearer ${token}`,\n                \"Content-Type\": \"application/json\",\n                ...options.headers\n            }\n        });\n        if (!response.ok) {\n            const errorText = await response.text();\n            _lib_logger__WEBPACK_IMPORTED_MODULE_0__.logger.error(\"RedGifs API error\", {\n                endpoint,\n                status: response.status,\n                error: errorText\n            });\n            throw new _lib_errors__WEBPACK_IMPORTED_MODULE_1__.APIError(`RedGifs API error: ${response.status} - ${errorText}`);\n        }\n        return response.json();\n    }\n    /**\n   * Extract RedGifs ID from URL\n   */ extractGifId(url) {\n        const patterns = [\n            /redgifs\\.com\\/watch\\/([a-zA-Z0-9]+)/,\n            /redgifs\\.com\\/ifr\\/([a-zA-Z0-9]+)/,\n            /redgifs\\.com\\/([a-zA-Z0-9]+)$/,\n            /\\/([a-zA-Z0-9]+)$/\n        ];\n        for (const pattern of patterns){\n            const match = url.match(pattern);\n            if (match && match[1]) {\n                return match[1].toLowerCase();\n            }\n        }\n        throw new _lib_errors__WEBPACK_IMPORTED_MODULE_1__.ValidationError(\"Invalid RedGifs URL format\");\n    }\n    /**\n   * Check if URL is a RedGifs URL\n   */ isRedGifsUrl(url) {\n        return url.includes(\"redgifs.com\") || url.includes(\"redgifs.com\");\n    }\n    /**\n   * Get metadata for a specific gif by ID\n   */ async getGifMetadata(gifId) {\n        try {\n            _lib_logger__WEBPACK_IMPORTED_MODULE_0__.logger.info(\"Fetching RedGifs metadata\", {\n                gifId\n            });\n            const response = await this.makeRequest(`/gifs/${gifId}`);\n            if (!response.gif) {\n                throw new _lib_errors__WEBPACK_IMPORTED_MODULE_1__.ValidationError(\"Gif not found\");\n            }\n            _lib_logger__WEBPACK_IMPORTED_MODULE_0__.logger.info(\"Successfully fetched RedGifs metadata\", {\n                gifId,\n                title: response.gif.title,\n                tags: response.gif.tags?.length || 0\n            });\n            return response.gif;\n        } catch (error) {\n            _lib_logger__WEBPACK_IMPORTED_MODULE_0__.logger.error(\"Failed to fetch RedGifs metadata\", {\n                gifId,\n                error\n            });\n            throw error;\n        }\n    }\n    /**\n   * Get metadata from RedGifs URL\n   */ async getMetadataFromUrl(url) {\n        if (!this.isRedGifsUrl(url)) {\n            throw new _lib_errors__WEBPACK_IMPORTED_MODULE_1__.ValidationError(\"URL is not a RedGifs URL\");\n        }\n        const gifId = this.extractGifId(url);\n        return this.getGifMetadata(gifId);\n    }\n    /**\n   * Convert RedGifs URL to embed format\n   * Returns the iframe URL that shows just the gif without the full website interface\n   */ getEmbedUrl(gifId) {\n        // Use the iframe URL that shows only the gif content\n        return `https://www.redgifs.com/ifr/${gifId}?poster=0`;\n    }\n    /**\n   * Get direct gif URL from metadata\n   */ getDirectGifUrl(metadata) {\n        // Return the HD URL if available, otherwise SD, otherwise fallback to embed\n        return metadata.urls?.hd || metadata.urls?.sd || this.getEmbedUrl(metadata.id);\n    }\n    /**\n   * Get thumbnail URL for a gif\n   */ getThumbnailUrl(gifId) {\n        return `https://thumbs4.redgifs.com/${gifId}-poster.jpg`;\n    }\n    /**\n   * Search for gifs by tags or query\n   */ async searchGifs(query, options = {}) {\n        try {\n            const { page = 1, count = 20, order = \"trending\" } = options;\n            const params = new URLSearchParams({\n                search_text: query,\n                order,\n                count: count.toString(),\n                page: page.toString()\n            });\n            _lib_logger__WEBPACK_IMPORTED_MODULE_0__.logger.info(\"Searching RedGifs\", {\n                query,\n                options\n            });\n            const response = await this.makeRequest(`/gifs/search?${params}`);\n            _lib_logger__WEBPACK_IMPORTED_MODULE_0__.logger.info(\"RedGifs search completed\", {\n                query,\n                results: response.gifs?.length || 0,\n                total: response.total\n            });\n            return {\n                gifs: response.gifs || [],\n                total: response.total || 0,\n                page: response.page || page\n            };\n        } catch (error) {\n            _lib_logger__WEBPACK_IMPORTED_MODULE_0__.logger.error(\"Failed to search RedGifs\", {\n                query,\n                options,\n                error\n            });\n            throw error;\n        }\n    }\n    /**\n   * Get trending gifs\n   */ async getTrendingGifs(count = 10) {\n        try {\n            _lib_logger__WEBPACK_IMPORTED_MODULE_0__.logger.info(\"Fetching trending RedGifs\", {\n                count\n            });\n            const response = await this.makeRequest(`/gifs/trending?count=${count}`);\n            _lib_logger__WEBPACK_IMPORTED_MODULE_0__.logger.info(\"Successfully fetched trending gifs\", {\n                count: response.gifs?.length || 0\n            });\n            return response.gifs || [];\n        } catch (error) {\n            _lib_logger__WEBPACK_IMPORTED_MODULE_0__.logger.error(\"Failed to fetch trending gifs\", {\n                count,\n                error\n            });\n            throw error;\n        }\n    }\n    /**\n   * Validate and process RedGifs URL for upload\n   */ async processRedGifsUrl(url) {\n        try {\n            const metadata = await this.getMetadataFromUrl(url);\n            const gifId = this.extractGifId(url);\n            // Use direct gif URL for better embedding experience\n            const embedUrl = this.getDirectGifUrl(metadata);\n            return {\n                embedUrl,\n                thumbnail: this.getThumbnailUrl(gifId),\n                metadata,\n                tags: metadata.tags || []\n            };\n        } catch (error) {\n            _lib_logger__WEBPACK_IMPORTED_MODULE_0__.logger.error(\"Failed to process RedGifs URL\", {\n                url,\n                error\n            });\n            throw error;\n        }\n    }\n    constructor(){\n        this.BASE_URL = \"https://api.redgifs.com/v2\";\n        this.token = null;\n        this.tokenExpiry = 0;\n    }\n}\nconst redGifsService = new RedGifsService();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvc2VydmljZXMvcmVkZ2lmcy5zZXJ2aWNlLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFxQztBQUNtQjtBQTZCeEQsTUFBTUc7SUFLSjs7R0FFQyxHQUNELE1BQWNDLFdBQTRCO1FBQ3hDLHdDQUF3QztRQUN4QyxJQUFJLElBQUksQ0FBQ0MsS0FBSyxJQUFJQyxLQUFLQyxHQUFHLEtBQUssSUFBSSxDQUFDQyxXQUFXLEVBQUU7WUFDL0MsT0FBTyxJQUFJLENBQUNILEtBQUs7UUFDbkI7UUFFQSxJQUFJO1lBQ0ZMLCtDQUFNQSxDQUFDUyxJQUFJLENBQUM7WUFFWixNQUFNQyxXQUFXLE1BQU1DLE1BQU0sQ0FBQyxFQUFFLElBQUksQ0FBQ0MsUUFBUSxDQUFDLGVBQWUsQ0FBQyxFQUFFO2dCQUM5REMsUUFBUTtnQkFDUkMsU0FBUztvQkFDUCxnQkFBZ0I7Z0JBQ2xCO1lBQ0Y7WUFFQSxJQUFJLENBQUNKLFNBQVNLLEVBQUUsRUFBRTtnQkFDaEIsTUFBTSxJQUFJYixpREFBUUEsQ0FBQyxDQUFDLDZCQUE2QixFQUFFUSxTQUFTTSxNQUFNLENBQUMsQ0FBQztZQUN0RTtZQUVBLE1BQU1DLE9BQU8sTUFBTVAsU0FBU1EsSUFBSTtZQUVoQyxJQUFJLENBQUNELEtBQUtaLEtBQUssRUFBRTtnQkFDZixNQUFNLElBQUlILGlEQUFRQSxDQUFDO1lBQ3JCO1lBRUEsSUFBSSxDQUFDRyxLQUFLLEdBQUdZLEtBQUtaLEtBQUs7WUFDdkIsaUZBQWlGO1lBQ2pGLElBQUksQ0FBQ0csV0FBVyxHQUFHRixLQUFLQyxHQUFHLEtBQU0sS0FBSyxLQUFLO1lBRTNDUCwrQ0FBTUEsQ0FBQ1MsSUFBSSxDQUFDO1lBQ1osT0FBTyxJQUFJLENBQUNKLEtBQUs7UUFDbkIsRUFBRSxPQUFPYyxPQUFPO1lBQ2RuQiwrQ0FBTUEsQ0FBQ21CLEtBQUssQ0FBQywrQkFBK0I7Z0JBQUVBO1lBQU07WUFDcEQsTUFBTSxJQUFJakIsaURBQVFBLENBQUM7UUFDckI7SUFDRjtJQUVBOztHQUVDLEdBQ0QsTUFBY2tCLFlBQWVDLFFBQWdCLEVBQUVDLFVBQXVCLENBQUMsQ0FBQyxFQUFjO1FBQ3BGLE1BQU1qQixRQUFRLE1BQU0sSUFBSSxDQUFDRCxRQUFRO1FBRWpDLE1BQU1NLFdBQVcsTUFBTUMsTUFBTSxDQUFDLEVBQUUsSUFBSSxDQUFDQyxRQUFRLENBQUMsRUFBRVMsU0FBUyxDQUFDLEVBQUU7WUFDMUQsR0FBR0MsT0FBTztZQUNWUixTQUFTO2dCQUNQLGlCQUFpQixDQUFDLE9BQU8sRUFBRVQsTUFBTSxDQUFDO2dCQUNsQyxnQkFBZ0I7Z0JBQ2hCLEdBQUdpQixRQUFRUixPQUFPO1lBQ3BCO1FBQ0Y7UUFFQSxJQUFJLENBQUNKLFNBQVNLLEVBQUUsRUFBRTtZQUNoQixNQUFNUSxZQUFZLE1BQU1iLFNBQVNjLElBQUk7WUFDckN4QiwrQ0FBTUEsQ0FBQ21CLEtBQUssQ0FBQyxxQkFBcUI7Z0JBQ2hDRTtnQkFDQUwsUUFBUU4sU0FBU00sTUFBTTtnQkFDdkJHLE9BQU9JO1lBQ1Q7WUFDQSxNQUFNLElBQUlyQixpREFBUUEsQ0FBQyxDQUFDLG1CQUFtQixFQUFFUSxTQUFTTSxNQUFNLENBQUMsR0FBRyxFQUFFTyxVQUFVLENBQUM7UUFDM0U7UUFFQSxPQUFPYixTQUFTUSxJQUFJO0lBQ3RCO0lBRUE7O0dBRUMsR0FDRCxhQUFvQlEsR0FBVyxFQUFVO1FBQ3ZDLE1BQU1DLFdBQVc7WUFDZjtZQUNBO1lBQ0E7WUFDQTtTQUNEO1FBRUQsS0FBSyxNQUFNQyxXQUFXRCxTQUFVO1lBQzlCLE1BQU1FLFFBQVFILElBQUlHLEtBQUssQ0FBQ0Q7WUFDeEIsSUFBSUMsU0FBU0EsS0FBSyxDQUFDLEVBQUUsRUFBRTtnQkFDckIsT0FBT0EsS0FBSyxDQUFDLEVBQUUsQ0FBQ0MsV0FBVztZQUM3QjtRQUNGO1FBRUEsTUFBTSxJQUFJN0Isd0RBQWVBLENBQUM7SUFDNUI7SUFFQTs7R0FFQyxHQUNELGFBQW9CeUIsR0FBVyxFQUFXO1FBQ3hDLE9BQU9BLElBQUlNLFFBQVEsQ0FBQyxrQkFBa0JOLElBQUlNLFFBQVEsQ0FBQztJQUNyRDtJQUVBOztHQUVDLEdBQ0QsTUFBYUMsZUFBZUMsS0FBYSxFQUEyQjtRQUNsRSxJQUFJO1lBQ0ZsQywrQ0FBTUEsQ0FBQ1MsSUFBSSxDQUFDLDZCQUE2QjtnQkFBRXlCO1lBQU07WUFFakQsTUFBTXhCLFdBQVcsTUFBTSxJQUFJLENBQUNVLFdBQVcsQ0FBMEIsQ0FBQyxNQUFNLEVBQUVjLE1BQU0sQ0FBQztZQUVqRixJQUFJLENBQUN4QixTQUFTeUIsR0FBRyxFQUFFO2dCQUNqQixNQUFNLElBQUlsQyx3REFBZUEsQ0FBQztZQUM1QjtZQUVBRCwrQ0FBTUEsQ0FBQ1MsSUFBSSxDQUFDLHlDQUF5QztnQkFDbkR5QjtnQkFDQUUsT0FBTzFCLFNBQVN5QixHQUFHLENBQUNDLEtBQUs7Z0JBQ3pCQyxNQUFNM0IsU0FBU3lCLEdBQUcsQ0FBQ0UsSUFBSSxFQUFFQyxVQUFVO1lBQ3JDO1lBRUEsT0FBTzVCLFNBQVN5QixHQUFHO1FBQ3JCLEVBQUUsT0FBT2hCLE9BQU87WUFDZG5CLCtDQUFNQSxDQUFDbUIsS0FBSyxDQUFDLG9DQUFvQztnQkFBRWU7Z0JBQU9mO1lBQU07WUFDaEUsTUFBTUE7UUFDUjtJQUNGO0lBRUE7O0dBRUMsR0FDRCxNQUFhb0IsbUJBQW1CYixHQUFXLEVBQTJCO1FBQ3BFLElBQUksQ0FBQyxJQUFJLENBQUNLLFlBQVksQ0FBQ0wsTUFBTTtZQUMzQixNQUFNLElBQUl6Qix3REFBZUEsQ0FBQztRQUM1QjtRQUVBLE1BQU1pQyxRQUFRLElBQUksQ0FBQ1QsWUFBWSxDQUFDQztRQUNoQyxPQUFPLElBQUksQ0FBQ08sY0FBYyxDQUFDQztJQUM3QjtJQUVBOzs7R0FHQyxHQUNELFlBQW1CQSxLQUFhLEVBQVU7UUFDeEMscURBQXFEO1FBQ3JELE9BQU8sQ0FBQyw0QkFBNEIsRUFBRUEsTUFBTSxTQUFTLENBQUM7SUFDeEQ7SUFFQTs7R0FFQyxHQUNELGdCQUF1QlEsUUFBd0IsRUFBVTtRQUN2RCw0RUFBNEU7UUFDNUUsT0FBT0EsU0FBU0MsSUFBSSxFQUFFQyxNQUFNRixTQUFTQyxJQUFJLEVBQUVFLE1BQU0sSUFBSSxDQUFDTCxXQUFXLENBQUNFLFNBQVNJLEVBQUU7SUFDL0U7SUFFQTs7R0FFQyxHQUNELGdCQUF1QlosS0FBYSxFQUFVO1FBQzVDLE9BQU8sQ0FBQyw0QkFBNEIsRUFBRUEsTUFBTSxXQUFXLENBQUM7SUFDMUQ7SUFFQTs7R0FFQyxHQUNELE1BQWFjLFdBQVdDLEtBQWEsRUFBRTNCLFVBSW5DLENBQUMsQ0FBQyxFQUErQjtRQUNuQyxJQUFJO1lBQ0YsTUFBTSxFQUFFNEIsT0FBTyxDQUFDLEVBQUVDLFFBQVEsRUFBRSxFQUFFQyxRQUFRLFVBQVUsRUFBRSxHQUFHOUI7WUFFckQsTUFBTStCLFNBQVMsSUFBSUMsZ0JBQWdCO2dCQUNqQ0MsYUFBYU47Z0JBQ2JHO2dCQUNBRCxPQUFPQSxNQUFNSyxRQUFRO2dCQUNyQk4sTUFBTUEsS0FBS00sUUFBUTtZQUNyQjtZQUVBeEQsK0NBQU1BLENBQUNTLElBQUksQ0FBQyxxQkFBcUI7Z0JBQUV3QztnQkFBTzNCO1lBQVE7WUFFbEQsTUFBTVosV0FBVyxNQUFNLElBQUksQ0FBQ1UsV0FBVyxDQUlwQyxDQUFDLGFBQWEsRUFBRWlDLE9BQU8sQ0FBQztZQUUzQnJELCtDQUFNQSxDQUFDUyxJQUFJLENBQUMsNEJBQTRCO2dCQUN0Q3dDO2dCQUNBUSxTQUFTL0MsU0FBU2dELElBQUksRUFBRXBCLFVBQVU7Z0JBQ2xDcUIsT0FBT2pELFNBQVNpRCxLQUFLO1lBQ3ZCO1lBRUEsT0FBTztnQkFDTEQsTUFBTWhELFNBQVNnRCxJQUFJLElBQUksRUFBRTtnQkFDekJDLE9BQU9qRCxTQUFTaUQsS0FBSyxJQUFJO2dCQUN6QlQsTUFBTXhDLFNBQVN3QyxJQUFJLElBQUlBO1lBQ3pCO1FBQ0YsRUFBRSxPQUFPL0IsT0FBTztZQUNkbkIsK0NBQU1BLENBQUNtQixLQUFLLENBQUMsNEJBQTRCO2dCQUFFOEI7Z0JBQU8zQjtnQkFBU0g7WUFBTTtZQUNqRSxNQUFNQTtRQUNSO0lBQ0Y7SUFFQTs7R0FFQyxHQUNELE1BQWF5QyxnQkFBZ0JULFFBQWdCLEVBQUUsRUFBNkI7UUFDMUUsSUFBSTtZQUNGbkQsK0NBQU1BLENBQUNTLElBQUksQ0FBQyw2QkFBNkI7Z0JBQUUwQztZQUFNO1lBRWpELE1BQU16QyxXQUFXLE1BQU0sSUFBSSxDQUFDVSxXQUFXLENBQTZCLENBQUMscUJBQXFCLEVBQUUrQixNQUFNLENBQUM7WUFFbkduRCwrQ0FBTUEsQ0FBQ1MsSUFBSSxDQUFDLHNDQUFzQztnQkFDaEQwQyxPQUFPekMsU0FBU2dELElBQUksRUFBRXBCLFVBQVU7WUFDbEM7WUFFQSxPQUFPNUIsU0FBU2dELElBQUksSUFBSSxFQUFFO1FBQzVCLEVBQUUsT0FBT3ZDLE9BQU87WUFDZG5CLCtDQUFNQSxDQUFDbUIsS0FBSyxDQUFDLGlDQUFpQztnQkFBRWdDO2dCQUFPaEM7WUFBTTtZQUM3RCxNQUFNQTtRQUNSO0lBQ0Y7SUFFQTs7R0FFQyxHQUNELE1BQWEwQyxrQkFBa0JuQyxHQUFXLEVBS3ZDO1FBQ0QsSUFBSTtZQUNGLE1BQU1nQixXQUFXLE1BQU0sSUFBSSxDQUFDSCxrQkFBa0IsQ0FBQ2I7WUFDL0MsTUFBTVEsUUFBUSxJQUFJLENBQUNULFlBQVksQ0FBQ0M7WUFFaEMscURBQXFEO1lBQ3JELE1BQU1vQyxXQUFXLElBQUksQ0FBQ3JCLGVBQWUsQ0FBQ0M7WUFFdEMsT0FBTztnQkFDTG9CO2dCQUNBQyxXQUFXLElBQUksQ0FBQ2hCLGVBQWUsQ0FBQ2I7Z0JBQ2hDUTtnQkFDQUwsTUFBTUssU0FBU0wsSUFBSSxJQUFJLEVBQUU7WUFDM0I7UUFDRixFQUFFLE9BQU9sQixPQUFPO1lBQ2RuQiwrQ0FBTUEsQ0FBQ21CLEtBQUssQ0FBQyxpQ0FBaUM7Z0JBQUVPO2dCQUFLUDtZQUFNO1lBQzNELE1BQU1BO1FBQ1I7SUFDRjs7YUE1UGlCUCxXQUFXO2FBQ3BCUCxRQUF1QjthQUN2QkcsY0FBc0I7O0FBMlBoQztBQUVPLE1BQU13RCxpQkFBaUIsSUFBSTdELGlCQUFnQiIsInNvdXJjZXMiOlsid2VicGFjazovL3JhdGVteS1uZXh0anMvLi9zcmMvc2VydmljZXMvcmVkZ2lmcy5zZXJ2aWNlLnRzP2YzMTAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSAnQC9saWIvbG9nZ2VyJ1xuaW1wb3J0IHsgVmFsaWRhdGlvbkVycm9yLCBBUElFcnJvciB9IGZyb20gJ0AvbGliL2Vycm9ycydcblxuZXhwb3J0IGludGVyZmFjZSBSZWRHaWZNZXRhZGF0YSB7XG4gIGlkOiBzdHJpbmdcbiAgdGl0bGU6IHN0cmluZ1xuICBkZXNjcmlwdGlvbj86IHN0cmluZ1xuICB0YWdzOiBzdHJpbmdbXVxuICBkdXJhdGlvbjogbnVtYmVyXG4gIHdpZHRoOiBudW1iZXJcbiAgaGVpZ2h0OiBudW1iZXJcbiAgdXJsczoge1xuICAgIGhkOiBzdHJpbmdcbiAgICBzZDogc3RyaW5nXG4gICAgcG9zdGVyOiBzdHJpbmdcbiAgfVxuICB2aWV3czogbnVtYmVyXG4gIGxpa2VzOiBudW1iZXJcbiAgdXNlck5hbWU6IHN0cmluZ1xuICBjcmVhdGVEYXRlOiBudW1iZXJcbiAgdHlwZTogbnVtYmVyXG4gIGF2Z0NvbG9yOiBzdHJpbmdcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSZWRHaWZTZWFyY2hSZXN1bHQge1xuICBnaWZzOiBSZWRHaWZNZXRhZGF0YVtdXG4gIHRvdGFsOiBudW1iZXJcbiAgcGFnZTogbnVtYmVyXG59XG5cbmNsYXNzIFJlZEdpZnNTZXJ2aWNlIHtcbiAgcHJpdmF0ZSByZWFkb25seSBCQVNFX1VSTCA9ICdodHRwczovL2FwaS5yZWRnaWZzLmNvbS92MidcbiAgcHJpdmF0ZSB0b2tlbjogc3RyaW5nIHwgbnVsbCA9IG51bGxcbiAgcHJpdmF0ZSB0b2tlbkV4cGlyeTogbnVtYmVyID0gMFxuXG4gIC8qKlxuICAgKiBHZXQgdGVtcG9yYXJ5IHRva2VuIGZvciBBUEkgYWNjZXNzXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGdldFRva2VuKCk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgLy8gQ2hlY2sgaWYgY3VycmVudCB0b2tlbiBpcyBzdGlsbCB2YWxpZFxuICAgIGlmICh0aGlzLnRva2VuICYmIERhdGUubm93KCkgPCB0aGlzLnRva2VuRXhwaXJ5KSB7XG4gICAgICByZXR1cm4gdGhpcy50b2tlblxuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBsb2dnZXIuaW5mbygnUmVxdWVzdGluZyBuZXcgUmVkR2lmcyBBUEkgdG9rZW4nKVxuICAgICAgXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke3RoaXMuQkFTRV9VUkx9L2F1dGgvdGVtcG9yYXJ5YCwge1xuICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgfSxcbiAgICAgIH0pXG5cbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IEFQSUVycm9yKGBGYWlsZWQgdG8gZ2V0IFJlZEdpZnMgdG9rZW46ICR7cmVzcG9uc2Uuc3RhdHVzfWApXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKClcbiAgICAgIFxuICAgICAgaWYgKCFkYXRhLnRva2VuKSB7XG4gICAgICAgIHRocm93IG5ldyBBUElFcnJvcignTm8gdG9rZW4gcmV0dXJuZWQgZnJvbSBSZWRHaWZzIEFQSScpXG4gICAgICB9XG5cbiAgICAgIHRoaXMudG9rZW4gPSBkYXRhLnRva2VuXG4gICAgICAvLyBTZXQgZXhwaXJ5IHRvIDEgaG91ciBmcm9tIG5vdyAodG9rZW5zIHR5cGljYWxseSBsYXN0IDI0aCBidXQgd2UgcmVmcmVzaCBlYXJseSlcbiAgICAgIHRoaXMudG9rZW5FeHBpcnkgPSBEYXRlLm5vdygpICsgKDYwICogNjAgKiAxMDAwKVxuICAgICAgXG4gICAgICBsb2dnZXIuaW5mbygnU3VjY2Vzc2Z1bGx5IG9idGFpbmVkIFJlZEdpZnMgQVBJIHRva2VuJylcbiAgICAgIHJldHVybiB0aGlzLnRva2VuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRmFpbGVkIHRvIGdldCBSZWRHaWZzIHRva2VuJywgeyBlcnJvciB9KVxuICAgICAgdGhyb3cgbmV3IEFQSUVycm9yKCdGYWlsZWQgdG8gYXV0aGVudGljYXRlIHdpdGggUmVkR2lmcyBBUEknKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBNYWtlIGF1dGhlbnRpY2F0ZWQgcmVxdWVzdCB0byBSZWRHaWZzIEFQSVxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBtYWtlUmVxdWVzdDxUPihlbmRwb2ludDogc3RyaW5nLCBvcHRpb25zOiBSZXF1ZXN0SW5pdCA9IHt9KTogUHJvbWlzZTxUPiB7XG4gICAgY29uc3QgdG9rZW4gPSBhd2FpdCB0aGlzLmdldFRva2VuKClcbiAgICBcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke3RoaXMuQkFTRV9VUkx9JHtlbmRwb2ludH1gLCB7XG4gICAgICAuLi5vcHRpb25zLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHt0b2tlbn1gLFxuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAuLi5vcHRpb25zLmhlYWRlcnMsXG4gICAgICB9LFxuICAgIH0pXG5cbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICBjb25zdCBlcnJvclRleHQgPSBhd2FpdCByZXNwb25zZS50ZXh0KClcbiAgICAgIGxvZ2dlci5lcnJvcignUmVkR2lmcyBBUEkgZXJyb3InLCB7IFxuICAgICAgICBlbmRwb2ludCwgXG4gICAgICAgIHN0YXR1czogcmVzcG9uc2Uuc3RhdHVzLCBcbiAgICAgICAgZXJyb3I6IGVycm9yVGV4dCBcbiAgICAgIH0pXG4gICAgICB0aHJvdyBuZXcgQVBJRXJyb3IoYFJlZEdpZnMgQVBJIGVycm9yOiAke3Jlc3BvbnNlLnN0YXR1c30gLSAke2Vycm9yVGV4dH1gKVxuICAgIH1cblxuICAgIHJldHVybiByZXNwb25zZS5qc29uKClcbiAgfVxuXG4gIC8qKlxuICAgKiBFeHRyYWN0IFJlZEdpZnMgSUQgZnJvbSBVUkxcbiAgICovXG4gIHB1YmxpYyBleHRyYWN0R2lmSWQodXJsOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IHBhdHRlcm5zID0gW1xuICAgICAgL3JlZGdpZnNcXC5jb21cXC93YXRjaFxcLyhbYS16QS1aMC05XSspLyxcbiAgICAgIC9yZWRnaWZzXFwuY29tXFwvaWZyXFwvKFthLXpBLVowLTldKykvLFxuICAgICAgL3JlZGdpZnNcXC5jb21cXC8oW2EtekEtWjAtOV0rKSQvLFxuICAgICAgL1xcLyhbYS16QS1aMC05XSspJC9cbiAgICBdXG5cbiAgICBmb3IgKGNvbnN0IHBhdHRlcm4gb2YgcGF0dGVybnMpIHtcbiAgICAgIGNvbnN0IG1hdGNoID0gdXJsLm1hdGNoKHBhdHRlcm4pXG4gICAgICBpZiAobWF0Y2ggJiYgbWF0Y2hbMV0pIHtcbiAgICAgICAgcmV0dXJuIG1hdGNoWzFdLnRvTG93ZXJDYXNlKClcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKCdJbnZhbGlkIFJlZEdpZnMgVVJMIGZvcm1hdCcpXG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgVVJMIGlzIGEgUmVkR2lmcyBVUkxcbiAgICovXG4gIHB1YmxpYyBpc1JlZEdpZnNVcmwodXJsOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdXJsLmluY2x1ZGVzKCdyZWRnaWZzLmNvbScpIHx8IHVybC5pbmNsdWRlcygncmVkZ2lmcy5jb20nKVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBtZXRhZGF0YSBmb3IgYSBzcGVjaWZpYyBnaWYgYnkgSURcbiAgICovXG4gIHB1YmxpYyBhc3luYyBnZXRHaWZNZXRhZGF0YShnaWZJZDogc3RyaW5nKTogUHJvbWlzZTxSZWRHaWZNZXRhZGF0YT4ge1xuICAgIHRyeSB7XG4gICAgICBsb2dnZXIuaW5mbygnRmV0Y2hpbmcgUmVkR2lmcyBtZXRhZGF0YScsIHsgZ2lmSWQgfSlcbiAgICAgIFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLm1ha2VSZXF1ZXN0PHsgZ2lmOiBSZWRHaWZNZXRhZGF0YSB9PihgL2dpZnMvJHtnaWZJZH1gKVxuICAgICAgXG4gICAgICBpZiAoIXJlc3BvbnNlLmdpZikge1xuICAgICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKCdHaWYgbm90IGZvdW5kJylcbiAgICAgIH1cblxuICAgICAgbG9nZ2VyLmluZm8oJ1N1Y2Nlc3NmdWxseSBmZXRjaGVkIFJlZEdpZnMgbWV0YWRhdGEnLCB7IFxuICAgICAgICBnaWZJZCwgXG4gICAgICAgIHRpdGxlOiByZXNwb25zZS5naWYudGl0bGUsXG4gICAgICAgIHRhZ3M6IHJlc3BvbnNlLmdpZi50YWdzPy5sZW5ndGggfHwgMFxuICAgICAgfSlcblxuICAgICAgcmV0dXJuIHJlc3BvbnNlLmdpZlxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0ZhaWxlZCB0byBmZXRjaCBSZWRHaWZzIG1ldGFkYXRhJywgeyBnaWZJZCwgZXJyb3IgfSlcbiAgICAgIHRocm93IGVycm9yXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBtZXRhZGF0YSBmcm9tIFJlZEdpZnMgVVJMXG4gICAqL1xuICBwdWJsaWMgYXN5bmMgZ2V0TWV0YWRhdGFGcm9tVXJsKHVybDogc3RyaW5nKTogUHJvbWlzZTxSZWRHaWZNZXRhZGF0YT4ge1xuICAgIGlmICghdGhpcy5pc1JlZEdpZnNVcmwodXJsKSkge1xuICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcignVVJMIGlzIG5vdCBhIFJlZEdpZnMgVVJMJylcbiAgICB9XG5cbiAgICBjb25zdCBnaWZJZCA9IHRoaXMuZXh0cmFjdEdpZklkKHVybClcbiAgICByZXR1cm4gdGhpcy5nZXRHaWZNZXRhZGF0YShnaWZJZClcbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZXJ0IFJlZEdpZnMgVVJMIHRvIGVtYmVkIGZvcm1hdFxuICAgKiBSZXR1cm5zIHRoZSBpZnJhbWUgVVJMIHRoYXQgc2hvd3MganVzdCB0aGUgZ2lmIHdpdGhvdXQgdGhlIGZ1bGwgd2Vic2l0ZSBpbnRlcmZhY2VcbiAgICovXG4gIHB1YmxpYyBnZXRFbWJlZFVybChnaWZJZDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAvLyBVc2UgdGhlIGlmcmFtZSBVUkwgdGhhdCBzaG93cyBvbmx5IHRoZSBnaWYgY29udGVudFxuICAgIHJldHVybiBgaHR0cHM6Ly93d3cucmVkZ2lmcy5jb20vaWZyLyR7Z2lmSWR9P3Bvc3Rlcj0wYFxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBkaXJlY3QgZ2lmIFVSTCBmcm9tIG1ldGFkYXRhXG4gICAqL1xuICBwdWJsaWMgZ2V0RGlyZWN0R2lmVXJsKG1ldGFkYXRhOiBSZWRHaWZNZXRhZGF0YSk6IHN0cmluZyB7XG4gICAgLy8gUmV0dXJuIHRoZSBIRCBVUkwgaWYgYXZhaWxhYmxlLCBvdGhlcndpc2UgU0QsIG90aGVyd2lzZSBmYWxsYmFjayB0byBlbWJlZFxuICAgIHJldHVybiBtZXRhZGF0YS51cmxzPy5oZCB8fCBtZXRhZGF0YS51cmxzPy5zZCB8fCB0aGlzLmdldEVtYmVkVXJsKG1ldGFkYXRhLmlkKVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aHVtYm5haWwgVVJMIGZvciBhIGdpZlxuICAgKi9cbiAgcHVibGljIGdldFRodW1ibmFpbFVybChnaWZJZDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYGh0dHBzOi8vdGh1bWJzNC5yZWRnaWZzLmNvbS8ke2dpZklkfS1wb3N0ZXIuanBnYFxuICB9XG5cbiAgLyoqXG4gICAqIFNlYXJjaCBmb3IgZ2lmcyBieSB0YWdzIG9yIHF1ZXJ5XG4gICAqL1xuICBwdWJsaWMgYXN5bmMgc2VhcmNoR2lmcyhxdWVyeTogc3RyaW5nLCBvcHRpb25zOiB7XG4gICAgcGFnZT86IG51bWJlclxuICAgIGNvdW50PzogbnVtYmVyXG4gICAgb3JkZXI/OiAndHJlbmRpbmcnIHwgJ2xhdGVzdCcgfCAndG9wJ1xuICB9ID0ge30pOiBQcm9taXNlPFJlZEdpZlNlYXJjaFJlc3VsdD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IHBhZ2UgPSAxLCBjb3VudCA9IDIwLCBvcmRlciA9ICd0cmVuZGluZycgfSA9IG9wdGlvbnNcbiAgICAgIFxuICAgICAgY29uc3QgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh7XG4gICAgICAgIHNlYXJjaF90ZXh0OiBxdWVyeSxcbiAgICAgICAgb3JkZXIsXG4gICAgICAgIGNvdW50OiBjb3VudC50b1N0cmluZygpLFxuICAgICAgICBwYWdlOiBwYWdlLnRvU3RyaW5nKCksXG4gICAgICB9KVxuXG4gICAgICBsb2dnZXIuaW5mbygnU2VhcmNoaW5nIFJlZEdpZnMnLCB7IHF1ZXJ5LCBvcHRpb25zIH0pXG4gICAgICBcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5tYWtlUmVxdWVzdDx7XG4gICAgICAgIGdpZnM6IFJlZEdpZk1ldGFkYXRhW11cbiAgICAgICAgdG90YWw6IG51bWJlclxuICAgICAgICBwYWdlOiBudW1iZXJcbiAgICAgIH0+KGAvZ2lmcy9zZWFyY2g/JHtwYXJhbXN9YClcblxuICAgICAgbG9nZ2VyLmluZm8oJ1JlZEdpZnMgc2VhcmNoIGNvbXBsZXRlZCcsIHsgXG4gICAgICAgIHF1ZXJ5LCBcbiAgICAgICAgcmVzdWx0czogcmVzcG9uc2UuZ2lmcz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgIHRvdGFsOiByZXNwb25zZS50b3RhbCBcbiAgICAgIH0pXG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGdpZnM6IHJlc3BvbnNlLmdpZnMgfHwgW10sXG4gICAgICAgIHRvdGFsOiByZXNwb25zZS50b3RhbCB8fCAwLFxuICAgICAgICBwYWdlOiByZXNwb25zZS5wYWdlIHx8IHBhZ2UsXG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRmFpbGVkIHRvIHNlYXJjaCBSZWRHaWZzJywgeyBxdWVyeSwgb3B0aW9ucywgZXJyb3IgfSlcbiAgICAgIHRocm93IGVycm9yXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0cmVuZGluZyBnaWZzXG4gICAqL1xuICBwdWJsaWMgYXN5bmMgZ2V0VHJlbmRpbmdHaWZzKGNvdW50OiBudW1iZXIgPSAxMCk6IFByb21pc2U8UmVkR2lmTWV0YWRhdGFbXT4ge1xuICAgIHRyeSB7XG4gICAgICBsb2dnZXIuaW5mbygnRmV0Y2hpbmcgdHJlbmRpbmcgUmVkR2lmcycsIHsgY291bnQgfSlcbiAgICAgIFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLm1ha2VSZXF1ZXN0PHsgZ2lmczogUmVkR2lmTWV0YWRhdGFbXSB9PihgL2dpZnMvdHJlbmRpbmc/Y291bnQ9JHtjb3VudH1gKVxuICAgICAgXG4gICAgICBsb2dnZXIuaW5mbygnU3VjY2Vzc2Z1bGx5IGZldGNoZWQgdHJlbmRpbmcgZ2lmcycsIHsgXG4gICAgICAgIGNvdW50OiByZXNwb25zZS5naWZzPy5sZW5ndGggfHwgMCBcbiAgICAgIH0pXG5cbiAgICAgIHJldHVybiByZXNwb25zZS5naWZzIHx8IFtdXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRmFpbGVkIHRvIGZldGNoIHRyZW5kaW5nIGdpZnMnLCB7IGNvdW50LCBlcnJvciB9KVxuICAgICAgdGhyb3cgZXJyb3JcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVmFsaWRhdGUgYW5kIHByb2Nlc3MgUmVkR2lmcyBVUkwgZm9yIHVwbG9hZFxuICAgKi9cbiAgcHVibGljIGFzeW5jIHByb2Nlc3NSZWRHaWZzVXJsKHVybDogc3RyaW5nKTogUHJvbWlzZTx7XG4gICAgZW1iZWRVcmw6IHN0cmluZ1xuICAgIHRodW1ibmFpbDogc3RyaW5nXG4gICAgbWV0YWRhdGE6IFJlZEdpZk1ldGFkYXRhXG4gICAgdGFnczogc3RyaW5nW11cbiAgfT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBtZXRhZGF0YSA9IGF3YWl0IHRoaXMuZ2V0TWV0YWRhdGFGcm9tVXJsKHVybClcbiAgICAgIGNvbnN0IGdpZklkID0gdGhpcy5leHRyYWN0R2lmSWQodXJsKVxuXG4gICAgICAvLyBVc2UgZGlyZWN0IGdpZiBVUkwgZm9yIGJldHRlciBlbWJlZGRpbmcgZXhwZXJpZW5jZVxuICAgICAgY29uc3QgZW1iZWRVcmwgPSB0aGlzLmdldERpcmVjdEdpZlVybChtZXRhZGF0YSlcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZW1iZWRVcmwsXG4gICAgICAgIHRodW1ibmFpbDogdGhpcy5nZXRUaHVtYm5haWxVcmwoZ2lmSWQpLFxuICAgICAgICBtZXRhZGF0YSxcbiAgICAgICAgdGFnczogbWV0YWRhdGEudGFncyB8fCBbXVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0ZhaWxlZCB0byBwcm9jZXNzIFJlZEdpZnMgVVJMJywgeyB1cmwsIGVycm9yIH0pXG4gICAgICB0aHJvdyBlcnJvclxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgY29uc3QgcmVkR2lmc1NlcnZpY2UgPSBuZXcgUmVkR2lmc1NlcnZpY2UoKSJdLCJuYW1lcyI6WyJsb2dnZXIiLCJWYWxpZGF0aW9uRXJyb3IiLCJBUElFcnJvciIsIlJlZEdpZnNTZXJ2aWNlIiwiZ2V0VG9rZW4iLCJ0b2tlbiIsIkRhdGUiLCJub3ciLCJ0b2tlbkV4cGlyeSIsImluZm8iLCJyZXNwb25zZSIsImZldGNoIiwiQkFTRV9VUkwiLCJtZXRob2QiLCJoZWFkZXJzIiwib2siLCJzdGF0dXMiLCJkYXRhIiwianNvbiIsImVycm9yIiwibWFrZVJlcXVlc3QiLCJlbmRwb2ludCIsIm9wdGlvbnMiLCJlcnJvclRleHQiLCJ0ZXh0IiwiZXh0cmFjdEdpZklkIiwidXJsIiwicGF0dGVybnMiLCJwYXR0ZXJuIiwibWF0Y2giLCJ0b0xvd2VyQ2FzZSIsImlzUmVkR2lmc1VybCIsImluY2x1ZGVzIiwiZ2V0R2lmTWV0YWRhdGEiLCJnaWZJZCIsImdpZiIsInRpdGxlIiwidGFncyIsImxlbmd0aCIsImdldE1ldGFkYXRhRnJvbVVybCIsImdldEVtYmVkVXJsIiwiZ2V0RGlyZWN0R2lmVXJsIiwibWV0YWRhdGEiLCJ1cmxzIiwiaGQiLCJzZCIsImlkIiwiZ2V0VGh1bWJuYWlsVXJsIiwic2VhcmNoR2lmcyIsInF1ZXJ5IiwicGFnZSIsImNvdW50Iiwib3JkZXIiLCJwYXJhbXMiLCJVUkxTZWFyY2hQYXJhbXMiLCJzZWFyY2hfdGV4dCIsInRvU3RyaW5nIiwicmVzdWx0cyIsImdpZnMiLCJ0b3RhbCIsImdldFRyZW5kaW5nR2lmcyIsInByb2Nlc3NSZWRHaWZzVXJsIiwiZW1iZWRVcmwiLCJ0aHVtYm5haWwiLCJyZWRHaWZzU2VydmljZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/services/redgifs.service.ts\n");

/***/ }),

/***/ "(api)/./src/services/video-metadata.service.ts":
/*!************************************************!*\
  !*** ./src/services/video-metadata.service.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   VideoMetadataService: () => (/* binding */ VideoMetadataService),\n/* harmony export */   videoMetadataService: () => (/* binding */ videoMetadataService)\n/* harmony export */ });\n/* harmony import */ var _lib_logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lib/logger */ \"(api)/./src/lib/logger.ts\");\n\nclass VideoMetadataService {\n    async extractMetadata(originalUrl) {\n        try {\n            // Check for direct video file URLs\n            if (this.isDirectVideoFile(originalUrl)) {\n                return this.extractDirectVideoMetadata(originalUrl);\n            }\n            // Try to match against supported platforms\n            for (const [platform, config] of Object.entries(this.supportedPlatforms)){\n                for (const pattern of config.patterns){\n                    const match = originalUrl.match(pattern);\n                    if (match) {\n                        const videoId = match[1];\n                        _lib_logger__WEBPACK_IMPORTED_MODULE_0__.logger.info(`Extracting metadata for ${platform}`, {\n                            videoId,\n                            originalUrl\n                        });\n                        return await config.extract(videoId);\n                    }\n                }\n            }\n            // Try generic oEmbed extraction\n            const oEmbedResult = await this.extractOEmbedMetadata(originalUrl);\n            if (oEmbedResult) {\n                return oEmbedResult;\n            }\n            // Fallback to URL-based extraction\n            return this.extractFallbackMetadata(originalUrl);\n        } catch (error) {\n            _lib_logger__WEBPACK_IMPORTED_MODULE_0__.logger.error(\"Error extracting video metadata\", {\n                originalUrl,\n                error\n            });\n            return this.extractFallbackMetadata(originalUrl);\n        }\n    }\n    isDirectVideoFile(url) {\n        const videoExtensions = [\n            \".mp4\",\n            \".mov\",\n            \".avi\",\n            \".mkv\",\n            \".webm\",\n            \".flv\",\n            \".wmv\",\n            \".m4v\"\n        ];\n        const urlPath = new URL(url).pathname.toLowerCase();\n        return videoExtensions.some((ext)=>urlPath.endsWith(ext));\n    }\n    extractDirectVideoMetadata(originalUrl) {\n        const url = new URL(originalUrl);\n        const filename = url.pathname.split(\"/\").pop() || \"video\";\n        const title = filename.replace(/\\.[^/.]+$/, \"\").replace(/[-_]/g, \" \");\n        return {\n            title: this.titleCase(title),\n            description: `Direct video file: ${filename}`,\n            tags: [\n                \"video\",\n                \"direct-upload\"\n            ],\n            platform: \"direct\",\n            thumbnail: undefined\n        };\n    }\n    async extractYouTubeMetadata(videoId) {\n        try {\n            // Use YouTube oEmbed API for basic metadata\n            const response = await fetch(`https://www.youtube.com/oembed?url=https://www.youtube.com/watch?v=${videoId}&format=json`);\n            if (!response.ok) {\n                throw new Error(`YouTube API error: ${response.status}`);\n            }\n            const data = await response.json();\n            // Extract tags from title and description using keywords\n            const tags = this.extractTagsFromText(`${data.title} ${data.author_name}`);\n            return {\n                title: data.title || `YouTube Video ${videoId}`,\n                description: `Video by ${data.author_name}`,\n                tags,\n                thumbnail: data.thumbnail_url\n            };\n        } catch (error) {\n            _lib_logger__WEBPACK_IMPORTED_MODULE_0__.logger.error(\"Error extracting YouTube metadata\", {\n                videoId,\n                error\n            });\n            return {\n                title: `YouTube Video ${videoId}`,\n                description: \"\",\n                tags: [\n                    \"youtube\"\n                ],\n                thumbnail: `https://img.youtube.com/vi/${videoId}/maxresdefault.jpg`\n            };\n        }\n    }\n    async extractVimeoMetadata(videoId) {\n        try {\n            // Use Vimeo oEmbed API\n            const response = await fetch(`https://vimeo.com/api/oembed.json?url=https://vimeo.com/${videoId}`);\n            if (!response.ok) {\n                throw new Error(`Vimeo API error: ${response.status}`);\n            }\n            const data = await response.json();\n            // Extract tags from title and author\n            const tags = this.extractTagsFromText(`${data.title} ${data.author_name}`);\n            return {\n                title: data.title || `Vimeo Video ${videoId}`,\n                description: data.description || `Video by ${data.author_name}`,\n                tags,\n                thumbnail: data.thumbnail_url,\n                duration: data.duration\n            };\n        } catch (error) {\n            _lib_logger__WEBPACK_IMPORTED_MODULE_0__.logger.error(\"Error extracting Vimeo metadata\", {\n                videoId,\n                error\n            });\n            return {\n                title: `Vimeo Video ${videoId}`,\n                description: \"\",\n                tags: [\n                    \"vimeo\"\n                ]\n            };\n        }\n    }\n    async extractTikTokMetadata(videoId) {\n        try {\n            // TikTok doesn't have a public API, so we'll use URL parsing and generic extraction\n            const url = `https://www.tiktok.com/@user/video/${videoId}`;\n            const oEmbedResult = await this.extractOEmbedMetadata(url);\n            if (oEmbedResult) {\n                return {\n                    ...oEmbedResult,\n                    platform: \"tiktok\",\n                    tags: [\n                        ...oEmbedResult.tags || [],\n                        \"tiktok\",\n                        \"short-form\"\n                    ]\n                };\n            }\n            return {\n                title: `TikTok Video ${videoId}`,\n                description: \"TikTok short-form video content\",\n                tags: [\n                    \"tiktok\",\n                    \"short-form\",\n                    \"social\"\n                ],\n                platform: \"tiktok\"\n            };\n        } catch (error) {\n            _lib_logger__WEBPACK_IMPORTED_MODULE_0__.logger.error(\"Error extracting TikTok metadata\", {\n                videoId,\n                error\n            });\n            return {\n                title: `TikTok Video ${videoId}`,\n                description: \"TikTok short-form video content\",\n                tags: [\n                    \"tiktok\",\n                    \"short-form\"\n                ],\n                platform: \"tiktok\"\n            };\n        }\n    }\n    async extractInstagramMetadata(videoId) {\n        try {\n            // Instagram oEmbed API\n            const url = `https://www.instagram.com/p/${videoId}/`;\n            const response = await fetch(`https://graph.facebook.com/v8.0/instagram_oembed?url=${encodeURIComponent(url)}&access_token=your_token`);\n            // Since we don't have an access token, fall back to URL parsing\n            const oEmbedResult = await this.extractOEmbedMetadata(url);\n            if (oEmbedResult) {\n                return {\n                    ...oEmbedResult,\n                    platform: \"instagram\",\n                    tags: [\n                        ...oEmbedResult.tags || [],\n                        \"instagram\",\n                        \"social\"\n                    ]\n                };\n            }\n            return {\n                title: `Instagram Video ${videoId}`,\n                description: \"Instagram video content\",\n                tags: [\n                    \"instagram\",\n                    \"social\",\n                    \"video\"\n                ],\n                platform: \"instagram\"\n            };\n        } catch (error) {\n            _lib_logger__WEBPACK_IMPORTED_MODULE_0__.logger.error(\"Error extracting Instagram metadata\", {\n                videoId,\n                error\n            });\n            return {\n                title: `Instagram Video ${videoId}`,\n                description: \"Instagram video content\",\n                tags: [\n                    \"instagram\",\n                    \"social\"\n                ],\n                platform: \"instagram\"\n            };\n        }\n    }\n    async extractTwitterMetadata(videoId) {\n        try {\n            // Twitter oEmbed API\n            const url = `https://twitter.com/user/status/${videoId}`;\n            const response = await fetch(`https://publish.twitter.com/oembed?url=${encodeURIComponent(url)}`);\n            if (response.ok) {\n                const data = await response.json();\n                const tags = this.extractTagsFromText(data.html || \"\");\n                return {\n                    title: data.title || `Twitter Video ${videoId}`,\n                    description: \"Twitter video content\",\n                    tags: [\n                        ...tags,\n                        \"twitter\",\n                        \"social\"\n                    ],\n                    platform: \"twitter\"\n                };\n            }\n            return {\n                title: `Twitter Video ${videoId}`,\n                description: \"Twitter video content\",\n                tags: [\n                    \"twitter\",\n                    \"social\",\n                    \"video\"\n                ],\n                platform: \"twitter\"\n            };\n        } catch (error) {\n            _lib_logger__WEBPACK_IMPORTED_MODULE_0__.logger.error(\"Error extracting Twitter metadata\", {\n                videoId,\n                error\n            });\n            return {\n                title: `Twitter Video ${videoId}`,\n                description: \"Twitter video content\",\n                tags: [\n                    \"twitter\",\n                    \"social\"\n                ],\n                platform: \"twitter\"\n            };\n        }\n    }\n    async extractDailymotionMetadata(videoId) {\n        try {\n            // Dailymotion oEmbed API\n            const response = await fetch(`https://www.dailymotion.com/services/oembed?url=https://www.dailymotion.com/video/${videoId}&format=json`);\n            if (response.ok) {\n                const data = await response.json();\n                const tags = this.extractTagsFromText(`${data.title} ${data.author_name}`);\n                return {\n                    title: data.title || `Dailymotion Video ${videoId}`,\n                    description: `Video by ${data.author_name}`,\n                    tags: [\n                        ...tags,\n                        \"dailymotion\"\n                    ],\n                    thumbnail: data.thumbnail_url,\n                    platform: \"dailymotion\"\n                };\n            }\n            return {\n                title: `Dailymotion Video ${videoId}`,\n                description: \"Dailymotion video content\",\n                tags: [\n                    \"dailymotion\",\n                    \"video\"\n                ],\n                platform: \"dailymotion\"\n            };\n        } catch (error) {\n            _lib_logger__WEBPACK_IMPORTED_MODULE_0__.logger.error(\"Error extracting Dailymotion metadata\", {\n                videoId,\n                error\n            });\n            return {\n                title: `Dailymotion Video ${videoId}`,\n                description: \"Dailymotion video content\",\n                tags: [\n                    \"dailymotion\"\n                ],\n                platform: \"dailymotion\"\n            };\n        }\n    }\n    async extractTwitchMetadata(videoId) {\n        try {\n            // Twitch doesn't have public oEmbed, so we'll use generic extraction\n            const isClip = videoId.length < 15 // Clips have shorter IDs\n            ;\n            const url = isClip ? `https://clips.twitch.tv/${videoId}` : `https://www.twitch.tv/videos/${videoId}`;\n            return {\n                title: isClip ? `Twitch Clip ${videoId}` : `Twitch Video ${videoId}`,\n                description: isClip ? \"Twitch gaming clip\" : \"Twitch gaming video\",\n                tags: [\n                    \"twitch\",\n                    \"gaming\",\n                    \"streaming\",\n                    isClip ? \"clip\" : \"vod\"\n                ],\n                platform: \"twitch\"\n            };\n        } catch (error) {\n            _lib_logger__WEBPACK_IMPORTED_MODULE_0__.logger.error(\"Error extracting Twitch metadata\", {\n                videoId,\n                error\n            });\n            return {\n                title: `Twitch Content ${videoId}`,\n                description: \"Twitch gaming content\",\n                tags: [\n                    \"twitch\",\n                    \"gaming\"\n                ],\n                platform: \"twitch\"\n            };\n        }\n    }\n    async extractOEmbedMetadata(originalUrl) {\n        try {\n            // Try common oEmbed endpoints\n            const oEmbedEndpoints = [\n                `https://noembed.com/embed?url=${encodeURIComponent(originalUrl)}`,\n                `https://iframe.ly/api/oembed?url=${encodeURIComponent(originalUrl)}&api_key=your_key`\n            ];\n            for (const endpoint of oEmbedEndpoints){\n                try {\n                    const response = await fetch(endpoint);\n                    if (response.ok) {\n                        const data = await response.json();\n                        if (data.title) {\n                            const tags = this.extractTagsFromText(`${data.title} ${data.description || \"\"} ${data.author_name || \"\"}`);\n                            return {\n                                title: data.title,\n                                description: data.description || \"\",\n                                tags,\n                                thumbnail: data.thumbnail_url,\n                                platform: \"generic\"\n                            };\n                        }\n                    }\n                } catch (err) {\n                    continue;\n                }\n            }\n            return null;\n        } catch (error) {\n            _lib_logger__WEBPACK_IMPORTED_MODULE_0__.logger.error(\"Error extracting oEmbed metadata\", {\n                originalUrl,\n                error\n            });\n            return null;\n        }\n    }\n    extractFallbackMetadata(originalUrl) {\n        // Extract domain and basic info from URL\n        try {\n            const url = new URL(originalUrl);\n            const domain = url.hostname.replace(\"www.\", \"\");\n            const pathSegments = url.pathname.split(\"/\").filter(Boolean);\n            // Generate a basic title from URL\n            const title = pathSegments.length > 0 ? this.titleCase(pathSegments[pathSegments.length - 1].replace(/[-_]/g, \" \")) : `Video from ${domain}`;\n            return {\n                title,\n                description: `Video from ${domain}`,\n                tags: [\n                    domain.split(\".\")[0]\n                ]\n            };\n        } catch (error) {\n            return {\n                title: \"Uploaded Video\",\n                description: \"\",\n                tags: [\n                    \"video\"\n                ]\n            };\n        }\n    }\n    extractTagsFromText(text) {\n        if (!text) return [];\n        const commonVideoTags = [\n            \"music\",\n            \"gaming\",\n            \"sports\",\n            \"news\",\n            \"education\",\n            \"entertainment\",\n            \"technology\",\n            \"science\",\n            \"cooking\",\n            \"travel\",\n            \"fashion\",\n            \"fitness\",\n            \"comedy\",\n            \"tutorial\",\n            \"review\",\n            \"unboxing\",\n            \"vlog\",\n            \"documentary\",\n            \"animation\",\n            \"film\",\n            \"art\",\n            \"design\",\n            \"programming\",\n            \"business\",\n            \"lifestyle\",\n            \"health\",\n            \"beauty\",\n            \"diy\",\n            \"how-to\",\n            \"tips\",\n            \"guide\"\n        ];\n        const tags = [];\n        const lowerText = text.toLowerCase();\n        // Check for common video tags in the text\n        commonVideoTags.forEach((tag)=>{\n            if (lowerText.includes(tag)) {\n                tags.push(tag);\n            }\n        });\n        // Extract hashtags if present\n        const hashtagMatches = text.match(/#\\w+/g);\n        if (hashtagMatches) {\n            hashtagMatches.forEach((hashtag)=>{\n                tags.push(hashtag.substring(1).toLowerCase());\n            });\n        }\n        // If no specific tags found, try to categorize based on keywords\n        if (tags.length === 0) {\n            if (/music|song|album|artist|band|concert/i.test(text)) tags.push(\"music\");\n            if (/game|gaming|play|xbox|playstation|nintendo/i.test(text)) tags.push(\"gaming\");\n            if (/tutorial|how.?to|guide|learn|lesson/i.test(text)) tags.push(\"tutorial\");\n            if (/review|unboxing|test|comparison/i.test(text)) tags.push(\"review\");\n            if (/funny|comedy|humor|laugh|joke/i.test(text)) tags.push(\"comedy\");\n            if (/food|cooking|recipe|kitchen|chef/i.test(text)) tags.push(\"cooking\");\n            if (/tech|technology|software|app|coding|programming/i.test(text)) tags.push(\"technology\");\n            if (/news|breaking|update|report/i.test(text)) tags.push(\"news\");\n            if (/sport|football|basketball|soccer|tennis/i.test(text)) tags.push(\"sports\");\n            if (/travel|vacation|trip|adventure|explore/i.test(text)) tags.push(\"travel\");\n        }\n        // Ensure we have at least one tag\n        if (tags.length === 0) {\n            tags.push(\"video\");\n        }\n        // Remove duplicates and limit to 5 tags\n        return Array.from(new Set(tags)).slice(0, 5);\n    }\n    titleCase(str) {\n        return str.replace(/\\w\\S*/g, (txt)=>txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase());\n    }\n    constructor(){\n        this.supportedPlatforms = {\n            youtube: {\n                patterns: [\n                    /(?:https?:\\/\\/)?(?:www\\.)?(?:youtube\\.com\\/watch\\?v=|youtu\\.be\\/)([a-zA-Z0-9_-]{11})/,\n                    /(?:https?:\\/\\/)?(?:www\\.)?youtube\\.com\\/embed\\/([a-zA-Z0-9_-]{11})/\n                ],\n                extract: (videoId)=>this.extractYouTubeMetadata(videoId)\n            },\n            vimeo: {\n                patterns: [\n                    /(?:https?:\\/\\/)?(?:www\\.)?vimeo\\.com\\/(\\d+)/,\n                    /(?:https?:\\/\\/)?player\\.vimeo\\.com\\/video\\/(\\d+)/\n                ],\n                extract: (videoId)=>this.extractVimeoMetadata(videoId)\n            },\n            tiktok: {\n                patterns: [\n                    /(?:https?:\\/\\/)?(?:www\\.)?tiktok\\.com\\/@[\\w.-]+\\/video\\/(\\d+)/,\n                    /(?:https?:\\/\\/)?vm\\.tiktok\\.com\\/([a-zA-Z0-9]+)/\n                ],\n                extract: (videoId)=>this.extractTikTokMetadata(videoId)\n            },\n            instagram: {\n                patterns: [\n                    /(?:https?:\\/\\/)?(?:www\\.)?instagram\\.com\\/(?:p|reel)\\/([a-zA-Z0-9_-]+)/,\n                    /(?:https?:\\/\\/)?(?:www\\.)?instagram\\.com\\/tv\\/([a-zA-Z0-9_-]+)/\n                ],\n                extract: (videoId)=>this.extractInstagramMetadata(videoId)\n            },\n            twitter: {\n                patterns: [\n                    /(?:https?:\\/\\/)?(?:www\\.)?(?:twitter\\.com|x\\.com)\\/\\w+\\/status\\/(\\d+)/\n                ],\n                extract: (videoId)=>this.extractTwitterMetadata(videoId)\n            },\n            dailymotion: {\n                patterns: [\n                    /(?:https?:\\/\\/)?(?:www\\.)?dailymotion\\.com\\/video\\/([a-zA-Z0-9]+)/\n                ],\n                extract: (videoId)=>this.extractDailymotionMetadata(videoId)\n            },\n            twitch: {\n                patterns: [\n                    /(?:https?:\\/\\/)?(?:www\\.)?twitch\\.tv\\/videos\\/(\\d+)/,\n                    /(?:https?:\\/\\/)?clips\\.twitch\\.tv\\/([a-zA-Z0-9_-]+)/\n                ],\n                extract: (videoId)=>this.extractTwitchMetadata(videoId)\n            }\n        };\n    }\n}\nconst videoMetadataService = new VideoMetadataService();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvc2VydmljZXMvdmlkZW8tbWV0YWRhdGEuc2VydmljZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBc0M7QUFZL0IsTUFBTUM7SUFtRFgsTUFBTUMsZ0JBQWdCQyxXQUFtQixFQUEwQjtRQUNqRSxJQUFJO1lBQ0YsbUNBQW1DO1lBQ25DLElBQUksSUFBSSxDQUFDQyxpQkFBaUIsQ0FBQ0QsY0FBYztnQkFDdkMsT0FBTyxJQUFJLENBQUNFLDBCQUEwQixDQUFDRjtZQUN6QztZQUVBLDJDQUEyQztZQUMzQyxLQUFLLE1BQU0sQ0FBQ0csVUFBVUMsT0FBTyxJQUFJQyxPQUFPQyxPQUFPLENBQUMsSUFBSSxDQUFDQyxrQkFBa0IsRUFBRztnQkFDeEUsS0FBSyxNQUFNQyxXQUFXSixPQUFPSyxRQUFRLENBQUU7b0JBQ3JDLE1BQU1DLFFBQVFWLFlBQVlVLEtBQUssQ0FBQ0Y7b0JBQ2hDLElBQUlFLE9BQU87d0JBQ1QsTUFBTUMsVUFBVUQsS0FBSyxDQUFDLEVBQUU7d0JBQ3hCYiwrQ0FBTUEsQ0FBQ2UsSUFBSSxDQUFDLENBQUMsd0JBQXdCLEVBQUVULFNBQVMsQ0FBQyxFQUFFOzRCQUFFUTs0QkFBU1g7d0JBQVk7d0JBQzFFLE9BQU8sTUFBTUksT0FBT1MsT0FBTyxDQUFDRjtvQkFDOUI7Z0JBQ0Y7WUFDRjtZQUVBLGdDQUFnQztZQUNoQyxNQUFNRyxlQUFlLE1BQU0sSUFBSSxDQUFDQyxxQkFBcUIsQ0FBQ2Y7WUFDdEQsSUFBSWMsY0FBYztnQkFDaEIsT0FBT0E7WUFDVDtZQUVBLG1DQUFtQztZQUNuQyxPQUFPLElBQUksQ0FBQ0UsdUJBQXVCLENBQUNoQjtRQUN0QyxFQUFFLE9BQU9pQixPQUFPO1lBQ2RwQiwrQ0FBTUEsQ0FBQ29CLEtBQUssQ0FBQyxtQ0FBbUM7Z0JBQUVqQjtnQkFBYWlCO1lBQU07WUFDckUsT0FBTyxJQUFJLENBQUNELHVCQUF1QixDQUFDaEI7UUFDdEM7SUFDRjtJQUVRQyxrQkFBa0JpQixHQUFXLEVBQVc7UUFDOUMsTUFB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cmF0ZW15LW5leHRqcy8uL3NyYy9zZXJ2aWNlcy92aWRlby1tZXRhZGF0YS5zZXJ2aWNlLnRzPzdiYjMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSAnLi4vbGliL2xvZ2dlcidcbmltcG9ydCB7IFZBTElEQVRJT05fUEFUVEVSTlMgfSBmcm9tICcuLi9saWIvY29uc3RhbnRzJ1xuXG5leHBvcnQgaW50ZXJmYWNlIFZpZGVvTWV0YWRhdGEge1xuICB0aXRsZTogc3RyaW5nXG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nXG4gIHRhZ3M6IHN0cmluZ1tdXG4gIHRodW1ibmFpbD86IHN0cmluZ1xuICBkdXJhdGlvbj86IG51bWJlclxuICBwbGF0Zm9ybT86IHN0cmluZ1xufVxuXG5leHBvcnQgY2xhc3MgVmlkZW9NZXRhZGF0YVNlcnZpY2Uge1xuICBwcml2YXRlIHJlYWRvbmx5IHN1cHBvcnRlZFBsYXRmb3JtcyA9IHtcbiAgICB5b3V0dWJlOiB7XG4gICAgICBwYXR0ZXJuczogW1xuICAgICAgICAvKD86aHR0cHM/OlxcL1xcLyk/KD86d3d3XFwuKT8oPzp5b3V0dWJlXFwuY29tXFwvd2F0Y2hcXD92PXx5b3V0dVxcLmJlXFwvKShbYS16QS1aMC05Xy1dezExfSkvLFxuICAgICAgICAvKD86aHR0cHM/OlxcL1xcLyk/KD86d3d3XFwuKT95b3V0dWJlXFwuY29tXFwvZW1iZWRcXC8oW2EtekEtWjAtOV8tXXsxMX0pL1xuICAgICAgXSxcbiAgICAgIGV4dHJhY3Q6ICh2aWRlb0lkOiBzdHJpbmcpID0+IHRoaXMuZXh0cmFjdFlvdVR1YmVNZXRhZGF0YSh2aWRlb0lkKVxuICAgIH0sXG4gICAgdmltZW86IHtcbiAgICAgIHBhdHRlcm5zOiBbXG4gICAgICAgIC8oPzpodHRwcz86XFwvXFwvKT8oPzp3d3dcXC4pP3ZpbWVvXFwuY29tXFwvKFxcZCspLyxcbiAgICAgICAgLyg/Omh0dHBzPzpcXC9cXC8pP3BsYXllclxcLnZpbWVvXFwuY29tXFwvdmlkZW9cXC8oXFxkKykvXG4gICAgICBdLFxuICAgICAgZXh0cmFjdDogKHZpZGVvSWQ6IHN0cmluZykgPT4gdGhpcy5leHRyYWN0VmltZW9NZXRhZGF0YSh2aWRlb0lkKVxuICAgIH0sXG4gICAgdGlrdG9rOiB7XG4gICAgICBwYXR0ZXJuczogW1xuICAgICAgICAvKD86aHR0cHM/OlxcL1xcLyk/KD86d3d3XFwuKT90aWt0b2tcXC5jb21cXC9AW1xcdy4tXStcXC92aWRlb1xcLyhcXGQrKS8sXG4gICAgICAgIC8oPzpodHRwcz86XFwvXFwvKT92bVxcLnRpa3Rva1xcLmNvbVxcLyhbYS16QS1aMC05XSspL1xuICAgICAgXSxcbiAgICAgIGV4dHJhY3Q6ICh2aWRlb0lkOiBzdHJpbmcpID0+IHRoaXMuZXh0cmFjdFRpa1Rva01ldGFkYXRhKHZpZGVvSWQpXG4gICAgfSxcbiAgICBpbnN0YWdyYW06IHtcbiAgICAgIHBhdHRlcm5zOiBbXG4gICAgICAgIC8oPzpodHRwcz86XFwvXFwvKT8oPzp3d3dcXC4pP2luc3RhZ3JhbVxcLmNvbVxcLyg/OnB8cmVlbClcXC8oW2EtekEtWjAtOV8tXSspLyxcbiAgICAgICAgLyg/Omh0dHBzPzpcXC9cXC8pPyg/Ond3d1xcLik/aW5zdGFncmFtXFwuY29tXFwvdHZcXC8oW2EtekEtWjAtOV8tXSspL1xuICAgICAgXSxcbiAgICAgIGV4dHJhY3Q6ICh2aWRlb0lkOiBzdHJpbmcpID0+IHRoaXMuZXh0cmFjdEluc3RhZ3JhbU1ldGFkYXRhKHZpZGVvSWQpXG4gICAgfSxcbiAgICB0d2l0dGVyOiB7XG4gICAgICBwYXR0ZXJuczogW1xuICAgICAgICAvKD86aHR0cHM/OlxcL1xcLyk/KD86d3d3XFwuKT8oPzp0d2l0dGVyXFwuY29tfHhcXC5jb20pXFwvXFx3K1xcL3N0YXR1c1xcLyhcXGQrKS9cbiAgICAgIF0sXG4gICAgICBleHRyYWN0OiAodmlkZW9JZDogc3RyaW5nKSA9PiB0aGlzLmV4dHJhY3RUd2l0dGVyTWV0YWRhdGEodmlkZW9JZClcbiAgICB9LFxuICAgIGRhaWx5bW90aW9uOiB7XG4gICAgICBwYXR0ZXJuczogW1xuICAgICAgICAvKD86aHR0cHM/OlxcL1xcLyk/KD86d3d3XFwuKT9kYWlseW1vdGlvblxcLmNvbVxcL3ZpZGVvXFwvKFthLXpBLVowLTldKykvXG4gICAgICBdLFxuICAgICAgZXh0cmFjdDogKHZpZGVvSWQ6IHN0cmluZykgPT4gdGhpcy5leHRyYWN0RGFpbHltb3Rpb25NZXRhZGF0YSh2aWRlb0lkKVxuICAgIH0sXG4gICAgdHdpdGNoOiB7XG4gICAgICBwYXR0ZXJuczogW1xuICAgICAgICAvKD86aHR0cHM/OlxcL1xcLyk/KD86d3d3XFwuKT90d2l0Y2hcXC50dlxcL3ZpZGVvc1xcLyhcXGQrKS8sXG4gICAgICAgIC8oPzpodHRwcz86XFwvXFwvKT9jbGlwc1xcLnR3aXRjaFxcLnR2XFwvKFthLXpBLVowLTlfLV0rKS9cbiAgICAgIF0sXG4gICAgICBleHRyYWN0OiAodmlkZW9JZDogc3RyaW5nKSA9PiB0aGlzLmV4dHJhY3RUd2l0Y2hNZXRhZGF0YSh2aWRlb0lkKVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGV4dHJhY3RNZXRhZGF0YShvcmlnaW5hbFVybDogc3RyaW5nKTogUHJvbWlzZTxWaWRlb01ldGFkYXRhPiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIENoZWNrIGZvciBkaXJlY3QgdmlkZW8gZmlsZSBVUkxzXG4gICAgICBpZiAodGhpcy5pc0RpcmVjdFZpZGVvRmlsZShvcmlnaW5hbFVybCkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXh0cmFjdERpcmVjdFZpZGVvTWV0YWRhdGEob3JpZ2luYWxVcmwpXG4gICAgICB9XG5cbiAgICAgIC8vIFRyeSB0byBtYXRjaCBhZ2FpbnN0IHN1cHBvcnRlZCBwbGF0Zm9ybXNcbiAgICAgIGZvciAoY29uc3QgW3BsYXRmb3JtLCBjb25maWddIG9mIE9iamVjdC5lbnRyaWVzKHRoaXMuc3VwcG9ydGVkUGxhdGZvcm1zKSkge1xuICAgICAgICBmb3IgKGNvbnN0IHBhdHRlcm4gb2YgY29uZmlnLnBhdHRlcm5zKSB7XG4gICAgICAgICAgY29uc3QgbWF0Y2ggPSBvcmlnaW5hbFVybC5tYXRjaChwYXR0ZXJuKVxuICAgICAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICAgICAgY29uc3QgdmlkZW9JZCA9IG1hdGNoWzFdXG4gICAgICAgICAgICBsb2dnZXIuaW5mbyhgRXh0cmFjdGluZyBtZXRhZGF0YSBmb3IgJHtwbGF0Zm9ybX1gLCB7IHZpZGVvSWQsIG9yaWdpbmFsVXJsIH0pXG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgY29uZmlnLmV4dHJhY3QodmlkZW9JZClcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gVHJ5IGdlbmVyaWMgb0VtYmVkIGV4dHJhY3Rpb25cbiAgICAgIGNvbnN0IG9FbWJlZFJlc3VsdCA9IGF3YWl0IHRoaXMuZXh0cmFjdE9FbWJlZE1ldGFkYXRhKG9yaWdpbmFsVXJsKVxuICAgICAgaWYgKG9FbWJlZFJlc3VsdCkge1xuICAgICAgICByZXR1cm4gb0VtYmVkUmVzdWx0XG4gICAgICB9XG5cbiAgICAgIC8vIEZhbGxiYWNrIHRvIFVSTC1iYXNlZCBleHRyYWN0aW9uXG4gICAgICByZXR1cm4gdGhpcy5leHRyYWN0RmFsbGJhY2tNZXRhZGF0YShvcmlnaW5hbFVybClcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBleHRyYWN0aW5nIHZpZGVvIG1ldGFkYXRhJywgeyBvcmlnaW5hbFVybCwgZXJyb3IgfSlcbiAgICAgIHJldHVybiB0aGlzLmV4dHJhY3RGYWxsYmFja01ldGFkYXRhKG9yaWdpbmFsVXJsKVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgaXNEaXJlY3RWaWRlb0ZpbGUodXJsOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICBjb25zdCB2aWRlb0V4dGVuc2lvbnMgPSBbJy5tcDQnLCAnLm1vdicsICcuYXZpJywgJy5ta3YnLCAnLndlYm0nLCAnLmZsdicsICcud212JywgJy5tNHYnXVxuICAgIGNvbnN0IHVybFBhdGggPSBuZXcgVVJMKHVybCkucGF0aG5hbWUudG9Mb3dlckNhc2UoKVxuICAgIHJldHVybiB2aWRlb0V4dGVuc2lvbnMuc29tZShleHQgPT4gdXJsUGF0aC5lbmRzV2l0aChleHQpKVxuICB9XG5cbiAgcHJpdmF0ZSBleHRyYWN0RGlyZWN0VmlkZW9NZXRhZGF0YShvcmlnaW5hbFVybDogc3RyaW5nKTogVmlkZW9NZXRhZGF0YSB7XG4gICAgY29uc3QgdXJsID0gbmV3IFVSTChvcmlnaW5hbFVybClcbiAgICBjb25zdCBmaWxlbmFtZSA9IHVybC5wYXRobmFtZS5zcGxpdCgnLycpLnBvcCgpIHx8ICd2aWRlbydcbiAgICBjb25zdCB0aXRsZSA9IGZpbGVuYW1lLnJlcGxhY2UoL1xcLlteLy5dKyQvLCAnJykucmVwbGFjZSgvWy1fXS9nLCAnICcpXG4gICAgXG4gICAgcmV0dXJuIHtcbiAgICAgIHRpdGxlOiB0aGlzLnRpdGxlQ2FzZSh0aXRsZSksXG4gICAgICBkZXNjcmlwdGlvbjogYERpcmVjdCB2aWRlbyBmaWxlOiAke2ZpbGVuYW1lfWAsXG4gICAgICB0YWdzOiBbJ3ZpZGVvJywgJ2RpcmVjdC11cGxvYWQnXSxcbiAgICAgIHBsYXRmb3JtOiAnZGlyZWN0JyxcbiAgICAgIHRodW1ibmFpbDogdW5kZWZpbmVkXG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBleHRyYWN0WW91VHViZU1ldGFkYXRhKHZpZGVvSWQ6IHN0cmluZyk6IFByb21pc2U8VmlkZW9NZXRhZGF0YT4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBVc2UgWW91VHViZSBvRW1iZWQgQVBJIGZvciBiYXNpYyBtZXRhZGF0YVxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgaHR0cHM6Ly93d3cueW91dHViZS5jb20vb2VtYmVkP3VybD1odHRwczovL3d3dy55b3V0dWJlLmNvbS93YXRjaD92PSR7dmlkZW9JZH0mZm9ybWF0PWpzb25gKVxuICAgICAgXG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgWW91VHViZSBBUEkgZXJyb3I6ICR7cmVzcG9uc2Uuc3RhdHVzfWApXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKClcbiAgICAgIFxuICAgICAgLy8gRXh0cmFjdCB0YWdzIGZyb20gdGl0bGUgYW5kIGRlc2NyaXB0aW9uIHVzaW5nIGtleXdvcmRzXG4gICAgICBjb25zdCB0YWdzID0gdGhpcy5leHRyYWN0VGFnc0Zyb21UZXh0KGAke2RhdGEudGl0bGV9ICR7ZGF0YS5hdXRob3JfbmFtZX1gKVxuICAgICAgXG4gICAgICByZXR1cm4ge1xuICAgICAgICB0aXRsZTogZGF0YS50aXRsZSB8fCBgWW91VHViZSBWaWRlbyAke3ZpZGVvSWR9YCxcbiAgICAgICAgZGVzY3JpcHRpb246IGBWaWRlbyBieSAke2RhdGEuYXV0aG9yX25hbWV9YCxcbiAgICAgICAgdGFncyxcbiAgICAgICAgdGh1bWJuYWlsOiBkYXRhLnRodW1ibmFpbF91cmwsXG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgZXh0cmFjdGluZyBZb3VUdWJlIG1ldGFkYXRhJywgeyB2aWRlb0lkLCBlcnJvciB9KVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdGl0bGU6IGBZb3VUdWJlIFZpZGVvICR7dmlkZW9JZH1gLFxuICAgICAgICBkZXNjcmlwdGlvbjogJycsXG4gICAgICAgIHRhZ3M6IFsneW91dHViZSddLFxuICAgICAgICB0aHVtYm5haWw6IGBodHRwczovL2ltZy55b3V0dWJlLmNvbS92aS8ke3ZpZGVvSWR9L21heHJlc2RlZmF1bHQuanBnYFxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZXh0cmFjdFZpbWVvTWV0YWRhdGEodmlkZW9JZDogc3RyaW5nKTogUHJvbWlzZTxWaWRlb01ldGFkYXRhPiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIFVzZSBWaW1lbyBvRW1iZWQgQVBJXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGBodHRwczovL3ZpbWVvLmNvbS9hcGkvb2VtYmVkLmpzb24/dXJsPWh0dHBzOi8vdmltZW8uY29tLyR7dmlkZW9JZH1gKVxuICAgICAgXG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgVmltZW8gQVBJIGVycm9yOiAke3Jlc3BvbnNlLnN0YXR1c31gKVxuICAgICAgfVxuXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpXG4gICAgICBcbiAgICAgIC8vIEV4dHJhY3QgdGFncyBmcm9tIHRpdGxlIGFuZCBhdXRob3JcbiAgICAgIGNvbnN0IHRhZ3MgPSB0aGlzLmV4dHJhY3RUYWdzRnJvbVRleHQoYCR7ZGF0YS50aXRsZX0gJHtkYXRhLmF1dGhvcl9uYW1lfWApXG4gICAgICBcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRpdGxlOiBkYXRhLnRpdGxlIHx8IGBWaW1lbyBWaWRlbyAke3ZpZGVvSWR9YCxcbiAgICAgICAgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24gfHwgYFZpZGVvIGJ5ICR7ZGF0YS5hdXRob3JfbmFtZX1gLFxuICAgICAgICB0YWdzLFxuICAgICAgICB0aHVtYm5haWw6IGRhdGEudGh1bWJuYWlsX3VybCxcbiAgICAgICAgZHVyYXRpb246IGRhdGEuZHVyYXRpb25cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBleHRyYWN0aW5nIFZpbWVvIG1ldGFkYXRhJywgeyB2aWRlb0lkLCBlcnJvciB9KVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdGl0bGU6IGBWaW1lbyBWaWRlbyAke3ZpZGVvSWR9YCxcbiAgICAgICAgZGVzY3JpcHRpb246ICcnLFxuICAgICAgICB0YWdzOiBbJ3ZpbWVvJ11cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGV4dHJhY3RUaWtUb2tNZXRhZGF0YSh2aWRlb0lkOiBzdHJpbmcpOiBQcm9taXNlPFZpZGVvTWV0YWRhdGE+IHtcbiAgICB0cnkge1xuICAgICAgLy8gVGlrVG9rIGRvZXNuJ3QgaGF2ZSBhIHB1YmxpYyBBUEksIHNvIHdlJ2xsIHVzZSBVUkwgcGFyc2luZyBhbmQgZ2VuZXJpYyBleHRyYWN0aW9uXG4gICAgICBjb25zdCB1cmwgPSBgaHR0cHM6Ly93d3cudGlrdG9rLmNvbS9AdXNlci92aWRlby8ke3ZpZGVvSWR9YFxuICAgICAgY29uc3Qgb0VtYmVkUmVzdWx0ID0gYXdhaXQgdGhpcy5leHRyYWN0T0VtYmVkTWV0YWRhdGEodXJsKVxuICAgICAgaWYgKG9FbWJlZFJlc3VsdCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIC4uLm9FbWJlZFJlc3VsdCxcbiAgICAgICAgICBwbGF0Zm9ybTogJ3Rpa3RvaycsXG4gICAgICAgICAgdGFnczogWy4uLihvRW1iZWRSZXN1bHQudGFncyB8fCBbXSksICd0aWt0b2snLCAnc2hvcnQtZm9ybSddXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdGl0bGU6IGBUaWtUb2sgVmlkZW8gJHt2aWRlb0lkfWAsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnVGlrVG9rIHNob3J0LWZvcm0gdmlkZW8gY29udGVudCcsXG4gICAgICAgIHRhZ3M6IFsndGlrdG9rJywgJ3Nob3J0LWZvcm0nLCAnc29jaWFsJ10sXG4gICAgICAgIHBsYXRmb3JtOiAndGlrdG9rJ1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGV4dHJhY3RpbmcgVGlrVG9rIG1ldGFkYXRhJywgeyB2aWRlb0lkLCBlcnJvciB9KVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdGl0bGU6IGBUaWtUb2sgVmlkZW8gJHt2aWRlb0lkfWAsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnVGlrVG9rIHNob3J0LWZvcm0gdmlkZW8gY29udGVudCcsXG4gICAgICAgIHRhZ3M6IFsndGlrdG9rJywgJ3Nob3J0LWZvcm0nXSxcbiAgICAgICAgcGxhdGZvcm06ICd0aWt0b2snXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBleHRyYWN0SW5zdGFncmFtTWV0YWRhdGEodmlkZW9JZDogc3RyaW5nKTogUHJvbWlzZTxWaWRlb01ldGFkYXRhPiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIEluc3RhZ3JhbSBvRW1iZWQgQVBJXG4gICAgICBjb25zdCB1cmwgPSBgaHR0cHM6Ly93d3cuaW5zdGFncmFtLmNvbS9wLyR7dmlkZW9JZH0vYFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vdjguMC9pbnN0YWdyYW1fb2VtYmVkP3VybD0ke2VuY29kZVVSSUNvbXBvbmVudCh1cmwpfSZhY2Nlc3NfdG9rZW49eW91cl90b2tlbmApXG4gICAgICBcbiAgICAgIC8vIFNpbmNlIHdlIGRvbid0IGhhdmUgYW4gYWNjZXNzIHRva2VuLCBmYWxsIGJhY2sgdG8gVVJMIHBhcnNpbmdcbiAgICAgIGNvbnN0IG9FbWJlZFJlc3VsdCA9IGF3YWl0IHRoaXMuZXh0cmFjdE9FbWJlZE1ldGFkYXRhKHVybClcbiAgICAgIGlmIChvRW1iZWRSZXN1bHQpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAuLi5vRW1iZWRSZXN1bHQsXG4gICAgICAgICAgcGxhdGZvcm06ICdpbnN0YWdyYW0nLFxuICAgICAgICAgIHRhZ3M6IFsuLi4ob0VtYmVkUmVzdWx0LnRhZ3MgfHwgW10pLCAnaW5zdGFncmFtJywgJ3NvY2lhbCddXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdGl0bGU6IGBJbnN0YWdyYW0gVmlkZW8gJHt2aWRlb0lkfWAsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnSW5zdGFncmFtIHZpZGVvIGNvbnRlbnQnLFxuICAgICAgICB0YWdzOiBbJ2luc3RhZ3JhbScsICdzb2NpYWwnLCAndmlkZW8nXSxcbiAgICAgICAgcGxhdGZvcm06ICdpbnN0YWdyYW0nXG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgZXh0cmFjdGluZyBJbnN0YWdyYW0gbWV0YWRhdGEnLCB7IHZpZGVvSWQsIGVycm9yIH0pXG4gICAgICByZXR1cm4ge1xuICAgICAgICB0aXRsZTogYEluc3RhZ3JhbSBWaWRlbyAke3ZpZGVvSWR9YCxcbiAgICAgICAgZGVzY3JpcHRpb246ICdJbnN0YWdyYW0gdmlkZW8gY29udGVudCcsXG4gICAgICAgIHRhZ3M6IFsnaW5zdGFncmFtJywgJ3NvY2lhbCddLFxuICAgICAgICBwbGF0Zm9ybTogJ2luc3RhZ3JhbSdcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGV4dHJhY3RUd2l0dGVyTWV0YWRhdGEodmlkZW9JZDogc3RyaW5nKTogUHJvbWlzZTxWaWRlb01ldGFkYXRhPiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIFR3aXR0ZXIgb0VtYmVkIEFQSVxuICAgICAgY29uc3QgdXJsID0gYGh0dHBzOi8vdHdpdHRlci5jb20vdXNlci9zdGF0dXMvJHt2aWRlb0lkfWBcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYGh0dHBzOi8vcHVibGlzaC50d2l0dGVyLmNvbS9vZW1iZWQ/dXJsPSR7ZW5jb2RlVVJJQ29tcG9uZW50KHVybCl9YClcbiAgICAgIFxuICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKClcbiAgICAgICAgY29uc3QgdGFncyA9IHRoaXMuZXh0cmFjdFRhZ3NGcm9tVGV4dChkYXRhLmh0bWwgfHwgJycpXG4gICAgICAgIFxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHRpdGxlOiBkYXRhLnRpdGxlIHx8IGBUd2l0dGVyIFZpZGVvICR7dmlkZW9JZH1gLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnVHdpdHRlciB2aWRlbyBjb250ZW50JyxcbiAgICAgICAgICB0YWdzOiBbLi4udGFncywgJ3R3aXR0ZXInLCAnc29jaWFsJ10sXG4gICAgICAgICAgcGxhdGZvcm06ICd0d2l0dGVyJ1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRpdGxlOiBgVHdpdHRlciBWaWRlbyAke3ZpZGVvSWR9YCxcbiAgICAgICAgZGVzY3JpcHRpb246ICdUd2l0dGVyIHZpZGVvIGNvbnRlbnQnLFxuICAgICAgICB0YWdzOiBbJ3R3aXR0ZXInLCAnc29jaWFsJywgJ3ZpZGVvJ10sXG4gICAgICAgIHBsYXRmb3JtOiAndHdpdHRlcidcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBleHRyYWN0aW5nIFR3aXR0ZXIgbWV0YWRhdGEnLCB7IHZpZGVvSWQsIGVycm9yIH0pXG4gICAgICByZXR1cm4ge1xuICAgICAgICB0aXRsZTogYFR3aXR0ZXIgVmlkZW8gJHt2aWRlb0lkfWAsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnVHdpdHRlciB2aWRlbyBjb250ZW50JyxcbiAgICAgICAgdGFnczogWyd0d2l0dGVyJywgJ3NvY2lhbCddLFxuICAgICAgICBwbGF0Zm9ybTogJ3R3aXR0ZXInXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBleHRyYWN0RGFpbHltb3Rpb25NZXRhZGF0YSh2aWRlb0lkOiBzdHJpbmcpOiBQcm9taXNlPFZpZGVvTWV0YWRhdGE+IHtcbiAgICB0cnkge1xuICAgICAgLy8gRGFpbHltb3Rpb24gb0VtYmVkIEFQSVxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgaHR0cHM6Ly93d3cuZGFpbHltb3Rpb24uY29tL3NlcnZpY2VzL29lbWJlZD91cmw9aHR0cHM6Ly93d3cuZGFpbHltb3Rpb24uY29tL3ZpZGVvLyR7dmlkZW9JZH0mZm9ybWF0PWpzb25gKVxuICAgICAgXG4gICAgICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKVxuICAgICAgICBjb25zdCB0YWdzID0gdGhpcy5leHRyYWN0VGFnc0Zyb21UZXh0KGAke2RhdGEudGl0bGV9ICR7ZGF0YS5hdXRob3JfbmFtZX1gKVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB0aXRsZTogZGF0YS50aXRsZSB8fCBgRGFpbHltb3Rpb24gVmlkZW8gJHt2aWRlb0lkfWAsXG4gICAgICAgICAgZGVzY3JpcHRpb246IGBWaWRlbyBieSAke2RhdGEuYXV0aG9yX25hbWV9YCxcbiAgICAgICAgICB0YWdzOiBbLi4udGFncywgJ2RhaWx5bW90aW9uJ10sXG4gICAgICAgICAgdGh1bWJuYWlsOiBkYXRhLnRodW1ibmFpbF91cmwsXG4gICAgICAgICAgcGxhdGZvcm06ICdkYWlseW1vdGlvbidcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICB0aXRsZTogYERhaWx5bW90aW9uIFZpZGVvICR7dmlkZW9JZH1gLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ0RhaWx5bW90aW9uIHZpZGVvIGNvbnRlbnQnLFxuICAgICAgICB0YWdzOiBbJ2RhaWx5bW90aW9uJywgJ3ZpZGVvJ10sXG4gICAgICAgIHBsYXRmb3JtOiAnZGFpbHltb3Rpb24nXG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgZXh0cmFjdGluZyBEYWlseW1vdGlvbiBtZXRhZGF0YScsIHsgdmlkZW9JZCwgZXJyb3IgfSlcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRpdGxlOiBgRGFpbHltb3Rpb24gVmlkZW8gJHt2aWRlb0lkfWAsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnRGFpbHltb3Rpb24gdmlkZW8gY29udGVudCcsXG4gICAgICAgIHRhZ3M6IFsnZGFpbHltb3Rpb24nXSxcbiAgICAgICAgcGxhdGZvcm06ICdkYWlseW1vdGlvbidcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGV4dHJhY3RUd2l0Y2hNZXRhZGF0YSh2aWRlb0lkOiBzdHJpbmcpOiBQcm9taXNlPFZpZGVvTWV0YWRhdGE+IHtcbiAgICB0cnkge1xuICAgICAgLy8gVHdpdGNoIGRvZXNuJ3QgaGF2ZSBwdWJsaWMgb0VtYmVkLCBzbyB3ZSdsbCB1c2UgZ2VuZXJpYyBleHRyYWN0aW9uXG4gICAgICBjb25zdCBpc0NsaXAgPSB2aWRlb0lkLmxlbmd0aCA8IDE1IC8vIENsaXBzIGhhdmUgc2hvcnRlciBJRHNcbiAgICAgIGNvbnN0IHVybCA9IGlzQ2xpcCBcbiAgICAgICAgPyBgaHR0cHM6Ly9jbGlwcy50d2l0Y2gudHYvJHt2aWRlb0lkfWBcbiAgICAgICAgOiBgaHR0cHM6Ly93d3cudHdpdGNoLnR2L3ZpZGVvcy8ke3ZpZGVvSWR9YFxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICB0aXRsZTogaXNDbGlwID8gYFR3aXRjaCBDbGlwICR7dmlkZW9JZH1gIDogYFR3aXRjaCBWaWRlbyAke3ZpZGVvSWR9YCxcbiAgICAgICAgZGVzY3JpcHRpb246IGlzQ2xpcCA/ICdUd2l0Y2ggZ2FtaW5nIGNsaXAnIDogJ1R3aXRjaCBnYW1pbmcgdmlkZW8nLFxuICAgICAgICB0YWdzOiBbJ3R3aXRjaCcsICdnYW1pbmcnLCAnc3RyZWFtaW5nJywgaXNDbGlwID8gJ2NsaXAnIDogJ3ZvZCddLFxuICAgICAgICBwbGF0Zm9ybTogJ3R3aXRjaCdcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBleHRyYWN0aW5nIFR3aXRjaCBtZXRhZGF0YScsIHsgdmlkZW9JZCwgZXJyb3IgfSlcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRpdGxlOiBgVHdpdGNoIENvbnRlbnQgJHt2aWRlb0lkfWAsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnVHdpdGNoIGdhbWluZyBjb250ZW50JyxcbiAgICAgICAgdGFnczogWyd0d2l0Y2gnLCAnZ2FtaW5nJ10sXG4gICAgICAgIHBsYXRmb3JtOiAndHdpdGNoJ1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZXh0cmFjdE9FbWJlZE1ldGFkYXRhKG9yaWdpbmFsVXJsOiBzdHJpbmcpOiBQcm9taXNlPFZpZGVvTWV0YWRhdGEgfCBudWxsPiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIFRyeSBjb21tb24gb0VtYmVkIGVuZHBvaW50c1xuICAgICAgY29uc3Qgb0VtYmVkRW5kcG9pbnRzID0gW1xuICAgICAgICBgaHR0cHM6Ly9ub2VtYmVkLmNvbS9lbWJlZD91cmw9JHtlbmNvZGVVUklDb21wb25lbnQob3JpZ2luYWxVcmwpfWAsXG4gICAgICAgIGBodHRwczovL2lmcmFtZS5seS9hcGkvb2VtYmVkP3VybD0ke2VuY29kZVVSSUNvbXBvbmVudChvcmlnaW5hbFVybCl9JmFwaV9rZXk9eW91cl9rZXlgXG4gICAgICBdXG5cbiAgICAgIGZvciAoY29uc3QgZW5kcG9pbnQgb2Ygb0VtYmVkRW5kcG9pbnRzKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChlbmRwb2ludClcbiAgICAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKClcbiAgICAgICAgICAgIGlmIChkYXRhLnRpdGxlKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHRhZ3MgPSB0aGlzLmV4dHJhY3RUYWdzRnJvbVRleHQoYCR7ZGF0YS50aXRsZX0gJHtkYXRhLmRlc2NyaXB0aW9uIHx8ICcnfSAke2RhdGEuYXV0aG9yX25hbWUgfHwgJyd9YClcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdGl0bGU6IGRhdGEudGl0bGUsXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24gfHwgJycsXG4gICAgICAgICAgICAgICAgdGFncyxcbiAgICAgICAgICAgICAgICB0aHVtYm5haWw6IGRhdGEudGh1bWJuYWlsX3VybCxcbiAgICAgICAgICAgICAgICBwbGF0Zm9ybTogJ2dlbmVyaWMnXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgIC8vIENvbnRpbnVlIHRvIG5leHQgZW5kcG9pbnRcbiAgICAgICAgICBjb250aW51ZVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBudWxsXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgZXh0cmFjdGluZyBvRW1iZWQgbWV0YWRhdGEnLCB7IG9yaWdpbmFsVXJsLCBlcnJvciB9KVxuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGV4dHJhY3RGYWxsYmFja01ldGFkYXRhKG9yaWdpbmFsVXJsOiBzdHJpbmcpOiBWaWRlb01ldGFkYXRhIHtcbiAgICAvLyBFeHRyYWN0IGRvbWFpbiBhbmQgYmFzaWMgaW5mbyBmcm9tIFVSTFxuICAgIHRyeSB7XG4gICAgICBjb25zdCB1cmwgPSBuZXcgVVJMKG9yaWdpbmFsVXJsKVxuICAgICAgY29uc3QgZG9tYWluID0gdXJsLmhvc3RuYW1lLnJlcGxhY2UoJ3d3dy4nLCAnJylcbiAgICAgIGNvbnN0IHBhdGhTZWdtZW50cyA9IHVybC5wYXRobmFtZS5zcGxpdCgnLycpLmZpbHRlcihCb29sZWFuKVxuICAgICAgXG4gICAgICAvLyBHZW5lcmF0ZSBhIGJhc2ljIHRpdGxlIGZyb20gVVJMXG4gICAgICBjb25zdCB0aXRsZSA9IHBhdGhTZWdtZW50cy5sZW5ndGggPiAwIFxuICAgICAgICA/IHRoaXMudGl0bGVDYXNlKHBhdGhTZWdtZW50c1twYXRoU2VnbWVudHMubGVuZ3RoIC0gMV0ucmVwbGFjZSgvWy1fXS9nLCAnICcpKVxuICAgICAgICA6IGBWaWRlbyBmcm9tICR7ZG9tYWlufWBcbiAgICAgIFxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdGl0bGUsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBgVmlkZW8gZnJvbSAke2RvbWFpbn1gLFxuICAgICAgICB0YWdzOiBbZG9tYWluLnNwbGl0KCcuJylbMF1dXG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRpdGxlOiAnVXBsb2FkZWQgVmlkZW8nLFxuICAgICAgICBkZXNjcmlwdGlvbjogJycsXG4gICAgICAgIHRhZ3M6IFsndmlkZW8nXVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZXh0cmFjdFRhZ3NGcm9tVGV4dCh0ZXh0OiBzdHJpbmcpOiBzdHJpbmdbXSB7XG4gICAgaWYgKCF0ZXh0KSByZXR1cm4gW11cblxuICAgIGNvbnN0IGNvbW1vblZpZGVvVGFncyA9IFtcbiAgICAgICdtdXNpYycsICdnYW1pbmcnLCAnc3BvcnRzJywgJ25ld3MnLCAnZWR1Y2F0aW9uJywgJ2VudGVydGFpbm1lbnQnLFxuICAgICAgJ3RlY2hub2xvZ3knLCAnc2NpZW5jZScsICdjb29raW5nJywgJ3RyYXZlbCcsICdmYXNoaW9uJywgJ2ZpdG5lc3MnLFxuICAgICAgJ2NvbWVkeScsICd0dXRvcmlhbCcsICdyZXZpZXcnLCAndW5ib3hpbmcnLCAndmxvZycsICdkb2N1bWVudGFyeScsXG4gICAgICAnYW5pbWF0aW9uJywgJ2ZpbG0nLCAnYXJ0JywgJ2Rlc2lnbicsICdwcm9ncmFtbWluZycsICdidXNpbmVzcycsXG4gICAgICAnbGlmZXN0eWxlJywgJ2hlYWx0aCcsICdiZWF1dHknLCAnZGl5JywgJ2hvdy10bycsICd0aXBzJywgJ2d1aWRlJ1xuICAgIF1cblxuICAgIGNvbnN0IHRhZ3M6IHN0cmluZ1tdID0gW11cbiAgICBjb25zdCBsb3dlclRleHQgPSB0ZXh0LnRvTG93ZXJDYXNlKClcblxuICAgIC8vIENoZWNrIGZvciBjb21tb24gdmlkZW8gdGFncyBpbiB0aGUgdGV4dFxuICAgIGNvbW1vblZpZGVvVGFncy5mb3JFYWNoKHRhZyA9PiB7XG4gICAgICBpZiAobG93ZXJUZXh0LmluY2x1ZGVzKHRhZykpIHtcbiAgICAgICAgdGFncy5wdXNoKHRhZylcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgLy8gRXh0cmFjdCBoYXNodGFncyBpZiBwcmVzZW50XG4gICAgY29uc3QgaGFzaHRhZ01hdGNoZXMgPSB0ZXh0Lm1hdGNoKC8jXFx3Ky9nKVxuICAgIGlmIChoYXNodGFnTWF0Y2hlcykge1xuICAgICAgaGFzaHRhZ01hdGNoZXMuZm9yRWFjaChoYXNodGFnID0+IHtcbiAgICAgICAgdGFncy5wdXNoKGhhc2h0YWcuc3Vic3RyaW5nKDEpLnRvTG93ZXJDYXNlKCkpXG4gICAgICB9KVxuICAgIH1cblxuICAgIC8vIElmIG5vIHNwZWNpZmljIHRhZ3MgZm91bmQsIHRyeSB0byBjYXRlZ29yaXplIGJhc2VkIG9uIGtleXdvcmRzXG4gICAgaWYgKHRhZ3MubGVuZ3RoID09PSAwKSB7XG4gICAgICBpZiAoL211c2ljfHNvbmd8YWxidW18YXJ0aXN0fGJhbmR8Y29uY2VydC9pLnRlc3QodGV4dCkpIHRhZ3MucHVzaCgnbXVzaWMnKVxuICAgICAgaWYgKC9nYW1lfGdhbWluZ3xwbGF5fHhib3h8cGxheXN0YXRpb258bmludGVuZG8vaS50ZXN0KHRleHQpKSB0YWdzLnB1c2goJ2dhbWluZycpXG4gICAgICBpZiAoL3R1dG9yaWFsfGhvdy4/dG98Z3VpZGV8bGVhcm58bGVzc29uL2kudGVzdCh0ZXh0KSkgdGFncy5wdXNoKCd0dXRvcmlhbCcpXG4gICAgICBpZiAoL3Jldmlld3x1bmJveGluZ3x0ZXN0fGNvbXBhcmlzb24vaS50ZXN0KHRleHQpKSB0YWdzLnB1c2goJ3JldmlldycpXG4gICAgICBpZiAoL2Z1bm55fGNvbWVkeXxodW1vcnxsYXVnaHxqb2tlL2kudGVzdCh0ZXh0KSkgdGFncy5wdXNoKCdjb21lZHknKVxuICAgICAgaWYgKC9mb29kfGNvb2tpbmd8cmVjaXBlfGtpdGNoZW58Y2hlZi9pLnRlc3QodGV4dCkpIHRhZ3MucHVzaCgnY29va2luZycpXG4gICAgICBpZiAoL3RlY2h8dGVjaG5vbG9neXxzb2Z0d2FyZXxhcHB8Y29kaW5nfHByb2dyYW1taW5nL2kudGVzdCh0ZXh0KSkgdGFncy5wdXNoKCd0ZWNobm9sb2d5JylcbiAgICAgIGlmICgvbmV3c3xicmVha2luZ3x1cGRhdGV8cmVwb3J0L2kudGVzdCh0ZXh0KSkgdGFncy5wdXNoKCduZXdzJylcbiAgICAgIGlmICgvc3BvcnR8Zm9vdGJhbGx8YmFza2V0YmFsbHxzb2NjZXJ8dGVubmlzL2kudGVzdCh0ZXh0KSkgdGFncy5wdXNoKCdzcG9ydHMnKVxuICAgICAgaWYgKC90cmF2ZWx8dmFjYXRpb258dHJpcHxhZHZlbnR1cmV8ZXhwbG9yZS9pLnRlc3QodGV4dCkpIHRhZ3MucHVzaCgndHJhdmVsJylcbiAgICB9XG5cbiAgICAvLyBFbnN1cmUgd2UgaGF2ZSBhdCBsZWFzdCBvbmUgdGFnXG4gICAgaWYgKHRhZ3MubGVuZ3RoID09PSAwKSB7XG4gICAgICB0YWdzLnB1c2goJ3ZpZGVvJylcbiAgICB9XG5cbiAgICAvLyBSZW1vdmUgZHVwbGljYXRlcyBhbmQgbGltaXQgdG8gNSB0YWdzXG4gICAgcmV0dXJuIEFycmF5LmZyb20obmV3IFNldCh0YWdzKSkuc2xpY2UoMCwgNSlcbiAgfVxuXG4gIHByaXZhdGUgdGl0bGVDYXNlKHN0cjogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gc3RyLnJlcGxhY2UoL1xcd1xcUyovZywgKHR4dCkgPT4gXG4gICAgICB0eHQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB0eHQuc3Vic3RyKDEpLnRvTG93ZXJDYXNlKClcbiAgICApXG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IHZpZGVvTWV0YWRhdGFTZXJ2aWNlID0gbmV3IFZpZGVvTWV0YWRhdGFTZXJ2aWNlKCkiXSwibmFtZXMiOlsibG9nZ2VyIiwiVmlkZW9NZXRhZGF0YVNlcnZpY2UiLCJleHRyYWN0TWV0YWRhdGEiLCJvcmlnaW5hbFVybCIsImlzRGlyZWN0VmlkZW9GaWxlIiwiZXh0cmFjdERpcmVjdFZpZGVvTWV0YWRhdGEiLCJwbGF0Zm9ybSIsImNvbmZpZyIsIk9iamVjdCIsImVudHJpZXMiLCJzdXBwb3J0ZWRQbGF0Zm9ybXMiLCJwYXR0ZXJuIiwicGF0dGVybnMiLCJtYXRjaCIsInZpZGVvSWQiLCJpbmZvIiwiZXh0cmFjdCIsIm9FbWJlZFJlc3VsdCIsImV4dHJhY3RPRW1iZWRNZXRhZGF0YSIsImV4dHJhY3RGYWxsYmFja01ldGFkYXRhIiwiZXJyb3IiLCJ1cmwiLCJ2aWRlb0V4dGVuc2lvbnMiLCJ1cmxQYXRoIiwiVVJMIiwicGF0aG5hbWUiLCJ0b0xvd2VyQ2FzZSIsInNvbWUiLCJleHQiLCJlbmRzV2l0aCIsImZpbGVuYW1lIiwic3BsaXQiLCJwb3AiLCJ0aXRsZSIsInJlcGxhY2UiLCJ0aXRsZUNhc2UiLCJkZXNjcmlwdGlvbiIsInRhZ3MiLCJ0aHVtYm5haWwiLCJ1bmRlZmluZWQiLCJleHRyYWN0WW91VHViZU1ldGFkYXRhIiwicmVzcG9uc2UiLCJmZXRjaCIsIm9rIiwiRXJyb3IiLCJzdGF0dXMiLCJkYXRhIiwianNvbiIsImV4dHJhY3RUYWdzRnJvbVRleHQiLCJhdXRob3JfbmFtZSIsInRodW1ibmFpbF91cmwiLCJleHRyYWN0VmltZW9NZXRhZGF0YSIsImR1cmF0aW9uIiwiZXh0cmFjdFRpa1Rva01ldGFkYXRhIiwiZXh0cmFjdEluc3RhZ3JhbU1ldGFkYXRhIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiZXh0cmFjdFR3aXR0ZXJNZXRhZGF0YSIsImh0bWwiLCJleHRyYWN0RGFpbHltb3Rpb25NZXRhZGF0YSIsImV4dHJhY3RUd2l0Y2hNZXRhZGF0YSIsImlzQ2xpcCIsImxlbmd0aCIsIm9FbWJlZEVuZHBvaW50cyIsImVuZHBvaW50IiwiZXJyIiwiZG9tYWluIiwiaG9zdG5hbWUiLCJwYXRoU2VnbWVudHMiLCJmaWx0ZXIiLCJCb29sZWFuIiwidGV4dCIsImNvbW1vblZpZGVvVGFncyIsImxvd2VyVGV4dCIsImZvckVhY2giLCJ0YWciLCJpbmNsdWRlcyIsInB1c2giLCJoYXNodGFnTWF0Y2hlcyIsImhhc2h0YWciLCJzdWJzdHJpbmciLCJ0ZXN0IiwiQXJyYXkiLCJmcm9tIiwiU2V0Iiwic2xpY2UiLCJzdHIiLCJ0eHQiLCJjaGFyQXQiLCJ0b1VwcGVyQ2FzZSIsInN1YnN0ciIsInlvdXR1YmUiLCJ2aW1lbyIsInRpa3RvayIsImluc3RhZ3JhbSIsInR3aXR0ZXIiLCJkYWlseW1vdGlvbiIsInR3aXRjaCIsInZpZGVvTWV0YWRhdGFTZXJ2aWNlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/services/video-metadata.service.ts\n");

/***/ }),

/***/ "(api)/./src/services/xhamster.service.ts":
/*!******************************************!*\
  !*** ./src/services/xhamster.service.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   XHamsterServiceImpl: () => (/* binding */ XHamsterServiceImpl),\n/* harmony export */   xHamsterService: () => (/* binding */ xHamsterService)\n/* harmony export */ });\n/* harmony import */ var _src_lib_logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/src/lib/logger */ \"(api)/./src/lib/logger.ts\");\n\nclass XHamsterServiceImpl {\n    isXHamsterUrl(url) {\n        return url.includes(\"xhamster.com\");\n    }\n    isValidContentTag(tag) {\n        if (!tag || tag.length < 2 || tag.length > 50) return false;\n        // Technical/platform terms to exclude\n        const blacklist = [\n            // Site/platform names\n            \"xhamster\",\n            \"pornhub\",\n            \"redtube\",\n            \"tube\",\n            \"xvideos\",\n            \"youjizz\",\n            \"spankbang\",\n            \"chaturbate\",\n            \"cam4\",\n            \"bongacams\",\n            \"stripchat\",\n            \"livejasmin\",\n            \"flirt4free\",\n            \"camsoda\",\n            \"onlyfans\",\n            \"manyvids\",\n            \"clips4sale\",\n            \"iwantclips\",\n            \"niteflirt\",\n            // Technical metadata\n            \"video\",\n            \"watch\",\n            \"page\",\n            \"link\",\n            \"site\",\n            \"url\",\n            \"slug\",\n            \"uid\",\n            \"id\",\n            \"name\",\n            \"tags\",\n            \"isbrand\",\n            \"ischannel\",\n            \"isverified\",\n            \"nameen\",\n            \"channel\",\n            \"channels\",\n            \"model\",\n            \"models\",\n            \"category\",\n            \"categories\",\n            \"premium\",\n            \"vip\",\n            \"verified\",\n            \"official\",\n            // Low-level quality/format terms (but allow some descriptive quality terms)\n            \"720p\",\n            \"1080p\",\n            \"uhd\",\n            \"fhd\",\n            \"mp4\",\n            \"avi\",\n            \"wmv\",\n            \"flv\",\n            \"mov\",\n            \"webm\",\n            \"duration\",\n            \"length\",\n            \"size\",\n            \"quality\",\n            \"format\",\n            \"resolution\",\n            // Social/interaction terms\n            \"views\",\n            \"likes\",\n            \"dislikes\",\n            \"comments\",\n            \"share\",\n            \"subscribe\",\n            \"follow\",\n            \"favorite\",\n            \"bookmark\",\n            \"playlist\",\n            \"collection\",\n            \"gallery\",\n            \"abonnement\",\n            // Technical UI/web terms\n            \"embed\",\n            \"iframe\",\n            \"player\",\n            \"thumb\",\n            \"thumbnail\",\n            \"preview\",\n            \"poster\",\n            \"image\",\n            \"img\",\n            \"pic\",\n            \"photo\",\n            \"jpg\",\n            \"jpeg\",\n            \"png\",\n            \"gif\",\n            \"webp\",\n            \"svg\",\n            \"icon\",\n            \"logo\",\n            \"banner\",\n            \"button\",\n            \"click\",\n            \"href\",\n            \"redirect\",\n            // Advertising/tracking\n            \"ad\",\n            \"ads\",\n            \"advertisement\",\n            \"promo\",\n            \"promotion\",\n            \"sponsored\",\n            \"affiliate\",\n            \"referrer\",\n            \"utm\",\n            \"tracking\",\n            \"analytics\",\n            \"pixel\",\n            // Admin/system terms\n            \"admin\",\n            \"administrator\",\n            \"moderator\",\n            \"mod\",\n            \"user\",\n            \"guest\",\n            \"member\",\n            \"subscriber\",\n            \"account\",\n            \"profile\",\n            \"settings\",\n            \"preferences\",\n            \"dashboard\",\n            \"panel\",\n            \"control\",\n            \"manage\",\n            \"edit\",\n            \"delete\",\n            \"create\",\n            \"update\",\n            // General web/tech terms\n            \"website\",\n            \"homepage\",\n            \"contact\",\n            \"about\",\n            \"help\",\n            \"faq\",\n            \"terms\",\n            \"privacy\",\n            \"policy\",\n            \"legal\",\n            \"dmca\",\n            \"copyright\",\n            \"trademark\",\n            \"disclaimer\",\n            \"search\",\n            \"filter\",\n            \"sort\",\n            \"browse\",\n            \"explore\",\n            \"discover\",\n            \"trending\",\n            \"popular\",\n            \"featured\",\n            \"recommended\",\n            \"related\",\n            \"similar\",\n            \"more\",\n            \"all\",\n            \"new\",\n            \"latest\",\n            \"recent\",\n            \"today\",\n            \"week\",\n            \"month\",\n            \"year\",\n            \"date\",\n            \"time\",\n            // Meaningless terms\n            \"content\",\n            \"stuff\",\n            \"things\",\n            \"item\",\n            \"object\",\n            \"element\",\n            \"component\",\n            \"section\",\n            \"part\",\n            \"piece\",\n            \"bit\",\n            \"data\",\n            \"info\",\n            \"information\",\n            \"details\",\n            \"description\",\n            \"title\",\n            \"text\",\n            \"caption\",\n            \"label\",\n            // UI interaction terms\n            \"modifier les mots cl\\xe9s\",\n            \"edit keywords\",\n            \"modifier\",\n            \"edit\"\n        ];\n        const lowerTag = tag.toLowerCase();\n        // Check against blacklist\n        if (blacklist.includes(lowerTag)) return false;\n        // Skip if contains URLs or technical patterns\n        if (lowerTag.includes(\"http\") || lowerTag.includes(\"www\") || lowerTag.includes(\".com\")) return false;\n        // Skip pure numbers (but allow year tags like 1980s)\n        if (/^\\d+$/.test(lowerTag) && lowerTag.length < 4) return false;\n        // Skip hex strings (likely IDs)\n        if (/^[a-f0-9]{8,}$/i.test(lowerTag)) return false;\n        // Skip technical values\n        if (/^(true|false|null|undefined|nan|infinity)$/i.test(lowerTag)) return false;\n        // Skip subscriber counts and numeric social media patterns\n        if (/^\\d+[km]?$/.test(lowerTag)) return false;\n        return true;\n    }\n    normalizeTag(tag) {\n        if (!tag) return \"\";\n        // Convert to lowercase and trim\n        let normalized = tag.toLowerCase().trim();\n        // Remove special characters except hyphens\n        normalized = normalized.replace(/[^\\w\\s-]/g, \"\");\n        // Replace spaces and underscores with hyphens\n        normalized = normalized.replace(/[\\s_]+/g, \"-\");\n        // Remove multiple consecutive hyphens\n        normalized = normalized.replace(/-+/g, \"-\");\n        // Remove leading/trailing hyphens\n        normalized = normalized.replace(/^-+|-+$/g, \"\");\n        // Tag mappings for common variations including French translations from XHamster\n        const tagMappings = {\n            // English variations\n            \"big-boobs\": \"big-tits\",\n            \"big-breasts\": \"big-tits\",\n            \"small-boobs\": \"small-tits\",\n            \"small-breasts\": \"small-tits\",\n            \"big-butt\": \"big-ass\",\n            \"bubble-butt\": \"big-ass\",\n            \"small-butt\": \"small-ass\",\n            \"black\": \"ebony\",\n            \"african\": \"ebony\",\n            \"bj\": \"blowjob\",\n            \"blow-job\": \"blowjob\",\n            \"hj\": \"handjob\",\n            \"hand-job\": \"handjob\",\n            \"fj\": \"footjob\",\n            \"foot-job\": \"footjob\",\n            \"pov\": \"pov\",\n            \"point-of-view\": \"pov\",\n            \"girl-on-girl\": \"lesbian\",\n            \"girl-girl\": \"lesbian\",\n            \"gg\": \"lesbian\",\n            \"boy-boy\": \"gay\",\n            \"mm\": \"gay\",\n            \"girl-boy\": \"straight\",\n            \"milfs\": \"milf\",\n            \"moms\": \"milf\",\n            \"mothers\": \"milf\",\n            \"cougars\": \"cougar\",\n            \"grannies\": \"granny\",\n            \"grandmas\": \"granny\",\n            \"gilf\": \"granny\",\n            // French to English mappings (based on your provided HTML)\n            \"fran\\xe7aises\": \"french\",\n            \"francaises\": \"french\",\n            \"europ\\xe9ennes\": \"european\",\n            \"europeennes\": \"european\",\n            \"f\\xeate\": \"party\",\n            \"fete\": \"party\",\n            \"f\\xeates\": \"party\",\n            \"fetes\": \"party\",\n            \"r\\xe9tro\": \"retro\",\n            \"retro\": \"retro\",\n            \"vid\\xe9os-hd\": \"hd\",\n            \"videos-hd\": \"hd\",\n            \"cougar\": \"cougar\",\n            \"hardcore\": \"hardcore\",\n            \"milf\": \"milf\",\n            \"mature\": \"mature\",\n            \"vintage\": \"vintage\",\n            \"film\": \"movie\",\n            \"hardcore-fran\\xe7ais\": \"french-hardcore\",\n            \"hardcore-francais\": \"french-hardcore\",\n            \"vintage-des-ann\\xe9es-1970\": \"vintage-1970s\",\n            \"vintage-des-annees-1970\": \"vintage-1970s\",\n            \"classique-fran\\xe7ais\": \"french-classic\",\n            \"classique-francais\": \"french-classic\",\n            \"ann\\xe9es-80\": \"1980s\",\n            \"annees-80\": \"1980s\",\n            \"milf-fran\\xe7aises\": \"french-milf\",\n            \"milf-francaises\": \"french-milf\",\n            \"hardcore-classique\": \"classic-hardcore\",\n            \"milfed\": \"milf\",\n            \"hardcore-milfs\": \"hardcore-milf\",\n            \"at-the-party\": \"party\",\n            \"european-milfs\": \"european-milf\",\n            \"before-the-party\": \"party\",\n            \"hardcore-party\": \"hardcore-party\",\n            \"full-hd\": \"hd\",\n            \"my-party\": \"party\",\n            \"in-party\": \"party\",\n            \"partying\": \"party\",\n            \"vintage-classic-full\": \"vintage-classic\",\n            // Common variations\n            \"amateur\": \"amateur\",\n            \"blonde\": \"blonde\",\n            \"brunette\": \"brunette\",\n            \"redhead\": \"redhead\",\n            \"teen\": \"teen\",\n            \"young\": \"teen\",\n            \"old\": \"mature\",\n            \"ebony\": \"ebony\",\n            \"asian\": \"asian\",\n            \"latina\": \"latina\",\n            \"bbw\": \"bbw\",\n            \"titties\": \"tits\",\n            \"boobs\": \"tits\",\n            \"breasts\": \"tits\",\n            \"sex\": \"hardcore\",\n            \"fucking\": \"hardcore\",\n            \"parties\": \"party\",\n            \"1980s\": \"1980s\",\n            \"1970s\": \"1970s\"\n        };\n        // Apply mappings\n        if (tagMappings[normalized]) {\n            normalized = tagMappings[normalized];\n        }\n        return normalized;\n    }\n    async processXHamsterUrl(originalUrl) {\n        try {\n            _src_lib_logger__WEBPACK_IMPORTED_MODULE_0__.logger.info(\"Processing XHamster URL for metadata extraction\", {\n                url: originalUrl\n            });\n            // Fetch the HTML page\n            const response = await fetch(originalUrl, {\n                headers: {\n                    \"User-Agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36\"\n                }\n            });\n            if (!response.ok) {\n                throw new Error(`Failed to fetch XHamster page: ${response.status}`);\n            }\n            const html = await response.text();\n            // Extract metadata from various sources\n            const metadata = {};\n            // Extract title from meta tags or page title\n            const titleMatch = html.match(/<title[^>]*>([^<]+)<\\/title>/i) || html.match(/<meta[^>]*property=\"og:title\"[^>]*content=\"([^\"]*)\"[^>]*>/i) || html.match(/<meta[^>]*name=\"title\"[^>]*content=\"([^\"]*)\"[^>]*>/i);\n            if (titleMatch) {\n                metadata.title = titleMatch[1].trim();\n            }\n            // Extract description\n            const descMatch = html.match(/<meta[^>]*property=\"og:description\"[^>]*content=\"([^\"]*)\"[^>]*>/i) || html.match(/<meta[^>]*name=\"description\"[^>]*content=\"([^\"]*)\"[^>]*>/i);\n            if (descMatch) {\n                metadata.description = descMatch[1].trim();\n            }\n            // Extract thumbnail from og:image\n            const thumbMatch = html.match(/<meta[^>]*property=\"og:image\"[^>]*content=\"([^\"]*)\"[^>]*>/i);\n            if (thumbMatch) {\n                metadata.thumbnail = thumbMatch[1] // Use the captured group from og:image\n                ;\n            } else {\n                // Fallback: search for direct image URLs\n                const directImageMatch = html.match(/https:\\/\\/ic-vt-[^\"]*\\.xhpingcdn\\.com\\/[^\"]*\\.jpg/g) || html.match(/https:\\/\\/thumb-[^\"]*\\.xhpingcdn\\.com\\/[^\"]*\\.jpg/g);\n                if (directImageMatch) {\n                    metadata.thumbnail = Array.isArray(directImageMatch) ? directImageMatch[0] : directImageMatch;\n                }\n            }\n            // Extract preview URL from initials-script\n            const scriptPatterns = [\n                /<script id=\"initials-script\"[^>]*>([\\s\\S]*?)<\\/script>/i,\n                /<script[^>]*id=\"initials-script\"[^>]*>([\\s\\S]*?)<\\/script>/i,\n                /<script[^>]*initials[^>]*>([\\s\\S]*?)<\\/script>/i\n            ];\n            let scriptContent = null;\n            for (const pattern of scriptPatterns){\n                const match = html.match(pattern);\n                if (match) {\n                    scriptContent = match[1];\n                    break;\n                }\n            }\n            if (scriptContent) {\n                // Look for trailerURL in the script (more flexible regex)\n                const patterns = [\n                    /\"trailerURL\"\\s*:\\s*\"([^\"]*thumb-v[^\"]*\\.xhpingcdn\\.com[^\"]*\\.t\\.mp4[^\"]*)\"/gi,\n                    /\"trailerURL\"\\s*:\\s*\"([^\"]*thumb-v[^\"]*\\.xhpingcdn\\.com[^\"]*\\.mp4[^\"]*)\"/gi,\n                    /\"trailerURL\"\\s*:\\s*\"([^\"]*\\.mp4[^\"]*)\"/gi\n                ];\n                for (const pattern of patterns){\n                    const matches = scriptContent.match(pattern);\n                    if (matches && matches.length > 0) {\n                        // Get the first match and extract URL from capture group\n                        const firstMatch = matches[0].match(/\"trailerURL\"\\s*:\\s*\"([^\"]*)\"/i);\n                        if (firstMatch) {\n                            metadata.previewUrl = firstMatch[1].replace(/\\\\\\//g, \"/\");\n                            break;\n                        }\n                    }\n                }\n            } else {\n                // Fallback: search the entire HTML for trailerURL\n                const patterns = [\n                    /\"trailerURL\"\\s*:\\s*\"([^\"]*thumb-v[^\"]*\\.xhpingcdn\\.com[^\"]*\\.t\\.mp4[^\"]*)\"/gi,\n                    /\"trailerURL\"\\s*:\\s*\"([^\"]*thumb-v[^\"]*\\.xhpingcdn\\.com[^\"]*\\.mp4[^\"]*)\"/gi,\n                    /\"trailerURL\"\\s*:\\s*\"([^\"]*\\.mp4[^\"]*)\"/gi\n                ];\n                for (const pattern of patterns){\n                    const matches = html.match(pattern);\n                    if (matches && matches.length > 0) {\n                        const firstMatch = matches[0].match(/\"trailerURL\"\\s*:\\s*\"([^\"]*)\"/i);\n                        if (firstMatch) {\n                            metadata.previewUrl = firstMatch[1].replace(/\\\\\\//g, \"/\");\n                            break;\n                        }\n                    }\n                }\n            }\n            // Enhanced tags extraction - focus on video-tags-list-container\n            const tags = new Set();\n            // First, try to extract from the specific video-tags-list-container section\n            const videoTagsContainerRegex = /<nav[^>]*id=\"video-tags-list-container\"[^>]*>([\\s\\S]*?)<\\/nav>/i;\n            const videoTagsContainerMatch = html.match(videoTagsContainerRegex);\n            if (videoTagsContainerMatch) {\n                const containerHtml = videoTagsContainerMatch[1];\n                // Extract tag text from spans with class \"body-8643e label-5984a label-96c3e\" or \"body-bold-8643e label-5984a label-96c3e\"\n                // This targets the actual tag labels in the video tags list\n                const tagLabelRegex = /<span[^>]*class=\"[^\"]*(?:body-8643e|body-bold-8643e)[^\"]*label-5984a[^\"]*label-96c3e[^\"]*\"[^>]*>([^<]+)<\\/span>/g;\n                let tagLabelMatch;\n                while((tagLabelMatch = tagLabelRegex.exec(containerHtml)) !== null){\n                    const tagText = tagLabelMatch[1]?.trim();\n                    if (tagText && this.isValidContentTag(tagText)) {\n                        const normalized = this.normalizeTag(tagText);\n                        if (normalized) {\n                            tags.add(normalized);\n                        }\n                    }\n                }\n                // Also extract from href patterns within the container for categories and tags\n                const categoryLinksRegex = /href=\"[^\"]*\\/categories\\/([^\"\\/]+)\"[^>]*>/g;\n                let categoryMatch;\n                while((categoryMatch = categoryLinksRegex.exec(containerHtml)) !== null){\n                    const categorySlug = categoryMatch[1]?.trim();\n                    if (categorySlug && this.isValidContentTag(categorySlug)) {\n                        const normalized = this.normalizeTag(categorySlug);\n                        if (normalized) {\n                            tags.add(normalized);\n                        }\n                    }\n                }\n                const tagLinksRegex = /href=\"[^\"]*\\/tags\\/([^\"\\/]+)\"[^>]*>/g;\n                let tagMatch;\n                while((tagMatch = tagLinksRegex.exec(containerHtml)) !== null){\n                    const tagSlug = tagMatch[1]?.trim();\n                    if (tagSlug && this.isValidContentTag(tagSlug)) {\n                        const normalized = this.normalizeTag(tagSlug);\n                        if (normalized) {\n                            tags.add(normalized);\n                        }\n                    }\n                }\n            }\n            // If no tags found from container, fallback to broader extraction\n            if (tags.size === 0) {\n                // Extract from visible category and tag links in HTML (broader fallback)\n                const categoryLinksRegex = /href=\"[^\"]*\\/categories\\/([^\"\\/]+)\"[^>]*>\\s*<[^>]*>\\s*<span[^>]*>([^<]+)<\\/span>/g;\n                let categoryMatch;\n                while((categoryMatch = categoryLinksRegex.exec(html)) !== null){\n                    const categorySlug = categoryMatch[1]?.trim();\n                    const categoryText = categoryMatch[2]?.trim();\n                    if (categorySlug && this.isValidContentTag(categorySlug)) {\n                        const normalized = this.normalizeTag(categorySlug);\n                        if (normalized) tags.add(normalized);\n                    }\n                    if (categoryText && categoryText !== categorySlug && this.isValidContentTag(categoryText)) {\n                        const normalized = this.normalizeTag(categoryText);\n                        if (normalized) tags.add(normalized);\n                    }\n                }\n                const tagLinksRegex = /href=\"[^\"]*\\/tags\\/([^\"\\/]+)\"[^>]*>\\s*<[^>]*>\\s*<span[^>]*>([^<]+)<\\/span>/g;\n                let tagMatch;\n                while((tagMatch = tagLinksRegex.exec(html)) !== null){\n                    const tagSlug = tagMatch[1]?.trim();\n                    const tagText = tagMatch[2]?.trim();\n                    if (tagSlug && this.isValidContentTag(tagSlug)) {\n                        const normalized = this.normalizeTag(tagSlug);\n                        if (normalized) tags.add(normalized);\n                    }\n                    if (tagText && tagText !== tagSlug && this.isValidContentTag(tagText)) {\n                        const normalized = this.normalizeTag(tagText);\n                        if (normalized) tags.add(normalized);\n                    }\n                }\n            }\n            // Convert Set to Array and apply tag normalization\n            let finalTags = Array.from(tags);\n            // Normalize and clean up tags\n            finalTags = finalTags.map((tag)=>this.normalizeTag(tag)).filter((tag)=>tag && tag.length >= 2 && tag.length <= 50) // Increased limit for longer compound tags\n            .filter((tag, index, array)=>array.indexOf(tag) === index) // Remove duplicates\n            .sort() // Sort alphabetically for consistent output\n            ;\n            metadata.tags = finalTags.length > 0 ? finalTags : undefined;\n            _src_lib_logger__WEBPACK_IMPORTED_MODULE_0__.logger.info(\"XHamster metadata extracted\", {\n                url: originalUrl,\n                hasTitle: !!metadata.title,\n                hasDescription: !!metadata.description,\n                hasThumbnail: !!metadata.thumbnail,\n                hasPreviewUrl: !!metadata.previewUrl,\n                tagsCount: metadata.tags?.length || 0\n            });\n            return metadata;\n        } catch (error) {\n            _src_lib_logger__WEBPACK_IMPORTED_MODULE_0__.logger.error(\"Failed to process XHamster URL\", {\n                url: originalUrl,\n                error: error instanceof Error ? error.message : error\n            });\n            throw error;\n        }\n    }\n}\nconst xHamsterService = new XHamsterServiceImpl();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SUFBSSxDQUFDbkI7WUFFM0IsOEJBQThCO1lBQzlCa0IsWUFBWUEsVUFDVEUsR0FBRyxDQUFDNUQsQ0FBQUEsTUFBTyxJQUFJLENBQUNNLFlBQVksQ0FBQ04sTUFDN0I2RCxNQUFNLENBQUM3RCxDQUFBQSxNQUFPQSxPQUFPQSxJQUFJQyxNQUFNLElBQUksS0FBS0QsSUFBSUMsTUFBTSxJQUFJLElBQUksMkNBQTJDO2FBQ3JHNEQsTUFBTSxDQUFDLENBQUM3RCxLQUFLOEQsT0FBT0MsUUFBVUEsTUFBTUMsT0FBTyxDQUFDaEUsU0FBUzhELE9BQU8sb0JBQW9CO2FBQ2hGRyxJQUFJLEdBQUcsNENBQTRDOztZQUV0RDNDLFNBQVNrQixJQUFJLEdBQUdrQixVQUFVekQsTUFBTSxHQUFHLElBQUl5RCxZQUFZUTtZQUVuRHhFLG1EQUFNQSxDQUFDbUIsSUFBSSxDQUFDLCtCQUErQjtnQkFDekNoQixLQUFLZTtnQkFDTHVELFVBQVUsQ0FBQyxDQUFDN0MsU0FBU0csS0FBSztnQkFDMUIyQyxnQkFBZ0IsQ0FBQyxDQUFDOUMsU0FBU0ssV0FBVztnQkFDdEMwQyxjQUFjLENBQUMsQ0FBQy9DLFNBQVNPLFNBQVM7Z0JBQ2xDeUMsZUFBZSxDQUFDLENBQUNoRCxTQUFTaUIsVUFBVTtnQkFDcENnQyxXQUFXakQsU0FBU2tCLElBQUksRUFBRXZDLFVBQVU7WUFDdEM7WUFFQSxPQUFPcUI7UUFFVCxFQUFFLE9BQU9rRCxPQUFPO1lBQ2Q5RSxtREFBTUEsQ0FBQzhFLEtBQUssQ0FBQyxrQ0FBa0M7Z0JBQzdDM0UsS0FBS2U7Z0JBQ0w0RCxPQUFPQSxpQkFBaUJ0RCxRQUFRc0QsTUFBTUMsT0FBTyxHQUFHRDtZQUNsRDtZQUNBLE1BQU1BO1FBQ1I7SUFDRjtBQUNGO0FBRU8sTUFBTUUsa0JBQWtCLElBQUkvRSxzQkFBcUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yYXRlbXktbmV4dGpzLy4vc3JjL3NlcnZpY2VzL3hoYW1zdGVyLnNlcnZpY2UudHM/ZDVmNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBsb2dnZXIgfSBmcm9tICdAL3NyYy9saWIvbG9nZ2VyJ1xuXG5leHBvcnQgaW50ZXJmYWNlIFhIYW1zdGVyTWV0YWRhdGEge1xuICB0aXRsZT86IHN0cmluZ1xuICBkZXNjcmlwdGlvbj86IHN0cmluZ1xuICB0aHVtYm5haWw/OiBzdHJpbmdcbiAgcHJldmlld1VybD86IHN0cmluZ1xuICB0YWdzPzogc3RyaW5nW11cbn1cblxuZXhwb3J0IGNsYXNzIFhIYW1zdGVyU2VydmljZUltcGwge1xuICBpc1hIYW1zdGVyVXJsKHVybDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHVybC5pbmNsdWRlcygneGhhbXN0ZXIuY29tJylcbiAgfVxuXG4gIHByaXZhdGUgaXNWYWxpZENvbnRlbnRUYWcodGFnOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICBpZiAoIXRhZyB8fCB0YWcubGVuZ3RoIDwgMiB8fCB0YWcubGVuZ3RoID4gNTApIHJldHVybiBmYWxzZVxuICAgIFxuICAgIC8vIFRlY2huaWNhbC9wbGF0Zm9ybSB0ZXJtcyB0byBleGNsdWRlXG4gICAgY29uc3QgYmxhY2tsaXN0ID0gW1xuICAgICAgLy8gU2l0ZS9wbGF0Zm9ybSBuYW1lc1xuICAgICAgJ3hoYW1zdGVyJywgJ3Bvcm5odWInLCAncmVkdHViZScsICd0dWJlJywgJ3h2aWRlb3MnLCAneW91aml6eicsICdzcGFua2JhbmcnLFxuICAgICAgJ2NoYXR1cmJhdGUnLCAnY2FtNCcsICdib25nYWNhbXMnLCAnc3RyaXBjaGF0JywgJ2xpdmVqYXNtaW4nLCAnZmxpcnQ0ZnJlZScsICdjYW1zb2RhJyxcbiAgICAgICdvbmx5ZmFucycsICdtYW55dmlkcycsICdjbGlwczRzYWxlJywgJ2l3YW50Y2xpcHMnLCAnbml0ZWZsaXJ0JyxcbiAgICAgIFxuICAgICAgLy8gVGVjaG5pY2FsIG1ldGFkYXRhXG4gICAgICAndmlkZW8nLCAnd2F0Y2gnLCAncGFnZScsICdsaW5rJywgJ3NpdGUnLCAndXJsJywgJ3NsdWcnLCAndWlkJywgJ2lkJywgJ25hbWUnLCAndGFncycsXG4gICAgICAnaXNicmFuZCcsICdpc2NoYW5uZWwnLCAnaXN2ZXJpZmllZCcsICduYW1lZW4nLCAnY2hhbm5lbCcsICdjaGFubmVscycsICdtb2RlbCcsICdtb2RlbHMnLFxuICAgICAgJ2NhdGVnb3J5JywgJ2NhdGVnb3JpZXMnLCAncHJlbWl1bScsICd2aXAnLCAndmVyaWZpZWQnLCAnb2ZmaWNpYWwnLFxuICAgICAgXG4gICAgICAvLyBMb3ctbGV2ZWwgcXVhbGl0eS9mb3JtYXQgdGVybXMgKGJ1dCBhbGxvdyBzb21lIGRlc2NyaXB0aXZlIHF1YWxpdHkgdGVybXMpXG4gICAgICAnNzIwcCcsICcxMDgwcCcsICd1aGQnLCAnZmhkJywgJ21wNCcsICdhdmknLCAnd212JywgJ2ZsdicsICdtb3YnLCAnd2VibScsXG4gICAgICAnZHVyYXRpb24nLCAnbGVuZ3RoJywgJ3NpemUnLCAncXVhbGl0eScsICdmb3JtYXQnLCAncmVzb2x1dGlvbicsXG4gICAgICBcbiAgICAgIC8vIFNvY2lhbC9pbnRlcmFjdGlvbiB0ZXJtc1xuICAgICAgJ3ZpZXdzJywgJ2xpa2VzJywgJ2Rpc2xpa2VzJywgJ2NvbW1lbnRzJywgJ3NoYXJlJywgJ3N1YnNjcmliZScsICdmb2xsb3cnLCAnZmF2b3JpdGUnLFxuICAgICAgJ2Jvb2ttYXJrJywgJ3BsYXlsaXN0JywgJ2NvbGxlY3Rpb24nLCAnZ2FsbGVyeScsICdhYm9ubmVtZW50JyxcbiAgICAgIFxuICAgICAgLy8gVGVjaG5pY2FsIFVJL3dlYiB0ZXJtc1xuICAgICAgJ2VtYmVkJywgJ2lmcmFtZScsICdwbGF5ZXInLCAndGh1bWInLCAndGh1bWJuYWlsJywgJ3ByZXZpZXcnLCAncG9zdGVyJyxcbiAgICAgICdpbWFnZScsICdpbWcnLCAncGljJywgJ3Bob3RvJywgJ2pwZycsICdqcGVnJywgJ3BuZycsICdnaWYnLCAnd2VicCcsICdzdmcnLFxuICAgICAgJ2ljb24nLCAnbG9nbycsICdiYW5uZXInLCAnYnV0dG9uJywgJ2NsaWNrJywgJ2hyZWYnLCAncmVkaXJlY3QnLFxuICAgICAgXG4gICAgICAvLyBBZHZlcnRpc2luZy90cmFja2luZ1xuICAgICAgJ2FkJywgJ2FkcycsICdhZHZlcnRpc2VtZW50JywgJ3Byb21vJywgJ3Byb21vdGlvbicsICdzcG9uc29yZWQnLCAnYWZmaWxpYXRlJyxcbiAgICAgICdyZWZlcnJlcicsICd1dG0nLCAndHJhY2tpbmcnLCAnYW5hbHl0aWNzJywgJ3BpeGVsJyxcbiAgICAgIFxuICAgICAgLy8gQWRtaW4vc3lzdGVtIHRlcm1zXG4gICAgICAnYWRtaW4nLCAnYWRtaW5pc3RyYXRvcicsICdtb2RlcmF0b3InLCAnbW9kJywgJ3VzZXInLCAnZ3Vlc3QnLCAnbWVtYmVyJyxcbiAgICAgICdzdWJzY3JpYmVyJywgJ2FjY291bnQnLCAncHJvZmlsZScsICdzZXR0aW5ncycsICdwcmVmZXJlbmNlcycsICdkYXNoYm9hcmQnLFxuICAgICAgJ3BhbmVsJywgJ2NvbnRyb2wnLCAnbWFuYWdlJywgJ2VkaXQnLCAnZGVsZXRlJywgJ2NyZWF0ZScsICd1cGRhdGUnLFxuICAgICAgXG4gICAgICAvLyBHZW5lcmFsIHdlYi90ZWNoIHRlcm1zXG4gICAgICAnd2Vic2l0ZScsICdob21lcGFnZScsICdjb250YWN0JywgJ2Fib3V0JywgJ2hlbHAnLCAnZmFxJywgJ3Rlcm1zJywgJ3ByaXZhY3knLFxuICAgICAgJ3BvbGljeScsICdsZWdhbCcsICdkbWNhJywgJ2NvcHlyaWdodCcsICd0cmFkZW1hcmsnLCAnZGlzY2xhaW1lcicsXG4gICAgICAnc2VhcmNoJywgJ2ZpbHRlcicsICdzb3J0JywgJ2Jyb3dzZScsICdleHBsb3JlJywgJ2Rpc2NvdmVyJywgJ3RyZW5kaW5nJyxcbiAgICAgICdwb3B1bGFyJywgJ2ZlYXR1cmVkJywgJ3JlY29tbWVuZGVkJywgJ3JlbGF0ZWQnLCAnc2ltaWxhcicsICdtb3JlJywgJ2FsbCcsXG4gICAgICAnbmV3JywgJ2xhdGVzdCcsICdyZWNlbnQnLCAndG9kYXknLCAnd2VlaycsICdtb250aCcsICd5ZWFyJywgJ2RhdGUnLCAndGltZScsXG4gICAgICBcbiAgICAgIC8vIE1lYW5pbmdsZXNzIHRlcm1zXG4gICAgICAnY29udGVudCcsICdzdHVmZicsICd0aGluZ3MnLCAnaXRlbScsICdvYmplY3QnLCAnZWxlbWVudCcsICdjb21wb25lbnQnLFxuICAgICAgJ3NlY3Rpb24nLCAncGFydCcsICdwaWVjZScsICdiaXQnLCAnZGF0YScsICdpbmZvJywgJ2luZm9ybWF0aW9uJyxcbiAgICAgICdkZXRhaWxzJywgJ2Rlc2NyaXB0aW9uJywgJ3RpdGxlJywgJ3RleHQnLCAnY2FwdGlvbicsICdsYWJlbCcsXG4gICAgICBcbiAgICAgIC8vIFVJIGludGVyYWN0aW9uIHRlcm1zXG4gICAgICAnbW9kaWZpZXIgbGVzIG1vdHMgY2zDqXMnLCAnZWRpdCBrZXl3b3JkcycsICdtb2RpZmllcicsICdlZGl0J1xuICAgIF1cbiAgICBcbiAgICBjb25zdCBsb3dlclRhZyA9IHRhZy50b0xvd2VyQ2FzZSgpXG4gICAgXG4gICAgLy8gQ2hlY2sgYWdhaW5zdCBibGFja2xpc3RcbiAgICBpZiAoYmxhY2tsaXN0LmluY2x1ZGVzKGxvd2VyVGFnKSkgcmV0dXJuIGZhbHNlXG4gICAgXG4gICAgLy8gU2tpcCBpZiBjb250YWlucyBVUkxzIG9yIHRlY2huaWNhbCBwYXR0ZXJuc1xuICAgIGlmIChsb3dlclRhZy5pbmNsdWRlcygnaHR0cCcpIHx8IGxvd2VyVGFnLmluY2x1ZGVzKCd3d3cnKSB8fCBsb3dlclRhZy5pbmNsdWRlcygnLmNvbScpKSByZXR1cm4gZmFsc2VcbiAgICBcbiAgICAvLyBTa2lwIHB1cmUgbnVtYmVycyAoYnV0IGFsbG93IHllYXIgdGFncyBsaWtlIDE5ODBzKVxuICAgIGlmICgvXlxcZCskLy50ZXN0KGxvd2VyVGFnKSAmJiBsb3dlclRhZy5sZW5ndGggPCA0KSByZXR1cm4gZmFsc2VcbiAgICBcbiAgICAvLyBTa2lwIGhleCBzdHJpbmdzIChsaWtlbHkgSURzKVxuICAgIGlmICgvXlthLWYwLTldezgsfSQvaS50ZXN0KGxvd2VyVGFnKSkgcmV0dXJuIGZhbHNlXG4gICAgXG4gICAgLy8gU2tpcCB0ZWNobmljYWwgdmFsdWVzXG4gICAgaWYgKC9eKHRydWV8ZmFsc2V8bnVsbHx1bmRlZmluZWR8bmFufGluZmluaXR5KSQvaS50ZXN0KGxvd2VyVGFnKSkgcmV0dXJuIGZhbHNlXG4gICAgXG4gICAgLy8gU2tpcCBzdWJzY3JpYmVyIGNvdW50cyBhbmQgbnVtZXJpYyBzb2NpYWwgbWVkaWEgcGF0dGVybnNcbiAgICBpZiAoL15cXGQrW2ttXT8kLy50ZXN0KGxvd2VyVGFnKSkgcmV0dXJuIGZhbHNlXG4gICAgXG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIHByaXZhdGUgbm9ybWFsaXplVGFnKHRhZzogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBpZiAoIXRhZykgcmV0dXJuICcnXG4gICAgXG4gICAgLy8gQ29udmVydCB0byBsb3dlcmNhc2UgYW5kIHRyaW1cbiAgICBsZXQgbm9ybWFsaXplZCA9IHRhZy50b0xvd2VyQ2FzZSgpLnRyaW0oKVxuICAgIFxuICAgIC8vIFJlbW92ZSBzcGVjaWFsIGNoYXJhY3RlcnMgZXhjZXB0IGh5cGhlbnNcbiAgICBub3JtYWxpemVkID0gbm9ybWFsaXplZC5yZXBsYWNlKC9bXlxcd1xccy1dL2csICcnKVxuICAgIFxuICAgIC8vIFJlcGxhY2Ugc3BhY2VzIGFuZCB1bmRlcnNjb3JlcyB3aXRoIGh5cGhlbnNcbiAgICBub3JtYWxpemVkID0gbm9ybWFsaXplZC5yZXBsYWNlKC9bXFxzX10rL2csICctJylcbiAgICBcbiAgICAvLyBSZW1vdmUgbXVsdGlwbGUgY29uc2VjdXRpdmUgaHlwaGVuc1xuICAgIG5vcm1hbGl6ZWQgPSBub3JtYWxpemVkLnJlcGxhY2UoLy0rL2csICctJylcbiAgICBcbiAgICAvLyBSZW1vdmUgbGVhZGluZy90cmFpbGluZyBoeXBoZW5zXG4gICAgbm9ybWFsaXplZCA9IG5vcm1hbGl6ZWQucmVwbGFjZSgvXi0rfC0rJC9nLCAnJylcbiAgICBcbiAgICAvLyBUYWcgbWFwcGluZ3MgZm9yIGNvbW1vbiB2YXJpYXRpb25zIGluY2x1ZGluZyBGcmVuY2ggdHJhbnNsYXRpb25zIGZyb20gWEhhbXN0ZXJcbiAgICBjb25zdCB0YWdNYXBwaW5nczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgICAgIC8vIEVuZ2xpc2ggdmFyaWF0aW9uc1xuICAgICAgJ2JpZy1ib29icyc6ICdiaWctdGl0cycsXG4gICAgICAnYmlnLWJyZWFzdHMnOiAnYmlnLXRpdHMnLFxuICAgICAgJ3NtYWxsLWJvb2JzJzogJ3NtYWxsLXRpdHMnLFxuICAgICAgJ3NtYWxsLWJyZWFzdHMnOiAnc21hbGwtdGl0cycsXG4gICAgICAnYmlnLWJ1dHQnOiAnYmlnLWFzcycsXG4gICAgICAnYnViYmxlLWJ1dHQnOiAnYmlnLWFzcycsXG4gICAgICAnc21hbGwtYnV0dCc6ICdzbWFsbC1hc3MnLFxuICAgICAgJ2JsYWNrJzogJ2Vib255JyxcbiAgICAgICdhZnJpY2FuJzogJ2Vib255JyxcbiAgICAgICdiaic6ICdibG93am9iJyxcbiAgICAgICdibG93LWpvYic6ICdibG93am9iJyxcbiAgICAgICdoaic6ICdoYW5kam9iJyxcbiAgICAgICdoYW5kLWpvYic6ICdoYW5kam9iJyxcbiAgICAgICdmaic6ICdmb290am9iJyxcbiAgICAgICdmb290LWpvYic6ICdmb290am9iJyxcbiAgICAgICdwb3YnOiAncG92JyxcbiAgICAgICdwb2ludC1vZi12aWV3JzogJ3BvdicsXG4gICAgICAnZ2lybC1vbi1naXJsJzogJ2xlc2JpYW4nLFxuICAgICAgJ2dpcmwtZ2lybCc6ICdsZXNiaWFuJyxcbiAgICAgICdnZyc6ICdsZXNiaWFuJyxcbiAgICAgICdib3ktYm95JzogJ2dheScsXG4gICAgICAnbW0nOiAnZ2F5JyxcbiAgICAgICdnaXJsLWJveSc6ICdzdHJhaWdodCcsXG4gICAgICAnbWlsZnMnOiAnbWlsZicsXG4gICAgICAnbW9tcyc6ICdtaWxmJyxcbiAgICAgICdtb3RoZXJzJzogJ21pbGYnLFxuICAgICAgJ2NvdWdhcnMnOiAnY291Z2FyJyxcbiAgICAgICdncmFubmllcyc6ICdncmFubnknLFxuICAgICAgJ2dyYW5kbWFzJzogJ2dyYW5ueScsXG4gICAgICAnZ2lsZic6ICdncmFubnknLFxuICAgICAgXG4gICAgICAvLyBGcmVuY2ggdG8gRW5nbGlzaCBtYXBwaW5ncyAoYmFzZWQgb24geW91ciBwcm92aWRlZCBIVE1MKVxuICAgICAgJ2ZyYW7Dp2Fpc2VzJzogJ2ZyZW5jaCcsXG4gICAgICAnZnJhbmNhaXNlcyc6ICdmcmVuY2gnLFxuICAgICAgJ2V1cm9ww6llbm5lcyc6ICdldXJvcGVhbicsXG4gICAgICAnZXVyb3BlZW5uZXMnOiAnZXVyb3BlYW4nLFxuICAgICAgJ2bDqnRlJzogJ3BhcnR5JyxcbiAgICAgICdmZXRlJzogJ3BhcnR5JyxcbiAgICAgICdmw6p0ZXMnOiAncGFydHknLFxuICAgICAgJ2ZldGVzJzogJ3BhcnR5JyxcbiAgICAgICdyw6l0cm8nOiAncmV0cm8nLFxuICAgICAgJ3JldHJvJzogJ3JldHJvJyxcbiAgICAgICd2aWTDqW9zLWhkJzogJ2hkJyxcbiAgICAgICd2aWRlb3MtaGQnOiAnaGQnLFxuICAgICAgJ2NvdWdhcic6ICdjb3VnYXInLFxuICAgICAgJ2hhcmRjb3JlJzogJ2hhcmRjb3JlJyxcbiAgICAgICdtaWxmJzogJ21pbGYnLFxuICAgICAgJ21hdHVyZSc6ICdtYXR1cmUnLFxuICAgICAgJ3ZpbnRhZ2UnOiAndmludGFnZScsXG4gICAgICAnZmlsbSc6ICdtb3ZpZScsXG4gICAgICAnaGFyZGNvcmUtZnJhbsOnYWlzJzogJ2ZyZW5jaC1oYXJkY29yZScsXG4gICAgICAnaGFyZGNvcmUtZnJhbmNhaXMnOiAnZnJlbmNoLWhhcmRjb3JlJyxcbiAgICAgICd2aW50YWdlLWRlcy1hbm7DqWVzLTE5NzAnOiAndmludGFnZS0xOTcwcycsXG4gICAgICAndmludGFnZS1kZXMtYW5uZWVzLTE5NzAnOiAndmludGFnZS0xOTcwcycsXG4gICAgICAnY2xhc3NpcXVlLWZyYW7Dp2Fpcyc6ICdmcmVuY2gtY2xhc3NpYycsXG4gICAgICAnY2xhc3NpcXVlLWZyYW5jYWlzJzogJ2ZyZW5jaC1jbGFzc2ljJyxcbiAgICAgICdhbm7DqWVzLTgwJzogJzE5ODBzJyxcbiAgICAgICdhbm5lZXMtODAnOiAnMTk4MHMnLFxuICAgICAgJ21pbGYtZnJhbsOnYWlzZXMnOiAnZnJlbmNoLW1pbGYnLFxuICAgICAgJ21pbGYtZnJhbmNhaXNlcyc6ICdmcmVuY2gtbWlsZicsXG4gICAgICAnaGFyZGNvcmUtY2xhc3NpcXVlJzogJ2NsYXNzaWMtaGFyZGNvcmUnLFxuICAgICAgJ21pbGZlZCc6ICdtaWxmJyxcbiAgICAgICdoYXJkY29yZS1taWxmcyc6ICdoYXJkY29yZS1taWxmJyxcbiAgICAgICdhdC10aGUtcGFydHknOiAncGFydHknLFxuICAgICAgJ2V1cm9wZWFuLW1pbGZzJzogJ2V1cm9wZWFuLW1pbGYnLFxuICAgICAgJ2JlZm9yZS10aGUtcGFydHknOiAncGFydHknLFxuICAgICAgJ2hhcmRjb3JlLXBhcnR5JzogJ2hhcmRjb3JlLXBhcnR5JyxcbiAgICAgICdmdWxsLWhkJzogJ2hkJyxcbiAgICAgICdteS1wYXJ0eSc6ICdwYXJ0eScsXG4gICAgICAnaW4tcGFydHknOiAncGFydHknLFxuICAgICAgJ3BhcnR5aW5nJzogJ3BhcnR5JyxcbiAgICAgICd2aW50YWdlLWNsYXNzaWMtZnVsbCc6ICd2aW50YWdlLWNsYXNzaWMnLFxuICAgICAgXG4gICAgICAvLyBDb21tb24gdmFyaWF0aW9uc1xuICAgICAgJ2FtYXRldXInOiAnYW1hdGV1cicsXG4gICAgICAnYmxvbmRlJzogJ2Jsb25kZScsXG4gICAgICAnYnJ1bmV0dGUnOiAnYnJ1bmV0dGUnLFxuICAgICAgJ3JlZGhlYWQnOiAncmVkaGVhZCcsXG4gICAgICAndGVlbic6ICd0ZWVuJyxcbiAgICAgICd5b3VuZyc6ICd0ZWVuJyxcbiAgICAgICdvbGQnOiAnbWF0dXJlJyxcbiAgICAgICdlYm9ueSc6ICdlYm9ueScsXG4gICAgICAnYXNpYW4nOiAnYXNpYW4nLFxuICAgICAgJ2xhdGluYSc6ICdsYXRpbmEnLFxuICAgICAgJ2Jidyc6ICdiYncnLFxuICAgICAgJ3RpdHRpZXMnOiAndGl0cycsXG4gICAgICAnYm9vYnMnOiAndGl0cycsXG4gICAgICAnYnJlYXN0cyc6ICd0aXRzJyxcbiAgICAgICdzZXgnOiAnaGFyZGNvcmUnLFxuICAgICAgJ2Z1Y2tpbmcnOiAnaGFyZGNvcmUnLFxuICAgICAgJ3BhcnRpZXMnOiAncGFydHknLFxuICAgICAgJzE5ODBzJzogJzE5ODBzJyxcbiAgICAgICcxOTcwcyc6ICcxOTcwcydcbiAgICB9XG4gICAgXG4gICAgLy8gQXBwbHkgbWFwcGluZ3NcbiAgICBpZiAodGFnTWFwcGluZ3Nbbm9ybWFsaXplZF0pIHtcbiAgICAgIG5vcm1hbGl6ZWQgPSB0YWdNYXBwaW5nc1tub3JtYWxpemVkXVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gbm9ybWFsaXplZFxuICB9XG5cbiAgYXN5bmMgcHJvY2Vzc1hIYW1zdGVyVXJsKG9yaWdpbmFsVXJsOiBzdHJpbmcpOiBQcm9taXNlPFhIYW1zdGVyTWV0YWRhdGE+IHtcbiAgICB0cnkge1xuICAgICAgbG9nZ2VyLmluZm8oJ1Byb2Nlc3NpbmcgWEhhbXN0ZXIgVVJMIGZvciBtZXRhZGF0YSBleHRyYWN0aW9uJywgeyB1cmw6IG9yaWdpbmFsVXJsIH0pXG5cbiAgICAgIC8vIEZldGNoIHRoZSBIVE1MIHBhZ2VcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2gob3JpZ2luYWxVcmwsIHtcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdVc2VyLUFnZW50JzogJ01vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdpbjY0OyB4NjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS85MS4wLjQ0NzIuMTI0IFNhZmFyaS81MzcuMzYnXG4gICAgICAgIH1cbiAgICAgIH0pXG5cbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZmV0Y2ggWEhhbXN0ZXIgcGFnZTogJHtyZXNwb25zZS5zdGF0dXN9YClcbiAgICAgIH1cblxuICAgICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKVxuXG4gICAgICAvLyBFeHRyYWN0IG1ldGFkYXRhIGZyb20gdmFyaW91cyBzb3VyY2VzXG4gICAgICBjb25zdCBtZXRhZGF0YTogWEhhbXN0ZXJNZXRhZGF0YSA9IHt9XG5cbiAgICAgIC8vIEV4dHJhY3QgdGl0bGUgZnJvbSBtZXRhIHRhZ3Mgb3IgcGFnZSB0aXRsZVxuICAgICAgY29uc3QgdGl0bGVNYXRjaCA9IGh0bWwubWF0Y2goLzx0aXRsZVtePl0qPihbXjxdKyk8XFwvdGl0bGU+L2kpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBodG1sLm1hdGNoKC88bWV0YVtePl0qcHJvcGVydHk9XCJvZzp0aXRsZVwiW14+XSpjb250ZW50PVwiKFteXCJdKilcIltePl0qPi9pKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgaHRtbC5tYXRjaCgvPG1ldGFbXj5dKm5hbWU9XCJ0aXRsZVwiW14+XSpjb250ZW50PVwiKFteXCJdKilcIltePl0qPi9pKVxuICAgICAgaWYgKHRpdGxlTWF0Y2gpIHtcbiAgICAgICAgbWV0YWRhdGEudGl0bGUgPSB0aXRsZU1hdGNoWzFdLnRyaW0oKVxuICAgICAgfVxuXG4gICAgICAvLyBFeHRyYWN0IGRlc2NyaXB0aW9uXG4gICAgICBjb25zdCBkZXNjTWF0Y2ggPSBodG1sLm1hdGNoKC88bWV0YVtePl0qcHJvcGVydHk9XCJvZzpkZXNjcmlwdGlvblwiW14+XSpjb250ZW50PVwiKFteXCJdKilcIltePl0qPi9pKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICBodG1sLm1hdGNoKC88bWV0YVtePl0qbmFtZT1cImRlc2NyaXB0aW9uXCJbXj5dKmNvbnRlbnQ9XCIoW15cIl0qKVwiW14+XSo+L2kpXG4gICAgICBpZiAoZGVzY01hdGNoKSB7XG4gICAgICAgIG1ldGFkYXRhLmRlc2NyaXB0aW9uID0gZGVzY01hdGNoWzFdLnRyaW0oKVxuICAgICAgfVxuXG4gICAgICAvLyBFeHRyYWN0IHRodW1ibmFpbCBmcm9tIG9nOmltYWdlXG4gICAgICBjb25zdCB0aHVtYk1hdGNoID0gaHRtbC5tYXRjaCgvPG1ldGFbXj5dKnByb3BlcnR5PVwib2c6aW1hZ2VcIltePl0qY29udGVudD1cIihbXlwiXSopXCJbXj5dKj4vaSlcbiAgICAgIGlmICh0aHVtYk1hdGNoKSB7XG4gICAgICAgIG1ldGFkYXRhLnRodW1ibmFpbCA9IHRodW1iTWF0Y2hbMV0gLy8gVXNlIHRoZSBjYXB0dXJlZCBncm91cCBmcm9tIG9nOmltYWdlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBGYWxsYmFjazogc2VhcmNoIGZvciBkaXJlY3QgaW1hZ2UgVVJMc1xuICAgICAgICBjb25zdCBkaXJlY3RJbWFnZU1hdGNoID0gaHRtbC5tYXRjaCgvaHR0cHM6XFwvXFwvaWMtdnQtW15cIl0qXFwueGhwaW5nY2RuXFwuY29tXFwvW15cIl0qXFwuanBnL2cpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwubWF0Y2goL2h0dHBzOlxcL1xcL3RodW1iLVteXCJdKlxcLnhocGluZ2NkblxcLmNvbVxcL1teXCJdKlxcLmpwZy9nKVxuICAgICAgICBpZiAoZGlyZWN0SW1hZ2VNYXRjaCkge1xuICAgICAgICAgIG1ldGFkYXRhLnRodW1ibmFpbCA9IEFycmF5LmlzQXJyYXkoZGlyZWN0SW1hZ2VNYXRjaCkgPyBkaXJlY3RJbWFnZU1hdGNoWzBdIDogZGlyZWN0SW1hZ2VNYXRjaFxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIEV4dHJhY3QgcHJldmlldyBVUkwgZnJvbSBpbml0aWFscy1zY3JpcHRcbiAgICAgIGNvbnN0IHNjcmlwdFBhdHRlcm5zID0gW1xuICAgICAgICAvPHNjcmlwdCBpZD1cImluaXRpYWxzLXNjcmlwdFwiW14+XSo+KFtcXHNcXFNdKj8pPFxcL3NjcmlwdD4vaSxcbiAgICAgICAgLzxzY3JpcHRbXj5dKmlkPVwiaW5pdGlhbHMtc2NyaXB0XCJbXj5dKj4oW1xcc1xcU10qPyk8XFwvc2NyaXB0Pi9pLFxuICAgICAgICAvPHNjcmlwdFtePl0qaW5pdGlhbHNbXj5dKj4oW1xcc1xcU10qPyk8XFwvc2NyaXB0Pi9pXG4gICAgICBdXG4gICAgICBcbiAgICAgIGxldCBzY3JpcHRDb250ZW50ID0gbnVsbFxuICAgICAgXG4gICAgICBmb3IgKGNvbnN0IHBhdHRlcm4gb2Ygc2NyaXB0UGF0dGVybnMpIHtcbiAgICAgICAgY29uc3QgbWF0Y2ggPSBodG1sLm1hdGNoKHBhdHRlcm4pXG4gICAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICAgIHNjcmlwdENvbnRlbnQgPSBtYXRjaFsxXVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKHNjcmlwdENvbnRlbnQpIHtcbiAgICAgICAgLy8gTG9vayBmb3IgdHJhaWxlclVSTCBpbiB0aGUgc2NyaXB0IChtb3JlIGZsZXhpYmxlIHJlZ2V4KVxuICAgICAgICBjb25zdCBwYXR0ZXJucyA9IFtcbiAgICAgICAgICAvXCJ0cmFpbGVyVVJMXCJcXHMqOlxccypcIihbXlwiXSp0aHVtYi12W15cIl0qXFwueGhwaW5nY2RuXFwuY29tW15cIl0qXFwudFxcLm1wNFteXCJdKilcIi9naSxcbiAgICAgICAgICAvXCJ0cmFpbGVyVVJMXCJcXHMqOlxccypcIihbXlwiXSp0aHVtYi12W15cIl0qXFwueGhwaW5nY2RuXFwuY29tW15cIl0qXFwubXA0W15cIl0qKVwiL2dpLFxuICAgICAgICAgIC9cInRyYWlsZXJVUkxcIlxccyo6XFxzKlwiKFteXCJdKlxcLm1wNFteXCJdKilcIi9naVxuICAgICAgICBdXG4gICAgICAgIFxuICAgICAgICBmb3IgKGNvbnN0IHBhdHRlcm4gb2YgcGF0dGVybnMpIHtcbiAgICAgICAgICBjb25zdCBtYXRjaGVzID0gc2NyaXB0Q29udGVudC5tYXRjaChwYXR0ZXJuKVxuICAgICAgICAgIGlmIChtYXRjaGVzICYmIG1hdGNoZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgLy8gR2V0IHRoZSBmaXJzdCBtYXRjaCBhbmQgZXh0cmFjdCBVUkwgZnJvbSBjYXB0dXJlIGdyb3VwXG4gICAgICAgICAgICBjb25zdCBmaXJzdE1hdGNoID0gbWF0Y2hlc1swXS5tYXRjaCgvXCJ0cmFpbGVyVVJMXCJcXHMqOlxccypcIihbXlwiXSopXCIvaSlcbiAgICAgICAgICAgIGlmIChmaXJzdE1hdGNoKSB7XG4gICAgICAgICAgICAgIG1ldGFkYXRhLnByZXZpZXdVcmwgPSBmaXJzdE1hdGNoWzFdLnJlcGxhY2UoL1xcXFxcXC8vZywgJy8nKVxuICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gRmFsbGJhY2s6IHNlYXJjaCB0aGUgZW50aXJlIEhUTUwgZm9yIHRyYWlsZXJVUkxcbiAgICAgICAgY29uc3QgcGF0dGVybnMgPSBbXG4gICAgICAgICAgL1widHJhaWxlclVSTFwiXFxzKjpcXHMqXCIoW15cIl0qdGh1bWItdlteXCJdKlxcLnhocGluZ2NkblxcLmNvbVteXCJdKlxcLnRcXC5tcDRbXlwiXSopXCIvZ2ksXG4gICAgICAgICAgL1widHJhaWxlclVSTFwiXFxzKjpcXHMqXCIoW15cIl0qdGh1bWItdlteXCJdKlxcLnhocGluZ2NkblxcLmNvbVteXCJdKlxcLm1wNFteXCJdKilcIi9naSxcbiAgICAgICAgICAvXCJ0cmFpbGVyVVJMXCJcXHMqOlxccypcIihbXlwiXSpcXC5tcDRbXlwiXSopXCIvZ2lcbiAgICAgICAgXVxuICAgICAgICBcbiAgICAgICAgZm9yIChjb25zdCBwYXR0ZXJuIG9mIHBhdHRlcm5zKSB7XG4gICAgICAgICAgY29uc3QgbWF0Y2hlcyA9IGh0bWwubWF0Y2gocGF0dGVybilcbiAgICAgICAgICBpZiAobWF0Y2hlcyAmJiBtYXRjaGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGZpcnN0TWF0Y2ggPSBtYXRjaGVzWzBdLm1hdGNoKC9cInRyYWlsZXJVUkxcIlxccyo6XFxzKlwiKFteXCJdKilcIi9pKVxuICAgICAgICAgICAgaWYgKGZpcnN0TWF0Y2gpIHtcbiAgICAgICAgICAgICAgbWV0YWRhdGEucHJldmlld1VybCA9IGZpcnN0TWF0Y2hbMV0ucmVwbGFjZSgvXFxcXFxcLy9nLCAnLycpXG4gICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIEVuaGFuY2VkIHRhZ3MgZXh0cmFjdGlvbiAtIGZvY3VzIG9uIHZpZGVvLXRhZ3MtbGlzdC1jb250YWluZXJcbiAgICAgIGNvbnN0IHRhZ3MgPSBuZXcgU2V0PHN0cmluZz4oKVxuXG4gICAgICAvLyBGaXJzdCwgdHJ5IHRvIGV4dHJhY3QgZnJvbSB0aGUgc3BlY2lmaWMgdmlkZW8tdGFncy1saXN0LWNvbnRhaW5lciBzZWN0aW9uXG4gICAgICBjb25zdCB2aWRlb1RhZ3NDb250YWluZXJSZWdleCA9IC88bmF2W14+XSppZD1cInZpZGVvLXRhZ3MtbGlzdC1jb250YWluZXJcIltePl0qPihbXFxzXFxTXSo/KTxcXC9uYXY+L2lcbiAgICAgIGNvbnN0IHZpZGVvVGFnc0NvbnRhaW5lck1hdGNoID0gaHRtbC5tYXRjaCh2aWRlb1RhZ3NDb250YWluZXJSZWdleClcbiAgICAgIFxuICAgICAgaWYgKHZpZGVvVGFnc0NvbnRhaW5lck1hdGNoKSB7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lckh0bWwgPSB2aWRlb1RhZ3NDb250YWluZXJNYXRjaFsxXVxuICAgICAgICBcbiAgICAgICAgLy8gRXh0cmFjdCB0YWcgdGV4dCBmcm9tIHNwYW5zIHdpdGggY2xhc3MgXCJib2R5LTg2NDNlIGxhYmVsLTU5ODRhIGxhYmVsLTk2YzNlXCIgb3IgXCJib2R5LWJvbGQtODY0M2UgbGFiZWwtNTk4NGEgbGFiZWwtOTZjM2VcIlxuICAgICAgICAvLyBUaGlzIHRhcmdldHMgdGhlIGFjdHVhbCB0YWcgbGFiZWxzIGluIHRoZSB2aWRlbyB0YWdzIGxpc3RcbiAgICAgICAgY29uc3QgdGFnTGFiZWxSZWdleCA9IC88c3BhbltePl0qY2xhc3M9XCJbXlwiXSooPzpib2R5LTg2NDNlfGJvZHktYm9sZC04NjQzZSlbXlwiXSpsYWJlbC01OTg0YVteXCJdKmxhYmVsLTk2YzNlW15cIl0qXCJbXj5dKj4oW148XSspPFxcL3NwYW4+L2dcbiAgICAgICAgbGV0IHRhZ0xhYmVsTWF0Y2hcbiAgICAgICAgXG4gICAgICAgIHdoaWxlICgodGFnTGFiZWxNYXRjaCA9IHRhZ0xhYmVsUmVnZXguZXhlYyhjb250YWluZXJIdG1sKSkgIT09IG51bGwpIHtcbiAgICAgICAgICBjb25zdCB0YWdUZXh0ID0gdGFnTGFiZWxNYXRjaFsxXT8udHJpbSgpXG4gICAgICAgICAgaWYgKHRhZ1RleHQgJiYgdGhpcy5pc1ZhbGlkQ29udGVudFRhZyh0YWdUZXh0KSkge1xuICAgICAgICAgICAgY29uc3Qgbm9ybWFsaXplZCA9IHRoaXMubm9ybWFsaXplVGFnKHRhZ1RleHQpXG4gICAgICAgICAgICBpZiAobm9ybWFsaXplZCkge1xuICAgICAgICAgICAgICB0YWdzLmFkZChub3JtYWxpemVkKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gQWxzbyBleHRyYWN0IGZyb20gaHJlZiBwYXR0ZXJucyB3aXRoaW4gdGhlIGNvbnRhaW5lciBmb3IgY2F0ZWdvcmllcyBhbmQgdGFnc1xuICAgICAgICBjb25zdCBjYXRlZ29yeUxpbmtzUmVnZXggPSAvaHJlZj1cIlteXCJdKlxcL2NhdGVnb3JpZXNcXC8oW15cIlxcL10rKVwiW14+XSo+L2dcbiAgICAgICAgbGV0IGNhdGVnb3J5TWF0Y2hcbiAgICAgICAgd2hpbGUgKChjYXRlZ29yeU1hdGNoID0gY2F0ZWdvcnlMaW5rc1JlZ2V4LmV4ZWMoY29udGFpbmVySHRtbCkpICE9PSBudWxsKSB7XG4gICAgICAgICAgY29uc3QgY2F0ZWdvcnlTbHVnID0gY2F0ZWdvcnlNYXRjaFsxXT8udHJpbSgpXG4gICAgICAgICAgaWYgKGNhdGVnb3J5U2x1ZyAmJiB0aGlzLmlzVmFsaWRDb250ZW50VGFnKGNhdGVnb3J5U2x1ZykpIHtcbiAgICAgICAgICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSB0aGlzLm5vcm1hbGl6ZVRhZyhjYXRlZ29yeVNsdWcpXG4gICAgICAgICAgICBpZiAobm9ybWFsaXplZCkge1xuICAgICAgICAgICAgICB0YWdzLmFkZChub3JtYWxpemVkKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgY29uc3QgdGFnTGlua3NSZWdleCA9IC9ocmVmPVwiW15cIl0qXFwvdGFnc1xcLyhbXlwiXFwvXSspXCJbXj5dKj4vZ1xuICAgICAgICBsZXQgdGFnTWF0Y2hcbiAgICAgICAgd2hpbGUgKCh0YWdNYXRjaCA9IHRhZ0xpbmtzUmVnZXguZXhlYyhjb250YWluZXJIdG1sKSkgIT09IG51bGwpIHtcbiAgICAgICAgICBjb25zdCB0YWdTbHVnID0gdGFnTWF0Y2hbMV0/LnRyaW0oKVxuICAgICAgICAgIGlmICh0YWdTbHVnICYmIHRoaXMuaXNWYWxpZENvbnRlbnRUYWcodGFnU2x1ZykpIHtcbiAgICAgICAgICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSB0aGlzLm5vcm1hbGl6ZVRhZyh0YWdTbHVnKVxuICAgICAgICAgICAgaWYgKG5vcm1hbGl6ZWQpIHtcbiAgICAgICAgICAgICAgdGFncy5hZGQobm9ybWFsaXplZClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gSWYgbm8gdGFncyBmb3VuZCBmcm9tIGNvbnRhaW5lciwgZmFsbGJhY2sgdG8gYnJvYWRlciBleHRyYWN0aW9uXG4gICAgICBpZiAodGFncy5zaXplID09PSAwKSB7XG4gICAgICAgIC8vIEV4dHJhY3QgZnJvbSB2aXNpYmxlIGNhdGVnb3J5IGFuZCB0YWcgbGlua3MgaW4gSFRNTCAoYnJvYWRlciBmYWxsYmFjaylcbiAgICAgICAgY29uc3QgY2F0ZWdvcnlMaW5rc1JlZ2V4ID0gL2hyZWY9XCJbXlwiXSpcXC9jYXRlZ29yaWVzXFwvKFteXCJcXC9dKylcIltePl0qPlxccyo8W14+XSo+XFxzKjxzcGFuW14+XSo+KFtePF0rKTxcXC9zcGFuPi9nXG4gICAgICAgIGxldCBjYXRlZ29yeU1hdGNoXG4gICAgICAgIHdoaWxlICgoY2F0ZWdvcnlNYXRjaCA9IGNhdGVnb3J5TGlua3NSZWdleC5leGVjKGh0bWwpKSAhPT0gbnVsbCkge1xuICAgICAgICAgIGNvbnN0IGNhdGVnb3J5U2x1ZyA9IGNhdGVnb3J5TWF0Y2hbMV0/LnRyaW0oKVxuICAgICAgICAgIGNvbnN0IGNhdGVnb3J5VGV4dCA9IGNhdGVnb3J5TWF0Y2hbMl0/LnRyaW0oKVxuICAgICAgICAgIFxuICAgICAgICAgIGlmIChjYXRlZ29yeVNsdWcgJiYgdGhpcy5pc1ZhbGlkQ29udGVudFRhZyhjYXRlZ29yeVNsdWcpKSB7XG4gICAgICAgICAgICBjb25zdCBub3JtYWxpemVkID0gdGhpcy5ub3JtYWxpemVUYWcoY2F0ZWdvcnlTbHVnKVxuICAgICAgICAgICAgaWYgKG5vcm1hbGl6ZWQpIHRhZ3MuYWRkKG5vcm1hbGl6ZWQpXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChjYXRlZ29yeVRleHQgJiYgY2F0ZWdvcnlUZXh0ICE9PSBjYXRlZ29yeVNsdWcgJiYgdGhpcy5pc1ZhbGlkQ29udGVudFRhZyhjYXRlZ29yeVRleHQpKSB7XG4gICAgICAgICAgICBjb25zdCBub3JtYWxpemVkID0gdGhpcy5ub3JtYWxpemVUYWcoY2F0ZWdvcnlUZXh0KVxuICAgICAgICAgICAgaWYgKG5vcm1hbGl6ZWQpIHRhZ3MuYWRkKG5vcm1hbGl6ZWQpXG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdGFnTGlua3NSZWdleCA9IC9ocmVmPVwiW15cIl0qXFwvdGFnc1xcLyhbXlwiXFwvXSspXCJbXj5dKj5cXHMqPFtePl0qPlxccyo8c3BhbltePl0qPihbXjxdKyk8XFwvc3Bhbj4vZ1xuICAgICAgICBsZXQgdGFnTWF0Y2hcbiAgICAgICAgd2hpbGUgKCh0YWdNYXRjaCA9IHRhZ0xpbmtzUmVnZXguZXhlYyhodG1sKSkgIT09IG51bGwpIHtcbiAgICAgICAgICBjb25zdCB0YWdTbHVnID0gdGFnTWF0Y2hbMV0/LnRyaW0oKVxuICAgICAgICAgIGNvbnN0IHRhZ1RleHQgPSB0YWdNYXRjaFsyXT8udHJpbSgpXG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKHRhZ1NsdWcgJiYgdGhpcy5pc1ZhbGlkQ29udGVudFRhZyh0YWdTbHVnKSkge1xuICAgICAgICAgICAgY29uc3Qgbm9ybWFsaXplZCA9IHRoaXMubm9ybWFsaXplVGFnKHRhZ1NsdWcpXG4gICAgICAgICAgICBpZiAobm9ybWFsaXplZCkgdGFncy5hZGQobm9ybWFsaXplZClcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHRhZ1RleHQgJiYgdGFnVGV4dCAhPT0gdGFnU2x1ZyAmJiB0aGlzLmlzVmFsaWRDb250ZW50VGFnKHRhZ1RleHQpKSB7XG4gICAgICAgICAgICBjb25zdCBub3JtYWxpemVkID0gdGhpcy5ub3JtYWxpemVUYWcodGFnVGV4dClcbiAgICAgICAgICAgIGlmIChub3JtYWxpemVkKSB0YWdzLmFkZChub3JtYWxpemVkKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBDb252ZXJ0IFNldCB0byBBcnJheSBhbmQgYXBwbHkgdGFnIG5vcm1hbGl6YXRpb25cbiAgICAgIGxldCBmaW5hbFRhZ3MgPSBBcnJheS5mcm9tKHRhZ3MpXG4gICAgICBcbiAgICAgIC8vIE5vcm1hbGl6ZSBhbmQgY2xlYW4gdXAgdGFnc1xuICAgICAgZmluYWxUYWdzID0gZmluYWxUYWdzXG4gICAgICAgIC5tYXAodGFnID0+IHRoaXMubm9ybWFsaXplVGFnKHRhZykpXG4gICAgICAgIC5maWx0ZXIodGFnID0+IHRhZyAmJiB0YWcubGVuZ3RoID49IDIgJiYgdGFnLmxlbmd0aCA8PSA1MCkgLy8gSW5jcmVhc2VkIGxpbWl0IGZvciBsb25nZXIgY29tcG91bmQgdGFnc1xuICAgICAgICAuZmlsdGVyKCh0YWcsIGluZGV4LCBhcnJheSkgPT4gYXJyYXkuaW5kZXhPZih0YWcpID09PSBpbmRleCkgLy8gUmVtb3ZlIGR1cGxpY2F0ZXNcbiAgICAgICAgLnNvcnQoKSAvLyBTb3J0IGFscGhhYmV0aWNhbGx5IGZvciBjb25zaXN0ZW50IG91dHB1dFxuXG4gICAgICBtZXRhZGF0YS50YWdzID0gZmluYWxUYWdzLmxlbmd0aCA+IDAgPyBmaW5hbFRhZ3MgOiB1bmRlZmluZWRcblxuICAgICAgbG9nZ2VyLmluZm8oJ1hIYW1zdGVyIG1ldGFkYXRhIGV4dHJhY3RlZCcsIHtcbiAgICAgICAgdXJsOiBvcmlnaW5hbFVybCxcbiAgICAgICAgaGFzVGl0bGU6ICEhbWV0YWRhdGEudGl0bGUsXG4gICAgICAgIGhhc0Rlc2NyaXB0aW9uOiAhIW1ldGFkYXRhLmRlc2NyaXB0aW9uLFxuICAgICAgICBoYXNUaHVtYm5haWw6ICEhbWV0YWRhdGEudGh1bWJuYWlsLFxuICAgICAgICBoYXNQcmV2aWV3VXJsOiAhIW1ldGFkYXRhLnByZXZpZXdVcmwsXG4gICAgICAgIHRhZ3NDb3VudDogbWV0YWRhdGEudGFncz8ubGVuZ3RoIHx8IDBcbiAgICAgIH0pXG5cbiAgICAgIHJldHVybiBtZXRhZGF0YVxuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRmFpbGVkIHRvIHByb2Nlc3MgWEhhbXN0ZXIgVVJMJywgeyBcbiAgICAgICAgdXJsOiBvcmlnaW5hbFVybCwgXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IGVycm9yIFxuICAgICAgfSlcbiAgICAgIHRocm93IGVycm9yXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCB4SGFtc3RlclNlcnZpY2UgPSBuZXcgWEhhbXN0ZXJTZXJ2aWNlSW1wbCgpIl0sIm5hbWVzIjpbImxvZ2dlciIsIlhIYW1zdGVyU2VydmljZUltcGwiLCJpc1hIYW1zdGVyVXJsIiwidXJsIiwiaW5jbHVkZXMiLCJpc1ZhbGlkQ29udGVudFRhZyIsInRhZyIsImxlbmd0aCIsImJsYWNrbGlzdCIsImxvd2VyVGFnIiwidG9Mb3dlckNhc2UiLCJ0ZXN0Iiwibm9ybWFsaXplVGFnIiwibm9ybWFsaXplZCIsInRyaW0iLCJyZXBsYWNlIiwidGFnTWFwcGluZ3MiLCJwcm9jZXNzWEhhbXN0ZXJVcmwiLCJvcmlnaW5hbFVybCIsImluZm8iLCJyZXNwb25zZSIsImZldGNoIiwiaGVhZGVycyIsIm9rIiwiRXJyb3IiLCJzdGF0dXMiLCJodG1sIiwidGV4dCIsIm1ldGFkYXRhIiwidGl0bGVNYXRjaCIsIm1hdGNoIiwidGl0bGUiLCJkZXNjTWF0Y2giLCJkZXNjcmlwdGlvbiIsInRodW1iTWF0Y2giLCJ0aHVtYm5haWwiLCJkaXJlY3RJbWFnZU1hdGNoIiwiQXJyYXkiLCJpc0FycmF5Iiwic2NyaXB0UGF0dGVybnMiLCJzY3JpcHRDb250ZW50IiwicGF0dGVybiIsInBhdHRlcm5zIiwibWF0Y2hlcyIsImZpcnN0TWF0Y2giLCJwcmV2aWV3VXJsIiwidGFncyIsIlNldCIsInZpZGVvVGFnc0NvbnRhaW5lclJlZ2V4IiwidmlkZW9UYWdzQ29udGFpbmVyTWF0Y2giLCJjb250YWluZXJIdG1sIiwidGFnTGFiZWxSZWdleCIsInRhZ0xhYmVsTWF0Y2giLCJleGVjIiwidGFnVGV4dCIsImFkZCIsImNhdGVnb3J5TGlua3NSZWdleCIsImNhdGVnb3J5TWF0Y2giLCJjYXRlZ29yeVNsdWciLCJ0YWdMaW5rc1JlZ2V4IiwidGFnTWF0Y2giLCJ0YWdTbHVnIiwic2l6ZSIsImNhdGVnb3J5VGV4dCIsImZpbmFsVGFncyIsImZyb20iLCJtYXAiLCJmaWx0ZXIiLCJpbmRleCIsImFycmF5IiwiaW5kZXhPZiIsInNvcnQiLCJ1bmRlZmluZWQiLCJoYXNUaXRsZSIsImhhc0Rlc2NyaXB0aW9uIiwiaGFzVGh1bWJuYWlsIiwiaGFzUHJldmlld1VybCIsInRhZ3NDb3VudCIsImVycm9yIiwibWVzc2FnZSIsInhIYW1zdGVyU2VydmljZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/services/xhamster.service.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fvideos%2Fextract-metadata&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fvideos%2Fextract-metadata.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();