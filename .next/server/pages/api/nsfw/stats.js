"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/nsfw/stats";
exports.ids = ["pages/api/nsfw/stats"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "bcryptjs":
/*!***************************!*\
  !*** external "bcryptjs" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("bcryptjs");

/***/ }),

/***/ "next-auth/next":
/*!*********************************!*\
  !*** external "next-auth/next" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("next-auth/next");

/***/ }),

/***/ "next-auth/providers/apple":
/*!********************************************!*\
  !*** external "next-auth/providers/apple" ***!
  \********************************************/
/***/ ((module) => {

module.exports = require("next-auth/providers/apple");

/***/ }),

/***/ "next-auth/providers/credentials":
/*!**************************************************!*\
  !*** external "next-auth/providers/credentials" ***!
  \**************************************************/
/***/ ((module) => {

module.exports = require("next-auth/providers/credentials");

/***/ }),

/***/ "next-auth/providers/facebook":
/*!***********************************************!*\
  !*** external "next-auth/providers/facebook" ***!
  \***********************************************/
/***/ ((module) => {

module.exports = require("next-auth/providers/facebook");

/***/ }),

/***/ "next-auth/providers/google":
/*!*********************************************!*\
  !*** external "next-auth/providers/google" ***!
  \*********************************************/
/***/ ((module) => {

module.exports = require("next-auth/providers/google");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fnsfw%2Fstats&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fnsfw%2Fstats.ts&middlewareConfigBase64=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fnsfw%2Fstats&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fnsfw%2Fstats.ts&middlewareConfigBase64=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_nsfw_stats_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/nsfw/stats.ts */ \"(api)/./pages/api/nsfw/stats.ts\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_nsfw_stats_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_nsfw_stats_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/nsfw/stats\",\n        pathname: \"/api/nsfw/stats\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_nsfw_stats_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRm5zZnclMkZzdGF0cyZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTJGYXBpJTJGbnNmdyUyRnN0YXRzLnRzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNMO0FBQzFEO0FBQ3NEO0FBQ3REO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyxxREFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMscURBQVE7QUFDcEM7QUFDTyx3QkFBd0IsZ0hBQW1CO0FBQ2xEO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcmF0ZW15LW5leHRqcy8/YzFkOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXMvYXBpL25zZncvc3RhdHMudHNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9uc2Z3L3N0YXRzXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvbnNmdy9zdGF0c1wiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fnsfw%2Fstats&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fnsfw%2Fstats.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./pages/api/nsfw/stats.ts":
/*!*********************************!*\
  !*** ./pages/api/nsfw/stats.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _lib_api_handler__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/api-handler */ \"(api)/./src/lib/api-handler.ts\");\n/* harmony import */ var _services_nsfw_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/services/nsfw.service */ \"(api)/./src/services/nsfw.service.ts\");\n\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_lib_api_handler__WEBPACK_IMPORTED_MODULE_0__.createApiRoute)({\n    GET: async (ctx)=>{\n        const stats = await _services_nsfw_service__WEBPACK_IMPORTED_MODULE_1__.nsfwService.getNSFWStats();\n        return ctx.res.status(200).json({\n            success: true,\n            data: stats\n        });\n    }\n}, {\n    methods: [\n        \"GET\"\n    ]\n}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvbnNmdy9zdGF0cy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBa0Q7QUFDRztBQUVyRCxpRUFBZUEsZ0VBQWNBLENBQUM7SUFDNUJFLEtBQUssT0FBT0M7UUFDVixNQUFNQyxRQUFRLE1BQU1ILCtEQUFXQSxDQUFDSSxZQUFZO1FBRTVDLE9BQU9GLElBQUlHLEdBQUcsQ0FBQ0MsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUM5QkMsU0FBUztZQUNUQyxNQUFNTjtRQUNSO0lBQ0Y7QUFDRixHQUFHO0lBQ0RPLFNBQVM7UUFBQztLQUFNO0FBQ2xCLEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yYXRlbXktbmV4dGpzLy4vcGFnZXMvYXBpL25zZncvc3RhdHMudHM/ZjI5YyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVBcGlSb3V0ZSB9IGZyb20gJ0AvbGliL2FwaS1oYW5kbGVyJ1xuaW1wb3J0IHsgbnNmd1NlcnZpY2UgfSBmcm9tICdAL3NlcnZpY2VzL25zZncuc2VydmljZSdcblxuZXhwb3J0IGRlZmF1bHQgY3JlYXRlQXBpUm91dGUoe1xuICBHRVQ6IGFzeW5jIChjdHgpID0+IHtcbiAgICBjb25zdCBzdGF0cyA9IGF3YWl0IG5zZndTZXJ2aWNlLmdldE5TRldTdGF0cygpXG4gICAgXG4gICAgcmV0dXJuIGN0eC5yZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgZGF0YTogc3RhdHNcbiAgICB9KVxuICB9XG59LCB7XG4gIG1ldGhvZHM6IFsnR0VUJ11cbn0pIl0sIm5hbWVzIjpbImNyZWF0ZUFwaVJvdXRlIiwibnNmd1NlcnZpY2UiLCJHRVQiLCJjdHgiLCJzdGF0cyIsImdldE5TRldTdGF0cyIsInJlcyIsInN0YXR1cyIsImpzb24iLCJzdWNjZXNzIiwiZGF0YSIsIm1ldGhvZHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/nsfw/stats.ts\n");

/***/ }),

/***/ "(api)/./src/lib/api-handler.ts":
/*!********************************!*\
  !*** ./src/lib/api-handler.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CRUD: () => (/* binding */ CRUD),\n/* harmony export */   DELETE: () => (/* binding */ DELETE),\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   PATCH: () => (/* binding */ PATCH),\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   PUT: () => (/* binding */ PUT),\n/* harmony export */   createApiRoute: () => (/* binding */ createApiRoute),\n/* harmony export */   errorResponse: () => (/* binding */ errorResponse),\n/* harmony export */   rateLimit: () => (/* binding */ rateLimit),\n/* harmony export */   requireAuth: () => (/* binding */ requireAuth),\n/* harmony export */   successResponse: () => (/* binding */ successResponse),\n/* harmony export */   validateBody: () => (/* binding */ validateBody),\n/* harmony export */   validateQuery: () => (/* binding */ validateQuery),\n/* harmony export */   withPagination: () => (/* binding */ withPagination)\n/* harmony export */ });\n/* harmony import */ var next_auth_next__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth/next */ \"next-auth/next\");\n/* harmony import */ var next_auth_next__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_auth_next__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./auth */ \"(api)/./src/lib/auth.ts\");\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./errors */ \"(api)/./src/lib/errors.ts\");\n/* harmony import */ var _logger__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./logger */ \"(api)/./src/lib/logger.ts\");\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./constants */ \"(api)/./src/lib/constants.ts\");\n\n\n\n\n\n// Main API route wrapper\nfunction createApiRoute(handlers, config = {}) {\n    const { methods = Object.keys(handlers), requireAuth = false } = config;\n    return async (req, res)=>{\n        const startTime = Date.now();\n        const { method = \"GET\" } = req;\n        let user;\n        // Enhanced request logging\n        _logger__WEBPACK_IMPORTED_MODULE_3__.logger.debug(\"API Request Starting\", {\n            method,\n            url: req.url,\n            userAgent: req.headers[\"user-agent\"],\n            ip: req.connection.remoteAddress || req.headers[\"x-forwarded-for\"],\n            contentType: req.headers[\"content-type\"],\n            origin: req.headers.origin\n        });\n        try {\n            // Check if method is allowed\n            if (!methods.includes(method)) {\n                return res.status(_constants__WEBPACK_IMPORTED_MODULE_4__.HTTP_STATUS.METHOD_NOT_ALLOWED).json({\n                    success: false,\n                    message: `Method ${method} not allowed`,\n                    error: \"METHOD_NOT_ALLOWED\"\n                });\n            }\n            // Get user session if auth is required\n            if (requireAuth) {\n                const session = await (0,next_auth_next__WEBPACK_IMPORTED_MODULE_0__.getServerSession)(req, res, _auth__WEBPACK_IMPORTED_MODULE_1__.authOptions);\n                if (!session?.user) {\n                    return res.status(_constants__WEBPACK_IMPORTED_MODULE_4__.HTTP_STATUS.UNAUTHORIZED).json({\n                        success: false,\n                        message: \"Authentication required\",\n                        error: \"UNAUTHORIZED\"\n                    });\n                }\n                user = session.user;\n            }\n            // Create API context\n            const ctx = {\n                req,\n                res,\n                user\n            };\n            // Get handler for method\n            const handler = handlers[method];\n            if (!handler) {\n                return res.status(_constants__WEBPACK_IMPORTED_MODULE_4__.HTTP_STATUS.METHOD_NOT_ALLOWED).json({\n                    success: false,\n                    message: `Handler for ${method} not found`,\n                    error: \"METHOD_NOT_ALLOWED\"\n                });\n            }\n            // Execute handler\n            const result = await handler(ctx);\n            // Log successful request\n            const duration = Date.now() - startTime;\n            (0,_logger__WEBPACK_IMPORTED_MODULE_3__.logApiRequest)(method, req.url || \"\", user?.id, duration);\n            // Send response if not already sent\n            if (!res.headersSent) {\n                res.status(_constants__WEBPACK_IMPORTED_MODULE_4__.HTTP_STATUS.OK).json(result);\n            }\n        } catch (error) {\n            const duration = Date.now() - startTime;\n            (0,_logger__WEBPACK_IMPORTED_MODULE_3__.logApiError)(method, req.url || \"\", error, user?.id);\n            // Handle known application errors\n            if ((0,_errors__WEBPACK_IMPORTED_MODULE_2__.isAppError)(error)) {\n                const serializedError = (0,_errors__WEBPACK_IMPORTED_MODULE_2__.serializeError)(error, false);\n                return res.status(error.statusCode).json({\n                    success: false,\n                    message: error.message,\n                    error: error.code,\n                    ...error.context && {\n                        context: error.context\n                    }\n                });\n            }\n            // Handle unknown errors\n            _logger__WEBPACK_IMPORTED_MODULE_3__.logger.error(\"Unhandled API error\", {\n                method,\n                url: req.url,\n                error: error instanceof Error ? error.message : error,\n                stack: error instanceof Error ? error.stack : undefined,\n                userId: user?.id\n            });\n            return res.status(_constants__WEBPACK_IMPORTED_MODULE_4__.HTTP_STATUS.INTERNAL_SERVER_ERROR).json({\n                success: false,\n                message: \"Internal server error\",\n                error: \"INTERNAL_SERVER_ERROR\"\n            });\n        }\n    };\n}\n// Utility to require authentication\nfunction requireAuth(handler) {\n    return async (ctx)=>{\n        if (!ctx.user) {\n            throw new _errors__WEBPACK_IMPORTED_MODULE_2__.AuthenticationError(\"Authentication required\");\n        }\n        return handler(ctx);\n    };\n}\n// Utility to validate request body\nfunction validateBody(schema, handler) {\n    return async (ctx)=>{\n        try {\n            const validatedBody = schema.parse(ctx.req.body);\n            return handler(ctx, validatedBody);\n        } catch (error) {\n            if (error instanceof Error && \"errors\" in error) {\n                const zodError = error;\n                const firstError = zodError.errors[0];\n                throw new _errors__WEBPACK_IMPORTED_MODULE_2__.AppError(firstError.message, \"VALIDATION_ERROR\", _constants__WEBPACK_IMPORTED_MODULE_4__.HTTP_STATUS.BAD_REQUEST, true, {\n                    field: firstError.path.join(\".\"),\n                    errors: zodError.errors\n                });\n            }\n            throw error;\n        }\n    };\n}\n// Utility to validate query parameters\nfunction validateQuery(schema, handler) {\n    return async (ctx)=>{\n        try {\n            const validatedQuery = schema.parse(ctx.req.query);\n            return handler(ctx, validatedQuery);\n        } catch (error) {\n            if (error instanceof Error && \"errors\" in error) {\n                const zodError = error;\n                const firstError = zodError.errors[0];\n                throw new _errors__WEBPACK_IMPORTED_MODULE_2__.AppError(firstError.message, \"VALIDATION_ERROR\", _constants__WEBPACK_IMPORTED_MODULE_4__.HTTP_STATUS.BAD_REQUEST, true, {\n                    field: firstError.path.join(\".\"),\n                    errors: zodError.errors\n                });\n            }\n            throw error;\n        }\n    };\n}\n// Utility for pagination\nfunction withPagination(handler) {\n    return async (ctx)=>{\n        const page = parseInt(ctx.req.query.page) || 1;\n        const limit = Math.min(parseInt(ctx.req.query.limit) || 12, 50) // Max 50 items per page\n        ;\n        return handler(ctx, {\n            page,\n            limit\n        });\n    };\n}\n// Response helpers\nfunction successResponse(data, message) {\n    return {\n        success: true,\n        data,\n        ...message && {\n            message\n        }\n    };\n}\nfunction errorResponse(message, code) {\n    return {\n        success: false,\n        message,\n        ...code && {\n            error: code\n        }\n    };\n}\n// Method-specific handlers\nconst GET = (handler)=>({\n        GET: handler\n    });\nconst POST = (handler)=>({\n        POST: handler\n    });\nconst PUT = (handler)=>({\n        PUT: handler\n    });\nconst DELETE = (handler)=>({\n        DELETE: handler\n    });\nconst PATCH = (handler)=>({\n        PATCH: handler\n    });\n// Combined method handlers\nconst CRUD = {\n    GET: (handler)=>handler,\n    POST: (handler)=>handler,\n    PUT: (handler)=>handler,\n    DELETE: (handler)=>handler\n};\n// Rate limiting (simple in-memory implementation for development)\nconst requestCounts = new Map();\nfunction rateLimit(windowMs = 15 * 60 * 1000, maxRequests = 100) {\n    return (handler)=>{\n        return async (ctx)=>{\n            const key = ctx.req.headers[\"x-forwarded-for\"] || ctx.req.connection.remoteAddress || \"unknown\";\n            const now = Date.now();\n            const windowStart = now - windowMs;\n            const requestData = requestCounts.get(key);\n            if (!requestData || requestData.resetTime < windowStart) {\n                requestCounts.set(key, {\n                    count: 1,\n                    resetTime: now\n                });\n                return handler(ctx);\n            }\n            if (requestData.count >= maxRequests) {\n                throw new _errors__WEBPACK_IMPORTED_MODULE_2__.AppError(\"Too many requests\", \"RATE_LIMIT_EXCEEDED\", _constants__WEBPACK_IMPORTED_MODULE_4__.HTTP_STATUS.TOO_MANY_REQUESTS);\n            }\n            requestData.count++;\n            return handler(ctx);\n        };\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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akNDLGNBQXNCLEdBQUc7SUFFekIsT0FBTyxDQUFDakQ7UUFDTixPQUFPLE9BQU9EO1lBQ1osTUFBTW1ELE1BQU1uRCxJQUFJekIsR0FBRyxDQUFDVSxPQUFPLENBQUMsa0JBQWtCLElBQ2pDZSxJQUFJekIsR0FBRyxDQUFDWSxVQUFVLENBQUNDLGFBQWEsSUFDaEM7WUFFYixNQUFNVCxNQUFNRCxLQUFLQyxHQUFHO1lBQ3BCLE1BQU15RSxjQUFjekUsTUFBTXNFO1lBRTFCLE1BQU1JLGNBQWNQLGNBQWNRLEdBQUcsQ0FBQ0g7WUFFdEMsSUFBSSxDQUFDRSxlQUFlQSxZQUFZRSxTQUFTLEdBQUdILGFBQWE7Z0JBQ3ZETixjQUFjVSxHQUFHLENBQUNMLEtBQUs7b0JBQUVNLE9BQU87b0JBQUdGLFdBQVc1RTtnQkFBSTtnQkFDbEQsT0FBT3NCLFFBQVFEO1lBQ2pCO1lBRUEsSUFBSXFELFlBQVlJLEtBQUssSUFBSVAsYUFBYTtnQkFDcEMsTUFBTSxJQUFJMUYsNkNBQVFBLENBQ2hCLHFCQUNBLHVCQUNBTyxtREFBV0EsQ0FBQzJGLGlCQUFpQjtZQUVqQztZQUVBTCxZQUFZSSxLQUFLO1lBQ2pCLE9BQU94RCxRQUFRRDtRQUNqQjtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yYXRlbXktbmV4dGpzLy4vc3JjL2xpYi9hcGktaGFuZGxlci50cz8xZTdlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRBcGlSZXF1ZXN0LCBOZXh0QXBpUmVzcG9uc2UgfSBmcm9tICduZXh0J1xuaW1wb3J0IHsgZ2V0U2VydmVyU2Vzc2lvbiB9IGZyb20gJ25leHQtYXV0aC9uZXh0J1xuaW1wb3J0IHsgYXV0aE9wdGlvbnMgfSBmcm9tICcuL2F1dGgnXG5pbXBvcnQgeyBcbiAgQXBwRXJyb3IsIFxuICBpc0FwcEVycm9yLCBcbiAgc2VyaWFsaXplRXJyb3IsXG4gIEF1dGhlbnRpY2F0aW9uRXJyb3IgXG59IGZyb20gJy4vZXJyb3JzJ1xuaW1wb3J0IHsgbG9nZ2VyLCBsb2dBcGlSZXF1ZXN0LCBsb2dBcGlFcnJvciB9IGZyb20gJy4vbG9nZ2VyJ1xuaW1wb3J0IHsgSFRUUF9TVEFUVVMgfSBmcm9tICcuL2NvbnN0YW50cydcbmltcG9ydCB7IEFwaVJlc3BvbnNlIH0gZnJvbSAnLi4vdHlwZXMnXG5cbmV4cG9ydCBpbnRlcmZhY2UgQXBpQ29udGV4dCB7XG4gIHJlcTogTmV4dEFwaVJlcXVlc3RcbiAgcmVzOiBOZXh0QXBpUmVzcG9uc2VcbiAgdXNlcj86IHtcbiAgICBpZDogc3RyaW5nXG4gICAgZW1haWw6IHN0cmluZ1xuICAgIHVzZXJuYW1lOiBzdHJpbmdcbiAgfVxufVxuXG5leHBvcnQgdHlwZSBBcGlIYW5kbGVyID0gKGN0eDogQXBpQ29udGV4dCkgPT4gUHJvbWlzZTxhbnk+XG5cbmV4cG9ydCBpbnRlcmZhY2UgQXBpUm91dGVDb25maWcge1xuICBtZXRob2RzPzogc3RyaW5nW11cbiAgcmVxdWlyZUF1dGg/OiBib29sZWFuXG4gIHJhdGVMaW1pdD86IHtcbiAgICB3aW5kb3dNczogbnVtYmVyXG4gICAgbWF4UmVxdWVzdHM6IG51bWJlclxuICB9XG59XG5cbi8vIE1haW4gQVBJIHJvdXRlIHdyYXBwZXJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVBcGlSb3V0ZShcbiAgaGFuZGxlcnM6IHsgW21ldGhvZDogc3RyaW5nXTogQXBpSGFuZGxlciB9LFxuICBjb25maWc6IEFwaVJvdXRlQ29uZmlnID0ge31cbikge1xuICBjb25zdCB7IFxuICAgIG1ldGhvZHMgPSBPYmplY3Qua2V5cyhoYW5kbGVycyksIFxuICAgIHJlcXVpcmVBdXRoID0gZmFsc2UgXG4gIH0gPSBjb25maWdcblxuICByZXR1cm4gYXN5bmMgKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSA9PiB7XG4gICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKVxuICAgIGNvbnN0IHsgbWV0aG9kID0gJ0dFVCcgfSA9IHJlcVxuICAgIGxldCB1c2VyXG5cbiAgICAvLyBFbmhhbmNlZCByZXF1ZXN0IGxvZ2dpbmdcbiAgICBsb2dnZXIuZGVidWcoJ0FQSSBSZXF1ZXN0IFN0YXJ0aW5nJywge1xuICAgICAgbWV0aG9kLFxuICAgICAgdXJsOiByZXEudXJsLFxuICAgICAgdXNlckFnZW50OiByZXEuaGVhZGVyc1sndXNlci1hZ2VudCddLFxuICAgICAgaXA6IHJlcS5jb25uZWN0aW9uLnJlbW90ZUFkZHJlc3MgfHwgcmVxLmhlYWRlcnNbJ3gtZm9yd2FyZGVkLWZvciddLFxuICAgICAgY29udGVudFR5cGU6IHJlcS5oZWFkZXJzWydjb250ZW50LXR5cGUnXSxcbiAgICAgIG9yaWdpbjogcmVxLmhlYWRlcnMub3JpZ2luXG4gICAgfSlcblxuICAgIHRyeSB7XG4gICAgICAvLyBDaGVjayBpZiBtZXRob2QgaXMgYWxsb3dlZFxuICAgICAgaWYgKCFtZXRob2RzLmluY2x1ZGVzKG1ldGhvZCkpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoSFRUUF9TVEFUVVMuTUVUSE9EX05PVF9BTExPV0VEKS5qc29uKHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBtZXNzYWdlOiBgTWV0aG9kICR7bWV0aG9kfSBub3QgYWxsb3dlZGAsXG4gICAgICAgICAgZXJyb3I6ICdNRVRIT0RfTk9UX0FMTE9XRUQnXG4gICAgICAgIH0pXG4gICAgICB9XG5cbiAgICAgIC8vIEdldCB1c2VyIHNlc3Npb24gaWYgYXV0aCBpcyByZXF1aXJlZFxuICAgICAgaWYgKHJlcXVpcmVBdXRoKSB7XG4gICAgICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXJ2ZXJTZXNzaW9uKHJlcSwgcmVzLCBhdXRoT3B0aW9ucylcbiAgICAgICAgaWYgKCFzZXNzaW9uPy51c2VyKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoSFRUUF9TVEFUVVMuVU5BVVRIT1JJWkVEKS5qc29uKHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgbWVzc2FnZTogJ0F1dGhlbnRpY2F0aW9uIHJlcXVpcmVkJyxcbiAgICAgICAgICAgIGVycm9yOiAnVU5BVVRIT1JJWkVEJ1xuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgdXNlciA9IHNlc3Npb24udXNlciBhcyBhbnlcbiAgICAgIH1cblxuICAgICAgLy8gQ3JlYXRlIEFQSSBjb250ZXh0XG4gICAgICBjb25zdCBjdHg6IEFwaUNvbnRleHQgPSB7IHJlcSwgcmVzLCB1c2VyIH1cblxuICAgICAgLy8gR2V0IGhhbmRsZXIgZm9yIG1ldGhvZFxuICAgICAgY29uc3QgaGFuZGxlciA9IGhhbmRsZXJzW21ldGhvZF1cbiAgICAgIGlmICghaGFuZGxlcikge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyhIVFRQX1NUQVRVUy5NRVRIT0RfTk9UX0FMTE9XRUQpLmpzb24oe1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIG1lc3NhZ2U6IGBIYW5kbGVyIGZvciAke21ldGhvZH0gbm90IGZvdW5kYCxcbiAgICAgICAgICBlcnJvcjogJ01FVEhPRF9OT1RfQUxMT1dFRCdcbiAgICAgICAgfSlcbiAgICAgIH1cblxuICAgICAgLy8gRXhlY3V0ZSBoYW5kbGVyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBoYW5kbGVyKGN0eClcbiAgICAgIFxuICAgICAgLy8gTG9nIHN1Y2Nlc3NmdWwgcmVxdWVzdFxuICAgICAgY29uc3QgZHVyYXRpb24gPSBEYXRlLm5vdygpIC0gc3RhcnRUaW1lXG4gICAgICBsb2dBcGlSZXF1ZXN0KG1ldGhvZCwgcmVxLnVybCB8fCAnJywgdXNlcj8uaWQsIGR1cmF0aW9uKVxuXG4gICAgICAvLyBTZW5kIHJlc3BvbnNlIGlmIG5vdCBhbHJlYWR5IHNlbnRcbiAgICAgIGlmICghcmVzLmhlYWRlcnNTZW50KSB7XG4gICAgICAgIHJlcy5zdGF0dXMoSFRUUF9TVEFUVVMuT0spLmpzb24ocmVzdWx0KVxuICAgICAgfVxuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnN0IGR1cmF0aW9uID0gRGF0ZS5ub3coKSAtIHN0YXJ0VGltZVxuICAgICAgbG9nQXBpRXJyb3IobWV0aG9kLCByZXEudXJsIHx8ICcnLCBlcnJvciBhcyBFcnJvciwgdXNlcj8uaWQpXG4gICAgICBcbiAgICAgIC8vIEhhbmRsZSBrbm93biBhcHBsaWNhdGlvbiBlcnJvcnNcbiAgICAgIGlmIChpc0FwcEVycm9yKGVycm9yKSkge1xuICAgICAgICBjb25zdCBzZXJpYWxpemVkRXJyb3IgPSBzZXJpYWxpemVFcnJvcihlcnJvciwgZmFsc2UpXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKGVycm9yLnN0YXR1c0NvZGUpLmpzb24oe1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgICAgZXJyb3I6IGVycm9yLmNvZGUsXG4gICAgICAgICAgLi4uKGVycm9yLmNvbnRleHQgJiYgeyBjb250ZXh0OiBlcnJvci5jb250ZXh0IH0pXG4gICAgICAgIH0pXG4gICAgICB9XG5cbiAgICAgIC8vIEhhbmRsZSB1bmtub3duIGVycm9yc1xuICAgICAgbG9nZ2VyLmVycm9yKCdVbmhhbmRsZWQgQVBJIGVycm9yJywgeyBcbiAgICAgICAgbWV0aG9kLCBcbiAgICAgICAgdXJsOiByZXEudXJsLCBcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogZXJyb3IsXG4gICAgICAgIHN0YWNrOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWQsXG4gICAgICAgIHVzZXJJZDogdXNlcj8uaWQgXG4gICAgICB9KVxuXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyhIVFRQX1NUQVRVUy5JTlRFUk5BTF9TRVJWRVJfRVJST1IpLmpzb24oe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgbWVzc2FnZTogJ0ludGVybmFsIHNlcnZlciBlcnJvcicsXG4gICAgICAgIGVycm9yOiAnSU5URVJOQUxfU0VSVkVSX0VSUk9SJ1xuICAgICAgfSlcbiAgICB9XG4gIH1cbn1cblxuLy8gVXRpbGl0eSB0byByZXF1aXJlIGF1dGhlbnRpY2F0aW9uXG5leHBvcnQgZnVuY3Rpb24gcmVxdWlyZUF1dGgoaGFuZGxlcjogQXBpSGFuZGxlcik6IEFwaUhhbmRsZXIge1xuICByZXR1cm4gYXN5bmMgKGN0eDogQXBpQ29udGV4dCkgPT4ge1xuICAgIGlmICghY3R4LnVzZXIpIHtcbiAgICAgIHRocm93IG5ldyBBdXRoZW50aWNhdGlvbkVycm9yKCdBdXRoZW50aWNhdGlvbiByZXF1aXJlZCcpXG4gICAgfVxuICAgIHJldHVybiBoYW5kbGVyKGN0eClcbiAgfVxufVxuXG4vLyBVdGlsaXR5IHRvIHZhbGlkYXRlIHJlcXVlc3QgYm9keVxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlQm9keTxUPihcbiAgc2NoZW1hOiBhbnksXG4gIGhhbmRsZXI6IChjdHg6IEFwaUNvbnRleHQsIGJvZHk6IFQpID0+IFByb21pc2U8YW55PlxuKTogQXBpSGFuZGxlciB7XG4gIHJldHVybiBhc3luYyAoY3R4OiBBcGlDb250ZXh0KSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHZhbGlkYXRlZEJvZHkgPSBzY2hlbWEucGFyc2UoY3R4LnJlcS5ib2R5KVxuICAgICAgcmV0dXJuIGhhbmRsZXIoY3R4LCB2YWxpZGF0ZWRCb2R5KVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvciAmJiAnZXJyb3JzJyBpbiBlcnJvcikge1xuICAgICAgICBjb25zdCB6b2RFcnJvciA9IGVycm9yIGFzIGFueVxuICAgICAgICBjb25zdCBmaXJzdEVycm9yID0gem9kRXJyb3IuZXJyb3JzWzBdXG4gICAgICAgIHRocm93IG5ldyBBcHBFcnJvcihcbiAgICAgICAgICBmaXJzdEVycm9yLm1lc3NhZ2UsXG4gICAgICAgICAgJ1ZBTElEQVRJT05fRVJST1InLFxuICAgICAgICAgIEhUVFBfU1RBVFVTLkJBRF9SRVFVRVNULFxuICAgICAgICAgIHRydWUsXG4gICAgICAgICAgeyBmaWVsZDogZmlyc3RFcnJvci5wYXRoLmpvaW4oJy4nKSwgZXJyb3JzOiB6b2RFcnJvci5lcnJvcnMgfVxuICAgICAgICApXG4gICAgICB9XG4gICAgICB0aHJvdyBlcnJvclxuICAgIH1cbiAgfVxufVxuXG4vLyBVdGlsaXR5IHRvIHZhbGlkYXRlIHF1ZXJ5IHBhcmFtZXRlcnNcbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZVF1ZXJ5PFQ+KFxuICBzY2hlbWE6IGFueSxcbiAgaGFuZGxlcjogKGN0eDogQXBpQ29udGV4dCwgcXVlcnk6IFQpID0+IFByb21pc2U8YW55PlxuKTogQXBpSGFuZGxlciB7XG4gIHJldHVybiBhc3luYyAoY3R4OiBBcGlDb250ZXh0KSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHZhbGlkYXRlZFF1ZXJ5ID0gc2NoZW1hLnBhcnNlKGN0eC5yZXEucXVlcnkpXG4gICAgICByZXR1cm4gaGFuZGxlcihjdHgsIHZhbGlkYXRlZFF1ZXJ5KVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvciAmJiAnZXJyb3JzJyBpbiBlcnJvcikge1xuICAgICAgICBjb25zdCB6b2RFcnJvciA9IGVycm9yIGFzIGFueVxuICAgICAgICBjb25zdCBmaXJzdEVycm9yID0gem9kRXJyb3IuZXJyb3JzWzBdXG4gICAgICAgIHRocm93IG5ldyBBcHBFcnJvcihcbiAgICAgICAgICBmaXJzdEVycm9yLm1lc3NhZ2UsXG4gICAgICAgICAgJ1ZBTElEQVRJT05fRVJST1InLFxuICAgICAgICAgIEhUVFBfU1RBVFVTLkJBRF9SRVFVRVNULFxuICAgICAgICAgIHRydWUsXG4gICAgICAgICAgeyBmaWVsZDogZmlyc3RFcnJvci5wYXRoLmpvaW4oJy4nKSwgZXJyb3JzOiB6b2RFcnJvci5lcnJvcnMgfVxuICAgICAgICApXG4gICAgICB9XG4gICAgICB0aHJvdyBlcnJvclxuICAgIH1cbiAgfVxufVxuXG4vLyBVdGlsaXR5IGZvciBwYWdpbmF0aW9uXG5leHBvcnQgZnVuY3Rpb24gd2l0aFBhZ2luYXRpb24oXG4gIGhhbmRsZXI6IChjdHg6IEFwaUNvbnRleHQsIHBhZ2luYXRpb246IHsgcGFnZTogbnVtYmVyOyBsaW1pdDogbnVtYmVyIH0pID0+IFByb21pc2U8YW55PlxuKTogQXBpSGFuZGxlciB7XG4gIHJldHVybiBhc3luYyAoY3R4OiBBcGlDb250ZXh0KSA9PiB7XG4gICAgY29uc3QgcGFnZSA9IHBhcnNlSW50KGN0eC5yZXEucXVlcnkucGFnZSBhcyBzdHJpbmcpIHx8IDFcbiAgICBjb25zdCBsaW1pdCA9IE1hdGgubWluKHBhcnNlSW50KGN0eC5yZXEucXVlcnkubGltaXQgYXMgc3RyaW5nKSB8fCAxMiwgNTApIC8vIE1heCA1MCBpdGVtcyBwZXIgcGFnZVxuICAgIFxuICAgIHJldHVybiBoYW5kbGVyKGN0eCwgeyBwYWdlLCBsaW1pdCB9KVxuICB9XG59XG5cbi8vIFJlc3BvbnNlIGhlbHBlcnNcbmV4cG9ydCBmdW5jdGlvbiBzdWNjZXNzUmVzcG9uc2U8VD4oZGF0YTogVCwgbWVzc2FnZT86IHN0cmluZyk6IEFwaVJlc3BvbnNlPFQ+IHtcbiAgcmV0dXJuIHtcbiAgICBzdWNjZXNzOiB0cnVlLFxuICAgIGRhdGEsXG4gICAgLi4uKG1lc3NhZ2UgJiYgeyBtZXNzYWdlIH0pXG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGVycm9yUmVzcG9uc2UobWVzc2FnZTogc3RyaW5nLCBjb2RlPzogc3RyaW5nKTogQXBpUmVzcG9uc2Uge1xuICByZXR1cm4ge1xuICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgIG1lc3NhZ2UsXG4gICAgLi4uKGNvZGUgJiYgeyBlcnJvcjogY29kZSB9KVxuICB9XG59XG5cbi8vIE1ldGhvZC1zcGVjaWZpYyBoYW5kbGVyc1xuZXhwb3J0IGNvbnN0IEdFVCA9IChoYW5kbGVyOiBBcGlIYW5kbGVyKSA9PiAoeyBHRVQ6IGhhbmRsZXIgfSlcbmV4cG9ydCBjb25zdCBQT1NUID0gKGhhbmRsZXI6IEFwaUhhbmRsZXIpID0+ICh7IFBPU1Q6IGhhbmRsZXIgfSlcbmV4cG9ydCBjb25zdCBQVVQgPSAoaGFuZGxlcjogQXBpSGFuZGxlcikgPT4gKHsgUFVUOiBoYW5kbGVyIH0pXG5leHBvcnQgY29uc3QgREVMRVRFID0gKGhhbmRsZXI6IEFwaUhhbmRsZXIpID0+ICh7IERFTEVURTogaGFuZGxlciB9KVxuZXhwb3J0IGNvbnN0IFBBVENIID0gKGhhbmRsZXI6IEFwaUhhbmRsZXIpID0+ICh7IFBBVENIOiBoYW5kbGVyIH0pXG5cbi8vIENvbWJpbmVkIG1ldGhvZCBoYW5kbGVyc1xuZXhwb3J0IGNvbnN0IENSVUQgPSB7XG4gIEdFVDogKGhhbmRsZXI6IEFwaUhhbmRsZXIpID0+IGhhbmRsZXIsXG4gIFBPU1Q6IChoYW5kbGVyOiBBcGlIYW5kbGVyKSA9PiBoYW5kbGVyLFxuICBQVVQ6IChoYW5kbGVyOiBBcGlIYW5kbGVyKSA9PiBoYW5kbGVyLFxuICBERUxFVEU6IChoYW5kbGVyOiBBcGlIYW5kbGVyKSA9PiBoYW5kbGVyLFxufVxuXG4vLyBSYXRlIGxpbWl0aW5nIChzaW1wbGUgaW4tbWVtb3J5IGltcGxlbWVudGF0aW9uIGZvciBkZXZlbG9wbWVudClcbmNvbnN0IHJlcXVlc3RDb3VudHMgPSBuZXcgTWFwPHN0cmluZywgeyBjb3VudDogbnVtYmVyOyByZXNldFRpbWU6IG51bWJlciB9PigpXG5cbmV4cG9ydCBmdW5jdGlvbiByYXRlTGltaXQoXG4gIHdpbmRvd01zOiBudW1iZXIgPSAxNSAqIDYwICogMTAwMCwgLy8gMTUgbWludXRlc1xuICBtYXhSZXF1ZXN0czogbnVtYmVyID0gMTAwXG4pIHtcbiAgcmV0dXJuIChoYW5kbGVyOiBBcGlIYW5kbGVyKTogQXBpSGFuZGxlciA9PiB7XG4gICAgcmV0dXJuIGFzeW5jIChjdHg6IEFwaUNvbnRleHQpID0+IHtcbiAgICAgIGNvbnN0IGtleSA9IGN0eC5yZXEuaGVhZGVyc1sneC1mb3J3YXJkZWQtZm9yJ10gYXMgc3RyaW5nIHx8IFxuICAgICAgICAgICAgICAgICAgIGN0eC5yZXEuY29ubmVjdGlvbi5yZW1vdGVBZGRyZXNzIHx8IFxuICAgICAgICAgICAgICAgICAgICd1bmtub3duJ1xuICAgICAgXG4gICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpXG4gICAgICBjb25zdCB3aW5kb3dTdGFydCA9IG5vdyAtIHdpbmRvd01zXG4gICAgICBcbiAgICAgIGNvbnN0IHJlcXVlc3REYXRhID0gcmVxdWVzdENvdW50cy5nZXQoa2V5KVxuICAgICAgXG4gICAgICBpZiAoIXJlcXVlc3REYXRhIHx8IHJlcXVlc3REYXRhLnJlc2V0VGltZSA8IHdpbmRvd1N0YXJ0KSB7XG4gICAgICAgIHJlcXVlc3RDb3VudHMuc2V0KGtleSwgeyBjb3VudDogMSwgcmVzZXRUaW1lOiBub3cgfSlcbiAgICAgICAgcmV0dXJuIGhhbmRsZXIoY3R4KVxuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAocmVxdWVzdERhdGEuY291bnQgPj0gbWF4UmVxdWVzdHMpIHtcbiAgICAgICAgdGhyb3cgbmV3IEFwcEVycm9yKFxuICAgICAgICAgICdUb28gbWFueSByZXF1ZXN0cycsXG4gICAgICAgICAgJ1JBVEVfTElNSVRfRVhDRUVERUQnLFxuICAgICAgICAgIEhUVFBfU1RBVFVTLlRPT19NQU5ZX1JFUVVFU1RTXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmVxdWVzdERhdGEuY291bnQrK1xuICAgICAgcmV0dXJuIGhhbmRsZXIoY3R4KVxuICAgIH1cbiAgfVxufSJdLCJuYW1lcyI6WyJnZXRTZXJ2ZXJTZXNzaW9uIiwiYXV0aE9wdGlvbnMiLCJBcHBFcnJvciIsImlzQXBwRXJyb3IiLCJzZXJpYWxpemVFcnJvciIsIkF1dGhlbnRpY2F0aW9uRXJyb3IiLCJsb2dnZXIiLCJsb2dBcGlSZXF1ZXN0IiwibG9nQXBpRXJyb3IiLCJIVFRQX1NUQVRVUyIsImNyZWF0ZUFwaVJvdXRlIiwiaGFuZGxlcnMiLCJjb25maWciLCJtZXRob2RzIiwiT2JqZWN0Iiwia2V5cyIsInJlcXVpcmVBdXRoIiwicmVxIiwicmVzIiwic3RhcnRUaW1lIiwiRGF0ZSIsIm5vdyIsIm1ldGhvZCIsInVzZXIiLCJkZWJ1ZyIsInVybCIsInVzZXJBZ2VudCIsImhlYWRlcnMiLCJpcCIsImNvbm5lY3Rpb24iLCJyZW1vdGVBZGRyZXNzIiwiY29udGVudFR5cGUiLCJvcmlnaW4iLCJpbmNsdWRlcyIsInN0YXR1cyIsIk1FVEhPRF9OT1RfQUxMT1dFRCIsImpzb24iLCJzdWNjZXNzIiwibWVzc2FnZSIsImVycm9yIiwic2Vzc2lvbiIsIlVOQVVUSE9SSVpFRCIsImN0eCIsImhhbmRsZXIiLCJyZXN1bHQiLCJkdXJhdGlvbiIsImlkIiwiaGVhZGVyc1NlbnQiLCJPSyIsInNlcmlhbGl6ZWRFcnJvciIsInN0YXR1c0NvZGUiLCJjb2RlIiwiY29udGV4dCIsIkVycm9yIiwic3RhY2siLCJ1bmRlZmluZWQiLCJ1c2VySWQiLCJJTlRFUk5BTF9TRVJWRVJfRVJST1IiLCJ2YWxpZGF0ZUJvZHkiLCJzY2hlbWEiLCJ2YWxpZGF0ZWRCb2R5IiwicGFyc2UiLCJib2R5Iiwiem9kRXJyb3IiLCJmaXJzdEVycm9yIiwiZXJyb3JzIiwiQkFEX1JFUVVFU1QiLCJmaWVsZCIsInBhdGgiLCJqb2luIiwidmFsaWRhdGVRdWVyeSIsInZhbGlkYXRlZFF1ZXJ5IiwicXVlcnkiLCJ3aXRoUGFnaW5hdGlvbiIsInBhZ2UiLCJwYXJzZUludCIsImxpbWl0IiwiTWF0aCIsIm1pbiIsInN1Y2Nlc3NSZXNwb25zZSIsImRhdGEiLCJlcnJvclJlc3BvbnNlIiwiR0VUIiwiUE9TVCIsIlBVVCIsIkRFTEVURSIsIlBBVENIIiwiQ1JVRCIsInJlcXVlc3RDb3VudHMiLCJNYXAiLCJyYXRlTGltaXQiLCJ3aW5kb3dNcyIsIm1heFJlcXVlc3RzIiwia2V5Iiwid2luZG93U3RhcnQiLCJyZXF1ZXN0RGF0YSIsImdldCIsInJlc2V0VGltZSIsInNldCIsImNvdW50IiwiVE9PX01BTllfUkVRVUVTVFMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/lib/api-handler.ts\n");

/***/ }),

/***/ "(api)/./src/lib/auth.ts":
/*!*************************!*\
  !*** ./src/lib/auth.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authOptions: () => (/* binding */ authOptions)\n/* harmony export */ });\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth/providers/credentials */ \"next-auth/providers/credentials\");\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_auth_providers_google__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth/providers/google */ \"next-auth/providers/google\");\n/* harmony import */ var next_auth_providers_google__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_auth_providers_google__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_auth_providers_facebook__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next-auth/providers/facebook */ \"next-auth/providers/facebook\");\n/* harmony import */ var next_auth_providers_facebook__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_auth_providers_facebook__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_auth_providers_apple__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next-auth/providers/apple */ \"next-auth/providers/apple\");\n/* harmony import */ var next_auth_providers_apple__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_auth_providers_apple__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _db__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./db */ \"(api)/./src/lib/db.ts\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! bcryptjs */ \"bcryptjs\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(bcryptjs__WEBPACK_IMPORTED_MODULE_5__);\n\n\n\n\n\n\nconst authOptions = {\n    providers: [\n        next_auth_providers_google__WEBPACK_IMPORTED_MODULE_1___default()({\n            clientId: process.env.GOOGLE_CLIENT_ID || \"dummy\",\n            clientSecret: process.env.GOOGLE_CLIENT_SECRET || \"dummy\"\n        }),\n        next_auth_providers_facebook__WEBPACK_IMPORTED_MODULE_2___default()({\n            clientId: process.env.FACEBOOK_CLIENT_ID || \"dummy\",\n            clientSecret: process.env.FACEBOOK_CLIENT_SECRET || \"dummy\"\n        }),\n        next_auth_providers_apple__WEBPACK_IMPORTED_MODULE_3___default()({\n            clientId: process.env.APPLE_ID || \"dummy\",\n            clientSecret: process.env.APPLE_SECRET || \"dummy\"\n        }),\n        next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_0___default()({\n            name: \"credentials\",\n            credentials: {\n                email: {\n                    label: \"Email\",\n                    type: \"email\"\n                },\n                password: {\n                    label: \"Password\",\n                    type: \"password\"\n                }\n            },\n            async authorize (credentials) {\n                try {\n                    if (!credentials?.email || !credentials?.password) {\n                        return null;\n                    }\n                    const user = await _db__WEBPACK_IMPORTED_MODULE_4__.db.user.findUnique({\n                        where: {\n                            email: credentials.email\n                        }\n                    });\n                    if (!user || !user.password) {\n                        return null;\n                    }\n                    const isPasswordValid = await bcryptjs__WEBPACK_IMPORTED_MODULE_5___default().compare(credentials.password, user.password);\n                    if (!isPasswordValid) {\n                        return null;\n                    }\n                    return {\n                        id: user.id,\n                        email: user.email,\n                        name: user.firstName ? `${user.firstName} ${user.lastName || \"\"}`.trim() : user.username,\n                        username: user.username,\n                        firstName: user.firstName,\n                        lastName: user.lastName\n                    };\n                } catch (error) {\n                    console.error(\"Auth error:\", error);\n                    return null;\n                }\n            }\n        })\n    ],\n    session: {\n        strategy: \"jwt\",\n        maxAge: 30 * 24 * 60 * 60\n    },\n    pages: {\n        signIn: \"/auth/signin\"\n    },\n    callbacks: {\n        async jwt ({ token, user }) {\n            if (user) {\n                token.username = user.username;\n                token.firstName = user.firstName;\n                token.lastName = user.lastName;\n            }\n            return token;\n        },\n        async session ({ session, token }) {\n            if (token && session.user) {\n                session.user.id = token.sub;\n                session.user.username = token.username;\n                session.user.firstName = token.firstName;\n                session.user.lastName = token.lastName;\n            }\n            return session;\n        }\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFNYixTQUFTO2dCQUNoRE0sUUFBUVosSUFBSSxDQUFTTyxRQUFRLEdBQUdZLE1BQU1aLFFBQVE7WUFDbEQ7WUFDQSxPQUFPSztRQUNUO0lBQ0Y7QUFDRixFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcmF0ZW15LW5leHRqcy8uL3NyYy9saWIvYXV0aC50cz82NjkyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRBdXRoT3B0aW9ucyB9IGZyb20gJ25leHQtYXV0aCdcbmltcG9ydCBDcmVkZW50aWFsc1Byb3ZpZGVyIGZyb20gJ25leHQtYXV0aC9wcm92aWRlcnMvY3JlZGVudGlhbHMnXG5pbXBvcnQgR29vZ2xlUHJvdmlkZXIgZnJvbSAnbmV4dC1hdXRoL3Byb3ZpZGVycy9nb29nbGUnXG5pbXBvcnQgRmFjZWJvb2tQcm92aWRlciBmcm9tICduZXh0LWF1dGgvcHJvdmlkZXJzL2ZhY2Vib29rJ1xuaW1wb3J0IEFwcGxlUHJvdmlkZXIgZnJvbSAnbmV4dC1hdXRoL3Byb3ZpZGVycy9hcHBsZSdcbmltcG9ydCB7IGRiIH0gZnJvbSAnLi9kYidcbmltcG9ydCBiY3J5cHQgZnJvbSAnYmNyeXB0anMnXG5cbmV4cG9ydCBjb25zdCBhdXRoT3B0aW9uczogTmV4dEF1dGhPcHRpb25zID0ge1xuICBwcm92aWRlcnM6IFtcbiAgICBHb29nbGVQcm92aWRlcih7XG4gICAgICBjbGllbnRJZDogcHJvY2Vzcy5lbnYuR09PR0xFX0NMSUVOVF9JRCB8fCAnZHVtbXknLFxuICAgICAgY2xpZW50U2VjcmV0OiBwcm9jZXNzLmVudi5HT09HTEVfQ0xJRU5UX1NFQ1JFVCB8fCAnZHVtbXknLFxuICAgIH0pLFxuICAgIEZhY2Vib29rUHJvdmlkZXIoe1xuICAgICAgY2xpZW50SWQ6IHByb2Nlc3MuZW52LkZBQ0VCT09LX0NMSUVOVF9JRCB8fCAnZHVtbXknLFxuICAgICAgY2xpZW50U2VjcmV0OiBwcm9jZXNzLmVudi5GQUNFQk9PS19DTElFTlRfU0VDUkVUIHx8ICdkdW1teScsXG4gICAgfSksXG4gICAgQXBwbGVQcm92aWRlcih7XG4gICAgICBjbGllbnRJZDogcHJvY2Vzcy5lbnYuQVBQTEVfSUQgfHwgJ2R1bW15JyxcbiAgICAgIGNsaWVudFNlY3JldDogcHJvY2Vzcy5lbnYuQVBQTEVfU0VDUkVUIHx8ICdkdW1teScsXG4gICAgfSksXG4gICAgQ3JlZGVudGlhbHNQcm92aWRlcih7XG4gICAgICBuYW1lOiAnY3JlZGVudGlhbHMnLFxuICAgICAgY3JlZGVudGlhbHM6IHtcbiAgICAgICAgZW1haWw6IHsgbGFiZWw6ICdFbWFpbCcsIHR5cGU6ICdlbWFpbCcgfSxcbiAgICAgICAgcGFzc3dvcmQ6IHsgbGFiZWw6ICdQYXNzd29yZCcsIHR5cGU6ICdwYXNzd29yZCcgfVxuICAgICAgfSxcbiAgICAgIGFzeW5jIGF1dGhvcml6ZShjcmVkZW50aWFscykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGlmICghY3JlZGVudGlhbHM/LmVtYWlsIHx8ICFjcmVkZW50aWFscz8ucGFzc3dvcmQpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IGRiLnVzZXIuZmluZFVuaXF1ZSh7XG4gICAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgICBlbWFpbDogY3JlZGVudGlhbHMuZW1haWxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuXG4gICAgICAgICAgaWYgKCF1c2VyIHx8ICF1c2VyLnBhc3N3b3JkKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IGlzUGFzc3dvcmRWYWxpZCA9IGF3YWl0IGJjcnlwdC5jb21wYXJlKGNyZWRlbnRpYWxzLnBhc3N3b3JkLCB1c2VyLnBhc3N3b3JkKVxuICAgICAgICAgIGlmICghaXNQYXNzd29yZFZhbGlkKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpZDogdXNlci5pZCxcbiAgICAgICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxuICAgICAgICAgICAgbmFtZTogdXNlci5maXJzdE5hbWUgPyBgJHt1c2VyLmZpcnN0TmFtZX0gJHt1c2VyLmxhc3ROYW1lIHx8ICcnfWAudHJpbSgpIDogdXNlci51c2VybmFtZSxcbiAgICAgICAgICAgIHVzZXJuYW1lOiB1c2VyLnVzZXJuYW1lLFxuICAgICAgICAgICAgZmlyc3ROYW1lOiB1c2VyLmZpcnN0TmFtZSxcbiAgICAgICAgICAgIGxhc3ROYW1lOiB1c2VyLmxhc3ROYW1lLFxuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdBdXRoIGVycm9yOicsIGVycm9yKVxuICAgICAgICAgIHJldHVybiBudWxsXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICBdLFxuICBzZXNzaW9uOiB7XG4gICAgc3RyYXRlZ3k6ICdqd3QnLFxuICAgIG1heEFnZTogMzAgKiAyNCAqIDYwICogNjAsIC8vIDMwIGRheXNcbiAgfSxcbiAgcGFnZXM6IHtcbiAgICBzaWduSW46ICcvYXV0aC9zaWduaW4nXG4gIH0sXG4gIGNhbGxiYWNrczoge1xuICAgIGFzeW5jIGp3dCh7IHRva2VuLCB1c2VyIH0pIHtcbiAgICAgIGlmICh1c2VyKSB7XG4gICAgICAgIHRva2VuLnVzZXJuYW1lID0gKHVzZXIgYXMgYW55KS51c2VybmFtZVxuICAgICAgICB0b2tlbi5maXJzdE5hbWUgPSAodXNlciBhcyBhbnkpLmZpcnN0TmFtZVxuICAgICAgICB0b2tlbi5sYXN0TmFtZSA9ICh1c2VyIGFzIGFueSkubGFzdE5hbWVcbiAgICAgIH1cbiAgICAgIHJldHVybiB0b2tlblxuICAgIH0sXG4gICAgYXN5bmMgc2Vzc2lvbih7IHNlc3Npb24sIHRva2VuIH0pIHtcbiAgICAgIGlmICh0b2tlbiAmJiBzZXNzaW9uLnVzZXIpIHtcbiAgICAgICAgKHNlc3Npb24udXNlciBhcyBhbnkpLmlkID0gdG9rZW4uc3ViIVxuICAgICAgICA7KHNlc3Npb24udXNlciBhcyBhbnkpLnVzZXJuYW1lID0gdG9rZW4udXNlcm5hbWUgYXMgc3RyaW5nXG4gICAgICAgIDsoc2Vzc2lvbi51c2VyIGFzIGFueSkuZmlyc3ROYW1lID0gdG9rZW4uZmlyc3ROYW1lIGFzIHN0cmluZ1xuICAgICAgICA7KHNlc3Npb24udXNlciBhcyBhbnkpLmxhc3ROYW1lID0gdG9rZW4ubGFzdE5hbWUgYXMgc3RyaW5nXG4gICAgICB9XG4gICAgICByZXR1cm4gc2Vzc2lvblxuICAgIH1cbiAgfVxufSJdLCJuYW1lcyI6WyJDcmVkZW50aWFsc1Byb3ZpZGVyIiwiR29vZ2xlUHJvdmlkZXIiLCJGYWNlYm9va1Byb3ZpZGVyIiwiQXBwbGVQcm92aWRlciIsImRiIiwiYmNyeXB0IiwiYXV0aE9wdGlvbnMiLCJwcm92aWRlcnMiLCJjbGllbnRJZCIsInByb2Nlc3MiLCJlbnYiLCJHT09HTEVfQ0xJRU5UX0lEIiwiY2xpZW50U2VjcmV0IiwiR09PR0xFX0NMSUVOVF9TRUNSRVQiLCJGQUNFQk9PS19DTElFTlRfSUQiLCJGQUNFQk9PS19DTElFTlRfU0VDUkVUIiwiQVBQTEVfSUQiLCJBUFBMRV9TRUNSRVQiLCJuYW1lIiwiY3JlZGVudGlhbHMiLCJlbWFpbCIsImxhYmVsIiwidHlwZSIsInBhc3N3b3JkIiwiYXV0aG9yaXplIiwidXNlciIsImZpbmRVbmlxdWUiLCJ3aGVyZSIsImlzUGFzc3dvcmRWYWxpZCIsImNvbXBhcmUiLCJpZCIsImZpcnN0TmFtZSIsImxhc3ROYW1lIiwidHJpbSIsInVzZXJuYW1lIiwiZXJyb3IiLCJjb25zb2xlIiwic2Vzc2lvbiIsInN0cmF0ZWd5IiwibWF4QWdlIiwicGFnZXMiLCJzaWduSW4iLCJjYWxsYmFja3MiLCJqd3QiLCJ0b2tlbiIsInN1YiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/lib/auth.ts\n");

/***/ }),

/***/ "(api)/./src/lib/config.ts":
/*!***************************!*\
  !*** ./src/lib/config.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   getEnvVar: () => (/* binding */ getEnvVar),\n/* harmony export */   getEnvVarAsBoolean: () => (/* binding */ getEnvVarAsBoolean),\n/* harmony export */   getEnvVarAsNumber: () => (/* binding */ getEnvVarAsNumber),\n/* harmony export */   isDevelopment: () => (/* binding */ isDevelopment),\n/* harmony export */   isProduction: () => (/* binding */ isProduction),\n/* harmony export */   isTest: () => (/* binding */ isTest)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./constants */ \"(api)/./src/lib/constants.ts\");\n\nfunction getConfig() {\n    const env = \"development\" || 0;\n    const isDevelopment = env === _constants__WEBPACK_IMPORTED_MODULE_0__.NODE_ENV.DEVELOPMENT;\n    const isProduction = env === _constants__WEBPACK_IMPORTED_MODULE_0__.NODE_ENV.PRODUCTION;\n    // Validate required environment variables\n    const requiredVars = [\n        \"DATABASE_URL\",\n        \"NEXTAUTH_SECRET\",\n        \"NEXTAUTH_URL\"\n    ];\n    for (const varName of requiredVars){\n        if (!process.env[varName]) {\n            throw new Error(`Missing required environment variable: ${varName}`);\n        }\n    }\n    return {\n        app: {\n            name: process.env.APP_NAME || \"RateMe\",\n            version: process.env.APP_VERSION || \"1.0.0\",\n            env,\n            port: parseInt(process.env.PORT || \"3000\", 10),\n            url: process.env.NEXTAUTH_URL\n        },\n        database: {\n            url: process.env.DATABASE_URL\n        },\n        auth: {\n            secret: process.env.NEXTAUTH_SECRET,\n            url: process.env.NEXTAUTH_URL,\n            sessionMaxAge: parseInt(process.env.SESSION_MAX_AGE || \"2592000\", 10)\n        },\n        logging: {\n            level: process.env.LOG_LEVEL || (isDevelopment ? \"debug\" : \"info\"),\n            pretty: isDevelopment\n        },\n        redis: process.env.REDIS_URL ? {\n            url: process.env.REDIS_URL,\n            password: process.env.REDIS_PASSWORD\n        } : undefined,\n        external: {\n            youtube: process.env.YOUTUBE_API_KEY ? {\n                apiKey: process.env.YOUTUBE_API_KEY\n            } : undefined,\n            vimeo: process.env.VIMEO_CLIENT_ID && process.env.VIMEO_CLIENT_SECRET ? {\n                clientId: process.env.VIMEO_CLIENT_ID,\n                clientSecret: process.env.VIMEO_CLIENT_SECRET\n            } : undefined\n        }\n    };\n}\n// Export singleton config instance\nconst config = getConfig();\n// Type-safe environment variable access\nfunction getEnvVar(name, defaultValue) {\n    const value = process.env[name];\n    if (value === undefined) {\n        if (defaultValue !== undefined) {\n            return defaultValue;\n        }\n        throw new Error(`Environment variable ${name} is not set`);\n    }\n    return value;\n}\nfunction getEnvVarAsNumber(name, defaultValue) {\n    const value = process.env[name];\n    if (value === undefined) {\n        if (defaultValue !== undefined) {\n            return defaultValue;\n        }\n        throw new Error(`Environment variable ${name} is not set`);\n    }\n    const parsed = parseInt(value, 10);\n    if (isNaN(parsed)) {\n        throw new Error(`Environment variable ${name} is not a valid number: ${value}`);\n    }\n    return parsed;\n}\nfunction getEnvVarAsBoolean(name, defaultValue) {\n    const value = process.env[name];\n    if (value === undefined) {\n        if (defaultValue !== undefined) {\n            return defaultValue;\n        }\n        throw new Error(`Environment variable ${name} is not set`);\n    }\n    return value.toLowerCase() === \"true\";\n}\n// Environment checks\nconst isDevelopment = config.app.env === _constants__WEBPACK_IMPORTED_MODULE_0__.NODE_ENV.DEVELOPMENT;\nconst isProduction = config.app.env === _constants__WEBPACK_IMPORTED_MODULE_0__.NODE_ENV.PRODUCTION;\nconst isTest = config.app.env === _constants__WEBPACK_IMPORTED_MODULE_0__.NODE_ENV.TEST;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SUFDL0IsSUFBSUcsTUFBTUQsU0FBUztRQUNqQixNQUFNLElBQUl6QyxNQUFNLENBQUMscUJBQXFCLEVBQUVFLEtBQUssd0JBQXdCLEVBQUVxQyxNQUFNLENBQUM7SUFDaEY7SUFDQSxPQUFPRTtBQUNUO0FBRU8sU0FBU0UsbUJBQW1CekMsSUFBWSxFQUFFb0MsWUFBc0I7SUFDckUsTUFBTUMsUUFBUTlDLFFBQVFELEdBQUcsQ0FBQ1UsS0FBSztJQUMvQixJQUFJcUMsVUFBVWIsV0FBVztRQUN2QixJQUFJWSxpQkFBaUJaLFdBQVc7WUFDOUIsT0FBT1k7UUFDVDtRQUNBLE1BQU0sSUFBSXRDLE1BQU0sQ0FBQyxxQkFBcUIsRUFBRUUsS0FBSyxXQUFXLENBQUM7SUFDM0Q7SUFDQSxPQUFPcUMsTUFBTUssV0FBVyxPQUFPO0FBQ2pDO0FBRUEscUJBQXFCO0FBQ2QsTUFBTWpELGdCQUFnQnlDLE9BQU9uQyxHQUFHLENBQUNULEdBQUcsS0FBS0YsZ0RBQVFBLENBQUNJLFdBQVc7QUFDN0QsTUFBTUUsZUFBZXdDLE9BQU9uQyxHQUFHLENBQUNULEdBQUcsS0FBS0YsZ0RBQVFBLENBQUNPLFVBQVU7QUFDM0QsTUFBTWdELFNBQVNULE9BQU9uQyxHQUFHLENBQUNULEdBQUcsS0FBS0YsZ0RBQVFBLENBQUN3RCxJQUFJIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcmF0ZW15LW5leHRqcy8uL3NyYy9saWIvY29uZmlnLnRzP2EzZWYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTk9ERV9FTlYgfSBmcm9tICcuL2NvbnN0YW50cydcblxuaW50ZXJmYWNlIENvbmZpZyB7XG4gIGFwcDoge1xuICAgIG5hbWU6IHN0cmluZ1xuICAgIHZlcnNpb246IHN0cmluZ1xuICAgIGVudjogc3RyaW5nXG4gICAgcG9ydDogbnVtYmVyXG4gICAgdXJsOiBzdHJpbmdcbiAgfVxuICBkYXRhYmFzZToge1xuICAgIHVybDogc3RyaW5nXG4gIH1cbiAgYXV0aDoge1xuICAgIHNlY3JldDogc3RyaW5nXG4gICAgdXJsOiBzdHJpbmdcbiAgICBzZXNzaW9uTWF4QWdlOiBudW1iZXJcbiAgfVxuICBsb2dnaW5nOiB7XG4gICAgbGV2ZWw6IHN0cmluZ1xuICAgIHByZXR0eTogYm9vbGVhblxuICB9XG4gIHJlZGlzPzoge1xuICAgIHVybDogc3RyaW5nXG4gICAgcGFzc3dvcmQ/OiBzdHJpbmdcbiAgfVxuICBleHRlcm5hbDoge1xuICAgIHlvdXR1YmU/OiB7XG4gICAgICBhcGlLZXk6IHN0cmluZ1xuICAgIH1cbiAgICB2aW1lbz86IHtcbiAgICAgIGNsaWVudElkOiBzdHJpbmdcbiAgICAgIGNsaWVudFNlY3JldDogc3RyaW5nXG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGdldENvbmZpZygpOiBDb25maWcge1xuICBjb25zdCBlbnYgPSBwcm9jZXNzLmVudi5OT0RFX0VOViB8fCBOT0RFX0VOVi5ERVZFTE9QTUVOVFxuICBjb25zdCBpc0RldmVsb3BtZW50ID0gZW52ID09PSBOT0RFX0VOVi5ERVZFTE9QTUVOVFxuICBjb25zdCBpc1Byb2R1Y3Rpb24gPSBlbnYgPT09IE5PREVfRU5WLlBST0RVQ1RJT05cblxuICAvLyBWYWxpZGF0ZSByZXF1aXJlZCBlbnZpcm9ubWVudCB2YXJpYWJsZXNcbiAgY29uc3QgcmVxdWlyZWRWYXJzID0gW1xuICAgICdEQVRBQkFTRV9VUkwnLFxuICAgICdORVhUQVVUSF9TRUNSRVQnLFxuICAgICdORVhUQVVUSF9VUkwnLFxuICBdXG5cbiAgZm9yIChjb25zdCB2YXJOYW1lIG9mIHJlcXVpcmVkVmFycykge1xuICAgIGlmICghcHJvY2Vzcy5lbnZbdmFyTmFtZV0pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgTWlzc2luZyByZXF1aXJlZCBlbnZpcm9ubWVudCB2YXJpYWJsZTogJHt2YXJOYW1lfWApXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBhcHA6IHtcbiAgICAgIG5hbWU6IHByb2Nlc3MuZW52LkFQUF9OQU1FIHx8ICdSYXRlTWUnLFxuICAgICAgdmVyc2lvbjogcHJvY2Vzcy5lbnYuQVBQX1ZFUlNJT04gfHwgJzEuMC4wJyxcbiAgICAgIGVudixcbiAgICAgIHBvcnQ6IHBhcnNlSW50KHByb2Nlc3MuZW52LlBPUlQgfHwgJzMwMDAnLCAxMCksXG4gICAgICB1cmw6IHByb2Nlc3MuZW52Lk5FWFRBVVRIX1VSTCEsXG4gICAgfSxcbiAgICBkYXRhYmFzZToge1xuICAgICAgdXJsOiBwcm9jZXNzLmVudi5EQVRBQkFTRV9VUkwhLFxuICAgIH0sXG4gICAgYXV0aDoge1xuICAgICAgc2VjcmV0OiBwcm9jZXNzLmVudi5ORVhUQVVUSF9TRUNSRVQhLFxuICAgICAgdXJsOiBwcm9jZXNzLmVudi5ORVhUQVVUSF9VUkwhLFxuICAgICAgc2Vzc2lvbk1heEFnZTogcGFyc2VJbnQocHJvY2Vzcy5lbnYuU0VTU0lPTl9NQVhfQUdFIHx8ICcyNTkyMDAwJywgMTApLCAvLyAzMCBkYXlzXG4gICAgfSxcbiAgICBsb2dnaW5nOiB7XG4gICAgICBsZXZlbDogcHJvY2Vzcy5lbnYuTE9HX0xFVkVMIHx8IChpc0RldmVsb3BtZW50ID8gJ2RlYnVnJyA6ICdpbmZvJyksXG4gICAgICBwcmV0dHk6IGlzRGV2ZWxvcG1lbnQsXG4gICAgfSxcbiAgICByZWRpczogcHJvY2Vzcy5lbnYuUkVESVNfVVJMID8ge1xuICAgICAgdXJsOiBwcm9jZXNzLmVudi5SRURJU19VUkwsXG4gICAgICBwYXNzd29yZDogcHJvY2Vzcy5lbnYuUkVESVNfUEFTU1dPUkQsXG4gICAgfSA6IHVuZGVmaW5lZCxcbiAgICBleHRlcm5hbDoge1xuICAgICAgeW91dHViZTogcHJvY2Vzcy5lbnYuWU9VVFVCRV9BUElfS0VZID8ge1xuICAgICAgICBhcGlLZXk6IHByb2Nlc3MuZW52LllPVVRVQkVfQVBJX0tFWSxcbiAgICAgIH0gOiB1bmRlZmluZWQsXG4gICAgICB2aW1lbzogcHJvY2Vzcy5lbnYuVklNRU9fQ0xJRU5UX0lEICYmIHByb2Nlc3MuZW52LlZJTUVPX0NMSUVOVF9TRUNSRVQgPyB7XG4gICAgICAgIGNsaWVudElkOiBwcm9jZXNzLmVudi5WSU1FT19DTElFTlRfSUQsXG4gICAgICAgIGNsaWVudFNlY3JldDogcHJvY2Vzcy5lbnYuVklNRU9fQ0xJRU5UX1NFQ1JFVCxcbiAgICAgIH0gOiB1bmRlZmluZWQsXG4gICAgfSxcbiAgfVxufVxuXG4vLyBFeHBvcnQgc2luZ2xldG9uIGNvbmZpZyBpbnN0YW5jZVxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGdldENvbmZpZygpXG5cbi8vIFR5cGUtc2FmZSBlbnZpcm9ubWVudCB2YXJpYWJsZSBhY2Nlc3NcbmV4cG9ydCBmdW5jdGlvbiBnZXRFbnZWYXIobmFtZTogc3RyaW5nLCBkZWZhdWx0VmFsdWU/OiBzdHJpbmcpOiBzdHJpbmcge1xuICBjb25zdCB2YWx1ZSA9IHByb2Nlc3MuZW52W25hbWVdXG4gIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgaWYgKGRlZmF1bHRWYWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gZGVmYXVsdFZhbHVlXG4gICAgfVxuICAgIHRocm93IG5ldyBFcnJvcihgRW52aXJvbm1lbnQgdmFyaWFibGUgJHtuYW1lfSBpcyBub3Qgc2V0YClcbiAgfVxuICByZXR1cm4gdmFsdWVcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEVudlZhckFzTnVtYmVyKG5hbWU6IHN0cmluZywgZGVmYXVsdFZhbHVlPzogbnVtYmVyKTogbnVtYmVyIHtcbiAgY29uc3QgdmFsdWUgPSBwcm9jZXNzLmVudltuYW1lXVxuICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgIGlmIChkZWZhdWx0VmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGRlZmF1bHRWYWx1ZVxuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoYEVudmlyb25tZW50IHZhcmlhYmxlICR7bmFtZX0gaXMgbm90IHNldGApXG4gIH1cbiAgY29uc3QgcGFyc2VkID0gcGFyc2VJbnQodmFsdWUsIDEwKVxuICBpZiAoaXNOYU4ocGFyc2VkKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgRW52aXJvbm1lbnQgdmFyaWFibGUgJHtuYW1lfSBpcyBub3QgYSB2YWxpZCBudW1iZXI6ICR7dmFsdWV9YClcbiAgfVxuICByZXR1cm4gcGFyc2VkXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRFbnZWYXJBc0Jvb2xlYW4obmFtZTogc3RyaW5nLCBkZWZhdWx0VmFsdWU/OiBib29sZWFuKTogYm9vbGVhbiB7XG4gIGNvbnN0IHZhbHVlID0gcHJvY2Vzcy5lbnZbbmFtZV1cbiAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICBpZiAoZGVmYXVsdFZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBkZWZhdWx0VmFsdWVcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKGBFbnZpcm9ubWVudCB2YXJpYWJsZSAke25hbWV9IGlzIG5vdCBzZXRgKVxuICB9XG4gIHJldHVybiB2YWx1ZS50b0xvd2VyQ2FzZSgpID09PSAndHJ1ZSdcbn1cblxuLy8gRW52aXJvbm1lbnQgY2hlY2tzXG5leHBvcnQgY29uc3QgaXNEZXZlbG9wbWVudCA9IGNvbmZpZy5hcHAuZW52ID09PSBOT0RFX0VOVi5ERVZFTE9QTUVOVFxuZXhwb3J0IGNvbnN0IGlzUHJvZHVjdGlvbiA9IGNvbmZpZy5hcHAuZW52ID09PSBOT0RFX0VOVi5QUk9EVUNUSU9OXG5leHBvcnQgY29uc3QgaXNUZXN0ID0gY29uZmlnLmFwcC5lbnYgPT09IE5PREVfRU5WLlRFU1QiXSwibmFtZXMiOlsiTk9ERV9FTlYiLCJnZXRDb25maWciLCJlbnYiLCJwcm9jZXNzIiwiREVWRUxPUE1FTlQiLCJpc0RldmVsb3BtZW50IiwiaXNQcm9kdWN0aW9uIiwiUFJPRFVDVElPTiIsInJlcXVpcmVkVmFycyIsInZhck5hbWUiLCJFcnJvciIsImFwcCIsIm5hbWUiLCJBUFBfTkFNRSIsInZlcnNpb24iLCJBUFBfVkVSU0lPTiIsInBvcnQiLCJwYXJzZUludCIsIlBPUlQiLCJ1cmwiLCJORVhUQVVUSF9VUkwiLCJkYXRhYmFzZSIsIkRBVEFCQVNFX1VSTCIsImF1dGgiLCJzZWNyZXQiLCJORVhUQVVUSF9TRUNSRVQiLCJzZXNzaW9uTWF4QWdlIiwiU0VTU0lPTl9NQVhfQUdFIiwibG9nZ2luZyIsImxldmVsIiwiTE9HX0xFVkVMIiwicHJldHR5IiwicmVkaXMiLCJSRURJU19VUkwiLCJwYXNzd29yZCIsIlJFRElTX1BBU1NXT1JEIiwidW5kZWZpbmVkIiwiZXh0ZXJuYWwiLCJ5b3V0dWJlIiwiWU9VVFVCRV9BUElfS0VZIiwiYXBpS2V5IiwidmltZW8iLCJWSU1FT19DTElFTlRfSUQiLCJWSU1FT19DTElFTlRfU0VDUkVUIiwiY2xpZW50SWQiLCJjbGllbnRTZWNyZXQiLCJjb25maWciLCJnZXRFbnZWYXIiLCJkZWZhdWx0VmFsdWUiLCJ2YWx1ZSIsImdldEVudlZhckFzTnVtYmVyIiwicGFyc2VkIiwiaXNOYU4iLCJnZXRFbnZWYXJBc0Jvb2xlYW4iLCJ0b0xvd2VyQ2FzZSIsImlzVGVzdCIsIlRFU1QiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/lib/config.ts\n");

/***/ }),

/***/ "(api)/./src/lib/constants.ts":
/*!******************************!*\
  !*** ./src/lib/constants.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   API_ROUTES: () => (/* binding */ API_ROUTES),\n/* harmony export */   APP_DESCRIPTION: () => (/* binding */ APP_DESCRIPTION),\n/* harmony export */   APP_NAME: () => (/* binding */ APP_NAME),\n/* harmony export */   APP_VERSION: () => (/* binding */ APP_VERSION),\n/* harmony export */   CACHE_KEYS: () => (/* binding */ CACHE_KEYS),\n/* harmony export */   CACHE_TTL: () => (/* binding */ CACHE_TTL),\n/* harmony export */   DEFAULTS: () => (/* binding */ DEFAULTS),\n/* harmony export */   ERROR_CODES: () => (/* binding */ ERROR_CODES),\n/* harmony export */   EXTERNAL_SERVICES: () => (/* binding */ EXTERNAL_SERVICES),\n/* harmony export */   FEATURES: () => (/* binding */ FEATURES),\n/* harmony export */   HTTP_STATUS: () => (/* binding */ HTTP_STATUS),\n/* harmony export */   NODE_ENV: () => (/* binding */ NODE_ENV),\n/* harmony export */   PAGINATION: () => (/* binding */ PAGINATION),\n/* harmony export */   RATING_LEVELS: () => (/* binding */ RATING_LEVELS),\n/* harmony export */   SEO: () => (/* binding */ SEO),\n/* harmony export */   SOCIAL_PLATFORMS: () => (/* binding */ SOCIAL_PLATFORMS),\n/* harmony export */   UPLOAD_LIMITS: () => (/* binding */ UPLOAD_LIMITS),\n/* harmony export */   USER_LIMITS: () => (/* binding */ USER_LIMITS),\n/* harmony export */   VALIDATION_PATTERNS: () => (/* binding */ VALIDATION_PATTERNS),\n/* harmony export */   VIDEO_LIMITS: () => (/* binding */ VIDEO_LIMITS),\n/* harmony export */   VIDEO_PLATFORMS: () => (/* binding */ VIDEO_PLATFORMS)\n/* harmony export */ });\n// Application constants\nconst APP_NAME = \"RateMe\";\nconst APP_DESCRIPTION = \"A modern video rating platform\";\nconst APP_VERSION = \"1.0.0\";\n// API constants\nconst API_ROUTES = {\n    AUTH: {\n        SIGNIN: \"/api/auth/signin\",\n        SIGNUP: \"/api/auth/register\",\n        SIGNOUT: \"/api/auth/signout\"\n    },\n    VIDEOS: {\n        BASE: \"/api/videos\",\n        BY_ID: (id)=>`/api/videos/${id}`,\n        RATE: (id)=>`/api/videos/${id}/rate`\n    },\n    USERS: {\n        BASE: \"/api/users\",\n        BY_ID: (id)=>`/api/users/${id}`,\n        FOLLOW: (id)=>`/api/users/${id}/follow`\n    }\n};\n// UI constants\nconst PAGINATION = {\n    DEFAULT_PAGE_SIZE: 12,\n    MAX_PAGE_SIZE: 50\n};\nconst VIDEO_LIMITS = {\n    MAX_TITLE_LENGTH: 200,\n    MAX_DESCRIPTION_LENGTH: 1000\n};\nconst USER_LIMITS = {\n    MIN_USERNAME_LENGTH: 3,\n    MAX_USERNAME_LENGTH: 30,\n    MIN_PASSWORD_LENGTH: 6,\n    MAX_PASSWORD_LENGTH: 128\n};\n// Validation patterns\nconst VALIDATION_PATTERNS = {\n    EMAIL: /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/,\n    USERNAME: /^[a-zA-Z0-9_]{3,30}$/,\n    YOUTUBE_URL: /(?:https?:\\/\\/)?(?:www\\.)?(?:youtube\\.com\\/watch\\?v=|youtu\\.be\\/)([a-zA-Z0-9_-]{11})/,\n    VIMEO_URL: /(?:https?:\\/\\/)?(?:www\\.)?vimeo\\.com\\/(\\d+)/\n};\n// Error codes\nconst ERROR_CODES = {\n    // Authentication errors\n    INVALID_CREDENTIALS: \"INVALID_CREDENTIALS\",\n    USER_NOT_FOUND: \"USER_NOT_FOUND\",\n    USER_ALREADY_EXISTS: \"USER_ALREADY_EXISTS\",\n    UNAUTHORIZED: \"UNAUTHORIZED\",\n    SESSION_EXPIRED: \"SESSION_EXPIRED\",\n    // Validation errors\n    VALIDATION_ERROR: \"VALIDATION_ERROR\",\n    INVALID_INPUT: \"INVALID_INPUT\",\n    MISSING_REQUIRED_FIELD: \"MISSING_REQUIRED_FIELD\",\n    // Resource errors\n    RESOURCE_NOT_FOUND: \"RESOURCE_NOT_FOUND\",\n    RESOURCE_ALREADY_EXISTS: \"RESOURCE_ALREADY_EXISTS\",\n    RESOURCE_FORBIDDEN: \"RESOURCE_FORBIDDEN\",\n    // Server errors\n    INTERNAL_SERVER_ERROR: \"INTERNAL_SERVER_ERROR\",\n    DATABASE_ERROR: \"DATABASE_ERROR\",\n    EXTERNAL_SERVICE_ERROR: \"EXTERNAL_SERVICE_ERROR\",\n    // Rate limiting\n    RATE_LIMIT_EXCEEDED: \"RATE_LIMIT_EXCEEDED\"\n};\n// HTTP status codes\nconst HTTP_STATUS = {\n    OK: 200,\n    CREATED: 201,\n    NO_CONTENT: 204,\n    BAD_REQUEST: 400,\n    UNAUTHORIZED: 401,\n    FORBIDDEN: 403,\n    NOT_FOUND: 404,\n    METHOD_NOT_ALLOWED: 405,\n    CONFLICT: 409,\n    UNPROCESSABLE_ENTITY: 422,\n    TOO_MANY_REQUESTS: 429,\n    INTERNAL_SERVER_ERROR: 500,\n    BAD_GATEWAY: 502,\n    SERVICE_UNAVAILABLE: 503\n};\n// Cache keys\nconst CACHE_KEYS = {\n    VIDEOS: \"videos\",\n    USER: (id)=>`user:${id}`,\n    VIDEO: (id)=>`video:${id}`,\n    TAGS: \"tags\",\n    USER_VIDEOS: (userId)=>`user:${userId}:videos`\n};\n// Cache TTL (in seconds)\nconst CACHE_TTL = {\n    SHORT: 300,\n    MEDIUM: 1800,\n    LONG: 3600,\n    VERY_LONG: 86400\n};\n// Environment types\nconst NODE_ENV = {\n    DEVELOPMENT: \"development\",\n    PRODUCTION: \"production\",\n    TEST: \"test\"\n};\n// Supported video platforms\nconst VIDEO_PLATFORMS = {\n    YOUTUBE: \"youtube\",\n    VIMEO: \"vimeo\"\n};\n// Rating levels\nconst RATING_LEVELS = {\n    MIN: 1,\n    MAX: 5,\n    DEFAULT: 3\n};\n// Default values\nconst DEFAULTS = {\n    AVATAR_URL: \"/images/default-avatar.png\",\n    VIDEO_THUMBNAIL: \"/images/default-video-thumbnail.png\",\n    PAGINATION_LIMIT: PAGINATION.DEFAULT_PAGE_SIZE,\n    RATING_LEVEL: RATING_LEVELS.DEFAULT\n};\n// Feature flags\nconst FEATURES = {\n    VIDEO_UPLOAD: true,\n    USER_REGISTRATION: true,\n    VIDEO_RATING: true,\n    USER_FOLLOWING: true,\n    SEARCH: true,\n    ADMIN_PANEL: false\n};\n// External service URLs\nconst EXTERNAL_SERVICES = {\n    YOUTUBE_API: \"https://www.googleapis.com/youtube/v3\",\n    VIMEO_API: \"https://api.vimeo.com\"\n};\n// File upload limits\nconst UPLOAD_LIMITS = {\n    MAX_FILE_SIZE: 10 * 1024 * 1024,\n    ALLOWED_IMAGE_TYPES: [\n        \"image/jpeg\",\n        \"image/png\",\n        \"image/gif\",\n        \"image/webp\"\n    ],\n    ALLOWED_VIDEO_TYPES: [\n        \"video/mp4\",\n        \"video/webm\",\n        \"video/ogg\"\n    ]\n};\n// SEO constants\nconst SEO = {\n    DEFAULT_TITLE: APP_NAME,\n    TITLE_TEMPLATE: `%s | ${APP_NAME}`,\n    DEFAULT_DESCRIPTION: APP_DESCRIPTION,\n    TWITTER_HANDLE: \"@rateme\",\n    SITE_URL: process.env.NEXTAUTH_URL || \"http://localhost:3000\"\n};\n// Social sharing\nconst SOCIAL_PLATFORMS = {\n    TWITTER: \"twitter\",\n    FACEBOOK: \"facebook\",\n    LINKEDIN: \"linkedin\",\n    REDDIT: \"reddit\"\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SUFDTEMsS0FBSztJQUNMQyxTQUFTO0FBQ1gsRUFBVTtBQUVWLGlCQUFpQjtBQUNWLE1BQU1DLFdBQVc7SUFDdEJDLFlBQVk7SUFDWkMsaUJBQWlCO0lBQ2pCQyxrQkFBa0J0RSxXQUFXQyxpQkFBaUI7SUFDOUNzRSxjQUFjUixjQUFjRyxPQUFPO0FBQ3JDLEVBQVU7QUFFVixnQkFBZ0I7QUFDVCxNQUFNTSxXQUFXO0lBQ3RCQyxjQUFjO0lBQ2RDLG1CQUFtQjtJQUNuQkMsY0FBYztJQUNkQyxnQkFBZ0I7SUFDaEJDLFFBQVE7SUFDUkMsYUFBYTtBQUNmLEVBQVU7QUFFVix3QkFBd0I7QUFDakIsTUFBTUMsb0JBQW9CO0lBQy9CQyxhQUFhO0lBQ2JDLFdBQVc7QUFDYixFQUFVO0FBRVYscUJBQXFCO0FBQ2QsTUFBTUMsZ0JBQWdCO0lBQzNCQyxlQUFlLEtBQUssT0FBTztJQUMzQkMscUJBQXFCO1FBQUM7UUFBYztRQUFhO1FBQWE7S0FBYTtJQUMzRUMscUJBQXFCO1FBQUM7UUFBYTtRQUFjO0tBQVk7QUFDL0QsRUFBVTtBQUVWLGdCQUFnQjtBQUNULE1BQU1DLE1BQU07SUFDakJDLGVBQWV0RztJQUNmdUcsZ0JBQWdCLENBQUMsS0FBSyxFQUFFdkcsU0FBUyxDQUFDO0lBQ2xDd0cscUJBQXFCdkc7SUFDckJ3RyxnQkFBZ0I7SUFDaEJDLFVBQVVDLFFBQVFDLEdBQUcsQ0FBQ0MsWUFBWSxJQUFJO0FBQ3hDLEVBQVU7QUFFVixpQkFBaUI7QUFDVixNQUFNQyxtQkFBbUI7SUFDOUJDLFNBQVM7SUFDVEMsVUFBVTtJQUNWQyxVQUFVO0lBQ1ZDLFFBQVE7QUFDVixFQUFVIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcmF0ZW15LW5leHRqcy8uL3NyYy9saWIvY29uc3RhbnRzLnRzP2ZiZjkiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQXBwbGljYXRpb24gY29uc3RhbnRzXG5leHBvcnQgY29uc3QgQVBQX05BTUUgPSAnUmF0ZU1lJ1xuZXhwb3J0IGNvbnN0IEFQUF9ERVNDUklQVElPTiA9ICdBIG1vZGVybiB2aWRlbyByYXRpbmcgcGxhdGZvcm0nXG5leHBvcnQgY29uc3QgQVBQX1ZFUlNJT04gPSAnMS4wLjAnXG5cbi8vIEFQSSBjb25zdGFudHNcbmV4cG9ydCBjb25zdCBBUElfUk9VVEVTID0ge1xuICBBVVRIOiB7XG4gICAgU0lHTklOOiAnL2FwaS9hdXRoL3NpZ25pbicsXG4gICAgU0lHTlVQOiAnL2FwaS9hdXRoL3JlZ2lzdGVyJyxcbiAgICBTSUdOT1VUOiAnL2FwaS9hdXRoL3NpZ25vdXQnLFxuICB9LFxuICBWSURFT1M6IHtcbiAgICBCQVNFOiAnL2FwaS92aWRlb3MnLFxuICAgIEJZX0lEOiAoaWQ6IHN0cmluZykgPT4gYC9hcGkvdmlkZW9zLyR7aWR9YCxcbiAgICBSQVRFOiAoaWQ6IHN0cmluZykgPT4gYC9hcGkvdmlkZW9zLyR7aWR9L3JhdGVgLFxuICB9LFxuICBVU0VSUzoge1xuICAgIEJBU0U6ICcvYXBpL3VzZXJzJyxcbiAgICBCWV9JRDogKGlkOiBzdHJpbmcpID0+IGAvYXBpL3VzZXJzLyR7aWR9YCxcbiAgICBGT0xMT1c6IChpZDogc3RyaW5nKSA9PiBgL2FwaS91c2Vycy8ke2lkfS9mb2xsb3dgLFxuICB9LFxufSBhcyBjb25zdFxuXG4vLyBVSSBjb25zdGFudHNcbmV4cG9ydCBjb25zdCBQQUdJTkFUSU9OID0ge1xuICBERUZBVUxUX1BBR0VfU0laRTogMTIsXG4gIE1BWF9QQUdFX1NJWkU6IDUwLFxufSBhcyBjb25zdFxuXG5leHBvcnQgY29uc3QgVklERU9fTElNSVRTID0ge1xuICBNQVhfVElUTEVfTEVOR1RIOiAyMDAsXG4gIE1BWF9ERVNDUklQVElPTl9MRU5HVEg6IDEwMDAsXG4gIC8vIFJlbW92ZWQgTUFYX1RBR1MgbGltaXQgdG8gYWxsb3cgdW5saW1pdGVkIHRhZ3Ncbn0gYXMgY29uc3RcblxuZXhwb3J0IGNvbnN0IFVTRVJfTElNSVRTID0ge1xuICBNSU5fVVNFUk5BTUVfTEVOR1RIOiAzLFxuICBNQVhfVVNFUk5BTUVfTEVOR1RIOiAzMCxcbiAgTUlOX1BBU1NXT1JEX0xFTkdUSDogNixcbiAgTUFYX1BBU1NXT1JEX0xFTkdUSDogMTI4LFxufSBhcyBjb25zdFxuXG4vLyBWYWxpZGF0aW9uIHBhdHRlcm5zXG5leHBvcnQgY29uc3QgVkFMSURBVElPTl9QQVRURVJOUyA9IHtcbiAgRU1BSUw6IC9eW15cXHNAXStAW15cXHNAXStcXC5bXlxcc0BdKyQvLFxuICBVU0VSTkFNRTogL15bYS16QS1aMC05X117MywzMH0kLyxcbiAgWU9VVFVCRV9VUkw6IC8oPzpodHRwcz86XFwvXFwvKT8oPzp3d3dcXC4pPyg/OnlvdXR1YmVcXC5jb21cXC93YXRjaFxcP3Y9fHlvdXR1XFwuYmVcXC8pKFthLXpBLVowLTlfLV17MTF9KS8sXG4gIFZJTUVPX1VSTDogLyg/Omh0dHBzPzpcXC9cXC8pPyg/Ond3d1xcLik/dmltZW9cXC5jb21cXC8oXFxkKykvLFxufSBhcyBjb25zdFxuXG4vLyBFcnJvciBjb2Rlc1xuZXhwb3J0IGNvbnN0IEVSUk9SX0NPREVTID0ge1xuICAvLyBBdXRoZW50aWNhdGlvbiBlcnJvcnNcbiAgSU5WQUxJRF9DUkVERU5USUFMUzogJ0lOVkFMSURfQ1JFREVOVElBTFMnLFxuICBVU0VSX05PVF9GT1VORDogJ1VTRVJfTk9UX0ZPVU5EJyxcbiAgVVNFUl9BTFJFQURZX0VYSVNUUzogJ1VTRVJfQUxSRUFEWV9FWElTVFMnLFxuICBVTkFVVEhPUklaRUQ6ICdVTkFVVEhPUklaRUQnLFxuICBTRVNTSU9OX0VYUElSRUQ6ICdTRVNTSU9OX0VYUElSRUQnLFxuXG4gIC8vIFZhbGlkYXRpb24gZXJyb3JzXG4gIFZBTElEQVRJT05fRVJST1I6ICdWQUxJREFUSU9OX0VSUk9SJyxcbiAgSU5WQUxJRF9JTlBVVDogJ0lOVkFMSURfSU5QVVQnLFxuICBNSVNTSU5HX1JFUVVJUkVEX0ZJRUxEOiAnTUlTU0lOR19SRVFVSVJFRF9GSUVMRCcsXG5cbiAgLy8gUmVzb3VyY2UgZXJyb3JzXG4gIFJFU09VUkNFX05PVF9GT1VORDogJ1JFU09VUkNFX05PVF9GT1VORCcsXG4gIFJFU09VUkNFX0FMUkVBRFlfRVhJU1RTOiAnUkVTT1VSQ0VfQUxSRUFEWV9FWElTVFMnLFxuICBSRVNPVVJDRV9GT1JCSURERU46ICdSRVNPVVJDRV9GT1JCSURERU4nLFxuXG4gIC8vIFNlcnZlciBlcnJvcnNcbiAgSU5URVJOQUxfU0VSVkVSX0VSUk9SOiAnSU5URVJOQUxfU0VSVkVSX0VSUk9SJyxcbiAgREFUQUJBU0VfRVJST1I6ICdEQVRBQkFTRV9FUlJPUicsXG4gIEVYVEVSTkFMX1NFUlZJQ0VfRVJST1I6ICdFWFRFUk5BTF9TRVJWSUNFX0VSUk9SJyxcblxuICAvLyBSYXRlIGxpbWl0aW5nXG4gIFJBVEVfTElNSVRfRVhDRUVERUQ6ICdSQVRFX0xJTUlUX0VYQ0VFREVEJyxcbn0gYXMgY29uc3RcblxuLy8gSFRUUCBzdGF0dXMgY29kZXNcbmV4cG9ydCBjb25zdCBIVFRQX1NUQVRVUyA9IHtcbiAgT0s6IDIwMCxcbiAgQ1JFQVRFRDogMjAxLFxuICBOT19DT05URU5UOiAyMDQsXG4gIEJBRF9SRVFVRVNUOiA0MDAsXG4gIFVOQVVUSE9SSVpFRDogNDAxLFxuICBGT1JCSURERU46IDQwMyxcbiAgTk9UX0ZPVU5EOiA0MDQsXG4gIE1FVEhPRF9OT1RfQUxMT1dFRDogNDA1LFxuICBDT05GTElDVDogNDA5LFxuICBVTlBST0NFU1NBQkxFX0VOVElUWTogNDIyLFxuICBUT09fTUFOWV9SRVFVRVNUUzogNDI5LFxuICBJTlRFUk5BTF9TRVJWRVJfRVJST1I6IDUwMCxcbiAgQkFEX0dBVEVXQVk6IDUwMixcbiAgU0VSVklDRV9VTkFWQUlMQUJMRTogNTAzLFxufSBhcyBjb25zdFxuXG4vLyBDYWNoZSBrZXlzXG5leHBvcnQgY29uc3QgQ0FDSEVfS0VZUyA9IHtcbiAgVklERU9TOiAndmlkZW9zJyxcbiAgVVNFUjogKGlkOiBzdHJpbmcpID0+IGB1c2VyOiR7aWR9YCxcbiAgVklERU86IChpZDogc3RyaW5nKSA9PiBgdmlkZW86JHtpZH1gLFxuICBUQUdTOiAndGFncycsXG4gIFVTRVJfVklERU9TOiAodXNlcklkOiBzdHJpbmcpID0+IGB1c2VyOiR7dXNlcklkfTp2aWRlb3NgLFxufSBhcyBjb25zdFxuXG4vLyBDYWNoZSBUVEwgKGluIHNlY29uZHMpXG5leHBvcnQgY29uc3QgQ0FDSEVfVFRMID0ge1xuICBTSE9SVDogMzAwLCAvLyA1IG1pbnV0ZXNcbiAgTUVESVVNOiAxODAwLCAvLyAzMCBtaW51dGVzXG4gIExPTkc6IDM2MDAsIC8vIDEgaG91clxuICBWRVJZX0xPTkc6IDg2NDAwLCAvLyAyNCBob3Vyc1xufSBhcyBjb25zdFxuXG4vLyBFbnZpcm9ubWVudCB0eXBlc1xuZXhwb3J0IGNvbnN0IE5PREVfRU5WID0ge1xuICBERVZFTE9QTUVOVDogJ2RldmVsb3BtZW50JyxcbiAgUFJPRFVDVElPTjogJ3Byb2R1Y3Rpb24nLFxuICBURVNUOiAndGVzdCcsXG59IGFzIGNvbnN0XG5cbi8vIFN1cHBvcnRlZCB2aWRlbyBwbGF0Zm9ybXNcbmV4cG9ydCBjb25zdCBWSURFT19QTEFURk9STVMgPSB7XG4gIFlPVVRVQkU6ICd5b3V0dWJlJyxcbiAgVklNRU86ICd2aW1lbycsXG59IGFzIGNvbnN0XG5cbi8vIFJhdGluZyBsZXZlbHNcbmV4cG9ydCBjb25zdCBSQVRJTkdfTEVWRUxTID0ge1xuICBNSU46IDEsXG4gIE1BWDogNSxcbiAgREVGQVVMVDogMyxcbn0gYXMgY29uc3RcblxuLy8gRGVmYXVsdCB2YWx1ZXNcbmV4cG9ydCBjb25zdCBERUZBVUxUUyA9IHtcbiAgQVZBVEFSX1VSTDogJy9pbWFnZXMvZGVmYXVsdC1hdmF0YXIucG5nJyxcbiAgVklERU9fVEhVTUJOQUlMOiAnL2ltYWdlcy9kZWZhdWx0LXZpZGVvLXRodW1ibmFpbC5wbmcnLFxuICBQQUdJTkFUSU9OX0xJTUlUOiBQQUdJTkFUSU9OLkRFRkFVTFRfUEFHRV9TSVpFLFxuICBSQVRJTkdfTEVWRUw6IFJBVElOR19MRVZFTFMuREVGQVVMVCxcbn0gYXMgY29uc3RcblxuLy8gRmVhdHVyZSBmbGFnc1xuZXhwb3J0IGNvbnN0IEZFQVRVUkVTID0ge1xuICBWSURFT19VUExPQUQ6IHRydWUsXG4gIFVTRVJfUkVHSVNUUkFUSU9OOiB0cnVlLFxuICBWSURFT19SQVRJTkc6IHRydWUsXG4gIFVTRVJfRk9MTE9XSU5HOiB0cnVlLFxuICBTRUFSQ0g6IHRydWUsXG4gIEFETUlOX1BBTkVMOiBmYWxzZSxcbn0gYXMgY29uc3RcblxuLy8gRXh0ZXJuYWwgc2VydmljZSBVUkxzXG5leHBvcnQgY29uc3QgRVhURVJOQUxfU0VSVklDRVMgPSB7XG4gIFlPVVRVQkVfQVBJOiAnaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20veW91dHViZS92MycsXG4gIFZJTUVPX0FQSTogJ2h0dHBzOi8vYXBpLnZpbWVvLmNvbScsXG59IGFzIGNvbnN0XG5cbi8vIEZpbGUgdXBsb2FkIGxpbWl0c1xuZXhwb3J0IGNvbnN0IFVQTE9BRF9MSU1JVFMgPSB7XG4gIE1BWF9GSUxFX1NJWkU6IDEwICogMTAyNCAqIDEwMjQsIC8vIDEwTUJcbiAgQUxMT1dFRF9JTUFHRV9UWVBFUzogWydpbWFnZS9qcGVnJywgJ2ltYWdlL3BuZycsICdpbWFnZS9naWYnLCAnaW1hZ2Uvd2VicCddLFxuICBBTExPV0VEX1ZJREVPX1RZUEVTOiBbJ3ZpZGVvL21wNCcsICd2aWRlby93ZWJtJywgJ3ZpZGVvL29nZyddLFxufSBhcyBjb25zdFxuXG4vLyBTRU8gY29uc3RhbnRzXG5leHBvcnQgY29uc3QgU0VPID0ge1xuICBERUZBVUxUX1RJVExFOiBBUFBfTkFNRSxcbiAgVElUTEVfVEVNUExBVEU6IGAlcyB8ICR7QVBQX05BTUV9YCxcbiAgREVGQVVMVF9ERVNDUklQVElPTjogQVBQX0RFU0NSSVBUSU9OLFxuICBUV0lUVEVSX0hBTkRMRTogJ0ByYXRlbWUnLFxuICBTSVRFX1VSTDogcHJvY2Vzcy5lbnYuTkVYVEFVVEhfVVJMIHx8ICdodHRwOi8vbG9jYWxob3N0OjMwMDAnLFxufSBhcyBjb25zdFxuXG4vLyBTb2NpYWwgc2hhcmluZ1xuZXhwb3J0IGNvbnN0IFNPQ0lBTF9QTEFURk9STVMgPSB7XG4gIFRXSVRURVI6ICd0d2l0dGVyJyxcbiAgRkFDRUJPT0s6ICdmYWNlYm9vaycsXG4gIExJTktFRElOOiAnbGlua2VkaW4nLFxuICBSRURESVQ6ICdyZWRkaXQnLFxufSBhcyBjb25zdCJdLCJuYW1lcyI6WyJBUFBfTkFNRSIsIkFQUF9ERVNDUklQVElPTiIsIkFQUF9WRVJTSU9OIiwiQVBJX1JPVVRFUyIsIkFVVEgiLCJTSUdOSU4iLCJTSUdOVVAiLCJTSUdOT1VUIiwiVklERU9TIiwiQkFTRSIsIkJZX0lEIiwiaWQiLCJSQVRFIiwiVVNFUlMiLCJGT0xMT1ciLCJQQUdJTkFUSU9OIiwiREVGQVVMVF9QQUdFX1NJWkUiLCJNQVhfUEFHRV9TSVpFIiwiVklERU9fTElNSVRTIiwiTUFYX1RJVExFX0xFTkdUSCIsIk1BWF9ERVNDUklQVElPTl9MRU5HVEgiLCJVU0VSX0xJTUlUUyIsIk1JTl9VU0VSTkFNRV9MRU5HVEgiLCJNQVhfVVNFUk5BTUVfTEVOR1RIIiwiTUlOX1BBU1NXT1JEX0xFTkdUSCIsIk1BWF9QQVNTV09SRF9MRU5HVEgiLCJWQUxJREFUSU9OX1BBVFRFUk5TIiwiRU1BSUwiLCJVU0VSTkFNRSIsIllPVVRVQkVfVVJMIiwiVklNRU9fVVJMIiwiRVJST1JfQ09ERVMiLCJJTlZBTElEX0NSRURFTlRJQUxTIiwiVVNFUl9OT1RfRk9VTkQiLCJVU0VSX0FMUkVBRFlfRVhJU1RTIiwiVU5BVVRIT1JJWkVEIiwiU0VTU0lPTl9FWFBJUkVEIiwiVkFMSURBVElPTl9FUlJPUiIsIklOVkFMSURfSU5QVVQiLCJNSVNTSU5HX1JFUVVJUkVEX0ZJRUxEIiwiUkVTT1VSQ0VfTk9UX0ZPVU5EIiwiUkVTT1VSQ0VfQUxSRUFEWV9FWElTVFMiLCJSRVNPVVJDRV9GT1JCSURERU4iLCJJTlRFUk5BTF9TRVJWRVJfRVJST1IiLCJEQVRBQkFTRV9FUlJPUiIsIkVYVEVSTkFMX1NFUlZJQ0VfRVJST1IiLCJSQVRFX0xJTUlUX0VYQ0VFREVEIiwiSFRUUF9TVEFUVVMiLCJPSyIsIkNSRUFURUQiLCJOT19DT05URU5UIiwiQkFEX1JFUVVFU1QiLCJGT1JCSURERU4iLCJOT1RfRk9VTkQiLCJNRVRIT0RfTk9UX0FMTE9XRUQiLCJDT05GTElDVCIsIlVOUFJPQ0VTU0FCTEVfRU5USVRZIiwiVE9PX01BTllfUkVRVUVTVFMiLCJCQURfR0FURVdBWSIsIlNFUlZJQ0VfVU5BVkFJTEFCTEUiLCJDQUNIRV9LRVlTIiwiVVNFUiIsIlZJREVPIiwiVEFHUyIsIlVTRVJfVklERU9TIiwidXNlcklkIiwiQ0FDSEVfVFRMIiwiU0hPUlQiLCJNRURJVU0iLCJMT05HIiwiVkVSWV9MT05HIiwiTk9ERV9FTlYiLCJERVZFTE9QTUVOVCIsIlBST0RVQ1RJT04iLCJURVNUIiwiVklERU9fUExBVEZPUk1TIiwiWU9VVFVCRSIsIlZJTUVPIiwiUkFUSU5HX0xFVkVMUyIsIk1JTiIsIk1BWCIsIkRFRkFVTFQiLCJERUZBVUxUUyIsIkFWQVRBUl9VUkwiLCJWSURFT19USFVNQk5BSUwiLCJQQUdJTkFUSU9OX0xJTUlUIiwiUkFUSU5HX0xFVkVMIiwiRkVBVFVSRVMiLCJWSURFT19VUExPQUQiLCJVU0VSX1JFR0lTVFJBVElPTiIsIlZJREVPX1JBVElORyIsIlVTRVJfRk9MTE9XSU5HIiwiU0VBUkNIIiwiQURNSU5fUEFORUwiLCJFWFRFUk5BTF9TRVJWSUNFUyIsIllPVVRVQkVfQVBJIiwiVklNRU9fQVBJIiwiVVBMT0FEX0xJTUlUUyIsIk1BWF9GSUxFX1NJWkUiLCJBTExPV0VEX0lNQUdFX1RZUEVTIiwiQUxMT1dFRF9WSURFT19UWVBFUyIsIlNFTyIsIkRFRkFVTFRfVElUTEUiLCJUSVRMRV9URU1QTEFURSIsIkRFRkFVTFRfREVTQ1JJUFRJT04iLCJUV0lUVEVSX0hBTkRMRSIsIlNJVEVfVVJMIiwicHJvY2VzcyIsImVudiIsIk5FWFRBVVRIX1VSTCIsIlNPQ0lBTF9QTEFURk9STVMiLCJUV0lUVEVSIiwiRkFDRUJPT0siLCJMSU5LRURJTiIsIlJFRERJVCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/lib/constants.ts\n");

/***/ }),

/***/ "(api)/./src/lib/db.ts":
/*!***********************!*\
  !*** ./src/lib/db.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   db: () => (/* binding */ db)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst globalForPrisma = globalThis;\nconst db = globalForPrisma.prisma ?? new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\nif (true) globalForPrisma.prisma = db;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvbGliL2RiLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE2QztBQUU3QyxNQUFNQyxrQkFBa0JDO0FBSWpCLE1BQU1DLEtBQUtGLGdCQUFnQkcsTUFBTSxJQUFJLElBQUlKLHdEQUFZQSxHQUFFO0FBRTlELElBQUlLLElBQXlCLEVBQWNKLGdCQUFnQkcsTUFBTSxHQUFHRCIsInNvdXJjZXMiOlsid2VicGFjazovL3JhdGVteS1uZXh0anMvLi9zcmMvbGliL2RiLnRzPzllNGYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUHJpc21hQ2xpZW50IH0gZnJvbSAnQHByaXNtYS9jbGllbnQnXG5cbmNvbnN0IGdsb2JhbEZvclByaXNtYSA9IGdsb2JhbFRoaXMgYXMgdW5rbm93biBhcyB7XG4gIHByaXNtYTogUHJpc21hQ2xpZW50IHwgdW5kZWZpbmVkXG59XG5cbmV4cG9ydCBjb25zdCBkYiA9IGdsb2JhbEZvclByaXNtYS5wcmlzbWEgPz8gbmV3IFByaXNtYUNsaWVudCgpXG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSBnbG9iYWxGb3JQcmlzbWEucHJpc21hID0gZGIiXSwibmFtZXMiOlsiUHJpc21hQ2xpZW50IiwiZ2xvYmFsRm9yUHJpc21hIiwiZ2xvYmFsVGhpcyIsImRiIiwicHJpc21hIiwicHJvY2VzcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/lib/db.ts\n");

/***/ }),

/***/ "(api)/./src/lib/errors.ts":
/*!***************************!*\
  !*** ./src/lib/errors.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AppError: () => (/* binding */ AppError),\n/* harmony export */   AuthenticationError: () => (/* binding */ AuthenticationError),\n/* harmony export */   AuthorizationError: () => (/* binding */ AuthorizationError),\n/* harmony export */   ConflictError: () => (/* binding */ ConflictError),\n/* harmony export */   DatabaseError: () => (/* binding */ DatabaseError),\n/* harmony export */   ExternalServiceError: () => (/* binding */ ExternalServiceError),\n/* harmony export */   NotFoundError: () => (/* binding */ NotFoundError),\n/* harmony export */   RateLimitError: () => (/* binding */ RateLimitError),\n/* harmony export */   ValidationError: () => (/* binding */ ValidationError),\n/* harmony export */   asyncWrapper: () => (/* binding */ asyncWrapper),\n/* harmony export */   createConflictError: () => (/* binding */ createConflictError),\n/* harmony export */   createNotFoundError: () => (/* binding */ createNotFoundError),\n/* harmony export */   createValidationError: () => (/* binding */ createValidationError),\n/* harmony export */   extractErrorCode: () => (/* binding */ extractErrorCode),\n/* harmony export */   extractErrorMessage: () => (/* binding */ extractErrorMessage),\n/* harmony export */   extractStatusCode: () => (/* binding */ extractStatusCode),\n/* harmony export */   handlePromiseRejection: () => (/* binding */ handlePromiseRejection),\n/* harmony export */   isAppError: () => (/* binding */ isAppError),\n/* harmony export */   isOperationalError: () => (/* binding */ isOperationalError),\n/* harmony export */   serializeError: () => (/* binding */ serializeError)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./constants */ \"(api)/./src/lib/constants.ts\");\n\nclass AppError extends Error {\n    constructor(message, code = _constants__WEBPACK_IMPORTED_MODULE_0__.ERROR_CODES.INTERNAL_SERVER_ERROR, statusCode = _constants__WEBPACK_IMPORTED_MODULE_0__.HTTP_STATUS.INTERNAL_SERVER_ERROR, isOperational = true, context){\n        super(message);\n        this.name = this.constructor.name;\n        this.code = code;\n        this.statusCode = statusCode;\n        this.isOperational = isOperational;\n        this.context = context;\n        Error.captureStackTrace(this, this.constructor);\n    }\n}\n// Specific error classes\nclass ValidationError extends AppError {\n    constructor(message, field, context){\n        super(message, _constants__WEBPACK_IMPORTED_MODULE_0__.ERROR_CODES.VALIDATION_ERROR, _constants__WEBPACK_IMPORTED_MODULE_0__.HTTP_STATUS.BAD_REQUEST, true, {\n            field,\n            ...context\n        });\n    }\n}\nclass AuthenticationError extends AppError {\n    constructor(message = \"Authentication failed\", context){\n        super(message, _constants__WEBPACK_IMPORTED_MODULE_0__.ERROR_CODES.UNAUTHORIZED, _constants__WEBPACK_IMPORTED_MODULE_0__.HTTP_STATUS.UNAUTHORIZED, true, context);\n    }\n}\nclass AuthorizationError extends AppError {\n    constructor(message = \"Access forbidden\", context){\n        super(message, _constants__WEBPACK_IMPORTED_MODULE_0__.ERROR_CODES.RESOURCE_FORBIDDEN, _constants__WEBPACK_IMPORTED_MODULE_0__.HTTP_STATUS.FORBIDDEN, true, context);\n    }\n}\nclass NotFoundError extends AppError {\n    constructor(resource = \"Resource\", context){\n        super(`${resource} not found`, _constants__WEBPACK_IMPORTED_MODULE_0__.ERROR_CODES.RESOURCE_NOT_FOUND, _constants__WEBPACK_IMPORTED_MODULE_0__.HTTP_STATUS.NOT_FOUND, true, context);\n    }\n}\nclass ConflictError extends AppError {\n    constructor(message, context){\n        super(message, _constants__WEBPACK_IMPORTED_MODULE_0__.ERROR_CODES.RESOURCE_ALREADY_EXISTS, _constants__WEBPACK_IMPORTED_MODULE_0__.HTTP_STATUS.CONFLICT, true, context);\n    }\n}\nclass DatabaseError extends AppError {\n    constructor(message, context){\n        super(message, _constants__WEBPACK_IMPORTED_MODULE_0__.ERROR_CODES.DATABASE_ERROR, _constants__WEBPACK_IMPORTED_MODULE_0__.HTTP_STATUS.INTERNAL_SERVER_ERROR, true, context);\n    }\n}\nclass ExternalServiceError extends AppError {\n    constructor(service, message, context){\n        super(`External service error (${service}): ${message}`, _constants__WEBPACK_IMPORTED_MODULE_0__.ERROR_CODES.EXTERNAL_SERVICE_ERROR, _constants__WEBPACK_IMPORTED_MODULE_0__.HTTP_STATUS.BAD_GATEWAY, true, context);\n    }\n}\nclass RateLimitError extends AppError {\n    constructor(message = \"Rate limit exceeded\", context){\n        super(message, _constants__WEBPACK_IMPORTED_MODULE_0__.ERROR_CODES.RATE_LIMIT_EXCEEDED, _constants__WEBPACK_IMPORTED_MODULE_0__.HTTP_STATUS.TOO_MANY_REQUESTS, true, context);\n    }\n}\n// Error factory functions\nfunction createValidationError(field, message, value) {\n    return new ValidationError(message, field, {\n        value\n    });\n}\nfunction createNotFoundError(resource, id) {\n    return new NotFoundError(resource, {\n        id\n    });\n}\nfunction createConflictError(resource, field, value) {\n    return new ConflictError(`${resource} with ${field} '${value}' already exists`, {\n        resource,\n        field,\n        value\n    });\n}\n// Error handling utilities\nfunction isAppError(error) {\n    return error instanceof AppError;\n}\nfunction isOperationalError(error) {\n    if (isAppError(error)) {\n        return error.isOperational;\n    }\n    return false;\n}\nfunction extractErrorMessage(error) {\n    if (error instanceof Error) {\n        return error.message;\n    }\n    if (typeof error === \"string\") {\n        return error;\n    }\n    return \"An unknown error occurred\";\n}\nfunction extractErrorCode(error) {\n    if (isAppError(error)) {\n        return error.code;\n    }\n    return _constants__WEBPACK_IMPORTED_MODULE_0__.ERROR_CODES.INTERNAL_SERVER_ERROR;\n}\nfunction extractStatusCode(error) {\n    if (isAppError(error)) {\n        return error.statusCode;\n    }\n    return _constants__WEBPACK_IMPORTED_MODULE_0__.HTTP_STATUS.INTERNAL_SERVER_ERROR;\n}\nfunction serializeError(error, includeStack = false) {\n    const serialized = {\n        message: extractErrorMessage(error),\n        code: extractErrorCode(error),\n        statusCode: extractStatusCode(error)\n    };\n    if (isAppError(error) && error.context) {\n        serialized.context = error.context;\n    }\n    if (includeStack && error instanceof Error) {\n        serialized.stack = error.stack;\n    }\n    return serialized;\n}\n// Async error wrapper\nfunction asyncWrapper(fn) {\n    return async (...args)=>{\n        try {\n            return await fn(...args);\n        } catch (error) {\n            if (isOperationalError(error)) {\n                throw error;\n            }\n            // Convert non-operational errors to operational ones\n            throw new AppError(extractErrorMessage(error), _constants__WEBPACK_IMPORTED_MODULE_0__.ERROR_CODES.INTERNAL_SERVER_ERROR, _constants__WEBPACK_IMPORTED_MODULE_0__.HTTP_STATUS.INTERNAL_SERVER_ERROR, false, {\n                originalError: error\n            });\n        }\n    };\n}\n// Promise error handler\nfunction handlePromiseRejection(promise) {\n    return promise.catch((error)=>{\n        if (!isOperationalError(error)) {\n            // Log unexpected errors\n            console.error(\"Unhandled promise rejection:\", error);\n        }\n        throw error;\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QkFBcUI7QUFDMUM7QUFXTyxTQUFTMEMsZUFBZUwsS0FBVSxFQUFFTSxlQUF3QixLQUFLO0lBQ3RFLE1BQU1DLGFBQThCO1FBQ2xDOUMsU0FBU3lDLG9CQUFvQkY7UUFDN0J0QyxNQUFNeUMsaUJBQWlCSDtRQUN2QnBDLFlBQVl3QyxrQkFBa0JKO0lBQ2hDO0lBRUEsSUFBSUQsV0FBV0MsVUFBVUEsTUFBTWxDLE9BQU8sRUFBRTtRQUN0Q3lDLFdBQVd6QyxPQUFPLEdBQUdrQyxNQUFNbEMsT0FBTztJQUNwQztJQUVBLElBQUl3QyxnQkFBZ0JOLGlCQUFpQnpDLE9BQU87UUFDMUNnRCxXQUFXQyxLQUFLLEdBQUdSLE1BQU1RLEtBQUs7SUFDaEM7SUFFQSxPQUFPRDtBQUNUO0FBRUEsc0JBQXNCO0FBQ2YsU0FBU0UsYUFDZEMsRUFBOEI7SUFFOUIsT0FBTyxPQUFPLEdBQUdDO1FBQ2YsSUFBSTtZQUNGLE9BQU8sTUFBTUQsTUFBTUM7UUFDckIsRUFBRSxPQUFPWCxPQUFPO1lBQ2QsSUFBSUMsbUJBQW1CRCxRQUFRO2dCQUM3QixNQUFNQTtZQUNSO1lBRUEscURBQXFEO1lBQ3JELE1BQU0sSUFBSTFDLFNBQ1I0QyxvQkFBb0JGLFFBQ3BCNUMsbURBQVdBLENBQUNPLHFCQUFxQixFQUNqQ04sbURBQVdBLENBQUNNLHFCQUFxQixFQUNqQyxPQUNBO2dCQUFFaUQsZUFBZVo7WUFBTTtRQUUzQjtJQUNGO0FBQ0Y7QUFFQSx3QkFBd0I7QUFDakIsU0FBU2EsdUJBQXVCQyxPQUFxQjtJQUMxRCxPQUFPQSxRQUFRQyxLQUFLLENBQUMsQ0FBQ2Y7UUFDcEIsSUFBSSxDQUFDQyxtQkFBbUJELFFBQVE7WUFDOUIsd0JBQXdCO1lBQ3hCZ0IsUUFBUWhCLEtBQUssQ0FBQyxnQ0FBZ0NBO1FBQ2hEO1FBQ0EsTUFBTUE7SUFDUjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcmF0ZW15LW5leHRqcy8uL3NyYy9saWIvZXJyb3JzLnRzPzQ1MWEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRVJST1JfQ09ERVMsIEhUVFBfU1RBVFVTIH0gZnJvbSAnLi9jb25zdGFudHMnXG5cbmV4cG9ydCBjbGFzcyBBcHBFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgcHVibGljIHJlYWRvbmx5IGNvZGU6IHN0cmluZ1xuICBwdWJsaWMgcmVhZG9ubHkgc3RhdHVzQ29kZTogbnVtYmVyXG4gIHB1YmxpYyByZWFkb25seSBpc09wZXJhdGlvbmFsOiBib29sZWFuXG4gIHB1YmxpYyByZWFkb25seSBjb250ZXh0PzogYW55XG5cbiAgY29uc3RydWN0b3IoXG4gICAgbWVzc2FnZTogc3RyaW5nLFxuICAgIGNvZGU6IHN0cmluZyA9IEVSUk9SX0NPREVTLklOVEVSTkFMX1NFUlZFUl9FUlJPUixcbiAgICBzdGF0dXNDb2RlOiBudW1iZXIgPSBIVFRQX1NUQVRVUy5JTlRFUk5BTF9TRVJWRVJfRVJST1IsXG4gICAgaXNPcGVyYXRpb25hbDogYm9vbGVhbiA9IHRydWUsXG4gICAgY29udGV4dD86IGFueVxuICApIHtcbiAgICBzdXBlcihtZXNzYWdlKVxuICAgIFxuICAgIHRoaXMubmFtZSA9IHRoaXMuY29uc3RydWN0b3IubmFtZVxuICAgIHRoaXMuY29kZSA9IGNvZGVcbiAgICB0aGlzLnN0YXR1c0NvZGUgPSBzdGF0dXNDb2RlXG4gICAgdGhpcy5pc09wZXJhdGlvbmFsID0gaXNPcGVyYXRpb25hbFxuICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHRcblxuICAgIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsIHRoaXMuY29uc3RydWN0b3IpXG4gIH1cbn1cblxuLy8gU3BlY2lmaWMgZXJyb3IgY2xhc3Nlc1xuZXhwb3J0IGNsYXNzIFZhbGlkYXRpb25FcnJvciBleHRlbmRzIEFwcEVycm9yIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nLCBmaWVsZD86IHN0cmluZywgY29udGV4dD86IGFueSkge1xuICAgIHN1cGVyKFxuICAgICAgbWVzc2FnZSxcbiAgICAgIEVSUk9SX0NPREVTLlZBTElEQVRJT05fRVJST1IsXG4gICAgICBIVFRQX1NUQVRVUy5CQURfUkVRVUVTVCxcbiAgICAgIHRydWUsXG4gICAgICB7IGZpZWxkLCAuLi5jb250ZXh0IH1cbiAgICApXG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEF1dGhlbnRpY2F0aW9uRXJyb3IgZXh0ZW5kcyBBcHBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2U6IHN0cmluZyA9ICdBdXRoZW50aWNhdGlvbiBmYWlsZWQnLCBjb250ZXh0PzogYW55KSB7XG4gICAgc3VwZXIoXG4gICAgICBtZXNzYWdlLFxuICAgICAgRVJST1JfQ09ERVMuVU5BVVRIT1JJWkVELFxuICAgICAgSFRUUF9TVEFUVVMuVU5BVVRIT1JJWkVELFxuICAgICAgdHJ1ZSxcbiAgICAgIGNvbnRleHRcbiAgICApXG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEF1dGhvcml6YXRpb25FcnJvciBleHRlbmRzIEFwcEVycm9yIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nID0gJ0FjY2VzcyBmb3JiaWRkZW4nLCBjb250ZXh0PzogYW55KSB7XG4gICAgc3VwZXIoXG4gICAgICBtZXNzYWdlLFxuICAgICAgRVJST1JfQ09ERVMuUkVTT1VSQ0VfRk9SQklEREVOLFxuICAgICAgSFRUUF9TVEFUVVMuRk9SQklEREVOLFxuICAgICAgdHJ1ZSxcbiAgICAgIGNvbnRleHRcbiAgICApXG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIE5vdEZvdW5kRXJyb3IgZXh0ZW5kcyBBcHBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKHJlc291cmNlOiBzdHJpbmcgPSAnUmVzb3VyY2UnLCBjb250ZXh0PzogYW55KSB7XG4gICAgc3VwZXIoXG4gICAgICBgJHtyZXNvdXJjZX0gbm90IGZvdW5kYCxcbiAgICAgIEVSUk9SX0NPREVTLlJFU09VUkNFX05PVF9GT1VORCxcbiAgICAgIEhUVFBfU1RBVFVTLk5PVF9GT1VORCxcbiAgICAgIHRydWUsXG4gICAgICBjb250ZXh0XG4gICAgKVxuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBDb25mbGljdEVycm9yIGV4dGVuZHMgQXBwRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihtZXNzYWdlOiBzdHJpbmcsIGNvbnRleHQ/OiBhbnkpIHtcbiAgICBzdXBlcihcbiAgICAgIG1lc3NhZ2UsXG4gICAgICBFUlJPUl9DT0RFUy5SRVNPVVJDRV9BTFJFQURZX0VYSVNUUyxcbiAgICAgIEhUVFBfU1RBVFVTLkNPTkZMSUNULFxuICAgICAgdHJ1ZSxcbiAgICAgIGNvbnRleHRcbiAgICApXG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIERhdGFiYXNlRXJyb3IgZXh0ZW5kcyBBcHBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2U6IHN0cmluZywgY29udGV4dD86IGFueSkge1xuICAgIHN1cGVyKFxuICAgICAgbWVzc2FnZSxcbiAgICAgIEVSUk9SX0NPREVTLkRBVEFCQVNFX0VSUk9SLFxuICAgICAgSFRUUF9TVEFUVVMuSU5URVJOQUxfU0VSVkVSX0VSUk9SLFxuICAgICAgdHJ1ZSxcbiAgICAgIGNvbnRleHRcbiAgICApXG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEV4dGVybmFsU2VydmljZUVycm9yIGV4dGVuZHMgQXBwRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihzZXJ2aWNlOiBzdHJpbmcsIG1lc3NhZ2U6IHN0cmluZywgY29udGV4dD86IGFueSkge1xuICAgIHN1cGVyKFxuICAgICAgYEV4dGVybmFsIHNlcnZpY2UgZXJyb3IgKCR7c2VydmljZX0pOiAke21lc3NhZ2V9YCxcbiAgICAgIEVSUk9SX0NPREVTLkVYVEVSTkFMX1NFUlZJQ0VfRVJST1IsXG4gICAgICBIVFRQX1NUQVRVUy5CQURfR0FURVdBWSxcbiAgICAgIHRydWUsXG4gICAgICBjb250ZXh0XG4gICAgKVxuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBSYXRlTGltaXRFcnJvciBleHRlbmRzIEFwcEVycm9yIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nID0gJ1JhdGUgbGltaXQgZXhjZWVkZWQnLCBjb250ZXh0PzogYW55KSB7XG4gICAgc3VwZXIoXG4gICAgICBtZXNzYWdlLFxuICAgICAgRVJST1JfQ09ERVMuUkFURV9MSU1JVF9FWENFRURFRCxcbiAgICAgIEhUVFBfU1RBVFVTLlRPT19NQU5ZX1JFUVVFU1RTLFxuICAgICAgdHJ1ZSxcbiAgICAgIGNvbnRleHRcbiAgICApXG4gIH1cbn1cblxuLy8gRXJyb3IgZmFjdG9yeSBmdW5jdGlvbnNcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVWYWxpZGF0aW9uRXJyb3IoZmllbGQ6IHN0cmluZywgbWVzc2FnZTogc3RyaW5nLCB2YWx1ZT86IGFueSk6IFZhbGlkYXRpb25FcnJvciB7XG4gIHJldHVybiBuZXcgVmFsaWRhdGlvbkVycm9yKG1lc3NhZ2UsIGZpZWxkLCB7IHZhbHVlIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVOb3RGb3VuZEVycm9yKHJlc291cmNlOiBzdHJpbmcsIGlkPzogc3RyaW5nKTogTm90Rm91bmRFcnJvciB7XG4gIHJldHVybiBuZXcgTm90Rm91bmRFcnJvcihyZXNvdXJjZSwgeyBpZCB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQ29uZmxpY3RFcnJvcihyZXNvdXJjZTogc3RyaW5nLCBmaWVsZDogc3RyaW5nLCB2YWx1ZTogYW55KTogQ29uZmxpY3RFcnJvciB7XG4gIHJldHVybiBuZXcgQ29uZmxpY3RFcnJvcihcbiAgICBgJHtyZXNvdXJjZX0gd2l0aCAke2ZpZWxkfSAnJHt2YWx1ZX0nIGFscmVhZHkgZXhpc3RzYCxcbiAgICB7IHJlc291cmNlLCBmaWVsZCwgdmFsdWUgfVxuICApXG59XG5cbi8vIEVycm9yIGhhbmRsaW5nIHV0aWxpdGllc1xuZXhwb3J0IGZ1bmN0aW9uIGlzQXBwRXJyb3IoZXJyb3I6IGFueSk6IGVycm9yIGlzIEFwcEVycm9yIHtcbiAgcmV0dXJuIGVycm9yIGluc3RhbmNlb2YgQXBwRXJyb3Jcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzT3BlcmF0aW9uYWxFcnJvcihlcnJvcjogYW55KTogYm9vbGVhbiB7XG4gIGlmIChpc0FwcEVycm9yKGVycm9yKSkge1xuICAgIHJldHVybiBlcnJvci5pc09wZXJhdGlvbmFsXG4gIH1cbiAgcmV0dXJuIGZhbHNlXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBleHRyYWN0RXJyb3JNZXNzYWdlKGVycm9yOiBhbnkpOiBzdHJpbmcge1xuICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgIHJldHVybiBlcnJvci5tZXNzYWdlXG4gIH1cbiAgaWYgKHR5cGVvZiBlcnJvciA9PT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gZXJyb3JcbiAgfVxuICByZXR1cm4gJ0FuIHVua25vd24gZXJyb3Igb2NjdXJyZWQnXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBleHRyYWN0RXJyb3JDb2RlKGVycm9yOiBhbnkpOiBzdHJpbmcge1xuICBpZiAoaXNBcHBFcnJvcihlcnJvcikpIHtcbiAgICByZXR1cm4gZXJyb3IuY29kZVxuICB9XG4gIHJldHVybiBFUlJPUl9DT0RFUy5JTlRFUk5BTF9TRVJWRVJfRVJST1Jcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGV4dHJhY3RTdGF0dXNDb2RlKGVycm9yOiBhbnkpOiBudW1iZXIge1xuICBpZiAoaXNBcHBFcnJvcihlcnJvcikpIHtcbiAgICByZXR1cm4gZXJyb3Iuc3RhdHVzQ29kZVxuICB9XG4gIHJldHVybiBIVFRQX1NUQVRVUy5JTlRFUk5BTF9TRVJWRVJfRVJST1Jcbn1cblxuLy8gRXJyb3Igc2VyaWFsaXphdGlvblxuZXhwb3J0IGludGVyZmFjZSBTZXJpYWxpemVkRXJyb3Ige1xuICBtZXNzYWdlOiBzdHJpbmdcbiAgY29kZTogc3RyaW5nXG4gIHN0YXR1c0NvZGU6IG51bWJlclxuICBjb250ZXh0PzogYW55XG4gIHN0YWNrPzogc3RyaW5nXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXJpYWxpemVFcnJvcihlcnJvcjogYW55LCBpbmNsdWRlU3RhY2s6IGJvb2xlYW4gPSBmYWxzZSk6IFNlcmlhbGl6ZWRFcnJvciB7XG4gIGNvbnN0IHNlcmlhbGl6ZWQ6IFNlcmlhbGl6ZWRFcnJvciA9IHtcbiAgICBtZXNzYWdlOiBleHRyYWN0RXJyb3JNZXNzYWdlKGVycm9yKSxcbiAgICBjb2RlOiBleHRyYWN0RXJyb3JDb2RlKGVycm9yKSxcbiAgICBzdGF0dXNDb2RlOiBleHRyYWN0U3RhdHVzQ29kZShlcnJvciksXG4gIH1cblxuICBpZiAoaXNBcHBFcnJvcihlcnJvcikgJiYgZXJyb3IuY29udGV4dCkge1xuICAgIHNlcmlhbGl6ZWQuY29udGV4dCA9IGVycm9yLmNvbnRleHRcbiAgfVxuXG4gIGlmIChpbmNsdWRlU3RhY2sgJiYgZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgIHNlcmlhbGl6ZWQuc3RhY2sgPSBlcnJvci5zdGFja1xuICB9XG5cbiAgcmV0dXJuIHNlcmlhbGl6ZWRcbn1cblxuLy8gQXN5bmMgZXJyb3Igd3JhcHBlclxuZXhwb3J0IGZ1bmN0aW9uIGFzeW5jV3JhcHBlcjxUIGV4dGVuZHMgYW55W10sIFI+KFxuICBmbjogKC4uLmFyZ3M6IFQpID0+IFByb21pc2U8Uj5cbikge1xuICByZXR1cm4gYXN5bmMgKC4uLmFyZ3M6IFQpOiBQcm9taXNlPFI+ID0+IHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGF3YWl0IGZuKC4uLmFyZ3MpXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGlmIChpc09wZXJhdGlvbmFsRXJyb3IoZXJyb3IpKSB7XG4gICAgICAgIHRocm93IGVycm9yXG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIENvbnZlcnQgbm9uLW9wZXJhdGlvbmFsIGVycm9ycyB0byBvcGVyYXRpb25hbCBvbmVzXG4gICAgICB0aHJvdyBuZXcgQXBwRXJyb3IoXG4gICAgICAgIGV4dHJhY3RFcnJvck1lc3NhZ2UoZXJyb3IpLFxuICAgICAgICBFUlJPUl9DT0RFUy5JTlRFUk5BTF9TRVJWRVJfRVJST1IsXG4gICAgICAgIEhUVFBfU1RBVFVTLklOVEVSTkFMX1NFUlZFUl9FUlJPUixcbiAgICAgICAgZmFsc2UsXG4gICAgICAgIHsgb3JpZ2luYWxFcnJvcjogZXJyb3IgfVxuICAgICAgKVxuICAgIH1cbiAgfVxufVxuXG4vLyBQcm9taXNlIGVycm9yIGhhbmRsZXJcbmV4cG9ydCBmdW5jdGlvbiBoYW5kbGVQcm9taXNlUmVqZWN0aW9uKHByb21pc2U6IFByb21pc2U8YW55Pik6IFByb21pc2U8YW55PiB7XG4gIHJldHVybiBwcm9taXNlLmNhdGNoKChlcnJvcikgPT4ge1xuICAgIGlmICghaXNPcGVyYXRpb25hbEVycm9yKGVycm9yKSkge1xuICAgICAgLy8gTG9nIHVuZXhwZWN0ZWQgZXJyb3JzXG4gICAgICBjb25zb2xlLmVycm9yKCdVbmhhbmRsZWQgcHJvbWlzZSByZWplY3Rpb246JywgZXJyb3IpXG4gICAgfVxuICAgIHRocm93IGVycm9yXG4gIH0pXG59Il0sIm5hbWVzIjpbIkVSUk9SX0NPREVTIiwiSFRUUF9TVEFUVVMiLCJBcHBFcnJvciIsIkVycm9yIiwiY29uc3RydWN0b3IiLCJtZXNzYWdlIiwiY29kZSIsIklOVEVSTkFMX1NFUlZFUl9FUlJPUiIsInN0YXR1c0NvZGUiLCJpc09wZXJhdGlvbmFsIiwiY29udGV4dCIsIm5hbWUiLCJjYXB0dXJlU3RhY2tUcmFjZSIsIlZhbGlkYXRpb25FcnJvciIsImZpZWxkIiwiVkFMSURBVElPTl9FUlJPUiIsIkJBRF9SRVFVRVNUIiwiQXV0aGVudGljYXRpb25FcnJvciIsIlVOQVVUSE9SSVpFRCIsIkF1dGhvcml6YXRpb25FcnJvciIsIlJFU09VUkNFX0ZPUkJJRERFTiIsIkZPUkJJRERFTiIsIk5vdEZvdW5kRXJyb3IiLCJyZXNvdXJjZSIsIlJFU09VUkNFX05PVF9GT1VORCIsIk5PVF9GT1VORCIsIkNvbmZsaWN0RXJyb3IiLCJSRVNPVVJDRV9BTFJFQURZX0VYSVNUUyIsIkNPTkZMSUNUIiwiRGF0YWJhc2VFcnJvciIsIkRBVEFCQVNFX0VSUk9SIiwiRXh0ZXJuYWxTZXJ2aWNlRXJyb3IiLCJzZXJ2aWNlIiwiRVhURVJOQUxfU0VSVklDRV9FUlJPUiIsIkJBRF9HQVRFV0FZIiwiUmF0ZUxpbWl0RXJyb3IiLCJSQVRFX0xJTUlUX0VYQ0VFREVEIiwiVE9PX01BTllfUkVRVUVTVFMiLCJjcmVhdGVWYWxpZGF0aW9uRXJyb3IiLCJ2YWx1ZSIsImNyZWF0ZU5vdEZvdW5kRXJyb3IiLCJpZCIsImNyZWF0ZUNvbmZsaWN0RXJyb3IiLCJpc0FwcEVycm9yIiwiZXJyb3IiLCJpc09wZXJhdGlvbmFsRXJyb3IiLCJleHRyYWN0RXJyb3JNZXNzYWdlIiwiZXh0cmFjdEVycm9yQ29kZSIsImV4dHJhY3RTdGF0dXNDb2RlIiwic2VyaWFsaXplRXJyb3IiLCJpbmNsdWRlU3RhY2siLCJzZXJpYWxpemVkIiwic3RhY2siLCJhc3luY1dyYXBwZXIiLCJmbiIsImFyZ3MiLCJvcmlnaW5hbEVycm9yIiwiaGFuZGxlUHJvbWlzZVJlamVjdGlvbiIsInByb21pc2UiLCJjYXRjaCIsImNvbnNvbGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/lib/errors.ts\n");

/***/ }),

/***/ "(api)/./src/lib/logger.ts":
/*!***************************!*\
  !*** ./src/lib/logger.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LogLevel: () => (/* binding */ LogLevel),\n/* harmony export */   logApiError: () => (/* binding */ logApiError),\n/* harmony export */   logApiRequest: () => (/* binding */ logApiRequest),\n/* harmony export */   logDatabaseConnection: () => (/* binding */ logDatabaseConnection),\n/* harmony export */   logDatabaseQuery: () => (/* binding */ logDatabaseQuery),\n/* harmony export */   logError: () => (/* binding */ logError),\n/* harmony export */   logHealthCheck: () => (/* binding */ logHealthCheck),\n/* harmony export */   logNetworkInfo: () => (/* binding */ logNetworkInfo),\n/* harmony export */   logStartup: () => (/* binding */ logStartup),\n/* harmony export */   logSystemEvent: () => (/* binding */ logSystemEvent),\n/* harmony export */   logUserAction: () => (/* binding */ logUserAction),\n/* harmony export */   logger: () => (/* binding */ logger)\n/* harmony export */ });\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./config */ \"(api)/./src/lib/config.ts\");\n\nvar LogLevel;\n(function(LogLevel) {\n    LogLevel[LogLevel[\"ERROR\"] = 0] = \"ERROR\";\n    LogLevel[LogLevel[\"WARN\"] = 1] = \"WARN\";\n    LogLevel[LogLevel[\"INFO\"] = 2] = \"INFO\";\n    LogLevel[LogLevel[\"DEBUG\"] = 3] = \"DEBUG\";\n})(LogLevel || (LogLevel = {}));\nclass ConsoleLogger {\n    constructor(level){\n        this.level = this.parseLogLevel(level);\n    }\n    parseLogLevel(level) {\n        switch(level.toLowerCase()){\n            case \"error\":\n                return 0;\n            case \"warn\":\n                return 1;\n            case \"info\":\n                return 2;\n            case \"debug\":\n                return 3;\n            default:\n                return 2;\n        }\n    }\n    shouldLog(level) {\n        return level <= this.level;\n    }\n    formatMessage(level, message, context) {\n        const timestamp = new Date().toISOString();\n        const baseMessage = `[${timestamp}] ${level.toUpperCase()}: ${message}`;\n        if (context && Object.keys(context).length > 0) {\n            if (_config__WEBPACK_IMPORTED_MODULE_0__.config.logging.pretty) {\n                return `${baseMessage}\\n${JSON.stringify(context, null, 2)}`;\n            } else {\n                return `${baseMessage} ${JSON.stringify(context)}`;\n            }\n        }\n        return baseMessage;\n    }\n    error(message, context) {\n        if (this.shouldLog(0)) {\n            console.error(this.formatMessage(\"error\", message, context));\n        }\n    }\n    warn(message, context) {\n        if (this.shouldLog(1)) {\n            console.warn(this.formatMessage(\"warn\", message, context));\n        }\n    }\n    info(message, context) {\n        if (this.shouldLog(2)) {\n            console.info(this.formatMessage(\"info\", message, context));\n        }\n    }\n    debug(message, context) {\n        if (this.shouldLog(3)) {\n            console.debug(this.formatMessage(\"debug\", message, context));\n        }\n    }\n}\n// Create singleton logger instance\nconst logger = new ConsoleLogger(_config__WEBPACK_IMPORTED_MODULE_0__.config.logging.level);\n// Utility functions for structured logging\nfunction logError(error, context) {\n    logger.error(error.message, {\n        ...context,\n        stack: error.stack,\n        name: error.name\n    });\n}\nfunction logApiRequest(method, url, userId, duration) {\n    logger.info(\"API Request\", {\n        method,\n        url,\n        userId,\n        duration: duration ? `${duration}ms` : undefined\n    });\n}\nfunction logApiError(method, url, error, userId) {\n    logger.error(\"API Error\", {\n        method,\n        url,\n        userId,\n        error: error.message,\n        stack: error.stack\n    });\n}\nfunction logDatabaseQuery(query, duration, error) {\n    if (error) {\n        logger.error(\"Database Query Error\", {\n            query,\n            duration: duration ? `${duration}ms` : undefined,\n            error: error.message\n        });\n    } else {\n        logger.debug(\"Database Query\", {\n            query,\n            duration: duration ? `${duration}ms` : undefined\n        });\n    }\n}\nfunction logUserAction(action, userId, context) {\n    logger.info(\"User Action\", {\n        action,\n        userId,\n        ...context\n    });\n}\nfunction logSystemEvent(event, context) {\n    logger.info(\"System Event\", {\n        event,\n        ...context\n    });\n}\nfunction logStartup(component, status, context) {\n    const level = status === \"failed\" ? \"error\" : \"info\";\n    logger[level](` ${component} ${status.toUpperCase()}`, {\n        component,\n        status,\n        timestamp: new Date().toISOString(),\n        ...context\n    });\n}\nfunction logHealthCheck(component, healthy, context) {\n    const status = healthy ? \"healthy\" : \"unhealthy\";\n    const level = healthy ? \"info\" : \"error\";\n    logger[level](` Health Check: ${component} is ${status}`, {\n        component,\n        healthy,\n        ...context\n    });\n}\nfunction logNetworkInfo(port, host = \"localhost\", context) {\n    logger.info(\"\\uD83C\\uDF10 Server Network Configuration\", {\n        port,\n        host,\n        url: `http://${host}:${port}`,\n        ...context\n    });\n}\nfunction logDatabaseConnection(status, context) {\n    const level = status === \"failed\" ? \"error\" : \"info\";\n    const emoji = status === \"connected\" ? \"\" : status === \"connecting\" ? \"\\uD83D\\uDD04\" : \"\";\n    logger[level](`${emoji} Database ${status.toUpperCase()}`, {\n        status,\n        ...context\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SUFDWjtBQUNGO0FBRU8sU0FBU3NDLGVBQWVGLFNBQWlCLEVBQUVHLE9BQWdCLEVBQUV2QyxPQUFvQjtJQUN0RixNQUFNcUMsU0FBU0UsVUFBVSxZQUFZO0lBQ3JDLE1BQU03QyxRQUFRNkMsVUFBVSxTQUFTO0lBQ2pDckIsTUFBTSxDQUFDeEIsTUFBTSxDQUFDLENBQUMsaUJBQWlCLEVBQUUwQyxVQUFVLElBQUksRUFBRUMsT0FBTyxDQUFDLEVBQUU7UUFDMUREO1FBQ0FHO1FBQ0EsR0FBR3ZDLE9BQU87SUFDWjtBQUNGO0FBRU8sU0FBU3dDLGVBQWVDLElBQVksRUFBRUMsT0FBTyxXQUFXLEVBQUUxQyxPQUFvQjtJQUNuRmtCLE9BQU9GLElBQUksQ0FBQyw2Q0FBbUM7UUFDN0N5QjtRQUNBQztRQUNBbEIsS0FBSyxDQUFDLE9BQU8sRUFBRWtCLEtBQUssQ0FBQyxFQUFFRCxLQUFLLENBQUM7UUFDN0IsR0FBR3pDLE9BQU87SUFDWjtBQUNGO0FBRU8sU0FBUzJDLHNCQUFzQk4sTUFBNkMsRUFBRXJDLE9BQW9CO0lBQ3ZHLE1BQU1OLFFBQVEyQyxXQUFXLFdBQVcsVUFBVTtJQUM5QyxNQUFNTyxRQUFRUCxXQUFXLGNBQWMsTUFBTUEsV0FBVyxlQUFlLGlCQUFPO0lBQzlFbkIsTUFBTSxDQUFDeEIsTUFBTSxDQUFDLENBQUMsRUFBRWtELE1BQU0sVUFBVSxFQUFFUCxPQUFPaEMsV0FBVyxHQUFHLENBQUMsRUFBRTtRQUN6RGdDO1FBQ0EsR0FBR3JDLE9BQU87SUFDWjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcmF0ZW15LW5leHRqcy8uL3NyYy9saWIvbG9nZ2VyLnRzP2I0OWUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY29uZmlnIH0gZnJvbSAnLi9jb25maWcnXG5cbmV4cG9ydCBlbnVtIExvZ0xldmVsIHtcbiAgRVJST1IgPSAwLFxuICBXQVJOID0gMSxcbiAgSU5GTyA9IDIsXG4gIERFQlVHID0gMyxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBMb2dDb250ZXh0IHtcbiAgW2tleTogc3RyaW5nXTogYW55XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTG9nZ2VyIHtcbiAgZXJyb3IobWVzc2FnZTogc3RyaW5nLCBjb250ZXh0PzogTG9nQ29udGV4dCk6IHZvaWRcbiAgd2FybihtZXNzYWdlOiBzdHJpbmcsIGNvbnRleHQ/OiBMb2dDb250ZXh0KTogdm9pZFxuICBpbmZvKG1lc3NhZ2U6IHN0cmluZywgY29udGV4dD86IExvZ0NvbnRleHQpOiB2b2lkXG4gIGRlYnVnKG1lc3NhZ2U6IHN0cmluZywgY29udGV4dD86IExvZ0NvbnRleHQpOiB2b2lkXG59XG5cbmNsYXNzIENvbnNvbGVMb2dnZXIgaW1wbGVtZW50cyBMb2dnZXIge1xuICBwcml2YXRlIGxldmVsOiBMb2dMZXZlbFxuXG4gIGNvbnN0cnVjdG9yKGxldmVsOiBzdHJpbmcpIHtcbiAgICB0aGlzLmxldmVsID0gdGhpcy5wYXJzZUxvZ0xldmVsKGxldmVsKVxuICB9XG5cbiAgcHJpdmF0ZSBwYXJzZUxvZ0xldmVsKGxldmVsOiBzdHJpbmcpOiBMb2dMZXZlbCB7XG4gICAgc3dpdGNoIChsZXZlbC50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICBjYXNlICdlcnJvcic6IHJldHVybiBMb2dMZXZlbC5FUlJPUlxuICAgICAgY2FzZSAnd2Fybic6IHJldHVybiBMb2dMZXZlbC5XQVJOXG4gICAgICBjYXNlICdpbmZvJzogcmV0dXJuIExvZ0xldmVsLklORk9cbiAgICAgIGNhc2UgJ2RlYnVnJzogcmV0dXJuIExvZ0xldmVsLkRFQlVHXG4gICAgICBkZWZhdWx0OiByZXR1cm4gTG9nTGV2ZWwuSU5GT1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgc2hvdWxkTG9nKGxldmVsOiBMb2dMZXZlbCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBsZXZlbCA8PSB0aGlzLmxldmVsXG4gIH1cblxuICBwcml2YXRlIGZvcm1hdE1lc3NhZ2UobGV2ZWw6IHN0cmluZywgbWVzc2FnZTogc3RyaW5nLCBjb250ZXh0PzogTG9nQ29udGV4dCk6IHN0cmluZyB7XG4gICAgY29uc3QgdGltZXN0YW1wID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgY29uc3QgYmFzZU1lc3NhZ2UgPSBgWyR7dGltZXN0YW1wfV0gJHtsZXZlbC50b1VwcGVyQ2FzZSgpfTogJHttZXNzYWdlfWBcbiAgICBcbiAgICBpZiAoY29udGV4dCAmJiBPYmplY3Qua2V5cyhjb250ZXh0KS5sZW5ndGggPiAwKSB7XG4gICAgICBpZiAoY29uZmlnLmxvZ2dpbmcucHJldHR5KSB7XG4gICAgICAgIHJldHVybiBgJHtiYXNlTWVzc2FnZX1cXG4ke0pTT04uc3RyaW5naWZ5KGNvbnRleHQsIG51bGwsIDIpfWBcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBgJHtiYXNlTWVzc2FnZX0gJHtKU09OLnN0cmluZ2lmeShjb250ZXh0KX1gXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBiYXNlTWVzc2FnZVxuICB9XG5cbiAgZXJyb3IobWVzc2FnZTogc3RyaW5nLCBjb250ZXh0PzogTG9nQ29udGV4dCk6IHZvaWQge1xuICAgIGlmICh0aGlzLnNob3VsZExvZyhMb2dMZXZlbC5FUlJPUikpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IodGhpcy5mb3JtYXRNZXNzYWdlKCdlcnJvcicsIG1lc3NhZ2UsIGNvbnRleHQpKVxuICAgIH1cbiAgfVxuXG4gIHdhcm4obWVzc2FnZTogc3RyaW5nLCBjb250ZXh0PzogTG9nQ29udGV4dCk6IHZvaWQge1xuICAgIGlmICh0aGlzLnNob3VsZExvZyhMb2dMZXZlbC5XQVJOKSkge1xuICAgICAgY29uc29sZS53YXJuKHRoaXMuZm9ybWF0TWVzc2FnZSgnd2FybicsIG1lc3NhZ2UsIGNvbnRleHQpKVxuICAgIH1cbiAgfVxuXG4gIGluZm8obWVzc2FnZTogc3RyaW5nLCBjb250ZXh0PzogTG9nQ29udGV4dCk6IHZvaWQge1xuICAgIGlmICh0aGlzLnNob3VsZExvZyhMb2dMZXZlbC5JTkZPKSkge1xuICAgICAgY29uc29sZS5pbmZvKHRoaXMuZm9ybWF0TWVzc2FnZSgnaW5mbycsIG1lc3NhZ2UsIGNvbnRleHQpKVxuICAgIH1cbiAgfVxuXG4gIGRlYnVnKG1lc3NhZ2U6IHN0cmluZywgY29udGV4dD86IExvZ0NvbnRleHQpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5zaG91bGRMb2coTG9nTGV2ZWwuREVCVUcpKSB7XG4gICAgICBjb25zb2xlLmRlYnVnKHRoaXMuZm9ybWF0TWVzc2FnZSgnZGVidWcnLCBtZXNzYWdlLCBjb250ZXh0KSlcbiAgICB9XG4gIH1cbn1cblxuLy8gQ3JlYXRlIHNpbmdsZXRvbiBsb2dnZXIgaW5zdGFuY2VcbmV4cG9ydCBjb25zdCBsb2dnZXI6IExvZ2dlciA9IG5ldyBDb25zb2xlTG9nZ2VyKGNvbmZpZy5sb2dnaW5nLmxldmVsKVxuXG4vLyBVdGlsaXR5IGZ1bmN0aW9ucyBmb3Igc3RydWN0dXJlZCBsb2dnaW5nXG5leHBvcnQgZnVuY3Rpb24gbG9nRXJyb3IoZXJyb3I6IEVycm9yLCBjb250ZXh0PzogTG9nQ29udGV4dCkge1xuICBsb2dnZXIuZXJyb3IoZXJyb3IubWVzc2FnZSwge1xuICAgIC4uLmNvbnRleHQsXG4gICAgc3RhY2s6IGVycm9yLnN0YWNrLFxuICAgIG5hbWU6IGVycm9yLm5hbWUsXG4gIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBsb2dBcGlSZXF1ZXN0KG1ldGhvZDogc3RyaW5nLCB1cmw6IHN0cmluZywgdXNlcklkPzogc3RyaW5nLCBkdXJhdGlvbj86IG51bWJlcikge1xuICBsb2dnZXIuaW5mbygnQVBJIFJlcXVlc3QnLCB7XG4gICAgbWV0aG9kLFxuICAgIHVybCxcbiAgICB1c2VySWQsXG4gICAgZHVyYXRpb246IGR1cmF0aW9uID8gYCR7ZHVyYXRpb259bXNgIDogdW5kZWZpbmVkLFxuICB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gbG9nQXBpRXJyb3IobWV0aG9kOiBzdHJpbmcsIHVybDogc3RyaW5nLCBlcnJvcjogRXJyb3IsIHVzZXJJZD86IHN0cmluZykge1xuICBsb2dnZXIuZXJyb3IoJ0FQSSBFcnJvcicsIHtcbiAgICBtZXRob2QsXG4gICAgdXJsLFxuICAgIHVzZXJJZCxcbiAgICBlcnJvcjogZXJyb3IubWVzc2FnZSxcbiAgICBzdGFjazogZXJyb3Iuc3RhY2ssXG4gIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBsb2dEYXRhYmFzZVF1ZXJ5KHF1ZXJ5OiBzdHJpbmcsIGR1cmF0aW9uPzogbnVtYmVyLCBlcnJvcj86IEVycm9yKSB7XG4gIGlmIChlcnJvcikge1xuICAgIGxvZ2dlci5lcnJvcignRGF0YWJhc2UgUXVlcnkgRXJyb3InLCB7XG4gICAgICBxdWVyeSxcbiAgICAgIGR1cmF0aW9uOiBkdXJhdGlvbiA/IGAke2R1cmF0aW9ufW1zYCA6IHVuZGVmaW5lZCxcbiAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlLFxuICAgIH0pXG4gIH0gZWxzZSB7XG4gICAgbG9nZ2VyLmRlYnVnKCdEYXRhYmFzZSBRdWVyeScsIHtcbiAgICAgIHF1ZXJ5LFxuICAgICAgZHVyYXRpb246IGR1cmF0aW9uID8gYCR7ZHVyYXRpb259bXNgIDogdW5kZWZpbmVkLFxuICAgIH0pXG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGxvZ1VzZXJBY3Rpb24oYWN0aW9uOiBzdHJpbmcsIHVzZXJJZDogc3RyaW5nLCBjb250ZXh0PzogTG9nQ29udGV4dCkge1xuICBsb2dnZXIuaW5mbygnVXNlciBBY3Rpb24nLCB7XG4gICAgYWN0aW9uLFxuICAgIHVzZXJJZCxcbiAgICAuLi5jb250ZXh0LFxuICB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gbG9nU3lzdGVtRXZlbnQoZXZlbnQ6IHN0cmluZywgY29udGV4dD86IExvZ0NvbnRleHQpIHtcbiAgbG9nZ2VyLmluZm8oJ1N5c3RlbSBFdmVudCcsIHtcbiAgICBldmVudCxcbiAgICAuLi5jb250ZXh0LFxuICB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gbG9nU3RhcnR1cChjb21wb25lbnQ6IHN0cmluZywgc3RhdHVzOiAnc3RhcnRpbmcnIHwgJ3JlYWR5JyB8ICdmYWlsZWQnLCBjb250ZXh0PzogTG9nQ29udGV4dCkge1xuICBjb25zdCBsZXZlbCA9IHN0YXR1cyA9PT0gJ2ZhaWxlZCcgPyAnZXJyb3InIDogJ2luZm8nXG4gIGxvZ2dlcltsZXZlbF0oYPCfmoAgJHtjb21wb25lbnR9ICR7c3RhdHVzLnRvVXBwZXJDYXNlKCl9YCwge1xuICAgIGNvbXBvbmVudCxcbiAgICBzdGF0dXMsXG4gICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgLi4uY29udGV4dCxcbiAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGxvZ0hlYWx0aENoZWNrKGNvbXBvbmVudDogc3RyaW5nLCBoZWFsdGh5OiBib29sZWFuLCBjb250ZXh0PzogTG9nQ29udGV4dCkge1xuICBjb25zdCBzdGF0dXMgPSBoZWFsdGh5ID8gJ2hlYWx0aHknIDogJ3VuaGVhbHRoeSdcbiAgY29uc3QgbGV2ZWwgPSBoZWFsdGh5ID8gJ2luZm8nIDogJ2Vycm9yJ1xuICBsb2dnZXJbbGV2ZWxdKGDwn5KaIEhlYWx0aCBDaGVjazogJHtjb21wb25lbnR9IGlzICR7c3RhdHVzfWAsIHtcbiAgICBjb21wb25lbnQsXG4gICAgaGVhbHRoeSxcbiAgICAuLi5jb250ZXh0LFxuICB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gbG9nTmV0d29ya0luZm8ocG9ydDogbnVtYmVyLCBob3N0ID0gJ2xvY2FsaG9zdCcsIGNvbnRleHQ/OiBMb2dDb250ZXh0KSB7XG4gIGxvZ2dlci5pbmZvKCfwn4yQIFNlcnZlciBOZXR3b3JrIENvbmZpZ3VyYXRpb24nLCB7XG4gICAgcG9ydCxcbiAgICBob3N0LFxuICAgIHVybDogYGh0dHA6Ly8ke2hvc3R9OiR7cG9ydH1gLFxuICAgIC4uLmNvbnRleHQsXG4gIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBsb2dEYXRhYmFzZUNvbm5lY3Rpb24oc3RhdHVzOiAnY29ubmVjdGluZycgfCAnY29ubmVjdGVkJyB8ICdmYWlsZWQnLCBjb250ZXh0PzogTG9nQ29udGV4dCkge1xuICBjb25zdCBsZXZlbCA9IHN0YXR1cyA9PT0gJ2ZhaWxlZCcgPyAnZXJyb3InIDogJ2luZm8nXG4gIGNvbnN0IGVtb2ppID0gc3RhdHVzID09PSAnY29ubmVjdGVkJyA/ICfinIUnIDogc3RhdHVzID09PSAnY29ubmVjdGluZycgPyAn8J+UhCcgOiAn4p2MJ1xuICBsb2dnZXJbbGV2ZWxdKGAke2Vtb2ppfSBEYXRhYmFzZSAke3N0YXR1cy50b1VwcGVyQ2FzZSgpfWAsIHtcbiAgICBzdGF0dXMsXG4gICAgLi4uY29udGV4dCxcbiAgfSlcbn0iXSwibmFtZXMiOlsiY29uZmlnIiwiTG9nTGV2ZWwiLCJDb25zb2xlTG9nZ2VyIiwiY29uc3RydWN0b3IiLCJsZXZlbCIsInBhcnNlTG9nTGV2ZWwiLCJ0b0xvd2VyQ2FzZSIsInNob3VsZExvZyIsImZvcm1hdE1lc3NhZ2UiLCJtZXNzYWdlIiwiY29udGV4dCIsInRpbWVzdGFtcCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImJhc2VNZXNzYWdlIiwidG9VcHBlckNhc2UiLCJPYmplY3QiLCJrZXlzIiwibGVuZ3RoIiwibG9nZ2luZyIsInByZXR0eSIsIkpTT04iLCJzdHJpbmdpZnkiLCJlcnJvciIsImNvbnNvbGUiLCJ3YXJuIiwiaW5mbyIsImRlYnVnIiwibG9nZ2VyIiwibG9nRXJyb3IiLCJzdGFjayIsIm5hbWUiLCJsb2dBcGlSZXF1ZXN0IiwibWV0aG9kIiwidXJsIiwidXNlcklkIiwiZHVyYXRpb24iLCJ1bmRlZmluZWQiLCJsb2dBcGlFcnJvciIsImxvZ0RhdGFiYXNlUXVlcnkiLCJxdWVyeSIsImxvZ1VzZXJBY3Rpb24iLCJhY3Rpb24iLCJsb2dTeXN0ZW1FdmVudCIsImV2ZW50IiwibG9nU3RhcnR1cCIsImNvbXBvbmVudCIsInN0YXR1cyIsImxvZ0hlYWx0aENoZWNrIiwiaGVhbHRoeSIsImxvZ05ldHdvcmtJbmZvIiwicG9ydCIsImhvc3QiLCJsb2dEYXRhYmFzZUNvbm5lY3Rpb24iLCJlbW9qaSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/lib/logger.ts\n");

/***/ }),

/***/ "(api)/./src/repositories/base.repository.ts":
/*!*********************************************!*\
  !*** ./src/repositories/base.repository.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseRepository: () => (/* binding */ BaseRepository)\n/* harmony export */ });\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lib/db */ \"(api)/./src/lib/db.ts\");\n/* harmony import */ var _lib_logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../lib/logger */ \"(api)/./src/lib/logger.ts\");\n\n\nclass BaseRepository {\n    async findById(id) {\n        try {\n            const result = await _lib_db__WEBPACK_IMPORTED_MODULE_0__.db[this.tableName].findUnique({\n                where: {\n                    id\n                }\n            });\n            return result;\n        } catch (error) {\n            _lib_logger__WEBPACK_IMPORTED_MODULE_1__.logger.error(`Error finding ${this.tableName} by id`, {\n                id,\n                error\n            });\n            throw error;\n        }\n    }\n    async findMany(filters) {\n        try {\n            const result = await _lib_db__WEBPACK_IMPORTED_MODULE_0__.db[this.tableName].findMany(filters);\n            return result;\n        } catch (error) {\n            _lib_logger__WEBPACK_IMPORTED_MODULE_1__.logger.error(`Error finding many ${this.tableName}`, {\n                filters,\n                error\n            });\n            throw error;\n        }\n    }\n    async create(data) {\n        try {\n            const result = await _lib_db__WEBPACK_IMPORTED_MODULE_0__.db[this.tableName].create({\n                data\n            });\n            _lib_logger__WEBPACK_IMPORTED_MODULE_1__.logger.info(`Created ${this.tableName}`, {\n                id: result.id\n            });\n            return result;\n        } catch (error) {\n            _lib_logger__WEBPACK_IMPORTED_MODULE_1__.logger.error(`Error creating ${this.tableName}`, {\n                data,\n                error\n            });\n            throw error;\n        }\n    }\n    async update(id, data) {\n        try {\n            const result = await _lib_db__WEBPACK_IMPORTED_MODULE_0__.db[this.tableName].update({\n                where: {\n                    id\n                },\n                data\n            });\n            _lib_logger__WEBPACK_IMPORTED_MODULE_1__.logger.info(`Updated ${this.tableName}`, {\n                id\n            });\n            return result;\n        } catch (error) {\n            _lib_logger__WEBPACK_IMPORTED_MODULE_1__.logger.error(`Error updating ${this.tableName}`, {\n                id,\n                data,\n                error\n            });\n            throw error;\n        }\n    }\n    async delete(id) {\n        try {\n            await _lib_db__WEBPACK_IMPORTED_MODULE_0__.db[this.tableName].delete({\n                where: {\n                    id\n                }\n            });\n            _lib_logger__WEBPACK_IMPORTED_MODULE_1__.logger.info(`Deleted ${this.tableName}`, {\n                id\n            });\n        } catch (error) {\n            _lib_logger__WEBPACK_IMPORTED_MODULE_1__.logger.error(`Error deleting ${this.tableName}`, {\n                id,\n                error\n            });\n            throw error;\n        }\n    }\n    async count(filters) {\n        try {\n            const result = await _lib_db__WEBPACK_IMPORTED_MODULE_0__.db[this.tableName].count(filters);\n            return result;\n        } catch (error) {\n            _lib_logger__WEBPACK_IMPORTED_MODULE_1__.logger.error(`Error counting ${this.tableName}`, {\n                filters,\n                error\n            });\n            throw error;\n        }\n    }\n    async findManyWithPagination(filters = {}, page = 1, limit = 10) {\n        try {\n            const skip = (page - 1) * limit;\n            const [items, total] = await Promise.all([\n                _lib_db__WEBPACK_IMPORTED_MODULE_0__.db[this.tableName].findMany({\n                    ...filters,\n                    skip,\n                    take: limit\n                }),\n                _lib_db__WEBPACK_IMPORTED_MODULE_0__.db[this.tableName].count({\n                    where: filters.where\n                })\n            ]);\n            const totalPages = Math.ceil(total / limit);\n            return {\n                items,\n                total,\n                totalPages\n            };\n        } catch (error) {\n            _lib_logger__WEBPACK_IMPORTED_MODULE_1__.logger.error(`Error finding ${this.tableName} with pagination`, {\n                filters,\n                page,\n                limit,\n                error\n            });\n            throw error;\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvcmVwb3NpdG9yaWVzL2Jhc2UucmVwb3NpdG9yeS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBOEI7QUFDUTtBQUcvQixNQUFlRTtJQUdwQixNQUFNQyxTQUFTQyxFQUFVLEVBQXFCO1FBQzVDLElBQUk7WUFDRixNQUFNQyxTQUFTLE1BQU0sdUNBQVcsQ0FBQyxJQUFJLENBQUNDLFNBQVMsQ0FBQyxDQUFDQyxVQUFVLENBQUM7Z0JBQzFEQyxPQUFPO29CQUFFSjtnQkFBRztZQUNkO1lBQ0EsT0FBT0M7UUFDVCxFQUFFLE9BQU9JLE9BQU87WUFDZFIsK0NBQU1BLENBQUNRLEtBQUssQ0FBQyxDQUFDLGNBQWMsRUFBRSxJQUFJLENBQUNILFNBQVMsQ0FBQyxNQUFNLENBQUMsRUFBRTtnQkFBRUY7Z0JBQUlLO1lBQU07WUFDbEUsTUFBTUE7UUFDUjtJQUNGO0lBRUEsTUFBTUMsU0FBU0MsT0FBYSxFQUFnQjtRQUMxQyxJQUFJO1lBQ0YsTUFBTU4sU0FBUyxNQUFNLHVDQUFXLENBQUMsSUFBSSxDQUFDQyxTQUFTLENBQUMsQ0FBQ0ksUUFBUSxDQUFDQztZQUMxRCxPQUFPTjtRQUNULEVBQUUsT0FBT0ksT0FBTztZQUNkUiwrQ0FBTUEsQ0FBQ1EsS0FBSyxDQUFDLENBQUMsbUJBQW1CLEVBQUUsSUFBSSxDQUFDSCxTQUFTLENBQUMsQ0FBQyxFQUFFO2dCQUFFSztnQkFBU0Y7WUFBTTtZQUN0RSxNQUFNQTtRQUNSO0lBQ0Y7SUFFQSxNQUFNRyxPQUFPQyxJQUErQyxFQUFjO1FBQ3hFLElBQUk7WUFDRixNQUFNUixTQUFTLE1BQU0sdUNBQVcsQ0FBQyxJQUFJLENBQUNDLFNBQVMsQ0FBQyxDQUFDTSxNQUFNLENBQUM7Z0JBQ3REQztZQUNGO1lBQ0FaLCtDQUFNQSxDQUFDYSxJQUFJLENBQUMsQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDUixTQUFTLENBQUMsQ0FBQyxFQUFFO2dCQUFFRixJQUFJQyxPQUFPRCxFQUFFO1lBQUM7WUFDekQsT0FBT0M7UUFD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cG9zaXRvcmllcy9iYXNlLnJlcG9zaXRvcnkudHM/YWEwMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBkYiB9IGZyb20gJy4uL2xpYi9kYidcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJy4uL2xpYi9sb2dnZXInXG5pbXBvcnQgeyBSZXBvc2l0b3J5IH0gZnJvbSAnLi4vdHlwZXMnXG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBCYXNlUmVwb3NpdG9yeTxUPiBpbXBsZW1lbnRzIFJlcG9zaXRvcnk8VD4ge1xuICBwcm90ZWN0ZWQgYWJzdHJhY3QgdGFibGVOYW1lOiBzdHJpbmdcblxuICBhc3luYyBmaW5kQnlJZChpZDogc3RyaW5nKTogUHJvbWlzZTxUIHwgbnVsbD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCAoZGIgYXMgYW55KVt0aGlzLnRhYmxlTmFtZV0uZmluZFVuaXF1ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkIH1cbiAgICAgIH0pXG4gICAgICByZXR1cm4gcmVzdWx0XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcihgRXJyb3IgZmluZGluZyAke3RoaXMudGFibGVOYW1lfSBieSBpZGAsIHsgaWQsIGVycm9yIH0pXG4gICAgICB0aHJvdyBlcnJvclxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGZpbmRNYW55KGZpbHRlcnM/OiBhbnkpOiBQcm9taXNlPFRbXT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCAoZGIgYXMgYW55KVt0aGlzLnRhYmxlTmFtZV0uZmluZE1hbnkoZmlsdGVycylcbiAgICAgIHJldHVybiByZXN1bHRcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKGBFcnJvciBmaW5kaW5nIG1hbnkgJHt0aGlzLnRhYmxlTmFtZX1gLCB7IGZpbHRlcnMsIGVycm9yIH0pXG4gICAgICB0aHJvdyBlcnJvclxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZShkYXRhOiBPbWl0PFQsICdpZCcgfCAnY3JlYXRlZEF0JyB8ICd1cGRhdGVkQXQnPik6IFByb21pc2U8VD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCAoZGIgYXMgYW55KVt0aGlzLnRhYmxlTmFtZV0uY3JlYXRlKHtcbiAgICAgICAgZGF0YVxuICAgICAgfSlcbiAgICAgIGxvZ2dlci5pbmZvKGBDcmVhdGVkICR7dGhpcy50YWJsZU5hbWV9YCwgeyBpZDogcmVzdWx0LmlkIH0pXG4gICAgICByZXR1cm4gcmVzdWx0XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcihgRXJyb3IgY3JlYXRpbmcgJHt0aGlzLnRhYmxlTmFtZX1gLCB7IGRhdGEsIGVycm9yIH0pXG4gICAgICB0aHJvdyBlcnJvclxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZShpZDogc3RyaW5nLCBkYXRhOiBQYXJ0aWFsPFQ+KTogUHJvbWlzZTxUPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IChkYiBhcyBhbnkpW3RoaXMudGFibGVOYW1lXS51cGRhdGUoe1xuICAgICAgICB3aGVyZTogeyBpZCB9LFxuICAgICAgICBkYXRhXG4gICAgICB9KVxuICAgICAgbG9nZ2VyLmluZm8oYFVwZGF0ZWQgJHt0aGlzLnRhYmxlTmFtZX1gLCB7IGlkIH0pXG4gICAgICByZXR1cm4gcmVzdWx0XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcihgRXJyb3IgdXBkYXRpbmcgJHt0aGlzLnRhYmxlTmFtZX1gLCB7IGlkLCBkYXRhLCBlcnJvciB9KVxuICAgICAgdGhyb3cgZXJyb3JcbiAgICB9XG4gIH1cblxuICBhc3luYyBkZWxldGUoaWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCAoZGIgYXMgYW55KVt0aGlzLnRhYmxlTmFtZV0uZGVsZXRlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQgfVxuICAgICAgfSlcbiAgICAgIGxvZ2dlci5pbmZvKGBEZWxldGVkICR7dGhpcy50YWJsZU5hbWV9YCwgeyBpZCB9KVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoYEVycm9yIGRlbGV0aW5nICR7dGhpcy50YWJsZU5hbWV9YCwgeyBpZCwgZXJyb3IgfSlcbiAgICAgIHRocm93IGVycm9yXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgY291bnQoZmlsdGVycz86IGFueSk6IFByb21pc2U8bnVtYmVyPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IChkYiBhcyBhbnkpW3RoaXMudGFibGVOYW1lXS5jb3VudChmaWx0ZXJzKVxuICAgICAgcmV0dXJuIHJlc3VsdFxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoYEVycm9yIGNvdW50aW5nICR7dGhpcy50YWJsZU5hbWV9YCwgeyBmaWx0ZXJzLCBlcnJvciB9KVxuICAgICAgdGhyb3cgZXJyb3JcbiAgICB9XG4gIH1cblxuICBwcm90ZWN0ZWQgYXN5bmMgZmluZE1hbnlXaXRoUGFnaW5hdGlvbihcbiAgICBmaWx0ZXJzOiBhbnkgPSB7fSxcbiAgICBwYWdlOiBudW1iZXIgPSAxLFxuICAgIGxpbWl0OiBudW1iZXIgPSAxMFxuICApOiBQcm9taXNlPHsgaXRlbXM6IFRbXTsgdG90YWw6IG51bWJlcjsgdG90YWxQYWdlczogbnVtYmVyIH0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgc2tpcCA9IChwYWdlIC0gMSkgKiBsaW1pdFxuICAgICAgY29uc3QgW2l0ZW1zLCB0b3RhbF0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgIChkYiBhcyBhbnkpW3RoaXMudGFibGVOYW1lXS5maW5kTWFueSh7XG4gICAgICAgICAgLi4uZmlsdGVycyxcbiAgICAgICAgICBza2lwLFxuICAgICAgICAgIHRha2U6IGxpbWl0LFxuICAgICAgICB9KSxcbiAgICAgICAgKGRiIGFzIGFueSlbdGhpcy50YWJsZU5hbWVdLmNvdW50KHtcbiAgICAgICAgICB3aGVyZTogZmlsdGVycy53aGVyZSxcbiAgICAgICAgfSksXG4gICAgICBdKVxuXG4gICAgICBjb25zdCB0b3RhbFBhZ2VzID0gTWF0aC5jZWlsKHRvdGFsIC8gbGltaXQpXG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGl0ZW1zLFxuICAgICAgICB0b3RhbCxcbiAgICAgICAgdG90YWxQYWdlcyxcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKGBFcnJvciBmaW5kaW5nICR7dGhpcy50YWJsZU5hbWV9IHdpdGggcGFnaW5hdGlvbmAsIHtcbiAgICAgICAgZmlsdGVycyxcbiAgICAgICAgcGFnZSxcbiAgICAgICAgbGltaXQsXG4gICAgICAgIGVycm9yLFxuICAgICAgfSlcbiAgICAgIHRocm93IGVycm9yXG4gICAgfVxuICB9XG59Il0sIm5hbWVzIjpbImRiIiwibG9nZ2VyIiwiQmFzZVJlcG9zaXRvcnkiLCJmaW5kQnlJZCIsImlkIiwicmVzdWx0IiwidGFibGVOYW1lIiwiZmluZFVuaXF1ZSIsIndoZXJlIiwiZXJyb3IiLCJmaW5kTWFueSIsImZpbHRlcnMiLCJjcmVhdGUiLCJkYXRhIiwiaW5mbyIsInVwZGF0ZSIsImRlbGV0ZSIsImNvdW50IiwiZmluZE1hbnlXaXRoUGFnaW5hdGlvbiIsInBhZ2UiLCJsaW1pdCIsInNraXAiLCJpdGVtcyIsInRvdGFsIiwiUHJvbWlzZSIsImFsbCIsInRha2UiLCJ0b3RhbFBhZ2VzIiwiTWF0aCIsImNlaWwiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/repositories/base.repository.ts\n");

/***/ }),

/***/ "(api)/./src/repositories/video.repository.ts":
/*!**********************************************!*\
  !*** ./src/repositories/video.repository.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   VideoRepositoryImpl: () => (/* binding */ VideoRepositoryImpl),\n/* harmony export */   videoRepository: () => (/* binding */ videoRepository)\n/* harmony export */ });\n/* harmony import */ var _base_repository__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.repository */ \"(api)/./src/repositories/base.repository.ts\");\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../lib/db */ \"(api)/./src/lib/db.ts\");\n/* harmony import */ var _lib_logger__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../lib/logger */ \"(api)/./src/lib/logger.ts\");\n/* harmony import */ var _lib_constants__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../lib/constants */ \"(api)/./src/lib/constants.ts\");\n\n\n\n\nclass VideoRepositoryImpl extends _base_repository__WEBPACK_IMPORTED_MODULE_0__.BaseRepository {\n    async findByUserId(userId) {\n        try {\n            const videos = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.video.findMany({\n                where: {\n                    userId\n                },\n                include: {\n                    user: {\n                        select: {\n                            id: true,\n                            username: true,\n                            firstName: true,\n                            lastName: true,\n                            avatar: true\n                        }\n                    },\n                    tags: {\n                        include: {\n                            tag: true\n                        }\n                    },\n                    ratings: {\n                        include: {\n                            user: {\n                                select: {\n                                    id: true,\n                                    username: true,\n                                    firstName: true,\n                                    lastName: true,\n                                    avatar: true\n                                }\n                            },\n                            tag: true\n                        }\n                    },\n                    _count: {\n                        select: {\n                            ratings: true\n                        }\n                    }\n                },\n                orderBy: {\n                    createdAt: \"desc\"\n                }\n            });\n            return videos;\n        } catch (error) {\n            _lib_logger__WEBPACK_IMPORTED_MODULE_2__.logger.error(\"Error finding videos by user id\", {\n                userId,\n                error\n            });\n            throw error;\n        }\n    }\n    async findByTags(tags) {\n        try {\n            const videos = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.video.findMany({\n                where: {\n                    tags: {\n                        some: {\n                            tag: {\n                                name: {\n                                    in: tags\n                                }\n                            }\n                        }\n                    }\n                },\n                include: {\n                    user: {\n                        select: {\n                            id: true,\n                            username: true,\n                            firstName: true,\n                            lastName: true,\n                            avatar: true\n                        }\n                    },\n                    tags: {\n                        include: {\n                            tag: true\n                        }\n                    },\n                    ratings: {\n                        include: {\n                            user: {\n                                select: {\n                                    id: true,\n                                    username: true,\n                                    firstName: true,\n                                    lastName: true,\n                                    avatar: true\n                                }\n                            },\n                            tag: true\n                        }\n                    },\n                    _count: {\n                        select: {\n                            ratings: true\n                        }\n                    }\n                },\n                orderBy: {\n                    createdAt: \"desc\"\n                }\n            });\n            return videos;\n        } catch (error) {\n            _lib_logger__WEBPACK_IMPORTED_MODULE_2__.logger.error(\"Error finding videos by tags\", {\n                tags,\n                error\n            });\n            throw error;\n        }\n    }\n    async search(query, includeNsfw = true) {\n        try {\n            const videos = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.video.findMany({\n                where: {\n                    AND: [\n                        {\n                            OR: [\n                                {\n                                    title: {\n                                        contains: query,\n                                        mode: \"insensitive\"\n                                    }\n                                },\n                                {\n                                    description: {\n                                        contains: query,\n                                        mode: \"insensitive\"\n                                    }\n                                },\n                                {\n                                    tags: {\n                                        some: {\n                                            tag: {\n                                                name: {\n                                                    contains: query,\n                                                    mode: \"insensitive\"\n                                                }\n                                            }\n                                        }\n                                    }\n                                }\n                            ]\n                        },\n                        ...includeNsfw ? [] : [\n                            {\n                                isNsfw: false\n                            }\n                        ]\n                    ]\n                },\n                include: {\n                    user: {\n                        select: {\n                            id: true,\n                            username: true,\n                            firstName: true,\n                            lastName: true,\n                            avatar: true\n                        }\n                    },\n                    tags: {\n                        include: {\n                            tag: true\n                        }\n                    },\n                    ratings: {\n                        include: {\n                            user: {\n                                select: {\n                                    id: true,\n                                    username: true,\n                                    firstName: true,\n                                    lastName: true,\n                                    avatar: true\n                                }\n                            },\n                            tag: true\n                        }\n                    },\n                    _count: {\n                        select: {\n                            ratings: true\n                        }\n                    }\n                },\n                orderBy: {\n                    createdAt: \"desc\"\n                }\n            });\n            return videos;\n        } catch (error) {\n            _lib_logger__WEBPACK_IMPORTED_MODULE_2__.logger.error(\"Error searching videos\", {\n                query,\n                error\n            });\n            throw error;\n        }\n    }\n    async findWithRatings(id) {\n        try {\n            const video = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.video.findUnique({\n                where: {\n                    id\n                },\n                include: {\n                    user: {\n                        select: {\n                            id: true,\n                            username: true,\n                            firstName: true,\n                            lastName: true,\n                            avatar: true\n                        }\n                    },\n                    tags: {\n                        include: {\n                            tag: true\n                        }\n                    },\n                    ratings: {\n                        include: {\n                            user: {\n                                select: {\n                                    id: true,\n                                    username: true,\n                                    firstName: true,\n                                    lastName: true,\n                                    avatar: true\n                                }\n                            },\n                            tag: true\n                        }\n                    },\n                    _count: {\n                        select: {\n                            ratings: true\n                        }\n                    }\n                }\n            });\n            return video;\n        } catch (error) {\n            _lib_logger__WEBPACK_IMPORTED_MODULE_2__.logger.error(\"Error finding video with ratings\", {\n                id,\n                error\n            });\n            throw error;\n        }\n    }\n    async findWithFilters(filters) {\n        try {\n            const { search, tags, tagRatings, includeNsfw = true, userId, sortBy = \"createdAt\", sortOrder = \"desc\", page = 1, limit = _lib_constants__WEBPACK_IMPORTED_MODULE_3__.PAGINATION.DEFAULT_PAGE_SIZE } = filters;\n            const where = {};\n            // Add search filter\n            if (search) {\n                where.OR = [\n                    {\n                        title: {\n                            contains: search,\n                            mode: \"insensitive\"\n                        }\n                    },\n                    {\n                        description: {\n                            contains: search,\n                            mode: \"insensitive\"\n                        }\n                    }\n                ];\n            }\n            // Add tags filter\n            if (tags && tags.length > 0) {\n                where.tags = {\n                    some: {\n                        tag: {\n                            name: {\n                                in: tags\n                            }\n                        }\n                    }\n                };\n            }\n            // Add user filter\n            if (userId) {\n                where.userId = userId;\n            }\n            // Add NSFW filter\n            if (!includeNsfw) {\n                where.isNsfw = false;\n            }\n            // Add tagRatings filter - we'll filter by having the specified tags first\n            // then post-process to check rating ranges\n            if (tagRatings && tagRatings.length > 0) {\n                const tagNames = tagRatings.map((tr)=>tr.tagName);\n                // Ensure videos have all the specified tags\n                where.tags = {\n                    some: {\n                        tag: {\n                            name: {\n                                in: tagNames\n                            }\n                        }\n                    }\n                };\n            }\n            const skip = (page - 1) * limit;\n            // Build orderBy\n            const orderBy = {};\n            if (sortBy === \"ratings\") {\n                orderBy._count = {\n                    ratings: sortOrder\n                };\n            } else {\n                orderBy[sortBy] = sortOrder;\n            }\n            let [videos, total] = await Promise.all([\n                _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.video.findMany({\n                    where,\n                    include: {\n                        user: {\n                            select: {\n                                id: true,\n                                username: true,\n                                firstName: true,\n                                lastName: true,\n                                avatar: true\n                            }\n                        },\n                        tags: {\n                            include: {\n                                tag: true\n                            }\n                        },\n                        ratings: {\n                            include: {\n                                user: {\n                                    select: {\n                                        id: true,\n                                        username: true,\n                                        firstName: true,\n                                        lastName: true,\n                                        avatar: true\n                                    }\n                                },\n                                tag: true\n                            }\n                        },\n                        _count: {\n                            select: {\n                                ratings: true\n                            }\n                        }\n                    },\n                    orderBy,\n                    skip,\n                    take: limit * 2\n                }),\n                _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.video.count({\n                    where\n                })\n            ]);\n            // Apply tagRatings filter in post-processing\n            if (tagRatings && tagRatings.length > 0) {\n                videos = videos.filter((video)=>{\n                    // Check if video has all required tags with ratings in the specified ranges\n                    return tagRatings.every(({ tagName, minRating, maxRating })=>{\n                        // Find the tag in the video\n                        const videoTag = video.tags.find((vt)=>vt.tag.name === tagName);\n                        if (!videoTag) return false;\n                        // Calculate average rating for this tag on this video\n                        const tagRatings = video.ratings.filter((r)=>r.tag.name === tagName);\n                        if (tagRatings.length === 0) return false;\n                        const averageRating = tagRatings.reduce((sum, r)=>sum + r.level, 0) / tagRatings.length;\n                        // Check if average rating is within the specified range\n                        return averageRating >= minRating && averageRating <= maxRating;\n                    });\n                });\n                // Update total count after filtering\n                total = videos.length;\n                // Apply pagination after filtering\n                videos = videos.slice(0, limit);\n            }\n            const totalPages = Math.ceil(total / limit);\n            return {\n                videos,\n                total,\n                totalPages\n            };\n        } catch (error) {\n            _lib_logger__WEBPACK_IMPORTED_MODULE_2__.logger.error(\"Error finding videos with filters\", {\n                filters,\n                error\n            });\n            throw error;\n        }\n    }\n    async createWithTags(videoData, tagNames) {\n        try {\n            const video = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.video.create({\n                data: {\n                    ...videoData,\n                    tags: {\n                        create: tagNames.map((tagName)=>({\n                                tag: {\n                                    connectOrCreate: {\n                                        where: {\n                                            name: tagName\n                                        },\n                                        create: {\n                                            name: tagName\n                                        }\n                                    }\n                                }\n                            }))\n                    }\n                },\n                include: {\n                    user: {\n                        select: {\n                            id: true,\n                            username: true,\n                            firstName: true,\n                            lastName: true,\n                            avatar: true\n                        }\n                    },\n                    tags: {\n                        include: {\n                            tag: true\n                        }\n                    },\n                    _count: {\n                        select: {\n                            ratings: true\n                        }\n                    }\n                }\n            });\n            _lib_logger__WEBPACK_IMPORTED_MODULE_2__.logger.info(\"Created video with tags\", {\n                videoId: video.id,\n                tagNames\n            });\n            return video;\n        } catch (error) {\n            _lib_logger__WEBPACK_IMPORTED_MODULE_2__.logger.error(\"Error creating video with tags\", {\n                videoData,\n                tagNames,\n                error\n            });\n            throw error;\n        }\n    }\n    async getVideoStats(videoId) {\n        try {\n            const [totalRatings, ratingsByTag] = await Promise.all([\n                _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.rating.count({\n                    where: {\n                        videoId\n                    }\n                }),\n                _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.rating.groupBy({\n                    by: [\n                        \"tagId\"\n                    ],\n                    where: {\n                        videoId\n                    },\n                    _avg: {\n                        level: true\n                    },\n                    _count: {\n                        level: true\n                    }\n                })\n            ]);\n            // Get tag names\n            const tagIds = ratingsByTag.map((r)=>r.tagId);\n            const tags = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.tag.findMany({\n                where: {\n                    id: {\n                        in: tagIds\n                    }\n                }\n            });\n            const tagMap = tags.reduce((acc, tag)=>{\n                acc[tag.id] = tag.name;\n                return acc;\n            }, {});\n            const averageRatingByTag = ratingsByTag.map((rating)=>({\n                    tagName: tagMap[rating.tagId] || \"Unknown\",\n                    averageRating: rating._avg.level || 0,\n                    count: rating._count.level\n                }));\n            return {\n                totalRatings,\n                averageRatingByTag\n            };\n        } catch (error) {\n            _lib_logger__WEBPACK_IMPORTED_MODULE_2__.logger.error(\"Error getting video stats\", {\n                videoId,\n                error\n            });\n            throw error;\n        }\n    }\n    async getTrendingVideos(limit = 10) {\n        try {\n            // Get videos with most ratings in the last 7 days\n            const sevenDaysAgo = new Date();\n            sevenDaysAgo.setDate(sevenDaysAgo.getDate() - 7);\n            const videos = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.video.findMany({\n                where: {\n                    createdAt: {\n                        gte: sevenDaysAgo\n                    }\n                },\n                include: {\n                    user: {\n                        select: {\n                            id: true,\n                            username: true,\n                            firstName: true,\n                            lastName: true,\n                            avatar: true\n                        }\n                    },\n                    tags: {\n                        include: {\n                            tag: true\n                        }\n                    },\n                    _count: {\n                        select: {\n                            ratings: true\n                        }\n                    }\n                },\n                orderBy: {\n                    ratings: {\n                        _count: \"desc\"\n                    }\n                },\n                take: limit\n            });\n            return videos;\n        } catch (error) {\n            _lib_logger__WEBPACK_IMPORTED_MODULE_2__.logger.error(\"Error getting trending videos\", {\n                limit,\n                error\n            });\n            throw error;\n        }\n    }\n    async addTagToVideo(videoId, tagId) {\n        try {\n            await _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.videoTag.create({\n                data: {\n                    videoId,\n                    tagId\n                }\n            });\n        } catch (error) {\n            // Handle duplicate key error (tag already exists on video)\n            if (error instanceof Error && error.message.includes(\"Unique constraint\")) {\n                _lib_logger__WEBPACK_IMPORTED_MODULE_2__.logger.info(\"Tag already exists on video\", {\n                    videoId,\n                    tagId\n                });\n                return;\n            }\n            _lib_logger__WEBPACK_IMPORTED_MODULE_2__.logger.error(\"Error adding tag to video\", {\n                videoId,\n                tagId,\n                error\n            });\n            throw error;\n        }\n    }\n    async removeTagFromVideo(videoId, tagId) {\n        try {\n            await _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.videoTag.deleteMany({\n                where: {\n                    videoId,\n                    tagId\n                }\n            });\n        } catch (error) {\n            _lib_logger__WEBPACK_IMPORTED_MODULE_2__.logger.error(\"Error removing tag from video\", {\n                videoId,\n                tagId,\n                error\n            });\n            throw error;\n        }\n    }\n    constructor(...args){\n        super(...args);\n        this.tableName = \"video\";\n    }\n}\n// Export singleton instance\nconst videoRepository = new VideoRepositoryImpl();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvcmVwb3NpdG9yaWVzL3ZpZGVvLnJlcG9zaXRvcnkudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQ2tEO0FBQ3BCO0FBQ1E7QUFDTztBQUV0QyxNQUFNSSw0QkFBNEJKLDREQUFjQTtJQUdyRCxNQUFNSyxhQUFhQyxNQUFjLEVBQWtCO1FBQ2pELElBQUk7WUFDRixNQUFNQyxTQUFTLE1BQU1OLHVDQUFFQSxDQUFDTyxLQUFLLENBQUNDLFFBQVEsQ0FBQztnQkFDckNDLE9BQU87b0JBQUVKO2dCQUFPO2dCQUNoQkssU0FBUztvQkFDUEMsTUFBTTt3QkFDSkMsUUFBUTs0QkFDTkMsSUFBSTs0QkFDSkMsVUFBVTs0QkFDVkMsV0FBVzs0QkFDWEMsVUFBVTs0QkFDVkMsUUFBUTt3QkFDVjtvQkFDRjtvQkFDQUMsTUFBTTt3QkFDSlIsU0FBUzs0QkFDUFMsS0FBSzt3QkFDUDtvQkFDRjtvQkFDQUMsU0FBUzt3QkFDUFYsU0FBUzs0QkFDUEMsTUFBTTtnQ0FDSkMsUUFBUTtvQ0FDTkMsSUFBSTtvQ0FDSkMsVUFBVTtvQ0FDVkMsV0FBVztvQ0FDWEMsVUFBVTtvQ0FDVkMsUUFBUTtnQ0FDVjs0QkFDRjs0QkFDQUUsS0FBSzt3QkFDUDtvQkFDRjtvQkFDQUUsUUFBUTt3QkFDTlQsUUFBUTs0QkFDTlEsU0FBUzt3QkFDWDtvQkFDRjtnQkFDRjtnQkFDQUUsU0FBUztvQkFDUEMsV0FBVztnQkFDYjtZQUNGO1lBQ0EsT0FBT2pCO1FBQ1QsRUFBRSxPQUFPa0IsT0FBTztZQUNkdkIsK0NBQU1BLENBQUN1QixLQUFLLENBQUMsbUNBQW1DO2dCQUFFbkI7Z0JBQVFtQjtZQUFNO1lBQ2hFLE1BQU1BO1FBQ1I7SUFDRjtJQUVBLE1BQU1DLFdBQVdQLElBQWMsRUFBa0I7UUFDL0MsSUFBSTtZQUNGLE1BQU1aLFNBQVMsTUFBTU4sdUNBQUVBLENBQUNPLEtBQUssQ0FBQ0MsUUFBUSxDQUFDO2dCQUNyQ0MsT0FBTztvQkFDTFMsTUFBTTt3QkFDSlEsTUFBTTs0QkFDSlAsS0FBSztnQ0FDSFEsTUFBTTtvQ0FDSkMsSUFBSVY7Z0NBQ047NEJBQ0Y7d0JBQ0Y7b0JBQ0Y7Z0JBQ0Y7Z0JBQ0FSLFNBQVM7b0JBQ1BDLE1BQU07d0JBQ0pDLFFBQVE7NEJBQ05DLElBQUk7NEJBQ0pDLFVBQVU7NEJBQ1ZDLFdBQVc7NEJBQ1hDLFVBQVU7NEJBQ1ZDLFFBQVE7d0JBQ1Y7b0JBQ0Y7b0JBQ0FDLE1BQU07d0JBQ0pSLFNBQVM7NEJBQ1BTLEtBQUs7d0JBQ1A7b0JBQ0Y7b0JBQ0FDLFNBQVM7d0JBQ1BWLFNBQVM7NEJBQ1BDLE1BQU07Z0NBQ0pDLFFBQVE7b0NBQ05DLElBQUk7b0NBQ0pDLFVBQVU7b0NBQ1ZDLFdBQVc7b0NBQ1hDLFVBQVU7b0NBQ1ZDLFFBQVE7Z0NBQ1Y7NEJBQ0Y7NEJBQ0FFLEtBQUs7d0JBQ1A7b0JBQ0Y7b0JBQ0FFLFFBQVE7d0JBQ05ULFFBQVE7NEJBQ05RLFNBQVM7d0JBQ1g7b0JBQ0Y7Z0JBQ0Y7Z0JBQ0FFLFNBQVM7b0JBQ1BDLFdBQVc7Z0JBQ2I7WUFDRjtZQUNBLE9BQU9qQjtRQUNULEVBQUUsT0FBT2tCLE9BQU87WUFDZHZCLCtDQUFNQSxDQUFDdUIsS0FBSyxDQUFDLGdDQUFnQztnQkFBRU47Z0JBQU1NO1lBQU07WUFDM0QsTUFBTUE7UUFDUjtJQUNGO0lBRUEsTUFBTUssT0FBT0MsS0FBYSxFQUFFQyxjQUF1QixJQUFJLEVBQWtCO1FBQ3ZFLElBQUk7WUFDRixNQUFNekIsU0FBUyxNQUFNTix1Q0FBRUEsQ0FBQ08sS0FBSyxDQUFDQyxRQUFRLENBQUM7Z0JBQ3JDQyxPQUFPO29CQUNMdUIsS0FBSzt3QkFDSDs0QkFDRUMsSUFBSTtnQ0FDRjtvQ0FDRUMsT0FBTzt3Q0FDTEMsVUFBVUw7d0NBQ1ZNLE1BQU07b0NBQ1I7Z0NBQ0Y7Z0NBQ0E7b0NBQ0VDLGFBQWE7d0NBQ1hGLFVBQVVMO3dDQUNWTSxNQUFNO29DQUNSO2dDQUNGO2dDQUNBO29DQUNFbEIsTUFBTTt3Q0FDSlEsTUFBTTs0Q0FDSlAsS0FBSztnREFDSFEsTUFBTTtvREFDSlEsVUFBVUw7b0RBQ1ZNLE1BQU07Z0RBQ1I7NENBQ0Y7d0NBQ0Y7b0NBQ0Y7Z0NBQ0Y7NkJBQ0Q7d0JBQ0g7MkJBQ0lMLGNBQWMsRUFBRSxHQUFHOzRCQUFDO2dDQUFFTyxRQUFROzRCQUFNO3lCQUFFO3FCQUMzQztnQkFDSDtnQkFDQTVCLFNBQVM7b0JBQ1BDLE1BQU07d0JBQ0pDLFFBQVE7NEJBQ05DLElBQUk7NEJBQ0pDLFVBQVU7NEJBQ1ZDLFdBQVc7NEJBQ1hDLFVBQVU7NEJBQ1ZDLFFBQVE7d0JBQ1Y7b0JBQ0Y7b0JBQ0FDLE1BQU07d0JBQ0pSLFNBQVM7NEJBQ1BTLEtBQUs7d0JBQ1A7b0JBQ0Y7b0JBQ0FDLFNBQVM7d0JBQ1BWLFNBQVM7NEJBQ1BDLE1BQU07Z0NBQ0pDLFFBQVE7b0NBQ05DLElBQUk7b0NBQ0pDLFVBQVU7b0NBQ1ZDLFdBQVc7b0NBQ1hDLFVBQVU7b0NBQ1ZDLFFBQVE7Z0NBQ1Y7NEJBQ0Y7NEJBQ0FFLEtBQUs7d0JBQ1A7b0JBQ0Y7b0JBQ0FFLFFBQVE7d0JBQ05ULFFBQVE7NEJBQ05RLFNBQVM7d0JBQ1g7b0JBQ0Y7Z0JBQ0Y7Z0JBQ0FFLFNBQVM7b0JBQ1BDLFdBQVc7Z0JBQ2I7WUFDRjtZQUNBLE9BQU9qQjtRQUNULEVBQUUsT0FBT2tCLE9BQU87WUFDZHZCLCtDQUFNQSxDQUFDdUIsS0FBSyxDQUFDLDBCQUEwQjtnQkFBRU07Z0JBQU9OO1lBQU07WUFDdEQsTUFBTUE7UUFDUjtJQUNGO0lBRUEsTUFBTWUsZ0JBQWdCMUIsRUFBVSxFQUF1QjtRQUNyRCxJQUFJO1lBQ0YsTUFBTU4sUUFBUSxNQUFNUCx1Q0FBRUEsQ0FBQ08sS0FBSyxDQUFDaUMsVUFBVSxDQUFDO2dCQUN0Qy9CLE9BQU87b0JBQUVJO2dCQUFHO2dCQUNaSCxTQUFTO29CQUNQQyxNQUFNO3dCQUNKQyxRQUFROzRCQUNOQyxJQUFJOzRCQUNKQyxVQUFVOzRCQUNWQyxXQUFXOzRCQUNYQyxVQUFVOzRCQUNWQyxRQUFRO3dCQUNWO29CQUNGO29CQUNBQyxNQUFNO3dCQUNKUixTQUFTOzRCQUNQUyxLQUFLO3dCQUNQO29CQUNGO29CQUNBQyxTQUFTO3dCQUNQVixTQUFTOzRCQUNQQyxNQUFNO2dDQUNKQyxRQUFRO29DQUNOQyxJQUFJO29DQUNKQyxVQUFVO29DQUNWQyxXQUFXO29DQUNYQyxVQUFVO29DQUNWQyxRQUFRO2dDQUNWOzRCQUNGOzRCQUNBRSxLQUFLO3dCQUNQO29CQUNGO29CQUNBRSxRQUFRO3dCQUNOVCxRQUFROzRCQUNOUSxTQUFTO3dCQUNYO29CQUNGO2dCQUNGO1lBQ0Y7WUFDQSxPQUFPYjtRQUNULEVBQUUsT0FBT2lCLE9BQU87WUFDZHZCLCtDQUFNQSxDQUFDdUIsS0FBSyxDQUFDLG9DQUFvQztnQkFBRVg7Z0JBQUlXO1lBQU07WUFDN0QsTUFBTUE7UUFDUjtJQUNGO0lBRUEsTUFBTWlCLGdCQUFnQkMsT0FBcUIsRUFJeEM7UUFDRCxJQUFJO1lBQ0YsTUFBTSxFQUNKYixNQUFNLEVBQ05YLElBQUksRUFDSnlCLFVBQVUsRUFDVlosY0FBYyxJQUFJLEVBQ2xCMUIsTUFBTSxFQUNOdUMsU0FBUyxXQUFXLEVBQ3BCQyxZQUFZLE1BQU0sRUFDbEJDLE9BQU8sQ0FBQyxFQUNSQyxRQUFRN0Msc0RBQVVBLENBQUM4QyxpQkFBaUIsRUFDckMsR0FBR047WUFFSixNQUFNakMsUUFBYSxDQUFDO1lBRXBCLG9CQUFvQjtZQUNwQixJQUFJb0IsUUFBUTtnQkFDVnBCLE1BQU13QixFQUFFLEdBQUc7b0JBQ1Q7d0JBQ0VDLE9BQU87NEJBQ0xDLFVBQVVOOzRCQUNWTyxNQUFNO3dCQUNSO29CQUNGO29CQUNBO3dCQUNFQyxhQUFhOzRCQUNYRixVQUFVTjs0QkFDVk8sTUFBTTt3QkFDUjtvQkFDRjtpQkFDRDtZQUNIO1lBRUEsa0JBQWtCO1lBQ2xCLElBQUlsQixRQUFRQSxLQUFLK0IsTUFBTSxHQUFHLEdBQUc7Z0JBQzNCeEMsTUFBTVMsSUFBSSxHQUFHO29CQUNYUSxNQUFNO3dCQUNKUCxLQUFLOzRCQUNIUSxNQUFNO2dDQUNKQyxJQUFJVjs0QkFDTjt3QkFDRjtvQkFDRjtnQkFDRjtZQUNGO1lBRUEsa0JBQWtCO1lBQ2xCLElBQUliLFFBQVE7Z0JBQ1ZJLE1BQU1KLE1BQU0sR0FBR0E7WUFDakI7WUFFQSxrQkFBa0I7WUFDbEIsSUFBSSxDQUFDMEIsYUFBYTtnQkFDaEJ0QixNQUFNNkIsTUFBTSxHQUFHO1lBQ2pCO1lBRUEsMEVBQTBFO1lBQzFFLDJDQUEyQztZQUMzQyxJQUFJSyxjQUFjQSxXQUFXTSxNQUFNLEdBQUcsR0FBRztnQkFDdkMsTUFBTUMsV0FBV1AsV0FBV1EsR0FBRyxDQUFDQyxDQUFBQSxLQUFNQSxHQUFHQyxPQUFPO2dCQUNoRCw0Q0FBNEM7Z0JBQzVDNUMsTUFBTVMsSUFBSSxHQUFHO29CQUNYUSxNQUFNO3dCQUNKUCxLQUFLOzRCQUNIUSxNQUFNO2dDQUNKQyxJQUFJc0I7NEJBQ047d0JBQ0Y7b0JBQ0Y7Z0JBQ0Y7WUFDRjtZQUVBLE1BQU1JLE9BQU8sQ0FBQ1IsT0FBTyxLQUFLQztZQUUxQixnQkFBZ0I7WUFDaEIsTUFBTXpCLFVBQWUsQ0FBQztZQUN0QixJQUFJc0IsV0FBVyxXQUFXO2dCQUN4QnRCLFFBQVFELE1BQU0sR0FBRztvQkFDZkQsU0FBU3lCO2dCQUNYO1lBQ0YsT0FBTztnQkFDTHZCLE9BQU8sQ0FBQ3NCLE9BQU8sR0FBR0M7WUFDcEI7WUFFQSxJQUFJLENBQUN2QyxRQUFRaUQsTUFBTSxHQUFHLE1BQU1DLFFBQVFDLEdBQUcsQ0FBQztnQkFDdEN6RCx1Q0FBRUEsQ0FBQ08sS0FBSyxDQUFDQyxRQUFRLENBQUM7b0JBQ2hCQztvQkFDQUMsU0FBUzt3QkFDUEMsTUFBTTs0QkFDSkMsUUFBUTtnQ0FDTkMsSUFBSTtnQ0FDSkMsVUFBVTtnQ0FDVkMsV0FBVztnQ0FDWEMsVUFBVTtnQ0FDVkMsUUFBUTs0QkFDVjt3QkFDRjt3QkFDQUMsTUFBTTs0QkFDSlIsU0FBUztnQ0FDUFMsS0FBSzs0QkFDUDt3QkFDRjt3QkFDQUMsU0FBUzs0QkFDUFYsU0FBUztnQ0FDUEMsTUFBTTtvQ0FDSkMsUUFBUTt3Q0FDTkMsSUFBSTt3Q0FDSkMsVUFBVTt3Q0FDVkMsV0FBVzt3Q0FDWEMsVUFBVTt3Q0FDVkMsUUFBUTtvQ0FDVjtnQ0FDRjtnQ0FDQUUsS0FBSzs0QkFDUDt3QkFDRjt3QkFDQUUsUUFBUTs0QkFDTlQsUUFBUTtnQ0FDTlEsU0FBUzs0QkFDWDt3QkFDRjtvQkFDRjtvQkFDQUU7b0JBQ0FnQztvQkFDQUksTUFBTVgsUUFBUTtnQkFDaEI7Z0JBQ0EvQyx1Q0FBRUEsQ0FBQ08sS0FBSyxDQUFDb0QsS0FBSyxDQUFDO29CQUFFbEQ7Z0JBQU07YUFDeEI7WUFFRCw2Q0FBNkM7WUFDN0MsSUFBSWtDLGNBQWNBLFdBQVdNLE1BQU0sR0FBRyxHQUFHO2dCQUN2QzNDLFNBQVNBLE9BQU9zRCxNQUFNLENBQUNyRCxDQUFBQTtvQkFDckIsNEVBQTRFO29CQUM1RSxPQUFPb0MsV0FBV2tCLEtBQUssQ0FBQyxDQUFDLEVBQUVSLE9BQU8sRUFBRVMsU0FBUyxFQUFFQyxTQUFTLEVBQUU7d0JBQ3hELDRCQUE0Qjt3QkFDNUIsTUFBTUMsV0FBV3pELE1BQU1XLElBQUksQ0FBQytDLElBQUksQ0FBQ0MsQ0FBQUEsS0FBTUEsR0FBRy9DLEdBQUcsQ0FBQ1EsSUFBSSxLQUFLMEI7d0JBQ3ZELElBQUksQ0FBQ1csVUFBVSxPQUFPO3dCQUV0QixzREFBc0Q7d0JBQ3RELE1BQU1yQixhQUFhcEMsTUFBTWEsT0FBTyxDQUFDd0MsTUFBTSxDQUFDTyxDQUFBQSxJQUFLQSxFQUFFaEQsR0FBRyxDQUFDUSxJQUFJLEtBQUswQjt3QkFDNUQsSUFBSVYsV0FBV00sTUFBTSxLQUFLLEdBQUcsT0FBTzt3QkFFcEMsTUFBTW1CLGdCQUFnQnpCLFdBQVcwQixNQUFNLENBQUMsQ0FBQ0MsS0FBS0gsSUFBTUcsTUFBTUgsRUFBRUksS0FBSyxFQUFFLEtBQUs1QixXQUFXTSxNQUFNO3dCQUV6Rix3REFBd0Q7d0JBQ3hELE9BQU9tQixpQkFBaUJOLGFBQWFNLGlCQUFpQkw7b0JBQ3hEO2dCQUNGO2dCQUVBLHFDQUFxQztnQkFDckNSLFFBQVFqRCxPQUFPMkMsTUFBTTtnQkFFckIsbUNBQW1DO2dCQUNuQzNDLFNBQVNBLE9BQU9rRSxLQUFLLENBQUMsR0FBR3pCO1lBQzNCO1lBRUEsTUFBTTBCLGFBQWFDLEtBQUtDLElBQUksQ0FBQ3BCLFFBQVFSO1lBRXJDLE9BQU87Z0JBQ0x6QztnQkFDQWlEO2dCQUNBa0I7WUFDRjtRQUNGLEVBQUUsT0FBT2pELE9BQU87WUFDZHZCLCtDQUFNQSxDQUFDdUIsS0FBSyxDQUFDLHFDQUFxQztnQkFBRWtCO2dCQUFTbEI7WUFBTTtZQUNuRSxNQUFNQTtRQUNSO0lBQ0Y7SUFFQSxNQUFNb0QsZUFDSkMsU0FBc0YsRUFDdEYzQixRQUFrQixFQUNKO1FBQ2QsSUFBSTtZQUNGLE1BQU0zQyxRQUFRLE1BQU1QLHVDQUFFQSxDQUFDTyxLQUFLLENBQUN1RSxNQUFNLENBQUM7Z0JBQ2xDQyxNQUFNO29CQUNKLEdBQUdGLFNBQVM7b0JBQ1ozRCxNQUFNO3dCQUNKNEQsUUFBUTVCLFNBQVNDLEdBQUcsQ0FBQ0UsQ0FBQUEsVUFBWTtnQ0FDL0JsQyxLQUFLO29DQUNINkQsaUJBQWlCO3dDQUNmdkUsT0FBTzs0Q0FBRWtCLE1BQU0wQjt3Q0FBUTt3Q0FDdkJ5QixRQUFROzRDQUFFbkQsTUFBTTBCO3dDQUFRO29DQUMxQjtnQ0FDRjs0QkFDRjtvQkFDRjtnQkFDRjtnQkFDQTNDLFNBQVM7b0JBQ1BDLE1BQU07d0JBQ0pDLFFBQVE7NEJBQ05DLElBQUk7NEJBQ0pDLFVBQVU7NEJBQ1ZDLFdBQVc7NEJBQ1hDLFVBQVU7NEJBQ1ZDLFFBQVE7d0JBQ1Y7b0JBQ0Y7b0JBQ0FDLE1BQU07d0JBQ0pSLFNBQVM7NEJBQ1BTLEtBQUs7d0JBQ1A7b0JBQ0Y7b0JBQ0FFLFFBQVE7d0JBQ05ULFFBQVE7NEJBQ05RLFNBQVM7d0JBQ1g7b0JBQ0Y7Z0JBQ0Y7WUFDRjtZQUVBbkIsK0NBQU1BLENBQUNnRixJQUFJLENBQUMsMkJBQTJCO2dCQUFFQyxTQUFTM0UsTUFBTU0sRUFBRTtnQkFBRXFDO1lBQVM7WUFDckUsT0FBTzNDO1FBQ1QsRUFBRSxPQUFPaUIsT0FBTztZQUNkdkIsK0NBQU1BLENBQUN1QixLQUFLLENBQUMsa0NBQWtDO2dCQUFFcUQ7Z0JBQVczQjtnQkFBVTFCO1lBQU07WUFDNUUsTUFBTUE7UUFDUjtJQUNGO0lBRUEsTUFBTTJELGNBQWNELE9BQWUsRUFHaEM7UUFDRCxJQUFJO1lBQ0YsTUFBTSxDQUFDRSxjQUFjQyxhQUFhLEdBQUcsTUFBTTdCLFFBQVFDLEdBQUcsQ0FBQztnQkFDckR6RCx1Q0FBRUEsQ0FBQ3NGLE1BQU0sQ0FBQzNCLEtBQUssQ0FBQztvQkFDZGxELE9BQU87d0JBQUV5RTtvQkFBUTtnQkFDbkI7Z0JBQ0FsRix1Q0FBRUEsQ0FBQ3NGLE1BQU0sQ0FBQ0MsT0FBTyxDQUFDO29CQUNoQkMsSUFBSTt3QkFBQztxQkFBUTtvQkFDYi9FLE9BQU87d0JBQUV5RTtvQkFBUTtvQkFDakJPLE1BQU07d0JBQ0psQixPQUFPO29CQUNUO29CQUNBbEQsUUFBUTt3QkFDTmtELE9BQU87b0JBQ1Q7Z0JBQ0Y7YUFDRDtZQUVELGdCQUFnQjtZQUNoQixNQUFNbUIsU0FBU0wsYUFBYWxDLEdBQUcsQ0FBQ2dCLENBQUFBLElBQUtBLEVBQUV3QixLQUFLO1lBQzVDLE1BQU16RSxPQUFPLE1BQU1sQix1Q0FBRUEsQ0FBQ21CLEdBQUcsQ0FBQ1gsUUFBUSxDQUFDO2dCQUNqQ0MsT0FBTztvQkFDTEksSUFBSTt3QkFDRmUsSUFBSThEO29CQUNOO2dCQUNGO1lBQ0Y7WUFFQSxNQUFNRSxTQUFTMUUsS0FBS21ELE1BQU0sQ0FBQyxDQUFDd0IsS0FBSzFFO2dCQUMvQjBFLEdBQUcsQ0FBQzFFLElBQUlOLEVBQUUsQ0FBQyxHQUFHTSxJQUFJUSxJQUFJO2dCQUN0QixPQUFPa0U7WUFDVCxHQUFHLENBQUM7WUFFSixNQUFNQyxxQkFBcUJULGFBQWFsQyxHQUFHLENBQUNtQyxDQUFBQSxTQUFXO29CQUNyRGpDLFNBQVN1QyxNQUFNLENBQUNOLE9BQU9LLEtBQUssQ0FBQyxJQUFJO29CQUNqQ3ZCLGVBQWVrQixPQUFPRyxJQUFJLENBQUNsQixLQUFLLElBQUk7b0JBQ3BDWixPQUFPMkIsT0FBT2pFLE1BQU0sQ0FBQ2tELEtBQUs7Z0JBQzVCO1lBRUEsT0FBTztnQkFDTGE7Z0JBQ0FVO1lBQ0Y7UUFDRixFQUFFLE9BQU90RSxPQUFPO1lBQ2R2QiwrQ0FBTUEsQ0FBQ3VCLEtBQUssQ0FBQyw2QkFBNkI7Z0JBQUUwRDtnQkFBUzFEO1lBQU07WUFDM0QsTUFBTUE7UUFDUjtJQUNGO0lBRUEsTUFBTXVFLGtCQUFrQmhELFFBQWdCLEVBQUUsRUFBa0I7UUFDMUQsSUFBSTtZQUNGLGtEQUFrRDtZQUNsRCxNQUFNaUQsZUFBZSxJQUFJQztZQUN6QkQsYUFBYUUsT0FBTyxDQUFDRixhQUFhRyxPQUFPLEtBQUs7WUFFOUMsTUFBTTdGLFNBQVMsTUFBTU4sdUNBQUVBLENBQUNPLEtBQUssQ0FBQ0MsUUFBUSxDQUFDO2dCQUNyQ0MsT0FBTztvQkFDTGMsV0FBVzt3QkFDVDZFLEtBQUtKO29CQUNQO2dCQUNGO2dCQUNBdEYsU0FBUztvQkFDUEMsTUFBTTt3QkFDSkMsUUFBUTs0QkFDTkMsSUFBSTs0QkFDSkMsVUFBVTs0QkFDVkMsV0FBVzs0QkFDWEMsVUFBVTs0QkFDVkMsUUFBUTt3QkFDVjtvQkFDRjtvQkFDQUMsTUFBTTt3QkFDSlIsU0FBUzs0QkFDUFMsS0FBSzt3QkFDUDtvQkFDRjtvQkFDQUUsUUFBUTt3QkFDTlQsUUFBUTs0QkFDTlEsU0FBUzt3QkFDWDtvQkFDRjtnQkFDRjtnQkFDQUUsU0FBUztvQkFDUEYsU0FBUzt3QkFDUEMsUUFBUTtvQkFDVjtnQkFDRjtnQkFDQXFDLE1BQU1YO1lBQ1I7WUFFQSxPQUFPekM7UUFDVCxFQUFFLE9BQU9rQixPQUFPO1lBQ2R2QiwrQ0FBTUEsQ0FBQ3VCLEtBQUssQ0FBQyxpQ0FBaUM7Z0JBQUV1QjtnQkFBT3ZCO1lBQU07WUFDN0QsTUFBTUE7UUFDUjtJQUNGO0lBRUEsTUFBTTZFLGNBQWNuQixPQUFlLEVBQUVTLEtBQWEsRUFBaUI7UUFDakUsSUFBSTtZQUNGLE1BQU0zRix1Q0FBRUEsQ0FBQ2dFLFFBQVEsQ0FBQ2MsTUFBTSxDQUFDO2dCQUN2QkMsTUFBTTtvQkFDSkc7b0JBQ0FTO2dCQUNGO1lBQ0Y7UUFDRixFQUFFLE9BQU9uRSxPQUFPO1lBQ2QsMkRBQTJEO1lBQzNELElBQUlBLGlCQUFpQjhFLFNBQVM5RSxNQUFNK0UsT0FBTyxDQUFDQyxRQUFRLENBQUMsc0JBQXNCO2dCQUN6RXZHLCtDQUFNQSxDQUFDZ0YsSUFBSSxDQUFDLCtCQUErQjtvQkFBRUM7b0JBQVNTO2dCQUFNO2dCQUM1RDtZQUNGO1lBQ0ExRiwrQ0FBTUEsQ0FBQ3VCLEtBQUssQ0FBQyw2QkFBNkI7Z0JBQUUwRDtnQkFBU1M7Z0JBQU9uRTtZQUFNO1lBQ2xFLE1BQU1BO1FBQ1I7SUFDRjtJQUVBLE1BQU1pRixtQkFBbUJ2QixPQUFlLEVBQUVTLEtBQWEsRUFBaUI7UUFDdEUsSUFBSTtZQUNGLE1BQU0zRix1Q0FBRUEsQ0FBQ2dFLFFBQVEsQ0FBQzBDLFVBQVUsQ0FBQztnQkFDM0JqRyxPQUFPO29CQUNMeUU7b0JBQ0FTO2dCQUNGO1lBQ0Y7UUFDRixFQUFFLE9BQU9uRSxPQUFPO1lBQ2R2QiwrQ0FBTUEsQ0FBQ3VCLEtBQUssQ0FBQyxpQ0FBaUM7Z0JBQUUwRDtnQkFBU1M7Z0JBQU9uRTtZQUFNO1lBQ3RFLE1BQU1BO1FBQ1I7SUFDRjs7O2FBcGxCVW1GLFlBQVk7O0FBcWxCeEI7QUFFQSw0QkFBNEI7QUFDckIsTUFBTUMsa0JBQWtCLElBQUl6RyxzQkFBcUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yYXRlbXktbmV4dGpzLy4vc3JjL3JlcG9zaXRvcmllcy92aWRlby5yZXBvc2l0b3J5LnRzPzQ0MDIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVmlkZW8sIFZpZGVvUmVwb3NpdG9yeSwgVmlkZW9GaWx0ZXJzIH0gZnJvbSAnLi4vdHlwZXMnXG5pbXBvcnQgeyBCYXNlUmVwb3NpdG9yeSB9IGZyb20gJy4vYmFzZS5yZXBvc2l0b3J5J1xuaW1wb3J0IHsgZGIgfSBmcm9tICcuLi9saWIvZGInXG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICcuLi9saWIvbG9nZ2VyJ1xuaW1wb3J0IHsgUEFHSU5BVElPTiB9IGZyb20gJy4uL2xpYi9jb25zdGFudHMnXG5cbmV4cG9ydCBjbGFzcyBWaWRlb1JlcG9zaXRvcnlJbXBsIGV4dGVuZHMgQmFzZVJlcG9zaXRvcnk8VmlkZW8+IGltcGxlbWVudHMgVmlkZW9SZXBvc2l0b3J5IHtcbiAgcHJvdGVjdGVkIHRhYmxlTmFtZSA9ICd2aWRlbydcblxuICBhc3luYyBmaW5kQnlVc2VySWQodXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPGFueVtdPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHZpZGVvcyA9IGF3YWl0IGRiLnZpZGVvLmZpbmRNYW55KHtcbiAgICAgICAgd2hlcmU6IHsgdXNlcklkIH0sXG4gICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICAgICAgaWQ6IHRydWUsXG4gICAgICAgICAgICAgIHVzZXJuYW1lOiB0cnVlLFxuICAgICAgICAgICAgICBmaXJzdE5hbWU6IHRydWUsXG4gICAgICAgICAgICAgIGxhc3ROYW1lOiB0cnVlLFxuICAgICAgICAgICAgICBhdmF0YXI6IHRydWUsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICB0YWdzOiB7XG4gICAgICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgICAgIHRhZzogdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgcmF0aW5nczoge1xuICAgICAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgICAgICAgICBpZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgZmlyc3ROYW1lOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgbGFzdE5hbWU6IHRydWUsXG4gICAgICAgICAgICAgICAgICBhdmF0YXI6IHRydWUsXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB0YWc6IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIF9jb3VudDoge1xuICAgICAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgICAgIHJhdGluZ3M6IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIG9yZGVyQnk6IHtcbiAgICAgICAgICBjcmVhdGVkQXQ6ICdkZXNjJ1xuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgcmV0dXJuIHZpZGVvc1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGZpbmRpbmcgdmlkZW9zIGJ5IHVzZXIgaWQnLCB7IHVzZXJJZCwgZXJyb3IgfSlcbiAgICAgIHRocm93IGVycm9yXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZmluZEJ5VGFncyh0YWdzOiBzdHJpbmdbXSk6IFByb21pc2U8YW55W10+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdmlkZW9zID0gYXdhaXQgZGIudmlkZW8uZmluZE1hbnkoe1xuICAgICAgICB3aGVyZToge1xuICAgICAgICAgIHRhZ3M6IHtcbiAgICAgICAgICAgIHNvbWU6IHtcbiAgICAgICAgICAgICAgdGFnOiB7XG4gICAgICAgICAgICAgICAgbmFtZToge1xuICAgICAgICAgICAgICAgICAgaW46IHRhZ3NcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICAgICAgaWQ6IHRydWUsXG4gICAgICAgICAgICAgIHVzZXJuYW1lOiB0cnVlLFxuICAgICAgICAgICAgICBmaXJzdE5hbWU6IHRydWUsXG4gICAgICAgICAgICAgIGxhc3ROYW1lOiB0cnVlLFxuICAgICAgICAgICAgICBhdmF0YXI6IHRydWUsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICB0YWdzOiB7XG4gICAgICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgICAgIHRhZzogdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgcmF0aW5nczoge1xuICAgICAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgICAgICAgICBpZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgZmlyc3ROYW1lOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgbGFzdE5hbWU6IHRydWUsXG4gICAgICAgICAgICAgICAgICBhdmF0YXI6IHRydWUsXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB0YWc6IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIF9jb3VudDoge1xuICAgICAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgICAgIHJhdGluZ3M6IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIG9yZGVyQnk6IHtcbiAgICAgICAgICBjcmVhdGVkQXQ6ICdkZXNjJ1xuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgcmV0dXJuIHZpZGVvc1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGZpbmRpbmcgdmlkZW9zIGJ5IHRhZ3MnLCB7IHRhZ3MsIGVycm9yIH0pXG4gICAgICB0aHJvdyBlcnJvclxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHNlYXJjaChxdWVyeTogc3RyaW5nLCBpbmNsdWRlTnNmdzogYm9vbGVhbiA9IHRydWUpOiBQcm9taXNlPGFueVtdPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHZpZGVvcyA9IGF3YWl0IGRiLnZpZGVvLmZpbmRNYW55KHtcbiAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICBBTkQ6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgT1I6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICB0aXRsZToge1xuICAgICAgICAgICAgICAgICAgICBjb250YWluczogcXVlcnksXG4gICAgICAgICAgICAgICAgICAgIG1vZGU6ICdpbnNlbnNpdGl2ZSdcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5zOiBxdWVyeSxcbiAgICAgICAgICAgICAgICAgICAgbW9kZTogJ2luc2Vuc2l0aXZlJ1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgdGFnczoge1xuICAgICAgICAgICAgICAgICAgICBzb21lOiB7XG4gICAgICAgICAgICAgICAgICAgICAgdGFnOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5zOiBxdWVyeSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kZTogJ2luc2Vuc2l0aXZlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIC4uLihpbmNsdWRlTnNmdyA/IFtdIDogW3sgaXNOc2Z3OiBmYWxzZSB9XSlcbiAgICAgICAgICBdXG4gICAgICAgIH0sXG4gICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICAgICAgaWQ6IHRydWUsXG4gICAgICAgICAgICAgIHVzZXJuYW1lOiB0cnVlLFxuICAgICAgICAgICAgICBmaXJzdE5hbWU6IHRydWUsXG4gICAgICAgICAgICAgIGxhc3ROYW1lOiB0cnVlLFxuICAgICAgICAgICAgICBhdmF0YXI6IHRydWUsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICB0YWdzOiB7XG4gICAgICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgICAgIHRhZzogdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgcmF0aW5nczoge1xuICAgICAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgICAgICAgICBpZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgZmlyc3ROYW1lOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgbGFzdE5hbWU6IHRydWUsXG4gICAgICAgICAgICAgICAgICBhdmF0YXI6IHRydWUsXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB0YWc6IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIF9jb3VudDoge1xuICAgICAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgICAgIHJhdGluZ3M6IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIG9yZGVyQnk6IHtcbiAgICAgICAgICBjcmVhdGVkQXQ6ICdkZXNjJ1xuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgcmV0dXJuIHZpZGVvc1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIHNlYXJjaGluZyB2aWRlb3MnLCB7IHF1ZXJ5LCBlcnJvciB9KVxuICAgICAgdGhyb3cgZXJyb3JcbiAgICB9XG4gIH1cblxuICBhc3luYyBmaW5kV2l0aFJhdGluZ3MoaWQ6IHN0cmluZyk6IFByb21pc2U8YW55IHwgbnVsbD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB2aWRlbyA9IGF3YWl0IGRiLnZpZGVvLmZpbmRVbmlxdWUoe1xuICAgICAgICB3aGVyZTogeyBpZCB9LFxuICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgdXNlcjoge1xuICAgICAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgICAgIGlkOiB0cnVlLFxuICAgICAgICAgICAgICB1c2VybmFtZTogdHJ1ZSxcbiAgICAgICAgICAgICAgZmlyc3ROYW1lOiB0cnVlLFxuICAgICAgICAgICAgICBsYXN0TmFtZTogdHJ1ZSxcbiAgICAgICAgICAgICAgYXZhdGFyOiB0cnVlLFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgdGFnczoge1xuICAgICAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgICAgICB0YWc6IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIHJhdGluZ3M6IHtcbiAgICAgICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICAgICAgdXNlcjoge1xuICAgICAgICAgICAgICAgIHNlbGVjdDoge1xuICAgICAgICAgICAgICAgICAgaWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICB1c2VybmFtZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgIGZpcnN0TmFtZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgIGxhc3ROYW1lOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgYXZhdGFyOiB0cnVlLFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgdGFnOiB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBfY291bnQ6IHtcbiAgICAgICAgICAgIHNlbGVjdDoge1xuICAgICAgICAgICAgICByYXRpbmdzOiB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgcmV0dXJuIHZpZGVvXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgZmluZGluZyB2aWRlbyB3aXRoIHJhdGluZ3MnLCB7IGlkLCBlcnJvciB9KVxuICAgICAgdGhyb3cgZXJyb3JcbiAgICB9XG4gIH1cblxuICBhc3luYyBmaW5kV2l0aEZpbHRlcnMoZmlsdGVyczogVmlkZW9GaWx0ZXJzKTogUHJvbWlzZTx7XG4gICAgdmlkZW9zOiBhbnlbXVxuICAgIHRvdGFsOiBudW1iZXJcbiAgICB0b3RhbFBhZ2VzOiBudW1iZXJcbiAgfT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIHNlYXJjaCxcbiAgICAgICAgdGFncyxcbiAgICAgICAgdGFnUmF0aW5ncyxcbiAgICAgICAgaW5jbHVkZU5zZncgPSB0cnVlLFxuICAgICAgICB1c2VySWQsXG4gICAgICAgIHNvcnRCeSA9ICdjcmVhdGVkQXQnLFxuICAgICAgICBzb3J0T3JkZXIgPSAnZGVzYycsXG4gICAgICAgIHBhZ2UgPSAxLFxuICAgICAgICBsaW1pdCA9IFBBR0lOQVRJT04uREVGQVVMVF9QQUdFX1NJWkVcbiAgICAgIH0gPSBmaWx0ZXJzXG5cbiAgICAgIGNvbnN0IHdoZXJlOiBhbnkgPSB7fVxuXG4gICAgICAvLyBBZGQgc2VhcmNoIGZpbHRlclxuICAgICAgaWYgKHNlYXJjaCkge1xuICAgICAgICB3aGVyZS5PUiA9IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICB0aXRsZToge1xuICAgICAgICAgICAgICBjb250YWluczogc2VhcmNoLFxuICAgICAgICAgICAgICBtb2RlOiAnaW5zZW5zaXRpdmUnXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBkZXNjcmlwdGlvbjoge1xuICAgICAgICAgICAgICBjb250YWluczogc2VhcmNoLFxuICAgICAgICAgICAgICBtb2RlOiAnaW5zZW5zaXRpdmUnXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICBdXG4gICAgICB9XG5cbiAgICAgIC8vIEFkZCB0YWdzIGZpbHRlclxuICAgICAgaWYgKHRhZ3MgJiYgdGFncy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHdoZXJlLnRhZ3MgPSB7XG4gICAgICAgICAgc29tZToge1xuICAgICAgICAgICAgdGFnOiB7XG4gICAgICAgICAgICAgIG5hbWU6IHtcbiAgICAgICAgICAgICAgICBpbjogdGFnc1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIEFkZCB1c2VyIGZpbHRlclxuICAgICAgaWYgKHVzZXJJZCkge1xuICAgICAgICB3aGVyZS51c2VySWQgPSB1c2VySWRcbiAgICAgIH1cblxuICAgICAgLy8gQWRkIE5TRlcgZmlsdGVyXG4gICAgICBpZiAoIWluY2x1ZGVOc2Z3KSB7XG4gICAgICAgIHdoZXJlLmlzTnNmdyA9IGZhbHNlXG4gICAgICB9XG5cbiAgICAgIC8vIEFkZCB0YWdSYXRpbmdzIGZpbHRlciAtIHdlJ2xsIGZpbHRlciBieSBoYXZpbmcgdGhlIHNwZWNpZmllZCB0YWdzIGZpcnN0XG4gICAgICAvLyB0aGVuIHBvc3QtcHJvY2VzcyB0byBjaGVjayByYXRpbmcgcmFuZ2VzXG4gICAgICBpZiAodGFnUmF0aW5ncyAmJiB0YWdSYXRpbmdzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgdGFnTmFtZXMgPSB0YWdSYXRpbmdzLm1hcCh0ciA9PiB0ci50YWdOYW1lKVxuICAgICAgICAvLyBFbnN1cmUgdmlkZW9zIGhhdmUgYWxsIHRoZSBzcGVjaWZpZWQgdGFnc1xuICAgICAgICB3aGVyZS50YWdzID0ge1xuICAgICAgICAgIHNvbWU6IHtcbiAgICAgICAgICAgIHRhZzoge1xuICAgICAgICAgICAgICBuYW1lOiB7XG4gICAgICAgICAgICAgICAgaW46IHRhZ05hbWVzXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3Qgc2tpcCA9IChwYWdlIC0gMSkgKiBsaW1pdFxuXG4gICAgICAvLyBCdWlsZCBvcmRlckJ5XG4gICAgICBjb25zdCBvcmRlckJ5OiBhbnkgPSB7fVxuICAgICAgaWYgKHNvcnRCeSA9PT0gJ3JhdGluZ3MnKSB7XG4gICAgICAgIG9yZGVyQnkuX2NvdW50ID0ge1xuICAgICAgICAgIHJhdGluZ3M6IHNvcnRPcmRlclxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvcmRlckJ5W3NvcnRCeV0gPSBzb3J0T3JkZXJcbiAgICAgIH1cblxuICAgICAgbGV0IFt2aWRlb3MsIHRvdGFsXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgICAgZGIudmlkZW8uZmluZE1hbnkoe1xuICAgICAgICAgIHdoZXJlLFxuICAgICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICAgIHVzZXI6IHtcbiAgICAgICAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgICAgICAgaWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgdXNlcm5hbWU6IHRydWUsXG4gICAgICAgICAgICAgICAgZmlyc3ROYW1lOiB0cnVlLFxuICAgICAgICAgICAgICAgIGxhc3ROYW1lOiB0cnVlLFxuICAgICAgICAgICAgICAgIGF2YXRhcjogdHJ1ZSxcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRhZ3M6IHtcbiAgICAgICAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgICAgICAgIHRhZzogdHJ1ZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmF0aW5nczoge1xuICAgICAgICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgICAgICAgdXNlcjoge1xuICAgICAgICAgICAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB1c2VybmFtZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZmlyc3ROYW1lOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBsYXN0TmFtZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgYXZhdGFyOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdGFnOiB0cnVlXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfY291bnQ6IHtcbiAgICAgICAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgICAgICAgcmF0aW5nczogdHJ1ZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBvcmRlckJ5LFxuICAgICAgICAgIHNraXAsXG4gICAgICAgICAgdGFrZTogbGltaXQgKiAyLCAvLyBGZXRjaCBtb3JlIHRvIGFjY291bnQgZm9yIGZpbHRlcmluZ1xuICAgICAgICB9KSxcbiAgICAgICAgZGIudmlkZW8uY291bnQoeyB3aGVyZSB9KVxuICAgICAgXSlcblxuICAgICAgLy8gQXBwbHkgdGFnUmF0aW5ncyBmaWx0ZXIgaW4gcG9zdC1wcm9jZXNzaW5nXG4gICAgICBpZiAodGFnUmF0aW5ncyAmJiB0YWdSYXRpbmdzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdmlkZW9zID0gdmlkZW9zLmZpbHRlcih2aWRlbyA9PiB7XG4gICAgICAgICAgLy8gQ2hlY2sgaWYgdmlkZW8gaGFzIGFsbCByZXF1aXJlZCB0YWdzIHdpdGggcmF0aW5ncyBpbiB0aGUgc3BlY2lmaWVkIHJhbmdlc1xuICAgICAgICAgIHJldHVybiB0YWdSYXRpbmdzLmV2ZXJ5KCh7IHRhZ05hbWUsIG1pblJhdGluZywgbWF4UmF0aW5nIH0pID0+IHtcbiAgICAgICAgICAgIC8vIEZpbmQgdGhlIHRhZyBpbiB0aGUgdmlkZW9cbiAgICAgICAgICAgIGNvbnN0IHZpZGVvVGFnID0gdmlkZW8udGFncy5maW5kKHZ0ID0+IHZ0LnRhZy5uYW1lID09PSB0YWdOYW1lKVxuICAgICAgICAgICAgaWYgKCF2aWRlb1RhZykgcmV0dXJuIGZhbHNlXG5cbiAgICAgICAgICAgIC8vIENhbGN1bGF0ZSBhdmVyYWdlIHJhdGluZyBmb3IgdGhpcyB0YWcgb24gdGhpcyB2aWRlb1xuICAgICAgICAgICAgY29uc3QgdGFnUmF0aW5ncyA9IHZpZGVvLnJhdGluZ3MuZmlsdGVyKHIgPT4gci50YWcubmFtZSA9PT0gdGFnTmFtZSlcbiAgICAgICAgICAgIGlmICh0YWdSYXRpbmdzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIGZhbHNlXG5cbiAgICAgICAgICAgIGNvbnN0IGF2ZXJhZ2VSYXRpbmcgPSB0YWdSYXRpbmdzLnJlZHVjZSgoc3VtLCByKSA9PiBzdW0gKyByLmxldmVsLCAwKSAvIHRhZ1JhdGluZ3MubGVuZ3RoXG5cbiAgICAgICAgICAgIC8vIENoZWNrIGlmIGF2ZXJhZ2UgcmF0aW5nIGlzIHdpdGhpbiB0aGUgc3BlY2lmaWVkIHJhbmdlXG4gICAgICAgICAgICByZXR1cm4gYXZlcmFnZVJhdGluZyA+PSBtaW5SYXRpbmcgJiYgYXZlcmFnZVJhdGluZyA8PSBtYXhSYXRpbmdcbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuXG4gICAgICAgIC8vIFVwZGF0ZSB0b3RhbCBjb3VudCBhZnRlciBmaWx0ZXJpbmdcbiAgICAgICAgdG90YWwgPSB2aWRlb3MubGVuZ3RoXG4gICAgICAgIFxuICAgICAgICAvLyBBcHBseSBwYWdpbmF0aW9uIGFmdGVyIGZpbHRlcmluZ1xuICAgICAgICB2aWRlb3MgPSB2aWRlb3Muc2xpY2UoMCwgbGltaXQpXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHRvdGFsUGFnZXMgPSBNYXRoLmNlaWwodG90YWwgLyBsaW1pdClcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmlkZW9zLFxuICAgICAgICB0b3RhbCxcbiAgICAgICAgdG90YWxQYWdlc1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGZpbmRpbmcgdmlkZW9zIHdpdGggZmlsdGVycycsIHsgZmlsdGVycywgZXJyb3IgfSlcbiAgICAgIHRocm93IGVycm9yXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgY3JlYXRlV2l0aFRhZ3MoXG4gICAgdmlkZW9EYXRhOiBPbWl0PFZpZGVvLCAnaWQnIHwgJ2NyZWF0ZWRBdCcgfCAndXBkYXRlZEF0JyB8ICd1c2VyJyB8ICd0YWdzJyB8ICdyYXRpbmdzJz4sXG4gICAgdGFnTmFtZXM6IHN0cmluZ1tdXG4gICk6IFByb21pc2U8YW55PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHZpZGVvID0gYXdhaXQgZGIudmlkZW8uY3JlYXRlKHtcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIC4uLnZpZGVvRGF0YSxcbiAgICAgICAgICB0YWdzOiB7XG4gICAgICAgICAgICBjcmVhdGU6IHRhZ05hbWVzLm1hcCh0YWdOYW1lID0+ICh7XG4gICAgICAgICAgICAgIHRhZzoge1xuICAgICAgICAgICAgICAgIGNvbm5lY3RPckNyZWF0ZToge1xuICAgICAgICAgICAgICAgICAgd2hlcmU6IHsgbmFtZTogdGFnTmFtZSB9LFxuICAgICAgICAgICAgICAgICAgY3JlYXRlOiB7IG5hbWU6IHRhZ05hbWUgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkpXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgdXNlcjoge1xuICAgICAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgICAgIGlkOiB0cnVlLFxuICAgICAgICAgICAgICB1c2VybmFtZTogdHJ1ZSxcbiAgICAgICAgICAgICAgZmlyc3ROYW1lOiB0cnVlLFxuICAgICAgICAgICAgICBsYXN0TmFtZTogdHJ1ZSxcbiAgICAgICAgICAgICAgYXZhdGFyOiB0cnVlLFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgdGFnczoge1xuICAgICAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgICAgICB0YWc6IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIF9jb3VudDoge1xuICAgICAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgICAgIHJhdGluZ3M6IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pXG5cbiAgICAgIGxvZ2dlci5pbmZvKCdDcmVhdGVkIHZpZGVvIHdpdGggdGFncycsIHsgdmlkZW9JZDogdmlkZW8uaWQsIHRhZ05hbWVzIH0pXG4gICAgICByZXR1cm4gdmlkZW9cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBjcmVhdGluZyB2aWRlbyB3aXRoIHRhZ3MnLCB7IHZpZGVvRGF0YSwgdGFnTmFtZXMsIGVycm9yIH0pXG4gICAgICB0aHJvdyBlcnJvclxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdldFZpZGVvU3RhdHModmlkZW9JZDogc3RyaW5nKTogUHJvbWlzZTx7XG4gICAgdG90YWxSYXRpbmdzOiBudW1iZXJcbiAgICBhdmVyYWdlUmF0aW5nQnlUYWc6IEFycmF5PHsgdGFnTmFtZTogc3RyaW5nOyBhdmVyYWdlUmF0aW5nOiBudW1iZXI7IGNvdW50OiBudW1iZXIgfT5cbiAgfT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBbdG90YWxSYXRpbmdzLCByYXRpbmdzQnlUYWddID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgICBkYi5yYXRpbmcuY291bnQoe1xuICAgICAgICAgIHdoZXJlOiB7IHZpZGVvSWQgfVxuICAgICAgICB9KSxcbiAgICAgICAgZGIucmF0aW5nLmdyb3VwQnkoe1xuICAgICAgICAgIGJ5OiBbJ3RhZ0lkJ10sXG4gICAgICAgICAgd2hlcmU6IHsgdmlkZW9JZCB9LFxuICAgICAgICAgIF9hdmc6IHtcbiAgICAgICAgICAgIGxldmVsOiB0cnVlXG4gICAgICAgICAgfSxcbiAgICAgICAgICBfY291bnQ6IHtcbiAgICAgICAgICAgIGxldmVsOiB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgXSlcblxuICAgICAgLy8gR2V0IHRhZyBuYW1lc1xuICAgICAgY29uc3QgdGFnSWRzID0gcmF0aW5nc0J5VGFnLm1hcChyID0+IHIudGFnSWQpXG4gICAgICBjb25zdCB0YWdzID0gYXdhaXQgZGIudGFnLmZpbmRNYW55KHtcbiAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICBpZDoge1xuICAgICAgICAgICAgaW46IHRhZ0lkc1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSlcblxuICAgICAgY29uc3QgdGFnTWFwID0gdGFncy5yZWR1Y2UoKGFjYywgdGFnKSA9PiB7XG4gICAgICAgIGFjY1t0YWcuaWRdID0gdGFnLm5hbWVcbiAgICAgICAgcmV0dXJuIGFjY1xuICAgICAgfSwge30gYXMgUmVjb3JkPHN0cmluZywgc3RyaW5nPilcblxuICAgICAgY29uc3QgYXZlcmFnZVJhdGluZ0J5VGFnID0gcmF0aW5nc0J5VGFnLm1hcChyYXRpbmcgPT4gKHtcbiAgICAgICAgdGFnTmFtZTogdGFnTWFwW3JhdGluZy50YWdJZF0gfHwgJ1Vua25vd24nLFxuICAgICAgICBhdmVyYWdlUmF0aW5nOiByYXRpbmcuX2F2Zy5sZXZlbCB8fCAwLFxuICAgICAgICBjb3VudDogcmF0aW5nLl9jb3VudC5sZXZlbFxuICAgICAgfSkpXG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRvdGFsUmF0aW5ncyxcbiAgICAgICAgYXZlcmFnZVJhdGluZ0J5VGFnXG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgZ2V0dGluZyB2aWRlbyBzdGF0cycsIHsgdmlkZW9JZCwgZXJyb3IgfSlcbiAgICAgIHRocm93IGVycm9yXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZ2V0VHJlbmRpbmdWaWRlb3MobGltaXQ6IG51bWJlciA9IDEwKTogUHJvbWlzZTxhbnlbXT4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBHZXQgdmlkZW9zIHdpdGggbW9zdCByYXRpbmdzIGluIHRoZSBsYXN0IDcgZGF5c1xuICAgICAgY29uc3Qgc2V2ZW5EYXlzQWdvID0gbmV3IERhdGUoKVxuICAgICAgc2V2ZW5EYXlzQWdvLnNldERhdGUoc2V2ZW5EYXlzQWdvLmdldERhdGUoKSAtIDcpXG5cbiAgICAgIGNvbnN0IHZpZGVvcyA9IGF3YWl0IGRiLnZpZGVvLmZpbmRNYW55KHtcbiAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICBjcmVhdGVkQXQ6IHtcbiAgICAgICAgICAgIGd0ZTogc2V2ZW5EYXlzQWdvXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgdXNlcjoge1xuICAgICAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgICAgIGlkOiB0cnVlLFxuICAgICAgICAgICAgICB1c2VybmFtZTogdHJ1ZSxcbiAgICAgICAgICAgICAgZmlyc3ROYW1lOiB0cnVlLFxuICAgICAgICAgICAgICBsYXN0TmFtZTogdHJ1ZSxcbiAgICAgICAgICAgICAgYXZhdGFyOiB0cnVlLFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgdGFnczoge1xuICAgICAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgICAgICB0YWc6IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIF9jb3VudDoge1xuICAgICAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgICAgIHJhdGluZ3M6IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIG9yZGVyQnk6IHtcbiAgICAgICAgICByYXRpbmdzOiB7XG4gICAgICAgICAgICBfY291bnQ6ICdkZXNjJ1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgdGFrZTogbGltaXRcbiAgICAgIH0pXG5cbiAgICAgIHJldHVybiB2aWRlb3NcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBnZXR0aW5nIHRyZW5kaW5nIHZpZGVvcycsIHsgbGltaXQsIGVycm9yIH0pXG4gICAgICB0aHJvdyBlcnJvclxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGFkZFRhZ1RvVmlkZW8odmlkZW9JZDogc3RyaW5nLCB0YWdJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IGRiLnZpZGVvVGFnLmNyZWF0ZSh7XG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICB2aWRlb0lkLFxuICAgICAgICAgIHRhZ0lkXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIC8vIEhhbmRsZSBkdXBsaWNhdGUga2V5IGVycm9yICh0YWcgYWxyZWFkeSBleGlzdHMgb24gdmlkZW8pXG4gICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvciAmJiBlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdVbmlxdWUgY29uc3RyYWludCcpKSB7XG4gICAgICAgIGxvZ2dlci5pbmZvKCdUYWcgYWxyZWFkeSBleGlzdHMgb24gdmlkZW8nLCB7IHZpZGVvSWQsIHRhZ0lkIH0pXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBhZGRpbmcgdGFnIHRvIHZpZGVvJywgeyB2aWRlb0lkLCB0YWdJZCwgZXJyb3IgfSlcbiAgICAgIHRocm93IGVycm9yXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgcmVtb3ZlVGFnRnJvbVZpZGVvKHZpZGVvSWQ6IHN0cmluZywgdGFnSWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCBkYi52aWRlb1RhZy5kZWxldGVNYW55KHtcbiAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICB2aWRlb0lkLFxuICAgICAgICAgIHRhZ0lkXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgcmVtb3ZpbmcgdGFnIGZyb20gdmlkZW8nLCB7IHZpZGVvSWQsIHRhZ0lkLCBlcnJvciB9KVxuICAgICAgdGhyb3cgZXJyb3JcbiAgICB9XG4gIH1cbn1cblxuLy8gRXhwb3J0IHNpbmdsZXRvbiBpbnN0YW5jZVxuZXhwb3J0IGNvbnN0IHZpZGVvUmVwb3NpdG9yeSA9IG5ldyBWaWRlb1JlcG9zaXRvcnlJbXBsKCkiXSwibmFtZXMiOlsiQmFzZVJlcG9zaXRvcnkiLCJkYiIsImxvZ2dlciIsIlBBR0lOQVRJT04iLCJWaWRlb1JlcG9zaXRvcnlJbXBsIiwiZmluZEJ5VXNlcklkIiwidXNlcklkIiwidmlkZW9zIiwidmlkZW8iLCJmaW5kTWFueSIsIndoZXJlIiwiaW5jbHVkZSIsInVzZXIiLCJzZWxlY3QiLCJpZCIsInVzZXJuYW1lIiwiZmlyc3ROYW1lIiwibGFzdE5hbWUiLCJhdmF0YXIiLCJ0YWdzIiwidGFnIiwicmF0aW5ncyIsIl9jb3VudCIsIm9yZGVyQnkiLCJjcmVhdGVkQXQiLCJlcnJvciIsImZpbmRCeVRhZ3MiLCJzb21lIiwibmFtZSIsImluIiwic2VhcmNoIiwicXVlcnkiLCJpbmNsdWRlTnNmdyIsIkFORCIsIk9SIiwidGl0bGUiLCJjb250YWlucyIsIm1vZGUiLCJkZXNjcmlwdGlvbiIsImlzTnNmdyIsImZpbmRXaXRoUmF0aW5ncyIsImZpbmRVbmlxdWUiLCJmaW5kV2l0aEZpbHRlcnMiLCJmaWx0ZXJzIiwidGFnUmF0aW5ncyIsInNvcnRCeSIsInNvcnRPcmRlciIsInBhZ2UiLCJsaW1pdCIsIkRFRkFVTFRfUEFHRV9TSVpFIiwibGVuZ3RoIiwidGFnTmFtZXMiLCJtYXAiLCJ0ciIsInRhZ05hbWUiLCJza2lwIiwidG90YWwiLCJQcm9taXNlIiwiYWxsIiwidGFrZSIsImNvdW50IiwiZmlsdGVyIiwiZXZlcnkiLCJtaW5SYXRpbmciLCJtYXhSYXRpbmciLCJ2aWRlb1RhZyIsImZpbmQiLCJ2dCIsInIiLCJhdmVyYWdlUmF0aW5nIiwicmVkdWNlIiwic3VtIiwibGV2ZWwiLCJzbGljZSIsInRvdGFsUGFnZXMiLCJNYXRoIiwiY2VpbCIsImNyZWF0ZVdpdGhUYWdzIiwidmlkZW9EYXRhIiwiY3JlYXRlIiwiZGF0YSIsImNvbm5lY3RPckNyZWF0ZSIsImluZm8iLCJ2aWRlb0lkIiwiZ2V0VmlkZW9TdGF0cyIsInRvdGFsUmF0aW5ncyIsInJhdGluZ3NCeVRhZyIsInJhdGluZyIsImdyb3VwQnkiLCJieSIsIl9hdmciLCJ0YWdJZHMiLCJ0YWdJZCIsInRhZ01hcCIsImFjYyIsImF2ZXJhZ2VSYXRpbmdCeVRhZyIsImdldFRyZW5kaW5nVmlkZW9zIiwic2V2ZW5EYXlzQWdvIiwiRGF0ZSIsInNldERhdGUiLCJnZXREYXRlIiwiZ3RlIiwiYWRkVGFnVG9WaWRlbyIsIkVycm9yIiwibWVzc2FnZSIsImluY2x1ZGVzIiwicmVtb3ZlVGFnRnJvbVZpZGVvIiwiZGVsZXRlTWFueSIsInRhYmxlTmFtZSIsInZpZGVvUmVwb3NpdG9yeSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/repositories/video.repository.ts\n");

/***/ }),

/***/ "(api)/./src/services/nsfw.service.ts":
/*!**************************************!*\
  !*** ./src/services/nsfw.service.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   NSFWService: () => (/* binding */ NSFWService),\n/* harmony export */   nsfwService: () => (/* binding */ nsfwService)\n/* harmony export */ });\n/* harmony import */ var _repositories_video_repository__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/repositories/video.repository */ \"(api)/./src/repositories/video.repository.ts\");\n/* harmony import */ var _lib_logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/logger */ \"(api)/./src/lib/logger.ts\");\n/* harmony import */ var _lib_errors__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/errors */ \"(api)/./src/lib/errors.ts\");\n\n\n\nclass NSFWService {\n    /**\n   * Automatically detect if a video is NSFW based on title and description\n   * Uses keyword matching for basic detection\n   */ async detectNSFW(title, description) {\n        const nsfwKeywords = [\n            // Explicit terms\n            \"porn\",\n            \"sex\",\n            \"nude\",\n            \"naked\",\n            \"adult\",\n            \"xxx\",\n            \"nsfw\",\n            \"explicit\",\n            \"erotic\",\n            \"fetish\",\n            \"masturbat\",\n            \"orgasm\",\n            // Body parts (common in NSFW content)\n            \"boobs\",\n            \"tits\",\n            \"ass\",\n            \"pussy\",\n            \"dick\",\n            \"cock\",\n            \"penis\",\n            \"vagina\",\n            \"breast\",\n            \"nipple\",\n            // Action words\n            \"fuck\",\n            \"fucking\",\n            \"bang\",\n            \"screw\",\n            \"cum\",\n            \"cumming\",\n            // Slang and abbreviations  \n            \"milf\",\n            \"dilf\",\n            \"bbc\",\n            \"bwc\",\n            \"bj\",\n            \"blowjob\",\n            // Common NSFW site indicators\n            \"onlyfans\",\n            \"pornhub\",\n            \"xvideos\",\n            \"xhamster\",\n            // Age-related (concerning)\n            \"teen\",\n            \"18+\",\n            \"19+\",\n            \"young\",\n            \"schoolgirl\",\n            // Context clues\n            \"tight\",\n            \"wet\",\n            \"hard\",\n            \"horny\",\n            \"kinky\",\n            \"dirty\"\n        ];\n        const textToCheck = `${title} ${description || \"\"}`.toLowerCase();\n        const isNSFW = nsfwKeywords.some((keyword)=>textToCheck.includes(keyword.toLowerCase()));\n        if (isNSFW) {\n            _lib_logger__WEBPACK_IMPORTED_MODULE_1__.logger.info(\"NSFW content detected\", {\n                title: title.substring(0, 50) + \"...\",\n                detectionMethod: \"keyword_matching\",\n                keywords: nsfwKeywords.filter((k)=>textToCheck.includes(k))\n            });\n        }\n        return isNSFW;\n    }\n    /**\n   * Mark a video as NSFW or safe (manual override)\n   */ async markVideo(videoId, isNSFW, userId) {\n        try {\n            // Validate input\n            if (!videoId?.trim()) {\n                throw new _lib_errors__WEBPACK_IMPORTED_MODULE_2__.ValidationError(\"Video ID is required\");\n            }\n            if (!userId?.trim()) {\n                throw new _lib_errors__WEBPACK_IMPORTED_MODULE_2__.ValidationError(\"User ID is required\");\n            }\n            // Check if video exists\n            const video = await _repositories_video_repository__WEBPACK_IMPORTED_MODULE_0__.videoRepository.findById(videoId);\n            if (!video) {\n                throw new _lib_errors__WEBPACK_IMPORTED_MODULE_2__.NotFoundError(\"Video not found\");\n            }\n            // Update the video's NSFW status\n            await _repositories_video_repository__WEBPACK_IMPORTED_MODULE_0__.videoRepository.update(videoId, {\n                isNsfw: isNSFW\n            });\n            // Log the action\n            (0,_lib_logger__WEBPACK_IMPORTED_MODULE_1__.logUserAction)(isNSFW ? \"mark_video_nsfw\" : \"mark_video_safe\", userId, {\n                videoId,\n                videoTitle: video.title,\n                previousStatus: video.isNsfw,\n                newStatus: isNSFW\n            });\n            _lib_logger__WEBPACK_IMPORTED_MODULE_1__.logger.info(\"Video NSFW status updated\", {\n                videoId,\n                isNSFW,\n                userId,\n                action: isNSFW ? \"marked_nsfw\" : \"marked_safe\"\n            });\n        } catch (error) {\n            _lib_logger__WEBPACK_IMPORTED_MODULE_1__.logger.error(\"Failed to update video NSFW status\", {\n                videoId,\n                isNSFW,\n                userId,\n                error: error instanceof Error ? error.message : String(error)\n            });\n            throw error;\n        }\n    }\n    /**\n   * Bulk scan and update NSFW status for all videos\n   * Useful for initial setup or periodic re-scanning\n   */ async bulkScanVideos(userId) {\n        try {\n            const videos = await _repositories_video_repository__WEBPACK_IMPORTED_MODULE_0__.videoRepository.findAll();\n            let scanned = 0;\n            let updated = 0;\n            for (const video of videos){\n                scanned++;\n                const detectedNSFW = await this.detectNSFW(video.title, video.description || undefined);\n                // Only update if detection differs from current status\n                if (detectedNSFW !== video.isNsfw) {\n                    await this.markVideo(video.id, detectedNSFW, userId);\n                    updated++;\n                }\n            }\n            (0,_lib_logger__WEBPACK_IMPORTED_MODULE_1__.logUserAction)(\"bulk_nsfw_scan\", userId, {\n                videosScanned: scanned,\n                videosUpdated: updated\n            });\n            _lib_logger__WEBPACK_IMPORTED_MODULE_1__.logger.info(\"Bulk NSFW scan completed\", {\n                scanned,\n                updated,\n                userId\n            });\n            return {\n                scanned,\n                updated\n            };\n        } catch (error) {\n            _lib_logger__WEBPACK_IMPORTED_MODULE_1__.logger.error(\"Bulk NSFW scan failed\", {\n                userId,\n                error: error instanceof Error ? error.message : String(error)\n            });\n            throw error;\n        }\n    }\n    /**\n   * Get NSFW statistics\n   */ async getNSFWStats() {\n        try {\n            const allVideos = await _repositories_video_repository__WEBPACK_IMPORTED_MODULE_0__.videoRepository.findAll();\n            const total = allVideos.length;\n            const nsfwCount = allVideos.filter((v)=>v.isNsfw).length;\n            const safeCount = total - nsfwCount;\n            const percentage = total > 0 ? nsfwCount / total * 100 : 0;\n            return {\n                total,\n                nsfwCount,\n                safeCount,\n                percentage: Math.round(percentage * 100) / 100 // Round to 2 decimal places\n            };\n        } catch (error) {\n            _lib_logger__WEBPACK_IMPORTED_MODULE_1__.logger.error(\"Failed to get NSFW stats\", {\n                error: error instanceof Error ? error.message : String(error)\n            });\n            throw error;\n        }\n    }\n}\n// Create singleton instance\nconst nsfwService = new NSFWService();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFPO1lBQ2RqQywrQ0FBTUEsQ0FBQ2lDLEtBQUssQ0FBQyw0QkFBNEI7Z0JBQ3ZDQSxPQUFPQSxpQkFBaUJDLFFBQVFELE1BQU1FLE9BQU8sR0FBR0MsT0FBT0g7WUFDekQ7WUFDQSxNQUFNQTtRQUNSO0lBQ0Y7QUFDRjtBQUVBLDRCQUE0QjtBQUNyQixNQUFNd0IsY0FBYyxJQUFJckQsY0FBYSIsInNvdXJjZXMiOlsid2VicGFjazovL3JhdGVteS1uZXh0anMvLi9zcmMvc2VydmljZXMvbnNmdy5zZXJ2aWNlLnRzPzJmYjgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdmlkZW9SZXBvc2l0b3J5IH0gZnJvbSAnQC9yZXBvc2l0b3JpZXMvdmlkZW8ucmVwb3NpdG9yeSdcbmltcG9ydCB7IGxvZ2dlciwgbG9nVXNlckFjdGlvbiB9IGZyb20gJ0AvbGliL2xvZ2dlcidcbmltcG9ydCB7IFZhbGlkYXRpb25FcnJvciwgTm90Rm91bmRFcnJvciB9IGZyb20gJ0AvbGliL2Vycm9ycydcblxuZXhwb3J0IGNsYXNzIE5TRldTZXJ2aWNlIHtcbiAgXG4gIC8qKlxuICAgKiBBdXRvbWF0aWNhbGx5IGRldGVjdCBpZiBhIHZpZGVvIGlzIE5TRlcgYmFzZWQgb24gdGl0bGUgYW5kIGRlc2NyaXB0aW9uXG4gICAqIFVzZXMga2V5d29yZCBtYXRjaGluZyBmb3IgYmFzaWMgZGV0ZWN0aW9uXG4gICAqL1xuICBhc3luYyBkZXRlY3ROU0ZXKHRpdGxlOiBzdHJpbmcsIGRlc2NyaXB0aW9uPzogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgY29uc3QgbnNmd0tleXdvcmRzID0gW1xuICAgICAgLy8gRXhwbGljaXQgdGVybXNcbiAgICAgICdwb3JuJywgJ3NleCcsICdudWRlJywgJ25ha2VkJywgJ2FkdWx0JywgJ3h4eCcsICduc2Z3JyxcbiAgICAgICdleHBsaWNpdCcsICdlcm90aWMnLCAnZmV0aXNoJywgJ21hc3R1cmJhdCcsICdvcmdhc20nLFxuICAgICAgLy8gQm9keSBwYXJ0cyAoY29tbW9uIGluIE5TRlcgY29udGVudClcbiAgICAgICdib29icycsICd0aXRzJywgJ2FzcycsICdwdXNzeScsICdkaWNrJywgJ2NvY2snLCAncGVuaXMnLFxuICAgICAgJ3ZhZ2luYScsICdicmVhc3QnLCAnbmlwcGxlJyxcbiAgICAgIC8vIEFjdGlvbiB3b3Jkc1xuICAgICAgJ2Z1Y2snLCAnZnVja2luZycsICdiYW5nJywgJ3NjcmV3JywgJ2N1bScsICdjdW1taW5nJyxcbiAgICAgIC8vIFNsYW5nIGFuZCBhYmJyZXZpYXRpb25zICBcbiAgICAgICdtaWxmJywgJ2RpbGYnLCAnYmJjJywgJ2J3YycsICdiaicsICdibG93am9iJyxcbiAgICAgIC8vIENvbW1vbiBOU0ZXIHNpdGUgaW5kaWNhdG9yc1xuICAgICAgJ29ubHlmYW5zJywgJ3Bvcm5odWInLCAneHZpZGVvcycsICd4aGFtc3RlcicsXG4gICAgICAvLyBBZ2UtcmVsYXRlZCAoY29uY2VybmluZylcbiAgICAgICd0ZWVuJywgJzE4KycsICcxOSsnLCAneW91bmcnLCAnc2Nob29sZ2lybCcsXG4gICAgICAvLyBDb250ZXh0IGNsdWVzXG4gICAgICAndGlnaHQnLCAnd2V0JywgJ2hhcmQnLCAnaG9ybnknLCAna2lua3knLCAnZGlydHknXG4gICAgXVxuXG4gICAgY29uc3QgdGV4dFRvQ2hlY2sgPSBgJHt0aXRsZX0gJHtkZXNjcmlwdGlvbiB8fCAnJ31gLnRvTG93ZXJDYXNlKClcbiAgICBcbiAgICBjb25zdCBpc05TRlcgPSBuc2Z3S2V5d29yZHMuc29tZShrZXl3b3JkID0+IFxuICAgICAgdGV4dFRvQ2hlY2suaW5jbHVkZXMoa2V5d29yZC50b0xvd2VyQ2FzZSgpKVxuICAgIClcblxuICAgIGlmIChpc05TRlcpIHtcbiAgICAgIGxvZ2dlci5pbmZvKCdOU0ZXIGNvbnRlbnQgZGV0ZWN0ZWQnLCB7XG4gICAgICAgIHRpdGxlOiB0aXRsZS5zdWJzdHJpbmcoMCwgNTApICsgJy4uLicsXG4gICAgICAgIGRldGVjdGlvbk1ldGhvZDogJ2tleXdvcmRfbWF0Y2hpbmcnLFxuICAgICAgICBrZXl3b3JkczogbnNmd0tleXdvcmRzLmZpbHRlcihrID0+IHRleHRUb0NoZWNrLmluY2x1ZGVzKGspKVxuICAgICAgfSlcbiAgICB9XG5cbiAgICByZXR1cm4gaXNOU0ZXXG4gIH1cblxuICAvKipcbiAgICogTWFyayBhIHZpZGVvIGFzIE5TRlcgb3Igc2FmZSAobWFudWFsIG92ZXJyaWRlKVxuICAgKi9cbiAgYXN5bmMgbWFya1ZpZGVvKHZpZGVvSWQ6IHN0cmluZywgaXNOU0ZXOiBib29sZWFuLCB1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBWYWxpZGF0ZSBpbnB1dFxuICAgICAgaWYgKCF2aWRlb0lkPy50cmltKCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcignVmlkZW8gSUQgaXMgcmVxdWlyZWQnKVxuICAgICAgfVxuICAgICAgaWYgKCF1c2VySWQ/LnRyaW0oKSkge1xuICAgICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKCdVc2VyIElEIGlzIHJlcXVpcmVkJylcbiAgICAgIH1cblxuICAgICAgLy8gQ2hlY2sgaWYgdmlkZW8gZXhpc3RzXG4gICAgICBjb25zdCB2aWRlbyA9IGF3YWl0IHZpZGVvUmVwb3NpdG9yeS5maW5kQnlJZCh2aWRlb0lkKVxuICAgICAgaWYgKCF2aWRlbykge1xuICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFcnJvcignVmlkZW8gbm90IGZvdW5kJylcbiAgICAgIH1cblxuICAgICAgLy8gVXBkYXRlIHRoZSB2aWRlbydzIE5TRlcgc3RhdHVzXG4gICAgICBhd2FpdCB2aWRlb1JlcG9zaXRvcnkudXBkYXRlKHZpZGVvSWQsIHtcbiAgICAgICAgaXNOc2Z3OiBpc05TRldcbiAgICAgIH0pXG5cbiAgICAgIC8vIExvZyB0aGUgYWN0aW9uXG4gICAgICBsb2dVc2VyQWN0aW9uKFxuICAgICAgICBpc05TRlcgPyAnbWFya192aWRlb19uc2Z3JyA6ICdtYXJrX3ZpZGVvX3NhZmUnLFxuICAgICAgICB1c2VySWQsXG4gICAgICAgIHtcbiAgICAgICAgICB2aWRlb0lkLFxuICAgICAgICAgIHZpZGVvVGl0bGU6IHZpZGVvLnRpdGxlLFxuICAgICAgICAgIHByZXZpb3VzU3RhdHVzOiB2aWRlby5pc05zZncsXG4gICAgICAgICAgbmV3U3RhdHVzOiBpc05TRldcbiAgICAgICAgfVxuICAgICAgKVxuXG4gICAgICBsb2dnZXIuaW5mbygnVmlkZW8gTlNGVyBzdGF0dXMgdXBkYXRlZCcsIHtcbiAgICAgICAgdmlkZW9JZCxcbiAgICAgICAgaXNOU0ZXLFxuICAgICAgICB1c2VySWQsXG4gICAgICAgIGFjdGlvbjogaXNOU0ZXID8gJ21hcmtlZF9uc2Z3JyA6ICdtYXJrZWRfc2FmZSdcbiAgICAgIH0pXG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKCdGYWlsZWQgdG8gdXBkYXRlIHZpZGVvIE5TRlcgc3RhdHVzJywge1xuICAgICAgICB2aWRlb0lkLFxuICAgICAgICBpc05TRlcsXG4gICAgICAgIHVzZXJJZCxcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKVxuICAgICAgfSlcbiAgICAgIHRocm93IGVycm9yXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEJ1bGsgc2NhbiBhbmQgdXBkYXRlIE5TRlcgc3RhdHVzIGZvciBhbGwgdmlkZW9zXG4gICAqIFVzZWZ1bCBmb3IgaW5pdGlhbCBzZXR1cCBvciBwZXJpb2RpYyByZS1zY2FubmluZ1xuICAgKi9cbiAgYXN5bmMgYnVsa1NjYW5WaWRlb3ModXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPHsgc2Nhbm5lZDogbnVtYmVyLCB1cGRhdGVkOiBudW1iZXIgfT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB2aWRlb3MgPSBhd2FpdCB2aWRlb1JlcG9zaXRvcnkuZmluZEFsbCgpXG4gICAgICBsZXQgc2Nhbm5lZCA9IDBcbiAgICAgIGxldCB1cGRhdGVkID0gMFxuXG4gICAgICBmb3IgKGNvbnN0IHZpZGVvIG9mIHZpZGVvcykge1xuICAgICAgICBzY2FubmVkKytcbiAgICAgICAgY29uc3QgZGV0ZWN0ZWROU0ZXID0gYXdhaXQgdGhpcy5kZXRlY3ROU0ZXKHZpZGVvLnRpdGxlLCB2aWRlby5kZXNjcmlwdGlvbiB8fCB1bmRlZmluZWQpXG4gICAgICAgIFxuICAgICAgICAvLyBPbmx5IHVwZGF0ZSBpZiBkZXRlY3Rpb24gZGlmZmVycyBmcm9tIGN1cnJlbnQgc3RhdHVzXG4gICAgICAgIGlmIChkZXRlY3RlZE5TRlcgIT09IHZpZGVvLmlzTnNmdykge1xuICAgICAgICAgIGF3YWl0IHRoaXMubWFya1ZpZGVvKHZpZGVvLmlkLCBkZXRlY3RlZE5TRlcsIHVzZXJJZClcbiAgICAgICAgICB1cGRhdGVkKytcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBsb2dVc2VyQWN0aW9uKCdidWxrX25zZndfc2NhbicsIHVzZXJJZCwge1xuICAgICAgICB2aWRlb3NTY2FubmVkOiBzY2FubmVkLFxuICAgICAgICB2aWRlb3NVcGRhdGVkOiB1cGRhdGVkXG4gICAgICB9KVxuXG4gICAgICBsb2dnZXIuaW5mbygnQnVsayBOU0ZXIHNjYW4gY29tcGxldGVkJywge1xuICAgICAgICBzY2FubmVkLFxuICAgICAgICB1cGRhdGVkLFxuICAgICAgICB1c2VySWRcbiAgICAgIH0pXG5cbiAgICAgIHJldHVybiB7IHNjYW5uZWQsIHVwZGF0ZWQgfVxuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignQnVsayBOU0ZXIHNjYW4gZmFpbGVkJywge1xuICAgICAgICB1c2VySWQsXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcilcbiAgICAgIH0pXG4gICAgICB0aHJvdyBlcnJvclxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgTlNGVyBzdGF0aXN0aWNzXG4gICAqL1xuICBhc3luYyBnZXROU0ZXU3RhdHMoKTogUHJvbWlzZTx7XG4gICAgdG90YWw6IG51bWJlclxuICAgIG5zZndDb3VudDogbnVtYmVyXG4gICAgc2FmZUNvdW50OiBudW1iZXJcbiAgICBwZXJjZW50YWdlOiBudW1iZXJcbiAgfT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBhbGxWaWRlb3MgPSBhd2FpdCB2aWRlb1JlcG9zaXRvcnkuZmluZEFsbCgpXG4gICAgICBjb25zdCB0b3RhbCA9IGFsbFZpZGVvcy5sZW5ndGhcbiAgICAgIGNvbnN0IG5zZndDb3VudCA9IGFsbFZpZGVvcy5maWx0ZXIodiA9PiB2LmlzTnNmdykubGVuZ3RoXG4gICAgICBjb25zdCBzYWZlQ291bnQgPSB0b3RhbCAtIG5zZndDb3VudFxuICAgICAgY29uc3QgcGVyY2VudGFnZSA9IHRvdGFsID4gMCA/IChuc2Z3Q291bnQgLyB0b3RhbCkgKiAxMDAgOiAwXG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRvdGFsLFxuICAgICAgICBuc2Z3Q291bnQsXG4gICAgICAgIHNhZmVDb3VudCxcbiAgICAgICAgcGVyY2VudGFnZTogTWF0aC5yb3VuZChwZXJjZW50YWdlICogMTAwKSAvIDEwMCAvLyBSb3VuZCB0byAyIGRlY2ltYWwgcGxhY2VzXG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRmFpbGVkIHRvIGdldCBOU0ZXIHN0YXRzJywge1xuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpXG4gICAgICB9KVxuICAgICAgdGhyb3cgZXJyb3JcbiAgICB9XG4gIH1cbn1cblxuLy8gQ3JlYXRlIHNpbmdsZXRvbiBpbnN0YW5jZVxuZXhwb3J0IGNvbnN0IG5zZndTZXJ2aWNlID0gbmV3IE5TRldTZXJ2aWNlKCkiXSwibmFtZXMiOlsidmlkZW9SZXBvc2l0b3J5IiwibG9nZ2VyIiwibG9nVXNlckFjdGlvbiIsIlZhbGlkYXRpb25FcnJvciIsIk5vdEZvdW5kRXJyb3IiLCJOU0ZXU2VydmljZSIsImRldGVjdE5TRlciLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwibnNmd0tleXdvcmRzIiwidGV4dFRvQ2hlY2siLCJ0b0xvd2VyQ2FzZSIsImlzTlNGVyIsInNvbWUiLCJrZXl3b3JkIiwiaW5jbHVkZXMiLCJpbmZvIiwic3Vic3RyaW5nIiwiZGV0ZWN0aW9uTWV0aG9kIiwia2V5d29yZHMiLCJmaWx0ZXIiLCJrIiwibWFya1ZpZGVvIiwidmlkZW9JZCIsInVzZXJJZCIsInRyaW0iLCJ2aWRlbyIsImZpbmRCeUlkIiwidXBkYXRlIiwiaXNOc2Z3IiwidmlkZW9UaXRsZSIsInByZXZpb3VzU3RhdHVzIiwibmV3U3RhdHVzIiwiYWN0aW9uIiwiZXJyb3IiLCJFcnJvciIsIm1lc3NhZ2UiLCJTdHJpbmciLCJidWxrU2NhblZpZGVvcyIsInZpZGVvcyIsImZpbmRBbGwiLCJzY2FubmVkIiwidXBkYXRlZCIsImRldGVjdGVkTlNGVyIsInVuZGVmaW5lZCIsImlkIiwidmlkZW9zU2Nhbm5lZCIsInZpZGVvc1VwZGF0ZWQiLCJnZXROU0ZXU3RhdHMiLCJhbGxWaWRlb3MiLCJ0b3RhbCIsImxlbmd0aCIsIm5zZndDb3VudCIsInYiLCJzYWZlQ291bnQiLCJwZXJjZW50YWdlIiwiTWF0aCIsInJvdW5kIiwibnNmd1NlcnZpY2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/services/nsfw.service.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fnsfw%2Fstats&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fnsfw%2Fstats.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();